import{_ as y,V as S}from"./VDialog-BzrmTsGT.js";import{u as k,a as x}from"./useValidationRules-B8mQXoPr.js";import{V as D,f as L,g as B}from"./VCard-Ba8KRL8r.js";import{d as E,g as f,a as R,o as U,k as t,y as a,l as F,a7 as d,q as m,i as r,aI as I}from"./main-BhQQEtPK.js";import{V as N}from"./VForm-jdZ3ETEx.js";import{V as O}from"./VFileInput-D8qkRCJl.js";import{V as h}from"./VSpacer-WCr5FxLL.js";const j={class:"mb-4"},W=E({__name:"ImportLeadsDialog",props:{isDialogVisible:{type:Boolean}},emits:["update:isDialogVisible","import"],setup(A,{emit:V}){const i=V,u=f(),{backendErrors:C,setBackendErrors:v,clearError:_}=k(),p=x(),o=f(null),b=s=>{const e=s.target;e.files&&e.files[0]&&(o.value=e.files[0])},g=()=>{const s=`First Name,Last Name,Email,Phone,Company,Country,State,City,Lead Source,Lead Status,Lead Owner
John,Doe,john.doe@example.com,+1234567890,Example Corp,USA,California,Los Angeles,Website,Qualified,Sarah Johnson`,e=new Blob([s],{type:"text/csv"}),n=window.URL.createObjectURL(e),l=document.createElement("a");l.href=n,l.download="leads_example.csv",l.click(),window.URL.revokeObjectURL(n)},w=async()=>{const{valid:s}=await u.value.validate();if(!(!s||!o.value))try{i("import",o.value),i("update:isDialogVisible",!1),o.value=null}catch(e){v(e)}},c=()=>{i("update:isDialogVisible",!1),o.value=null};return(s,e)=>{const n=y;return U(),R(S,{"model-value":s.isDialogVisible,"max-width":"600","onUpdate:modelValue":e[2]||(e[2]=l=>i("update:isDialogVisible",l))},{default:t(()=>[a(n,{onClick:c}),a(D,{title:"Import Leads from CSV"},{default:t(()=>[a(L,null,{default:t(()=>[F("div",j,[a(d,{variant:"tonal",color:"secondary","prepend-icon":"tabler-download",onClick:g},{default:t(()=>e[3]||(e[3]=[m(" Download Example CSV ")])),_:1,__:[3]})]),a(N,{ref_key:"formRef",ref:u},{default:t(()=>[a(O,{modelValue:r(o),"onUpdate:modelValue":[e[0]||(e[0]=l=>I(o)?o.value=l:null),e[1]||(e[1]=l=>r(_)("file"))],label:"Select CSV File",accept:".csv","prepend-icon":"tabler-file-upload","show-size":"",rules:[r(p).file("Please select a CSV file"),r(p).fileType(["csv"],"Only CSV files are allowed")],"error-messages":r(C).file,onChange:b},null,8,["modelValue","rules","error-messages"])]),_:1},512)]),_:1}),a(B,null,{default:t(()=>[a(h),a(d,{color:"secondary",variant:"tonal",onClick:c},{default:t(()=>e[4]||(e[4]=[m(" Cancel ")])),_:1,__:[4]}),a(d,{color:"primary",onClick:w},{default:t(()=>e[5]||(e[5]=[m(" Import ")])),_:1,__:[5]})]),_:1})]),_:1})]),_:1},8,["model-value"])}}});export{W as _};
