import{d as B,aU as p,a as y,o as w,k as D,y as g,av as L,K as I,L as S,P as _,g as z,b3 as A,aB as C,w as E,M as F,n as v,bM as k,ae as R,ax as T}from"./main-CEM1QI86.js";import{V as h,a as M}from"./VOverlay-DGzNmcTF.js";import{f as O}from"./forwardRefs-B931MWyl.js";import{u as U}from"./scopeId-DY8qXCsp.js";import{a as W}from"./VMenu-Dj8Drxav.js";const J=B({__name:"DialogCloseBtn",props:{icon:{default:"tabler-x"},iconSize:{default:"20"}},setup(e){const f=e;return(d,c)=>{const r=p("IconBtn");return w(),y(r,{variant:"elevated",size:"30",ripple:!1,class:"v-dialog-close-btn"},{default:D(()=>[g(L,{icon:f.icon,size:f.iconSize},null,8,["icon","size"])]),_:1})}}}),H=S({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...M({origin:"center center",scrollStrategy:"block",transition:{component:W},zIndex:2400})},"VDialog"),Q=I()({name:"VDialog",props:H(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,f){let{emit:d,slots:c}=f;const r=_(e,"modelValue"),{scopeId:V}=U(),t=z();function m(a){var l,i;const o=a.relatedTarget,s=a.target;if(o!==s&&((l=t.value)!=null&&l.contentEl)&&((i=t.value)!=null&&i.globalTop)&&![document,t.value.contentEl].includes(s)&&!t.value.contentEl.contains(s)){const n=k(t.value.contentEl);if(!n.length)return;const u=n[0],x=n[n.length-1];o===u?x.focus():u.focus()}}A(()=>{document.removeEventListener("focusin",m)}),C&&E(()=>r.value&&e.retainFocus,a=>{a?document.addEventListener("focusin",m):document.removeEventListener("focusin",m)},{immediate:!0});function P(){var a;d("afterEnter"),(e.scrim||e.retainFocus)&&((a=t.value)!=null&&a.contentEl)&&!t.value.contentEl.contains(document.activeElement)&&t.value.contentEl.focus({preventScroll:!0})}function b(){d("afterLeave")}return E(r,async a=>{var o;a||(await R(),(o=t.value.activatorEl)==null||o.focus({preventScroll:!0}))}),F(()=>{const a=h.filterProps(e),o=v({"aria-haspopup":"dialog"},e.activatorProps),s=v({tabindex:-1},e.contentProps);return g(h,v({ref:t,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},a,{modelValue:r.value,"onUpdate:modelValue":l=>r.value=l,"aria-modal":"true",activatorProps:o,contentProps:s,height:e.fullscreen?void 0:e.height,width:e.fullscreen?void 0:e.width,maxHeight:e.fullscreen?void 0:e.maxHeight,maxWidth:e.fullscreen?void 0:e.maxWidth,role:"dialog",onAfterEnter:P,onAfterLeave:b},V),{activator:c.activator,default:function(){for(var l=arguments.length,i=new Array(l),n=0;n<l;n++)i[n]=arguments[n];return g(T,{root:"VDialog"},{default:()=>{var u;return[(u=c.default)==null?void 0:u.call(c,...i)]}})}})}),O({},t)}});export{Q as V,J as _};
