import{_ as y}from"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-tIPcQsM3.js";import{u as S,a as k}from"./useValidationRules-PeLbHKqm.js";import{V as x,f as D,g as L}from"./VCard-CZdMCf39.js";import{d as B,g as c,a as E,o as R,k as t,y as a,l as U,a7 as d,q as m,i as r,aI as F}from"./main-CrqE58uP.js";import{V as I}from"./VForm-CFw85RGO.js";import{V as N}from"./VFileInput-B05nNJKM.js";import{V as O}from"./VSpacer-aXcnQPec.js";import{V as h}from"./VDialog-B-G_-ykr.js";const j={class:"mb-4"},G=B({__name:"ImportLeadsDialog",props:{isDialogVisible:{type:Boolean}},emits:["update:isDialogVisible","import"],setup(A,{emit:V}){const i=V,u=c(),{backendErrors:C,setBackendErrors:v,clearError:_}=S(),p=k(),o=c(null),b=s=>{const e=s.target;e.files&&e.files[0]&&(o.value=e.files[0])},g=()=>{const s=`First Name,Last Name,Email,Phone,Company,Country,State,City,Lead Source,Lead Status,Lead Owner
John,Doe,john.doe@example.com,+1234567890,Example Corp,USA,California,Los Angeles,Website,Qualified,Sarah Johnson`,e=new Blob([s],{type:"text/csv"}),n=window.URL.createObjectURL(e),l=document.createElement("a");l.href=n,l.download="leads_example.csv",l.click(),window.URL.revokeObjectURL(n)},w=async()=>{const{valid:s}=await u.value.validate();if(!(!s||!o.value))try{i("import",o.value),i("update:isDialogVisible",!1),o.value=null}catch(e){v(e)}},f=()=>{i("update:isDialogVisible",!1),o.value=null};return(s,e)=>{const n=y;return R(),E(h,{"model-value":s.isDialogVisible,"max-width":"600","onUpdate:modelValue":e[2]||(e[2]=l=>i("update:isDialogVisible",l))},{default:t(()=>[a(n,{onClick:f}),a(x,{title:"Import Leads from CSV"},{default:t(()=>[a(D,null,{default:t(()=>[U("div",j,[a(d,{variant:"tonal",color:"secondary","prepend-icon":"tabler-download",onClick:g},{default:t(()=>e[3]||(e[3]=[m(" Download Example CSV ")])),_:1,__:[3]})]),a(I,{ref_key:"formRef",ref:u},{default:t(()=>[a(N,{modelValue:r(o),"onUpdate:modelValue":[e[0]||(e[0]=l=>F(o)?o.value=l:null),e[1]||(e[1]=l=>r(_)("file"))],label:"Select CSV File",accept:".csv","prepend-icon":"tabler-file-upload","show-size":"",rules:[r(p).file("Please select a CSV file"),r(p).fileType(["csv"],"Only CSV files are allowed")],"error-messages":r(C).file,onChange:b},null,8,["modelValue","rules","error-messages"])]),_:1},512)]),_:1}),a(L,null,{default:t(()=>[a(O),a(d,{color:"secondary",variant:"tonal",onClick:f},{default:t(()=>e[4]||(e[4]=[m(" Cancel ")])),_:1,__:[4]}),a(d,{color:"primary",onClick:w},{default:t(()=>e[5]||(e[5]=[m(" Import ")])),_:1,__:[5]})]),_:1})]),_:1})]),_:1},8,["model-value"])}}});export{G as _};
