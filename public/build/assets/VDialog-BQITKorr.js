import{d as p,aQ as B,a as y,o as w,k as D,y as g,av as L,K as I,L as S,P as _,g as z,bn as A,bP as C,w as E,M as F,n as v,bN as k,ae as R,ax as T}from"./main-Ji38qWNq.js";import{V as h,a as N}from"./VOverlay--ReuNc3x.js";import{f as O}from"./forwardRefs-B931MWyl.js";import{u as W}from"./scopeId-DFtxLKrN.js";import{a as H}from"./VMenu-CbHzsIir.js";const G=p({__name:"DialogCloseBtn",props:{icon:{default:"tabler-x"},iconSize:{default:"20"}},setup(e){const f=e;return(d,c)=>{const r=B("IconBtn");return w(),y(r,{variant:"elevated",size:"30",ripple:!1,class:"v-dialog-close-btn"},{default:D(()=>[g(L,{icon:f.icon,size:f.iconSize},null,8,["icon","size"])]),_:1})}}}),M=S({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...N({origin:"center center",scrollStrategy:"block",transition:{component:H},zIndex:2400})},"VDialog"),J=I()({name:"VDialog",props:M(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,f){let{emit:d,slots:c}=f;const r=_(e,"modelValue"),{scopeId:V}=W(),t=z();function m(n){var l,i;const o=n.relatedTarget,s=n.target;if(o!==s&&((l=t.value)!=null&&l.contentEl)&&((i=t.value)!=null&&i.globalTop)&&![document,t.value.contentEl].includes(s)&&!t.value.contentEl.contains(s)){const a=k(t.value.contentEl);if(!a.length)return;const u=a[0],x=a[a.length-1];o===u?x.focus():u.focus()}}A(()=>{document.removeEventListener("focusin",m)}),C&&E(()=>r.value&&e.retainFocus,n=>{n?document.addEventListener("focusin",m):document.removeEventListener("focusin",m)},{immediate:!0});function P(){var n;d("afterEnter"),(e.scrim||e.retainFocus)&&((n=t.value)!=null&&n.contentEl)&&!t.value.contentEl.contains(document.activeElement)&&t.value.contentEl.focus({preventScroll:!0})}function b(){d("afterLeave")}return E(r,async n=>{var o;n||(await R(),(o=t.value.activatorEl)==null||o.focus({preventScroll:!0}))}),F(()=>{const n=h.filterProps(e),o=v({"aria-haspopup":"dialog"},e.activatorProps),s=v({tabindex:-1},e.contentProps);return g(h,v({ref:t,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},n,{modelValue:r.value,"onUpdate:modelValue":l=>r.value=l,"aria-modal":"true",activatorProps:o,contentProps:s,height:e.fullscreen?void 0:e.height,width:e.fullscreen?void 0:e.width,maxHeight:e.fullscreen?void 0:e.maxHeight,maxWidth:e.fullscreen?void 0:e.maxWidth,role:"dialog",onAfterEnter:P,onAfterLeave:b},V),{activator:c.activator,default:function(){for(var l=arguments.length,i=new Array(l),a=0;a<l;a++)i[a]=arguments[a];return g(T,{root:"VDialog"},{default:()=>{var u;return[(u=c.default)==null?void 0:u.call(c,...i)]}})}})}),O({},t)}});export{J as V,G as _};
