import{_ as M}from"./AppTextField.vue_vue_type_script_setup_true_lang-BiafB3D_.js";import{d as E,g as m,e as H,bb as q,be as G,aQ as J,c as h,o as c,l as t,y as s,aR as B,i as a,k as o,a as C,h as f,G as I,t as R,s as y,av as N,a7 as F,q as b,b7 as Q,aZ as A}from"./main-CrqE58uP.js";import{a as Y,b as Z}from"./auth-v1-top-shape-gPxasD3d.js";import{V as P}from"./VNodeRenderer-Cp4LkVpV.js";import{a as K}from"./auth-DhBqS4Bx.js";import{a as O,d as W,f as _,V as T}from"./VCard-CZdMCf39.js";import{V as L,a as p}from"./VRow-CpsRAF9x.js";import{V as X}from"./VForm-CFw85RGO.js";import{V as ee}from"./VAlert-DS-ohESv.js";import{V as ae}from"./VCheckbox-DSW4XjM-.js";import{V as se}from"./form-B3cvC5mg.js";import"./VTextField-D8j7WlPL.js";import"./VField-B7JFJ89s.js";import"./VInput-DSx6x9Bd.js";import"./VCheckboxBtn-CG-S7hsL.js";import"./VSelectionControl-DN2C_DWa.js";const oe={class:"auth-wrapper d-flex align-center justify-center pa-4"},te={class:"position-relative my-sm-16"},re={class:"app-logo"},le={class:"app-logo-title"},ie={class:"d-flex justify-space-between align-start mb-4"},ne={class:"role-radio"},de={key:0,class:"radio-inner"},ue={class:"d-flex justify-space-between align-start mb-4"},pe={class:"role-radio"},me={key:0,class:"radio-inner"},ce={class:"text-center text-base mt-6"},fe={class:"text-h4 mb-1"},ve={class:"d-flex align-center my-6"},Ne=E({__name:"register",setup(ye){const g=m(1),d=m(""),l=m({name:"",email:"",password:"",password_confirmation:"",role:"",privacyPolicies:!1}),V=m(!1),w=m(!1),x=m(!1),u=m(null),U=H(),{smAndUp:j}=q(),{updateAbility:$}=G(),S=v=>{d.value=v},z=()=>{d.value&&(l.value.role=d.value,g.value=2)},D=async()=>{var v;if(!l.value.privacyPolicies){u.value={general:"Please agree to the privacy policy & terms to continue."};return}x.value=!0,u.value=null;try{const e=await K.register({name:l.value.name,email:l.value.email,password:l.value.password,password_confirmation:l.value.password_confirmation,role:l.value.role});e.success&&e.data&&(A("accessToken").value=e.data.accessToken,A("userData").value=e.data.userData,A("userAbilityRules").value=e.data.userAbilityRules,$(e.data.userAbilityRules)),U.push({name:"verify-email"})}catch(e){const i=(e==null?void 0:e.data)||((v=e==null?void 0:e.response)==null?void 0:v._data)||null;i!=null&&i.errors?u.value={name:i.errors.name,email:i.errors.email,password:i.errors.password,password_confirmation:i.errors.password_confirmation,role:i.errors.role,general:i.message}:u.value={general:(i==null?void 0:i.message)||"Registration failed. Please check your details and try again."}}finally{x.value=!1}};return(v,e)=>{const i=J("RouterLink"),k=M;return c(),h("div",oe,[t("div",te,[s(a(P),{nodes:B("div",{innerHTML:a(Y)}),class:"text-primary auth-v1-top-shape d-none d-sm-block"},null,8,["nodes"]),s(a(P),{nodes:B("div",{innerHTML:a(Z)}),class:"text-primary auth-v1-bottom-shape d-none d-sm-block"},null,8,["nodes"]),s(T,{class:y(["auth-card",a(j)?"pa-6":"pa-0"]),"max-width":"600"},{default:o(()=>[s(O,{class:"justify-center"},{default:o(()=>[s(W,null,{default:o(()=>[s(i,{to:"/"},{default:o(()=>[t("div",re,[s(a(P),{nodes:a(I).app.logo},null,8,["nodes"]),t("h1",le,R(a(I).app.title),1)])]),_:1})]),_:1})]),_:1}),a(g)===1?(c(),C(_,{key:0},{default:o(()=>[e[14]||(e[14]=t("h4",{class:"text-h4 mb-1 text-center"}," Join as a Broker or Franchisor ",-1)),e[15]||(e[15]=t("p",{class:"mb-6 text-center"}," Select your role to get started ",-1)),s(L,{class:"role-selection-cards mb-6"},{default:o(()=>[s(p,{cols:"12",sm:"6"},{default:o(()=>[s(T,{class:y(["role-card cursor-pointer",{"role-card-selected":a(d)==="franchisor"}]),variant:"outlined",onClick:e[0]||(e[0]=r=>S("franchisor"))},{default:o(()=>[s(_,{class:"pa-6"},{default:o(()=>[t("div",ie,[s(N,{icon:"tabler-briefcase",size:"48",class:"text-primary"}),t("div",ne,[t("div",{class:y(["radio-outer",{"radio-selected":a(d)==="franchisor"}])},[a(d)==="franchisor"?(c(),h("div",de)):f("",!0)],2)])]),e[9]||(e[9]=t("div",{class:"text-body-1 font-weight-medium"}," I'm a franchisor, managing franchises ",-1))]),_:1,__:[9]})]),_:1},8,["class"])]),_:1}),s(p,{cols:"12",sm:"6"},{default:o(()=>[s(T,{class:y(["role-card cursor-pointer",{"role-card-selected":a(d)==="broker"}]),variant:"outlined",onClick:e[1]||(e[1]=r=>S("broker"))},{default:o(()=>[s(_,{class:"pa-6"},{default:o(()=>[t("div",ue,[s(N,{icon:"tabler-users",size:"48",class:"text-primary"}),t("div",pe,[t("div",{class:y(["radio-outer",{"radio-selected":a(d)==="broker"}])},[a(d)==="broker"?(c(),h("div",me)):f("",!0)],2)])]),e[10]||(e[10]=t("div",{class:"text-body-1 font-weight-medium"}," I'm a broker, connecting opportunities ",-1))]),_:1,__:[10]})]),_:1},8,["class"])]),_:1})]),_:1}),s(F,{block:"",size:"large",disabled:!a(d),onClick:z},{default:o(()=>e[11]||(e[11]=[b(" Create Account ")])),_:1,__:[11]},8,["disabled"]),t("div",ce,[e[13]||(e[13]=t("span",null,"Already have an account?",-1)),s(i,{class:"text-primary ms-1",to:{name:"login"}},{default:o(()=>e[12]||(e[12]=[b(" Log In ")])),_:1,__:[12]})])]),_:1,__:[14,15]})):f("",!0),a(g)===2?(c(),C(_,{key:1},{default:o(()=>[t("h4",fe," Complete Your Registration as "+R(a(d)==="franchisor"?"Franchisor":"Broker"),1),e[16]||(e[16]=t("p",{class:"mb-0"}," Fill in your details to create your account ",-1))]),_:1,__:[16]})):f("",!0),a(g)===2?(c(),C(_,{key:2},{default:o(()=>[s(X,{onSubmit:Q(D,["prevent"])},{default:o(()=>[s(L,null,{default:o(()=>[s(p,{cols:"12"},{default:o(()=>{var r;return[(r=a(u))!=null&&r.general?(c(),C(ee,{key:0,type:"error",variant:"tonal",class:"mb-4"},{default:o(()=>{var n;return[b(R((n=a(u))==null?void 0:n.general),1)]}),_:1})):f("",!0)]}),_:1}),s(p,{cols:"12"},{default:o(()=>{var r;return[s(k,{modelValue:a(l).name,"onUpdate:modelValue":e[2]||(e[2]=n=>a(l).name=n),autofocus:"",label:"Full Name",placeholder:"Name","error-messages":(r=a(u))==null?void 0:r.name},null,8,["modelValue","error-messages"])]}),_:1}),s(p,{cols:"12"},{default:o(()=>{var r;return[s(k,{modelValue:a(l).email,"onUpdate:modelValue":e[3]||(e[3]=n=>a(l).email=n),label:"Email",type:"email",placeholder:"Email","error-messages":(r=a(u))==null?void 0:r.email},null,8,["modelValue","error-messages"])]}),_:1}),s(p,{cols:"12"},{default:o(()=>{var r;return[s(k,{modelValue:a(l).password,"onUpdate:modelValue":e[4]||(e[4]=n=>a(l).password=n),label:"Password",placeholder:"············",type:a(V)?"text":"password",autocomplete:"new-password","error-messages":(r=a(u))==null?void 0:r.password,"append-inner-icon":a(V)?"tabler-eye-off":"tabler-eye","onClick:appendInner":e[5]||(e[5]=n=>V.value=!a(V))},null,8,["modelValue","type","error-messages","append-inner-icon"]),e[17]||(e[17]=t("p",{class:"text-caption text-disabled mt-1"}," Password must be at least 8 characters and contain uppercase, lowercase, number, and special character. ",-1))]}),_:1,__:[17]}),s(p,{cols:"12"},{default:o(()=>{var r;return[s(k,{modelValue:a(l).password_confirmation,"onUpdate:modelValue":e[6]||(e[6]=n=>a(l).password_confirmation=n),label:"Confirm Password",autocomplete:"new-password",placeholder:"············",type:a(w)?"text":"password","error-messages":(r=a(u))==null?void 0:r.password_confirmation,"append-inner-icon":a(w)?"tabler-eye-off":"tabler-eye","onClick:appendInner":e[7]||(e[7]=n=>w.value=!a(w))},null,8,["modelValue","type","error-messages","append-inner-icon"])]}),_:1}),s(p,{cols:"12"},{default:o(()=>[t("div",ve,[s(ae,{id:"privacy-policy",modelValue:a(l).privacyPolicies,"onUpdate:modelValue":e[8]||(e[8]=r=>a(l).privacyPolicies=r),inline:""},null,8,["modelValue"]),s(se,{for:"privacy-policy",style:{opacity:"1"}},{default:o(()=>e[18]||(e[18]=[t("span",{class:"me-1 text-high-emphasis"},"I agree to",-1),t("a",{href:"javascript:void(0)",class:"text-primary"},"privacy policy & terms",-1)])),_:1,__:[18]})]),s(F,{block:"",type:"submit",loading:a(x),disabled:a(x)},{default:o(()=>e[19]||(e[19]=[b(" Sign up ")])),_:1,__:[19]},8,["loading","disabled"])]),_:1}),s(p,{cols:"12",class:"text-center text-base"},{default:o(()=>[e[21]||(e[21]=t("span",null,"Already have an account?",-1)),s(i,{class:"text-primary ms-1",to:{name:"login"}},{default:o(()=>e[20]||(e[20]=[b(" Sign in instead ")])),_:1,__:[20]})]),_:1,__:[21]})]),_:1})]),_:1})]),_:1})):f("",!0)]),_:1},8,["class"])])])}}});export{Ne as default};
