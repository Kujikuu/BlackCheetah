import{V as Ve,_ as xe}from"./VDataTableServer-DzH7csUU.js";import{_ as de}from"./AppTextField.vue_vue_type_script_setup_true_lang-wXh2aVbi.js";import{_ as ne}from"./AppSelect.vue_vue_type_script_setup_true_lang-DJA6r2Q3.js";import{_ as he}from"./DeleteLeadDialog.vue_vue_type_script_setup_true_lang-DAddeLEw.js";import{_ as re,V as ue}from"./VDialog-BQITKorr.js";import{V as H,f as W,g as me,b as ae,a as Ce,d as Le}from"./VCard-CawK-7Mk.js";import{V as G,a as m}from"./VRow-DmXcz54G.js";import{V as X}from"./VChip-Bbjrr1Q2.js";import{V as ee}from"./VSpacer-Ds6NJ338.js";import{d as te,O as q,a as $,o as h,k as t,y as e,h as E,l as a,t as v,q as w,a7 as j,av as O,aI as L,i as s,g as b,w as Y,b5 as we,E as se,aQ as Se,c as oe,F as De,r as $e,s as ke}from"./main-Ji38qWNq.js";import{_ as Ne}from"./AppTextarea.vue_vue_type_script_setup_true_lang-BPbzeWDn.js";import{l as Z}from"./lead-LFBSrzeC.js";import{u as Ue,a as Te}from"./useSaudiProvinces-iu9m5bQt.js";import{V as Ee}from"./VForm-DP38Bcc1.js";import{f as Ae}from"./franchise-Cyi76FZN.js";import{V as ie}from"./VDivider-Dc_kOOhx.js";import{V as Pe}from"./VMenu-CbHzsIir.js";import{V as je,a as Be,b as ze}from"./VList-DR2sl0cr.js";import"./VPagination-0nuZepHR.js";import"./VDataTable-Beg_0ktT.js";import"./VSelect-Dx19yBS5.js";import"./VTextField-Dd7MzrQd.js";import"./VField-DLyvN9w7.js";import"./form-C8-wVyzB.js";import"./forwardRefs-B931MWyl.js";import"./VInput-N-MuRR1n.js";import"./VOverlay--ReuNc3x.js";import"./scopeId-DFtxLKrN.js";import"./VCheckboxBtn-BkETQGEw.js";import"./VSelectionControl-5ebt7RiB.js";import"./VTable-C4xv__rq.js";/* empty css              */import"./VSlideGroup-CeSXpsO9.js";import"./VTextarea-BCJMo_BQ.js";import"./api-router-DYQAS8f8.js";const Me={class:"mb-4"},Re={class:"text-body-1 font-weight-medium"},Ie={class:"mb-4"},Fe={class:"text-body-1 font-weight-medium"},Oe={class:"mb-4"},We={class:"text-body-1"},qe=["href"],Qe={class:"mb-4"},Je={class:"text-body-1"},He=["href"],Ge={class:"mb-4"},Ke={class:"text-body-1"},Xe={class:"mb-4"},Ye={class:"text-body-1"},Ze={class:"mb-4"},et={class:"text-body-1"},tt={class:"mb-4"},lt={class:"text-body-1"},at={class:"mb-4"},st={class:"text-body-1"},ot={class:"mb-4"},it={class:"text-body-1"},dt={class:"mb-4"},nt={class:"mb-4"},rt={class:"mb-4"},ut={class:"text-body-1"},mt={class:"mb-4"},ct={class:"text-body-1"},pt={class:"mb-4"},vt={class:"text-body-1"},ft={class:"mb-4"},bt={class:"text-body-1"},_t=te({__name:"ViewLeadDialog",props:{isDialogVisible:{type:Boolean},lead:{}},emits:["update:isDialogVisible","editLead"],setup(Q,{emit:A}){const S=Q,U=A,y=q({get:()=>S.isDialogVisible,set:n=>U("update:isDialogVisible",n)}),D=n=>{const l=n.toLowerCase();return l==="new"?"info":l==="contacted"?"primary":l==="qualified"||l==="closed_won"?"success":l==="closed_lost"?"error":"primary"},i=n=>{const l=n.toLowerCase();return l==="low"?"success":l==="medium"?"warning":l==="high"||l==="urgent"?"error":"secondary"},k=n=>n.replace(/_/g," ").replace(/\b\w/g,l=>l.toUpperCase()),N=()=>{S.lead&&(U("editLead",S.lead),y.value=!1)},B=()=>{y.value=!1};return(n,l)=>{const M=re;return h(),$(ue,{modelValue:s(y),"onUpdate:modelValue":l[0]||(l[0]=R=>L(y)?y.value=R:null),"max-width":"900",scrollable:""},{default:t(()=>[e(M,{onClick:B}),n.lead?(h(),$(H,{key:0,title:"Lead Details"},{default:t(()=>[e(W,null,{default:t(()=>[e(G,null,{default:t(()=>[e(m,{cols:"12",md:"6"},{default:t(()=>[a("div",Me,[l[1]||(l[1]=a("div",{class:"text-sm text-disabled mb-1"}," First Name ",-1)),a("div",Re,v(n.lead.firstName),1)])]),_:1}),e(m,{cols:"12",md:"6"},{default:t(()=>[a("div",Ie,[l[2]||(l[2]=a("div",{class:"text-sm text-disabled mb-1"}," Last Name ",-1)),a("div",Fe,v(n.lead.lastName),1)])]),_:1}),e(m,{cols:"12",md:"6"},{default:t(()=>[a("div",Oe,[l[3]||(l[3]=a("div",{class:"text-sm text-disabled mb-1"}," Email ",-1)),a("div",We,[a("a",{href:`mailto:${n.lead.email}`},v(n.lead.email),9,qe)])])]),_:1}),e(m,{cols:"12",md:"6"},{default:t(()=>[a("div",Qe,[l[4]||(l[4]=a("div",{class:"text-sm text-disabled mb-1"}," Phone ",-1)),a("div",Je,[a("a",{href:`tel:${n.lead.phone}`},v(n.lead.phone),9,He)])])]),_:1}),n.lead.company?(h(),$(m,{key:0,cols:"12",md:"6"},{default:t(()=>[a("div",Ge,[l[5]||(l[5]=a("div",{class:"text-sm text-disabled mb-1"}," Company ",-1)),a("div",Ke,v(n.lead.company),1)])]),_:1})):E("",!0),n.lead.jobTitle?(h(),$(m,{key:1,cols:"12",md:"6"},{default:t(()=>[a("div",Xe,[l[6]||(l[6]=a("div",{class:"text-sm text-disabled mb-1"}," Job Title ",-1)),a("div",Ye,v(n.lead.jobTitle),1)])]),_:1})):E("",!0),e(m,{cols:"12",md:"6"},{default:t(()=>[a("div",Ze,[l[7]||(l[7]=a("div",{class:"text-sm text-disabled mb-1"}," Nationality ",-1)),a("div",et,v(n.lead.nationality||"N/A"),1)])]),_:1}),e(m,{cols:"12",md:"6"},{default:t(()=>[a("div",tt,[l[8]||(l[8]=a("div",{class:"text-sm text-disabled mb-1"}," Province ",-1)),a("div",lt,v(n.lead.state||"N/A"),1)])]),_:1}),e(m,{cols:"12",md:"6"},{default:t(()=>[a("div",at,[l[9]||(l[9]=a("div",{class:"text-sm text-disabled mb-1"}," City ",-1)),a("div",st,v(n.lead.city),1)])]),_:1}),e(m,{cols:"12",md:"6"},{default:t(()=>[a("div",ot,[l[10]||(l[10]=a("div",{class:"text-sm text-disabled mb-1"}," Lead Source ",-1)),a("div",it,v(k(n.lead.source)),1)])]),_:1}),e(m,{cols:"12",md:"6"},{default:t(()=>[a("div",dt,[l[11]||(l[11]=a("div",{class:"text-sm text-disabled mb-1"}," Status ",-1)),e(X,{color:D(n.lead.status),size:"small",label:"",class:"text-capitalize"},{default:t(()=>[w(v(n.lead.status.replace(/_/g," ")),1)]),_:1},8,["color"])])]),_:1}),n.lead.priority?(h(),$(m,{key:2,cols:"12",md:"6"},{default:t(()=>[a("div",nt,[l[12]||(l[12]=a("div",{class:"text-sm text-disabled mb-1"}," Priority ",-1)),e(X,{color:i(n.lead.priority),size:"small",label:"",class:"text-capitalize"},{default:t(()=>[w(v(n.lead.priority),1)]),_:1},8,["color"])])]),_:1})):E("",!0),e(m,{cols:"12",md:"6"},{default:t(()=>[a("div",rt,[l[13]||(l[13]=a("div",{class:"text-sm text-disabled mb-1"}," Assigned To ",-1)),a("div",ut,v(n.lead.owner),1)])]),_:1}),n.lead.lastContacted?(h(),$(m,{key:3,cols:"12",md:"6"},{default:t(()=>[a("div",mt,[l[14]||(l[14]=a("div",{class:"text-sm text-disabled mb-1"}," Last Contacted ",-1)),a("div",ct,v(n.lead.lastContacted),1)])]),_:1})):E("",!0),n.lead.scheduledMeeting?(h(),$(m,{key:4,cols:"12",md:"6"},{default:t(()=>[a("div",pt,[l[15]||(l[15]=a("div",{class:"text-sm text-disabled mb-1"}," Scheduled Meeting ",-1)),a("div",vt,v(n.lead.scheduledMeeting),1)])]),_:1})):E("",!0),n.lead.note?(h(),$(m,{key:5,cols:"12"},{default:t(()=>[a("div",ft,[l[16]||(l[16]=a("div",{class:"text-sm text-disabled mb-1"}," Notes ",-1)),a("div",bt,v(n.lead.note),1)])]),_:1})):E("",!0)]),_:1})]),_:1}),e(me,null,{default:t(()=>[e(ee),e(j,{color:"secondary",variant:"tonal",onClick:B},{default:t(()=>l[17]||(l[17]=[w(" Close ")])),_:1,__:[17]}),e(j,{color:"primary",onClick:N},{default:t(()=>[e(O,{icon:"tabler-edit",class:"me-1"}),l[18]||(l[18]=w(" Edit "))]),_:1,__:[18]})]),_:1})]),_:1})):E("",!0)]),_:1},8,["modelValue"])}}}),gt=te({__name:"EditLeadDialog",props:{isDialogVisible:{type:Boolean},lead:{}},emits:["update:isDialogVisible","leadUpdated"],setup(Q,{emit:A}){const S=Q,U=A,y=q({get:()=>S.isDialogVisible,set:f=>U("update:isDialogVisible",f)}),D=b(!1),i=b({firstName:"",lastName:"",email:"",phone:"",company:"",jobTitle:"",nationality:"",state:"",city:"",source:"",status:"",priority:"",note:""}),{countries:k,isLoading:N}=Ue(),{provinces:B,getCitiesForProvince:n,isLoading:l}=Te(),M=q(()=>n(i.value.state||""));Y(()=>i.value.state,(f,r)=>{if(r!==void 0&&r!==f){const F=n(f||""),x=i.value.city;x&&!F.includes(x)&&(i.value.city="")}});const R=[{title:"Website",value:"website"},{title:"Referral",value:"referral"},{title:"Social Media",value:"social_media"},{title:"Advertisement",value:"advertisement"},{title:"Cold Call",value:"cold_call"},{title:"Event",value:"event"},{title:"Other",value:"other"}],T=[{title:"New",value:"new"},{title:"Contacted",value:"contacted"},{title:"Qualified",value:"qualified"},{title:"Proposal Sent",value:"proposal_sent"},{title:"Negotiating",value:"negotiating"},{title:"Closed Won",value:"closed_won"},{title:"Closed Lost",value:"closed_lost"}],J=[{title:"Low",value:"low"},{title:"Medium",value:"medium"},{title:"High",value:"high"},{title:"Urgent",value:"urgent"}];Y(()=>S.lead,f=>{f&&(i.value={firstName:f.firstName||"",lastName:f.lastName||"",email:f.email||"",phone:f.phone||"",company:f.company||"",jobTitle:f.jobTitle||"",nationality:f.nationality||"",state:f.state||"",city:f.city||"",source:f.source||"",status:f.status||"",priority:f.priority||"medium",note:f.note||""})},{immediate:!0});const z=async()=>{if(S.lead)try{D.value=!0,(await Z.updateLead(S.lead.id,{firstName:i.value.firstName,lastName:i.value.lastName,email:i.value.email,phone:i.value.phone,company:i.value.company||void 0,jobTitle:i.value.jobTitle||void 0,nationality:i.value.nationality||void 0,state:i.value.state||void 0,city:i.value.city||void 0,source:i.value.source||void 0,status:i.value.status,priority:i.value.priority||void 0,note:i.value.note||void 0})).success&&(U("leadUpdated"),y.value=!1)}catch(f){console.error("Error updating lead:",f)}finally{D.value=!1}},I=()=>{y.value=!1};return(f,r)=>{const F=re,x=de,C=ne,P=Ne;return h(),$(ue,{modelValue:s(y),"onUpdate:modelValue":r[13]||(r[13]=u=>L(y)?y.value=u:null),"max-width":"900",scrollable:""},{default:t(()=>[e(F,{onClick:I}),e(H,{title:"Edit Lead"},{default:t(()=>[e(W,null,{default:t(()=>[e(Ee,{onSubmit:we(z,["prevent"])},{default:t(()=>[e(G,null,{default:t(()=>[e(m,{cols:"12",md:"6"},{default:t(()=>[e(x,{modelValue:s(i).firstName,"onUpdate:modelValue":r[0]||(r[0]=u=>s(i).firstName=u),label:"First Name",placeholder:"Enter first name"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"6"},{default:t(()=>[e(x,{modelValue:s(i).lastName,"onUpdate:modelValue":r[1]||(r[1]=u=>s(i).lastName=u),label:"Last Name",placeholder:"Enter last name"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"6"},{default:t(()=>[e(x,{modelValue:s(i).email,"onUpdate:modelValue":r[2]||(r[2]=u=>s(i).email=u),label:"Email",type:"email",placeholder:"Enter email address"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"6"},{default:t(()=>[e(x,{modelValue:s(i).phone,"onUpdate:modelValue":r[3]||(r[3]=u=>s(i).phone=u),label:"Phone",placeholder:"+966 50 123 4567"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"6"},{default:t(()=>[e(x,{modelValue:s(i).company,"onUpdate:modelValue":r[4]||(r[4]=u=>s(i).company=u),label:"Company Name",placeholder:"Enter company name"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"6"},{default:t(()=>[e(x,{modelValue:s(i).jobTitle,"onUpdate:modelValue":r[5]||(r[5]=u=>s(i).jobTitle=u),label:"Job Title",placeholder:"Enter job title"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:s(i).nationality,"onUpdate:modelValue":r[6]||(r[6]=u=>s(i).nationality=u),label:"Nationality",placeholder:"Select nationality",items:s(k),loading:s(N),clearable:""},null,8,["modelValue","items","loading"])]),_:1}),e(m,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:s(i).state,"onUpdate:modelValue":r[7]||(r[7]=u=>s(i).state=u),label:"Province",placeholder:"Select province",items:s(B),loading:s(l),clearable:""},null,8,["modelValue","items","loading"])]),_:1}),e(m,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:s(i).city,"onUpdate:modelValue":r[8]||(r[8]=u=>s(i).city=u),label:"City",placeholder:"Select city",items:s(M),disabled:!s(i).state,clearable:""},null,8,["modelValue","items","disabled"])]),_:1}),e(m,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:s(i).source,"onUpdate:modelValue":r[9]||(r[9]=u=>s(i).source=u),label:"Lead Source",items:R,placeholder:"Select source"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:s(i).status,"onUpdate:modelValue":r[10]||(r[10]=u=>s(i).status=u),label:"Status",items:T,placeholder:"Select status"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:s(i).priority,"onUpdate:modelValue":r[11]||(r[11]=u=>s(i).priority=u),label:"Priority",items:J,placeholder:"Select priority"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12"},{default:t(()=>[e(P,{modelValue:s(i).note,"onUpdate:modelValue":r[12]||(r[12]=u=>s(i).note=u),label:"Notes",placeholder:"Add notes about this lead",rows:"3"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(me,null,{default:t(()=>[e(ee),e(j,{color:"secondary",variant:"tonal",disabled:s(D),onClick:I},{default:t(()=>r[14]||(r[14]=[w(" Cancel ")])),_:1,__:[14]},8,["disabled"]),e(j,{color:"primary",loading:s(D),disabled:s(D),onClick:z},{default:t(()=>r[15]||(r[15]=[w(" Save Changes ")])),_:1,__:[15]},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),yt={class:"d-flex mb-6"},Vt={class:"d-flex justify-space-between"},xt={class:"d-flex flex-column gap-y-1"},ht={class:"text-body-1 text-high-emphasis"},Ct={class:"d-flex gap-x-2 align-center"},Lt={class:"text-h4"},wt={class:"text-sm"},St={class:"me-3 d-flex gap-3"},Dt={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},$t={style:{"inline-size":"15.625rem"}},kt={class:"d-flex align-center gap-x-4"},Nt={class:"d-flex flex-column"},Ut={class:"text-base font-weight-medium"},Tt={class:"text-body-1"},Et={class:"text-body-1"},At={class:"text-body-1 text-capitalize"},Pt={class:"text-body-1"},_l=te({__name:"leads",setup(Q){const A=b(null),S=b(!1),U=async()=>{S.value=!0;try{const c=await Ae.getDashboardLeads();A.value=c}catch(c){console.error("Error fetching leads data:",c),A.value=null}finally{S.value=!1}},y=b(""),D=b(),i=b(),k=b(10),N=b(1),B=b(),n=b(),l=b([]),M=c=>{var o,_;B.value=(o=c.sortBy[0])==null?void 0:o.key,n.value=(_=c.sortBy[0])==null?void 0:_.order},R=[{title:"Lead Name",key:"name"},{title:"Email",key:"email"},{title:"Phone",key:"phone"},{title:"Source",key:"source"},{title:"Status",key:"status"},{title:"Created Date",key:"createdDate"},{title:"Actions",key:"actions",sortable:!1}],T=b({leads:[],totalLeads:0}),J=b([{title:"Total Leads",value:"0",change:0,desc:"All time leads",icon:"tabler-users",iconColor:"primary"},{title:"Closed and Won",value:"0",change:0,desc:"Converted leads",icon:"tabler-trophy",iconColor:"success"},{title:"Closed and Lost",value:"0",change:0,desc:"Lost opportunities",icon:"tabler-x",iconColor:"error"},{title:"Pending Leads",value:"0",change:0,desc:"Active leads",icon:"tabler-clock",iconColor:"warning"}]);Y(A,c=>{var _;const o=c;if(o!=null&&o.success&&(o!=null&&o.data)){const V=o.data;T.value={leads:Array.isArray(V.leads)?V.leads.map(p=>({id:p.id,name:`${p.first_name||""} ${p.last_name||""}`.trim(),email:p.email,phone:p.phone,source:p.lead_source,status:p.status,createdDate:new Date(p.created_at).toLocaleDateString()})):[],totalLeads:((_=V.pagination)==null?void 0:_.total)||(Array.isArray(V.leads)?V.leads.length:0)};const g=V.stats||{total_leads:0,total_leads_change:0,won_leads:0,won_leads_change:0,lost_leads:0,lost_leads_change:0,pending_leads:0,pending_leads_change:0};J.value=[{title:"Total Leads",value:g.total_leads.toLocaleString(),change:g.total_leads_change,desc:"All time leads",icon:"tabler-users",iconColor:"primary"},{title:"Closed and Won",value:g.won_leads.toLocaleString(),change:g.won_leads_change,desc:"Converted leads",icon:"tabler-trophy",iconColor:"success"},{title:"Closed and Lost",value:g.lost_leads.toLocaleString(),change:g.lost_leads_change,desc:"Lost opportunities",icon:"tabler-x",iconColor:"error"},{title:"Pending Leads",value:g.pending_leads.toLocaleString(),change:g.pending_leads_change,desc:"Active leads",icon:"tabler-clock",iconColor:"warning"}]}},{immediate:!0});const z=q(()=>T.value.leads),I=q(()=>T.value.totalLeads);se(()=>{U()});const f=[{title:"Website",value:"website"},{title:"Referral",value:"referral"},{title:"Social Media",value:"social_media"},{title:"Email Campaign",value:"email"}],r=[{title:"Pending",value:"pending"},{title:"Won",value:"won"},{title:"Lost",value:"lost"}],F=c=>{const o=c.toLowerCase();return o==="pending"?"warning":o==="won"?"success":o==="lost"?"error":"primary"},x=b(!1),C=b(!1),P=b(!1),u=b(null),K=b(null),ce=c=>{u.value={...c},C.value=!0},pe=c=>{K.value=c,P.value=!0},ve=async()=>{if(l.value.length!==0)try{for(const c of l.value)await Z.deleteLead(c);l.value.forEach(c=>{const o=T.value.leads.findIndex(_=>_.id===c);o!==-1&&T.value.leads.splice(o,1)}),l.value=[]}catch(c){console.error("Error bulk deleting leads:",c)}},fe=async c=>{const o=c||u.value;if(o){try{const _={firstName:o.name.split(" ")[0]||"",lastName:o.name.split(" ").slice(1).join(" ")||"",email:o.email,phone:o.phone,source:o.source,status:o.status},V=await Z.updateLead(o.id,_);if(V.success&&V.data){const g=T.value.leads.findIndex(p=>p.id===o.id);if(g!==-1){const p=V.data;T.value.leads[g]={id:p.id,name:`${p.firstName} ${p.lastName}`.trim(),email:p.email,phone:p.phone,source:p.source,status:p.status,createdDate:o.createdDate}}}}catch(_){console.error("Error updating lead:",_)}C.value=!1,u.value=null}},be=()=>{const o=["Name,Email,Phone,Source,Status,Created Date",...(l.value.length>0?z.value.filter(p=>l.value.includes(p.id)):z.value).map(p=>`"${p.name}","${p.email}","${p.phone}","${p.source}","${p.status}","${p.createdDate}"`)].join(`
`),_=new Blob([o],{type:"text/csv"}),V=window.URL.createObjectURL(_),g=document.createElement("a");g.href=V,g.download=`leads_${l.value.length>0?"selected":"all"}_${new Date().toISOString().split("T")[0]}.csv`,g.click(),window.URL.revokeObjectURL(V)},_e=c=>c>0?`+${c}`:`${c}`,ge=c=>c.split(" ").map(o=>o[0]).join("").toUpperCase(),ye=async()=>{await U(),P.value=!1,K.value=null};return se(()=>{U()}),(c,o)=>{const _=ne,V=de,g=Se("RouterLink"),p=xe;return h(),oe("section",null,[a("div",yt,[e(G,null,{default:t(()=>[(h(!0),oe(De,null,$e(s(J),(d,le)=>(h(),$(m,{key:le,cols:"12",md:"3",sm:"6"},{default:t(()=>[e(H,null,{default:t(()=>[e(W,null,{default:t(()=>[a("div",Vt,[a("div",xt,[a("div",ht,v(d.title),1),a("div",Ct,[a("h4",Lt,v(d.value),1),a("div",{class:ke(["text-base",d.change>0?"text-success":"text-error"])}," ("+v(_e(d.change))+"%) ",3)]),a("div",wt,v(d.desc),1)]),e(ae,{color:d.iconColor,variant:"tonal",rounded:"",size:"42"},{default:t(()=>[e(O,{icon:d.icon,size:"26"},null,8,["icon"])]),_:2},1032,["color"])])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),e(H,{class:"mb-6"},{default:t(()=>[e(Ce,{class:"pb-4"},{default:t(()=>[e(Le,null,{default:t(()=>o[11]||(o[11]=[w("Filters")])),_:1,__:[11]})]),_:1}),e(W,null,{default:t(()=>[e(G,null,{default:t(()=>[e(m,{cols:"12",sm:"6"},{default:t(()=>[e(_,{modelValue:s(i),"onUpdate:modelValue":o[0]||(o[0]=d=>L(i)?i.value=d:null),placeholder:"Select Source",items:f,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",sm:"6"},{default:t(()=>[e(_,{modelValue:s(D),"onUpdate:modelValue":o[1]||(o[1]=d=>L(D)?D.value=d:null),placeholder:"Select Status",items:r,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(ie),e(W,{class:"d-flex flex-wrap gap-4"},{default:t(()=>[a("div",St,[e(_,{"model-value":s(k),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"6.25rem"},"onUpdate:modelValue":o[2]||(o[2]=d=>k.value=parseInt(String(d),10))},null,8,["model-value"]),s(l).length>0?(h(),$(j,{key:0,variant:"tonal",color:"error",onClick:ve},{default:t(()=>[e(O,{icon:"tabler-trash",class:"me-2"}),w(" Delete Selected ("+v(s(l).length)+") ",1)]),_:1})):E("",!0)]),e(ee),a("div",Dt,[a("div",$t,[e(V,{modelValue:s(y),"onUpdate:modelValue":o[3]||(o[3]=d=>L(y)?y.value=d:null),placeholder:"Search Lead"},null,8,["modelValue"])]),e(j,{variant:"tonal",color:"secondary","prepend-icon":"tabler-upload",onClick:be},{default:t(()=>[w(" Export "+v(s(l).length>0?`(${s(l).length})`:"All"),1)]),_:1})])]),_:1}),e(ie),e(Ve,{"items-per-page":s(k),"onUpdate:itemsPerPage":o[5]||(o[5]=d=>L(k)?k.value=d:null),"model-value":s(l),"onUpdate:modelValue":o[6]||(o[6]=d=>L(l)?l.value=d:null),page:s(N),"onUpdate:page":o[7]||(o[7]=d=>L(N)?N.value=d:null),items:s(z),"item-value":"id","items-length":s(I),headers:R,class:"text-no-wrap","show-select":"","onUpdate:options":M},{"item.name":t(({item:d})=>[a("div",kt,[e(ae,{size:"34",variant:"tonal",color:"primary"},{default:t(()=>[a("span",null,v(ge(d.name)),1)]),_:2},1024),a("div",Nt,[a("h6",Ut,[e(g,{to:{name:"franchisor-leads-id",params:{id:d.id}},class:"text-link"},{default:t(()=>[w(v(d.name),1)]),_:2},1032,["to"])])])])]),"item.email":t(({item:d})=>[a("div",Tt,v(d.email),1)]),"item.phone":t(({item:d})=>[a("div",Et,v(d.phone),1)]),"item.source":t(({item:d})=>[a("div",At,v(d.source),1)]),"item.status":t(({item:d})=>[e(X,{color:F(d.status),size:"small",label:"",class:"text-capitalize"},{default:t(()=>[w(v(d.status),1)]),_:2},1032,["color"])]),"item.createdDate":t(({item:d})=>[a("div",Pt,v(d.createdDate),1)]),"item.actions":t(({item:d})=>[e(j,{icon:"",variant:"text",color:"medium-emphasis"},{default:t(()=>[e(O,{icon:"tabler-dots-vertical"}),e(Pe,{activator:"parent"},{default:t(()=>[e(je,null,{default:t(()=>[e(Be,{onClick:le=>pe(d.id)},{prepend:t(()=>[e(O,{icon:"tabler-trash"})]),default:t(()=>[e(ze,null,{default:t(()=>o[12]||(o[12]=[w("Delete")])),_:1,__:[12]})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:t(()=>[e(p,{page:s(N),"onUpdate:page":o[4]||(o[4]=d=>L(N)?N.value=d:null),"items-per-page":s(k),"total-items":s(I)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","model-value","page","items","items-length"])]),_:1}),e(_t,{"is-dialog-visible":s(x),"onUpdate:isDialogVisible":o[8]||(o[8]=d=>L(x)?x.value=d:null),"selected-lead":s(u),onEditLead:ce},null,8,["is-dialog-visible","selected-lead"]),e(gt,{"is-dialog-visible":s(C),"onUpdate:isDialogVisible":o[9]||(o[9]=d=>L(C)?C.value=d:null),"selected-lead":s(u),sources:f,statuses:r,onSaveLead:fe},null,8,["is-dialog-visible","selected-lead"]),e(he,{"is-dialog-visible":s(P),"onUpdate:isDialogVisible":o[10]||(o[10]=d=>L(P)?P.value=d:null),"lead-id":s(K),onLeadDeleted:ye},null,8,["is-dialog-visible","lead-id"])])}}});export{_l as default};
