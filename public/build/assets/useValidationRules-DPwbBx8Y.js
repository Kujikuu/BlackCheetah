import{g as A,cU as j,b8 as E,w as L}from"./main-DjrYRpVy.js";function M(n){return n.replace(/_([a-z])/g,(u,c)=>c.toUpperCase())}function k(n){var s,f,l,m,h;const u={};let c;return n!=null&&n.errors?c=n.errors:(s=n==null?void 0:n._data)!=null&&s.errors?c=n._data.errors:(l=(f=n==null?void 0:n.response)==null?void 0:f._data)!=null&&l.errors?c=n.response._data.errors:(h=(m=n==null?void 0:n.response)==null?void 0:m.data)!=null&&h.errors&&(c=n.response.data.errors),!c||typeof c!="object"||Object.entries(c).forEach(([b,g])=>{const y=M(b);Array.isArray(g)?u[y]=g.join(" "):typeof g=="string"&&(u[y]=g)}),u}function N(n){var u,c,s,f,l;return typeof n=="string"?n:n!=null&&n.message?n.message:(u=n==null?void 0:n._data)!=null&&u.message?n._data.message:(s=(c=n==null?void 0:n.response)==null?void 0:c._data)!=null&&s.message?n.response._data.message:(l=(f=n==null?void 0:n.response)==null?void 0:f.data)!=null&&l.message?n.response.data.message:"An error occurred"}function S(n){var c,s,f,l,m;const u=(n==null?void 0:n.errors)||((c=n==null?void 0:n._data)==null?void 0:c.errors)||((f=(s=n==null?void 0:n.response)==null?void 0:s._data)==null?void 0:f.errors)||((m=(l=n==null?void 0:n.response)==null?void 0:l.data)==null?void 0:m.errors);return u&&typeof u=="object"&&Object.keys(u).length>0}function V(n,u){delete n[u]}function D(n){Object.keys(n).forEach(u=>{delete n[u]})}function X(n){const u=A(!1),c=A(!1),s=j({}),f=async a=>{if(!a)return console.warn("Form reference is null"),!1;const{valid:o}=await a.validate();return u.value=o,o},l=a=>{a&&(a.reset(),a.resetValidation()),u.value=!1,D(s)},m=a=>{a&&a.resetValidation(),D(s)},h=a=>{D(s);const o=k(a);Object.assign(s,o)},b=a=>{V(s,a)},g=()=>{D(s)},y=a=>s[a],T=a=>!!s[a],$=async(a,o)=>{if(g(),!!await f(a))try{c.value=!0,await o()}catch(w){if(S(w))h(w);else{const q=N(w);throw console.error("Form submission error:",q),w}}finally{c.value=!1}},x=a=>{Object.keys(a).forEach(o=>{L(()=>a[o],()=>{s[o]&&b(o)})})};return{isValid:E(u),isSubmitting:E(c),backendErrors:E(s),validate:f,reset:l,resetValidation:m,setBackendErrors:h,clearError:b,clearErrors:g,getError:y,hasError:T,handleSubmit:$,watchFieldChanges:x}}function Y(){const n=(e="This field is required")=>t=>t==null||typeof t=="string"&&t.trim()===""||Array.isArray(t)&&t.length===0?e:!0;return{required:n,email:(e="Please provide a valid email address")=>t=>t?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)||e:!0,phone:(e="Please provide a valid phone number")=>t=>t?/^(\+?966|0)?5\d{8}$|^\+?\d{10,15}$/.test(t.replace(/[\s-]/g,""))||e:!0,minLength:(e,t)=>r=>r?(typeof r=="string"?r.length:String(r).length)>=e||t||`Minimum length is ${e} characters`:!0,maxLength:(e,t)=>r=>r?(typeof r=="string"?r.length:String(r).length)<=e||t||`Maximum length is ${e} characters`:!0,string:(e="This field must be a string")=>t=>t?typeof t=="string"||e:!0,numeric:(e="This field must be a number")=>t=>t==null||t===""?!0:!isNaN(Number(t))||e,min:(e,t)=>r=>r==null||r===""?!0:Number(r)>=e||t||`Minimum value is ${e}`,max:(e,t)=>r=>r==null||r===""?!0:Number(r)<=e||t||`Maximum value is ${e}`,between:(e,t,r)=>i=>{if(i==null||i==="")return!0;const d=Number(i);return d>=e&&d<=t||r||`Value must be between ${e} and ${t}`},integer:(e="This field must be an integer")=>t=>t==null||t===""?!0:Number.isInteger(Number(t))||e,date:(e="Please provide a valid date")=>t=>{if(!t)return!0;const r=new Date(t);return!isNaN(r.getTime())||e},after:(e,t)=>r=>{if(!r)return!0;const i=new Date(r),d=new Date(e);return i>d||t||`Date must be after ${e}`},before:(e,t)=>r=>{if(!r)return!0;const i=new Date(r),d=new Date(e);return i<d||t||`Date must be before ${e}`},afterOrEqual:(e,t)=>r=>{if(!r)return!0;const i=new Date(r),d=new Date(e);return i>=d||t||`Date must be on or after ${e}`},beforeOrEqual:(e,t)=>r=>{if(!r)return!0;const i=new Date(r),d=new Date(e);return i<=d||t||`Date must be on or before ${e}`},afterToday:(e="Date must be in the future")=>t=>{if(!t)return!0;const r=new Date(t),i=new Date;return i.setHours(0,0,0,0),r>i||e},afterOrEqualToday:(e="Date must be today or in the future")=>t=>{if(!t)return!0;const r=new Date(t);r.setHours(0,0,0,0);const i=new Date;return i.setHours(0,0,0,0),r>=i||e},url:(e="Please provide a valid URL")=>t=>{if(!t)return!0;try{return new URL(t),!0}catch{return e}},array:(e="This field must be an array")=>t=>t?Array.isArray(t)||e:!0,inArray:(e,t)=>r=>r?e.includes(r)||t||`Value must be one of: ${e.join(", ")}`:!0,regex:(e,t="Invalid format")=>r=>r?e.test(r)||t:!0,timeFormat:(e="Time must be in HH:MM format")=>t=>t?/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/.test(t)||e:!0,requiredIf:(e,t="This field is required")=>r=>e()?n(t)(r):!0,file:(e="Please select a file")=>t=>t&&(t instanceof File||t&&t.name)||e,fileType:(e,t)=>r=>{var F;if(!r||!(r instanceof File))return!0;const i=(F=r.name.split(".").pop())==null?void 0:F.toLowerCase(),d=r.type.toLowerCase();return e.some(_=>i===_.toLowerCase()||d.includes(_.toLowerCase()))||t||`Allowed file types: ${e.join(", ")}`},fileSize:(e,t)=>r=>!r||!(r instanceof File)?!0:r.size/(1024*1024)<=e||t||`File size must not exceed ${e}MB`,confirmed:(e,t="Fields do not match")=>r=>r===e||t,unique:(e="This value already exists")=>()=>!0}}export{Y as a,X as u};
