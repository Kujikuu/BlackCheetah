import{u as Q}from"./useFranchisorDashboard-G8c1Remc.js";import{d as Y,e as G,g as J,O as K,E as U,c as m,o as r,a as p,h as v,y as e,i as l,k as s,l as o,q as i,t as n,a7 as k,F as y,r as C,aD as z,av as _,s as X}from"./main-CEM1QI86.js";import{f as Z}from"./franchise-64vqnNGq.js";import{S as D}from"./saudi-riyal-BmZR-WzB.js";import{a as R,V as N}from"./VAlert-D7jBKg4h.js";import{a as c,V as x}from"./VRow-DQylzCgd.js";import{V as d,f as u,b as F,a as M,d as O}from"./VCard-BQn_ZwHQ.js";import{V as ee,a as S,b as $,c as se}from"./VList-DLC3F4tN.js";import{V as te}from"./VDivider-MM1jTXpn.js";import{_ as ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./lead-19XSzGsM.js";import"./api-router-Bcbe8RlT.js";import"./users-BkQDqnPe.js";/* empty css              */const oe={class:"mb-3"},le={class:"d-flex align-center justify-space-between"},re={class:"text-h2 mb-1"},ie={class:"d-flex align-center gap-3"},ne={class:"ms-4"},ce={class:"text-body-2 text-disabled"},de={class:"d-flex align-center flex-wrap"},ue={class:"text-h4 me-2"},fe={class:"text-body-2 text-disabled"},me={class:"text-body-2 font-weight-medium"},pe=Y({__name:"index",setup(be){const h=G(),L=J("Franchisor"),{isLoading:V,error:A,dashboardStats:g,salesAssociates:B,recentActivities:w,isProfileComplete:I,dismissBanner:P,initializeDashboard:E,refreshDashboard:T}=Q(),j=K(()=>g.value?[{title:"Total Leads",value:g.value.totalLeads.toString(),change:0,desc:"Active leads in pipeline",icon:"tabler-users",iconColor:"primary"},{title:"Active Tasks",value:g.value.activeTasks.toString(),change:0,desc:"Ongoing operations",icon:"tabler-settings",iconColor:"success"},{title:"Sales Associates",value:B.value.length.toString(),change:0,desc:"Active team members",icon:"tabler-user-check",iconColor:"info"},{title:"Monthly Revenue",value:`SAR ${g.value.currentMonthRevenue.toLocaleString()}`,change:g.value.revenueChange,desc:"This month's revenue",icon:D,iconColor:"warning"}]:[{title:"Total Leads",value:"0",change:0,desc:"Active leads in pipeline",icon:"tabler-users",iconColor:"primary"},{title:"Active Tasks",value:"0",change:0,desc:"Ongoing operations",icon:"tabler-settings",iconColor:"success"},{title:"Sales Associates",value:"0",change:0,desc:"Active team members",icon:"tabler-user-check",iconColor:"info"},{title:"Monthly Revenue",value:"SAR0",change:0,desc:"This month's revenue",icon:D,iconColor:"warning"}]),q=[{title:"Add New Lead",icon:"tabler-user-plus",color:"primary",to:"/franchisor/add-lead"},{title:"Manage Leads",icon:"tabler-users",color:"success",to:"/franchisor/lead-management"},{title:"View Operations",icon:"tabler-settings",color:"info",to:"/franchisor/dashboard/operations"},{title:"Sales Team",icon:"tabler-user-check",color:"warning",to:"/franchisor/sales-associates"}],W=()=>{h.push("/franchisor/franchise-registration")},H=async()=>{try{const f=await Z.getFranchiseData();f.success&&f.data&&f.data.franchise&&(L.value=f.data.franchise.franchiseDetails.franchiseName||"Franchisor")}catch(f){console.error("Error fetching franchise name:",f)}};return U(async()=>{await Promise.all([E(),H()])}),(f,t)=>(r(),m("section",null,[l(A)?(r(),p(N,{key:0,type:"error",variant:"tonal",class:"mb-6",closable:"","onClick:close":t[0]||(t[0]=a=>A.value=null)},{default:s(()=>[e(R,{class:"mb-2"},{default:s(()=>t[4]||(t[4]=[i(" Error Loading Dashboard ")])),_:1,__:[4]}),o("p",oe,n(l(A)),1),e(k,{color:"error",variant:"elevated",size:"small",onClick:l(T)},{default:s(()=>t[5]||(t[5]=[i(" Retry ")])),_:1,__:[5]},8,["onClick"])]),_:1})):v("",!0),l(I)?v("",!0):(r(),p(N,{key:1,type:"warning",variant:"tonal",class:"mb-6",closable:"","onClick:close":l(P)},{default:s(()=>[e(R,{class:"mb-2"},{default:s(()=>t[6]||(t[6]=[i(" Complete Your Franchise Profile ")])),_:1,__:[6]}),t[8]||(t[8]=o("p",{class:"mb-3"}," Welcome to your franchisor dashboard! To get started and unlock all features, please complete your franchise registration process. ",-1)),e(k,{color:"info",variant:"elevated",size:"small",onClick:W},{default:s(()=>t[7]||(t[7]=[i(" Complete Onboarding Process ")])),_:1,__:[7]})]),_:1,__:[8]},8,["onClick:close"])),e(x,{class:"mb-6"},{default:s(()=>[e(c,{cols:"12"},{default:s(()=>[o("div",le,[o("div",null,[o("h2",re,n(l(L)),1),t[9]||(t[9]=o("p",{class:"text-body-1 text-medium-emphasis"}," Welcome back! Here's what's happening with your franchise. ",-1))]),o("div",ie,[l(V)?v("",!0):(r(),p(k,{key:0,color:"secondary",variant:"outlined","prepend-icon":"tabler-refresh",onClick:l(T)},{default:s(()=>t[10]||(t[10]=[i(" Refresh ")])),_:1,__:[10]},8,["onClick"])),e(k,{color:"primary","prepend-icon":"tabler-plus",to:"/franchisor/add-lead"},{default:s(()=>t[11]||(t[11]=[i(" Add New Lead ")])),_:1,__:[11]})])])]),_:1})]),_:1}),e(x,{class:"mb-6"},{default:s(()=>[l(V)?(r(),m(y,{key:0},C(4,a=>e(c,{key:`loading-${a}`,cols:"12",md:"3",sm:"6"},{default:s(()=>[e(d,null,{default:s(()=>[e(u,{class:"d-flex align-center justify-center",style:{"min-height":"100px"}},{default:s(()=>[e(z,{indeterminate:"",color:"primary"})]),_:1})]),_:1})]),_:2},1024)),64)):(r(!0),m(y,{key:1},C(l(j),(a,b)=>(r(),p(c,{key:b,cols:"12",md:"3",sm:"6"},{default:s(()=>[e(d,null,{default:s(()=>[e(u,{class:"d-flex align-center"},{default:s(()=>[e(F,{size:"44",rounded:"",color:a.iconColor,variant:"tonal"},{default:s(()=>[e(_,{icon:a.icon,size:"26"},null,8,["icon"])]),_:2},1032,["color"]),o("div",ne,[o("div",ce,n(a.title),1),o("div",de,[o("h4",ue,n(a.value),1),a.change!==0?(r(),m("div",{key:0,class:X(["text-body-2",a.change>0?"text-success":"text-error"])},n(a.change>0?"+":"")+n(a.change)+"% ",3)):v("",!0)]),o("div",fe,n(a.desc),1)])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),e(x,null,{default:s(()=>[e(c,{cols:"12",md:"6"},{default:s(()=>[e(d,null,{default:s(()=>[e(M,{class:"pb-4"},{default:s(()=>[e(O,null,{default:s(()=>t[12]||(t[12]=[i("Quick Actions")])),_:1,__:[12]})]),_:1}),e(u,null,{default:s(()=>[e(x,null,{default:s(()=>[(r(),m(y,null,C(q,(a,b)=>e(c,{key:b,cols:"6"},{default:s(()=>[e(d,{variant:"tonal",color:a.color,class:"cursor-pointer",onClick:_e=>l(h).push(a.to)},{default:s(()=>[e(u,{class:"text-center pa-4"},{default:s(()=>[e(_,{icon:a.icon,size:"32",class:"mb-2"},null,8,["icon"]),o("div",me,n(a.title),1)]),_:2},1024)]),_:2},1032,["color","onClick"])]),_:2},1024)),64))]),_:1})]),_:1})]),_:1})]),_:1}),e(c,{cols:"12",md:"6"},{default:s(()=>[e(d,null,{default:s(()=>[e(M,{class:"pb-4"},{default:s(()=>[e(O,null,{default:s(()=>t[13]||(t[13]=[i("Recent Activity")])),_:1,__:[13]})]),_:1}),e(u,null,{default:s(()=>[e(ee,{class:"card-list"},{default:s(()=>[l(V)?(r(),p(S,{key:0,class:"text-center py-8"},{default:s(()=>[e(z,{indeterminate:"",color:"primary"}),t[14]||(t[14]=o("div",{class:"mt-2 text-body-2 text-disabled"}," Loading recent activities... ",-1))]),_:1,__:[14]})):l(w).length>0?(r(!0),m(y,{key:1},C(l(w),(a,b)=>(r(),m(y,{key:b},[e(S,null,{prepend:s(()=>[e(F,{size:"32",color:a.color,variant:"tonal"},{default:s(()=>[e(_,{icon:a.icon,size:"18"},null,8,["icon"])]),_:2},1032,["color"])]),default:s(()=>[e($,{class:"text-body-2 font-weight-medium"},{default:s(()=>[i(n(a.title),1)]),_:2},1024),e(se,{class:"text-body-2"},{default:s(()=>[i(n(a.time),1)]),_:2},1024)]),_:2},1024),b!==l(w).length-1?(r(),p(te,{key:0})):v("",!0)],64))),128)):(r(),p(S,{key:2},{default:s(()=>[e($,{class:"text-center text-disabled"},{default:s(()=>t[15]||(t[15]=[i(" No recent activities ")])),_:1,__:[15]})]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(x,{class:"mt-6"},{default:s(()=>[e(c,{cols:"12",md:"4"},{default:s(()=>[e(d,{class:"cursor-pointer",onClick:t[1]||(t[1]=a=>l(h).push("/franchisor/dashboard/leads"))},{default:s(()=>[e(u,{class:"text-center pa-6"},{default:s(()=>[e(_,{icon:"tabler-users",size:"48",color:"primary",class:"mb-4"}),t[16]||(t[16]=o("h5",{class:"text-h5 mb-2"}," Leads Dashboard ",-1)),t[17]||(t[17]=o("p",{class:"text-body-2 text-disabled mb-0"}," Manage and track all your leads ",-1))]),_:1,__:[16,17]})]),_:1})]),_:1}),e(c,{cols:"12",md:"4"},{default:s(()=>[e(d,{class:"cursor-pointer",onClick:t[2]||(t[2]=a=>l(h).push("/franchisor/dashboard/operations"))},{default:s(()=>[e(u,{class:"text-center pa-6"},{default:s(()=>[e(_,{icon:"tabler-settings",size:"48",color:"success",class:"mb-4"}),t[18]||(t[18]=o("h5",{class:"text-h5 mb-2"}," Operations Dashboard ",-1)),t[19]||(t[19]=o("p",{class:"text-body-2 text-disabled mb-0"}," Monitor operational activities ",-1))]),_:1,__:[18,19]})]),_:1})]),_:1}),e(c,{cols:"12",md:"4"},{default:s(()=>[e(d,{class:"cursor-pointer",onClick:t[3]||(t[3]=a=>l(h).push("/franchisor/sales-associates"))},{default:s(()=>[e(u,{class:"text-center pa-6"},{default:s(()=>[e(_,{icon:"tabler-user-check",size:"48",color:"info",class:"mb-4"}),t[20]||(t[20]=o("h5",{class:"text-h5 mb-2"}," Sales Associates ",-1)),t[21]||(t[21]=o("p",{class:"text-body-2 text-disabled mb-0"}," Manage your sales team ",-1))]),_:1,__:[20,21]})]),_:1})]),_:1})]),_:1})]))}}),De=ae(pe,[["__scopeId","data-v-3e37d1a7"]]);export{De as default};
