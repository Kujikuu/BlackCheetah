import{m as K}from"./vue3-apexcharts-CQBjbxv6.js";import{f as n}from"./formatters-aoHiJebZ.js";import{d as Q,g as i,aB as Y,w as Z,O as p,E as ee,c as N,o as A,y as s,k as o,F as te,r as ae,i as u,a as se,l as c,av as oe,t as f,a7 as E,q as _}from"./main-CjIXzPPN.js";import{f as re}from"./franchise-MFk-mefb.js";import{S as P}from"./saudi-riyal-C8sV6kbv.js";import{a as y,V as v}from"./VRow-B0XS-9G3.js";import{V as g,f as b,b as le,a as T,d as ne,h as ie}from"./VCard-DsOmZPOW.js";import{V as ce}from"./VDivider-BfvNl_GQ.js";import{V as de}from"./VDataTable-DO7HlNoc.js";import{_ as fe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./_commonjsHelpers-CqkleIqs.js";import"./api-router-DKaNRiO8.js";import"./VPagination-vxjArAbQ.js";import"./VSelect-CWIiyd9K.js";import"./VTextField-CEXpIXUU.js";import"./VField-7cD6L6AZ.js";import"./form-DXdjKGLJ.js";import"./VInput-DDH1Obwe.js";import"./VList-BV1EJSa7.js";import"./VMenu-B3fHBqmF.js";import"./VCheckboxBtn-BZ4R0aQx.js";import"./VSelectionControl-Dnu967dS.js";import"./VChip-D1-opBSv.js";import"./VSlideGroup-CSE86Unr.js";import"./VTable-8wf8FgSW.js";const ue={class:"d-flex align-center gap-x-4 mb-1"},me={class:"text-h4"},pe={class:"text-body-1 mb-1"},he={class:"d-flex gap-x-2 align-center"},ye={class:"text-h6"},ge={class:"text-body-1 font-weight-medium"},_e={class:"text-body-1 text-success font-weight-medium"},ve={class:"text-body-1 text-error font-weight-medium"},be={class:"text-body-1 text-warning font-weight-medium"},xe={class:"text-body-1 text-primary font-weight-medium"},Se="rgba(var(--v-theme-on-background), var(--v-high-emphasis-opacity))",h="rgba(var(--v-theme-on-background), var(--v-medium-emphasis-opacity))",x="rgba(var(--v-border-color), var(--v-border-opacity))",we=Q({__name:"finance",setup(ke){const S=i(null),H=i(!1),$=async()=>{H.value=!0;try{const t=await re.getDashboardFinance();S.value=t}catch(t){console.error("Error fetching finance data:",t),S.value=null}finally{H.value=!1}},w=Y(),d={primary:"#9155FD",warning:"#FFB400",success:"#56CA00",error:"#FF4C51"},k=i([]),M=i([{name:"Sales",data:[]}]),B=i([{name:"Royalty",data:[]}]),m=i([]),C=i([{name:"Sales",data:[]}]),R=i([{name:"Expenses",data:[]}]),V=i([{name:"Profit",data:[]}]),z=i([{name:"Royalty",data:[]}]),F=i([]),D=i([]),l=t=>typeof t=="number"?t:Number.parseFloat(t)||0;Z(S,t=>{const r=t;if(r!=null&&r.success&&(r!=null&&r.data)){const a=r.data;k.value=[{icon:P,color:"primary",title:"Total Sales",value:n(l(a.stats.total_sales)),change:a.stats.sales_change,isHover:!1},{icon:"tabler-receipt",color:"error",title:"Total Expenses",value:n(l(a.stats.total_expenses)),change:a.stats.expenses_change,isHover:!1},{icon:"tabler-chart-line",color:"success",title:"Net Profit",value:n(l(a.stats.net_profit)),change:a.stats.profit_change,isHover:!1},{icon:"tabler-percentage",color:"warning",title:"Profit Margin",value:`${l(a.stats.profit_margin).toFixed(2)}%`,change:a.stats.margin_change,isHover:!1}],a.top_stores_sales&&a.top_stores_sales.length>0&&(M.value=[{name:"Sales",data:a.top_stores_sales.map(e=>l(e.sales))}],m.value=a.top_stores_sales.map(e=>e.name||"Unknown Store")),a.top_stores_royalty&&a.top_stores_royalty.length>0&&(B.value=[{name:"Royalty",data:a.top_stores_royalty.map(e=>l(e.royalty))}],m.value.length===0&&(m.value=a.top_stores_royalty.map(e=>e.name||"Unknown Store"))),a.sales_chart&&a.sales_chart.length>0&&(C.value=[{name:"Sales",data:a.sales_chart.map(e=>l(e.amount))}],F.value=a.sales_chart.map(e=>e.month)),a.expenses_chart&&(R.value=[{name:"Expenses",data:a.expenses_chart.map(e=>l(e.amount))}]),a.profit_chart&&(V.value=[{name:"Profit",data:a.profit_chart.map(e=>l(e.amount))}]),a.royalty_chart&&(z.value=[{name:"Royalty",data:a.royalty_chart.map(e=>l(e.amount))}]),a.monthly_breakdown&&(D.value=a.monthly_breakdown)}});const O=[{icon:P,color:"primary",title:"Total Sales",value:n(0,"SAR",!1),change:0,isHover:!1},{icon:"tabler-receipt",color:"error",title:"Total Expenses",value:n(0,"SAR",!1),change:0,isHover:!1},{icon:"tabler-chart-line",color:"success",title:"Net Profit",value:n(0,"SAR",!1),change:0,isHover:!1},{icon:"tabler-percentage",color:"warning",title:"Profit Margin",value:"0%",change:0,isHover:!1}],L=p(()=>k.value.length>0?k.value:O),W=p(()=>({chart:{type:"bar",toolbar:{show:!1},parentHeightOffset:0},plotOptions:{bar:{horizontal:!0,borderRadius:8,barHeight:"60%"}},dataLabels:{enabled:!0,formatter(t){return`${(t/1e3).toFixed(0)}k SAR`},style:{colors:["#fff"],fontSize:"13px",fontWeight:500}},colors:[d.primary],xaxis:{categories:m.value.length>0?m.value:["No data available"],labels:{style:{colors:h,fontSize:"13px"},formatter(t){return`${(t/1e3).toFixed(0)}k SAR`}},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{style:{colors:h,fontSize:"13px"}}},grid:{strokeDashArray:8,borderColor:x,xaxis:{lines:{show:!0}},yaxis:{lines:{show:!1}},padding:{top:-18,left:21,right:25,bottom:10}},tooltip:{theme:w.current.value.dark?"dark":"light",y:{formatter(t){return n(t)}}}})),I=p(()=>({chart:{type:"bar",toolbar:{show:!1},parentHeightOffset:0},plotOptions:{bar:{horizontal:!0,borderRadius:8,barHeight:"60%"}},dataLabels:{enabled:!0,formatter(t){return`${(t/1e3).toFixed(1)}k SAR`},style:{colors:["#fff"],fontSize:"13px",fontWeight:500}},colors:[d.warning],xaxis:{categories:m.value.length>0?m.value:["No data available"],labels:{style:{colors:h,fontSize:"13px"},formatter(t){return`${(t/1e3).toFixed(0)}k SAR`}},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{style:{colors:h,fontSize:"13px"}}},grid:{strokeDashArray:8,borderColor:x,xaxis:{lines:{show:!0}},yaxis:{lines:{show:!1}},padding:{top:-18,left:21,right:25,bottom:10}},tooltip:{theme:w.current.value.dark?"dark":"light",y:{formatter(t){return n(t)}}}})),J=p(()=>[{name:"Sales",data:C.value.length>0?C.value[0].data:[]},{name:"Expenses",data:R.value.length>0?R.value[0].data:[]},{name:"Royalties",data:z.value.length>0?z.value[0].data:[]},{name:"Profit",data:V.value.length>0?V.value[0].data:[]}]),U=p(()=>({chart:{type:"line",stacked:!1,parentHeightOffset:0,toolbar:{show:!1},zoom:{enabled:!1}},markers:{size:4,colors:"#fff",strokeColors:[d.primary,d.error,d.warning,d.success],hover:{size:5},borderRadius:4},stroke:{curve:"smooth",width:3,lineCap:"round"},legend:{show:!0,position:"top",horizontalAlign:"left",markers:{width:10,height:10,offsetX:-3},fontSize:"14px",fontWeight:400,labels:{colors:Se},itemMargin:{horizontal:12,vertical:8}},grid:{strokeDashArray:8,borderColor:x},colors:[d.primary,d.error,d.warning,d.success],dataLabels:{enabled:!1},xaxis:{categories:F.value.length>0?F.value:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],labels:{style:{colors:h,fontSize:"13px",fontWeight:400}},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{style:{colors:h,fontSize:"13px",fontWeight:400},formatter(t){return`${(t/1e3).toFixed(0)}k SAR`}}},tooltip:{theme:w.current.value.dark?"dark":"light",y:{formatter(t){return n(t)}}}})),q=p(()=>D.value.map(t=>({month:t.month,sales:n(l(t.sales)),expenses:n(l(t.expenses)),royalties:n(l(t.royalties)),profit:n(l(t.profit))}))),X=[{title:"Month",key:"month"},{title:"Sales",key:"sales",align:"end"},{title:"Expenses",key:"expenses",align:"end"},{title:"Royalties",key:"royalties",align:"end"},{title:"Profit",key:"profit",align:"end"}];return ee(()=>{$()}),(t,r)=>{const a=K;return A(),N("section",null,[s(v,{class:"mb-6"},{default:o(()=>[(A(!0),N(te,null,ae(u(L),(e,j)=>(A(),se(y,{key:j,cols:"12",md:"3",sm:"6"},{default:o(()=>[s(g,{class:"finance-card-statistics cursor-pointer",style:x,onMouseenter:G=>e.isHover=!0,onMouseleave:G=>e.isHover=!1},{default:o(()=>[s(b,null,{default:o(()=>[c("div",ue,[s(le,{variant:"tonal",color:e.color,rounded:""},{default:o(()=>[s(oe,{icon:e.icon,size:"28"},null,8,["icon"])]),_:2},1032,["color"]),c("h4",me,f(e.value),1)]),c("div",pe,f(e.title),1),c("div",he,[c("h6",ye,f(e.change>0?"+":"")+" "+f(e.change)+"% ",1),r[0]||(r[0]=c("div",{class:"text-sm text-disabled"}," than last month ",-1))])]),_:2},1024)]),_:2},1032,["onMouseenter","onMouseleave"])]),_:2},1024))),128))]),_:1}),s(v,{class:"mb-6"},{default:o(()=>[s(y,{cols:"12",md:"6"},{default:o(()=>[s(g,null,{default:o(()=>[s(T,{title:"Top 5 Stores by Monthly Sales",subtitle:"Performance comparison"},{append:o(()=>[s(E,{variant:"tonal",size:"small","append-icon":"tabler-chevron-down"},{default:o(()=>r[1]||(r[1]=[_(" This Month ")])),_:1,__:[1]})]),_:1}),s(b,null,{default:o(()=>[s(a,{type:"bar",height:"320",options:u(W),series:u(M)},null,8,["options","series"])]),_:1})]),_:1})]),_:1}),s(y,{cols:"12",md:"6"},{default:o(()=>[s(g,null,{default:o(()=>[s(T,{title:"Top 5 Stores by Monthly Royalty",subtitle:"Royalty contributions"},{append:o(()=>[s(E,{variant:"tonal",size:"small","append-icon":"tabler-chevron-down"},{default:o(()=>r[2]||(r[2]=[_(" This Month ")])),_:1,__:[2]})]),_:1}),s(b,null,{default:o(()=>[s(a,{type:"bar",height:"320",options:u(I),series:u(B)},null,8,["options","series"])]),_:1})]),_:1})]),_:1})]),_:1}),s(v,{class:"mb-6"},{default:o(()=>[s(y,{cols:"12"},{default:o(()=>[s(g,null,{default:o(()=>[s(b,null,{default:o(()=>[s(a,{type:"line",height:"400",options:u(U),series:u(J)},null,8,["options","series"])]),_:1})]),_:1})]),_:1})]),_:1}),s(v,null,{default:o(()=>[s(y,{cols:"12"},{default:o(()=>[s(g,null,{default:o(()=>[s(T,{class:"pb-4"},{default:o(()=>[s(ne,null,{default:o(()=>r[3]||(r[3]=[_("Monthly Financial Breakdown")])),_:1,__:[3]}),s(ie,null,{default:o(()=>r[4]||(r[4]=[_("Detailed monthly statistics")])),_:1,__:[4]})]),_:1}),s(ce),s(de,{headers:X,items:u(q),"hide-default-footer":"",class:"text-no-wrap"},{"item.month":o(({item:e})=>[c("div",ge,f(e.month),1)]),"item.sales":o(({item:e})=>[c("div",_e,f(e.sales),1)]),"item.expenses":o(({item:e})=>[c("div",ve,f(e.expenses),1)]),"item.royalties":o(({item:e})=>[c("div",be,f(e.royalties),1)]),"item.profit":o(({item:e})=>[c("div",xe,f(e.profit),1)]),_:1},8,["items"])]),_:1})]),_:1})]),_:1})])}}}),Ke=fe(we,[["__scopeId","data-v-7d086ebb"]]);export{Ke as default};
