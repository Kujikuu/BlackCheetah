import{_ as E}from"./AppTextField.vue_vue_type_script_setup_true_lang-Cn0UWUmm.js";import{d as H,g as p,e as q,bb as G,be as J,aQ as Q,c as h,o as c,l as t,y as a,aR as B,i as s,k as o,a as C,h as f,G as I,t as R,s as y,av as N,a7 as F,q as _,b7 as Y,aZ as A}from"./main-CSU6kgHA.js";import{_ as Z}from"./AuthProvider.vue_vue_type_script_setup_true_lang-CsZBHNvv.js";import{a as K,b as O}from"./auth-v1-top-shape-gPxasD3d.js";import{V as P}from"./VNodeRenderer-DT2sVLvw.js";import{a as W}from"./auth-CSgWpzPG.js";import{a as X,d as ee,f as b,V as T}from"./VCard-C3SWsjmI.js";import{V as L,a as u}from"./VRow-BZVkTVe_.js";import{V as se}from"./VForm-CPwOinhh.js";import{V as ae}from"./VAlert-BMDbfCJa.js";import{V as oe}from"./VCheckbox-Cp1IBrW4.js";import{V as te}from"./form-CmgP78I7.js";import{V as U}from"./VDivider-MLBtUVJ7.js";import"./VTextField-2OrF6uJE.js";import"./VField-C0HWX8hc.js";import"./VInput-BdCPpNmf.js";import"./VCheckboxBtn-DTlNmqdA.js";import"./VSelectionControl-Co9vCtOS.js";const re={class:"auth-wrapper d-flex align-center justify-center pa-4"},le={class:"position-relative my-sm-16"},ie={class:"app-logo"},ne={class:"app-logo-title"},de={class:"d-flex justify-space-between align-start mb-4"},ue={class:"role-radio"},me={key:0,class:"radio-inner"},pe={class:"d-flex justify-space-between align-start mb-4"},ce={class:"role-radio"},fe={key:0,class:"radio-inner"},ve={class:"text-center text-base mt-6"},ye={class:"text-h4 mb-1"},_e={class:"d-flex align-center my-6"},$e=H({__name:"register",setup(be){const g=p(1),d=p(""),l=p({name:"",email:"",password:"",password_confirmation:"",role:"",privacyPolicies:!1}),V=p(!1),w=p(!1),x=p(!1),m=p(null),$=q(),{smAndUp:j}=G(),{updateAbility:D}=J(),S=v=>{d.value=v},z=()=>{d.value&&(l.value.role=d.value,g.value=2)},M=async()=>{var v;if(!l.value.privacyPolicies){m.value={general:"Please agree to the privacy policy & terms to continue."};return}x.value=!0,m.value=null;try{const e=await W.register({name:l.value.name,email:l.value.email,password:l.value.password,password_confirmation:l.value.password_confirmation,role:l.value.role});e.success&&e.data&&(A("accessToken").value=e.data.accessToken,A("userData").value=e.data.userData,A("userAbilityRules").value=e.data.userAbilityRules,D(e.data.userAbilityRules)),$.push({name:"verify-email"})}catch(e){const i=(e==null?void 0:e.data)||((v=e==null?void 0:e.response)==null?void 0:v._data)||null;i!=null&&i.errors?m.value={name:i.errors.name,email:i.errors.email,password:i.errors.password,password_confirmation:i.errors.password_confirmation,role:i.errors.role,general:i.message}:m.value={general:(i==null?void 0:i.message)||"Registration failed. Please check your details and try again."}}finally{x.value=!1}};return(v,e)=>{const i=Q("RouterLink"),k=E;return c(),h("div",re,[t("div",le,[a(s(P),{nodes:B("div",{innerHTML:s(K)}),class:"text-primary auth-v1-top-shape d-none d-sm-block"},null,8,["nodes"]),a(s(P),{nodes:B("div",{innerHTML:s(O)}),class:"text-primary auth-v1-bottom-shape d-none d-sm-block"},null,8,["nodes"]),a(T,{class:y(["auth-card",s(j)?"pa-6":"pa-0"]),"max-width":"600"},{default:o(()=>[a(X,{class:"justify-center"},{default:o(()=>[a(ee,null,{default:o(()=>[a(i,{to:"/"},{default:o(()=>[t("div",ie,[a(s(P),{nodes:s(I).app.logo},null,8,["nodes"]),t("h1",ne,R(s(I).app.title),1)])]),_:1})]),_:1})]),_:1}),s(g)===1?(c(),C(b,{key:0},{default:o(()=>[e[14]||(e[14]=t("h4",{class:"text-h4 mb-1 text-center"}," Join as a Broker or Franchisor ",-1)),e[15]||(e[15]=t("p",{class:"mb-6 text-center"}," Select your role to get started ",-1)),a(L,{class:"role-selection-cards mb-6"},{default:o(()=>[a(u,{cols:"12",sm:"6"},{default:o(()=>[a(T,{class:y(["role-card cursor-pointer",{"role-card-selected":s(d)==="franchisor"}]),variant:"outlined",onClick:e[0]||(e[0]=r=>S("franchisor"))},{default:o(()=>[a(b,{class:"pa-6"},{default:o(()=>[t("div",de,[a(N,{icon:"tabler-briefcase",size:"48",class:"text-primary"}),t("div",ue,[t("div",{class:y(["radio-outer",{"radio-selected":s(d)==="franchisor"}])},[s(d)==="franchisor"?(c(),h("div",me)):f("",!0)],2)])]),e[9]||(e[9]=t("div",{class:"text-body-1 font-weight-medium"}," I'm a franchisor, managing franchises ",-1))]),_:1,__:[9]})]),_:1},8,["class"])]),_:1}),a(u,{cols:"12",sm:"6"},{default:o(()=>[a(T,{class:y(["role-card cursor-pointer",{"role-card-selected":s(d)==="broker"}]),variant:"outlined",onClick:e[1]||(e[1]=r=>S("broker"))},{default:o(()=>[a(b,{class:"pa-6"},{default:o(()=>[t("div",pe,[a(N,{icon:"tabler-users",size:"48",class:"text-primary"}),t("div",ce,[t("div",{class:y(["radio-outer",{"radio-selected":s(d)==="broker"}])},[s(d)==="broker"?(c(),h("div",fe)):f("",!0)],2)])]),e[10]||(e[10]=t("div",{class:"text-body-1 font-weight-medium"}," I'm a broker, connecting opportunities ",-1))]),_:1,__:[10]})]),_:1},8,["class"])]),_:1})]),_:1}),a(F,{block:"",size:"large",disabled:!s(d),onClick:z},{default:o(()=>e[11]||(e[11]=[_(" Create Account ")])),_:1,__:[11]},8,["disabled"]),t("div",ve,[e[13]||(e[13]=t("span",null,"Already have an account?",-1)),a(i,{class:"text-primary ms-1",to:{name:"login"}},{default:o(()=>e[12]||(e[12]=[_(" Log In ")])),_:1,__:[12]})])]),_:1,__:[14,15]})):f("",!0),s(g)===2?(c(),C(b,{key:1},{default:o(()=>[t("h4",ye," Complete Your Registration as "+R(s(d)==="franchisor"?"Franchisor":"Broker"),1),e[16]||(e[16]=t("p",{class:"mb-0"}," Fill in your details to create your account ",-1))]),_:1,__:[16]})):f("",!0),s(g)===2?(c(),C(b,{key:2},{default:o(()=>[a(se,{onSubmit:Y(M,["prevent"])},{default:o(()=>[a(L,null,{default:o(()=>[a(u,{cols:"12"},{default:o(()=>{var r;return[(r=s(m))!=null&&r.general?(c(),C(ae,{key:0,type:"error",variant:"tonal",class:"mb-4"},{default:o(()=>{var n;return[_(R((n=s(m))==null?void 0:n.general),1)]}),_:1})):f("",!0)]}),_:1}),a(u,{cols:"12"},{default:o(()=>{var r;return[a(k,{modelValue:s(l).name,"onUpdate:modelValue":e[2]||(e[2]=n=>s(l).name=n),autofocus:"",label:"Full Name",placeholder:"Name","error-messages":(r=s(m))==null?void 0:r.name},null,8,["modelValue","error-messages"])]}),_:1}),a(u,{cols:"12"},{default:o(()=>{var r;return[a(k,{modelValue:s(l).email,"onUpdate:modelValue":e[3]||(e[3]=n=>s(l).email=n),label:"Email",type:"email",placeholder:"Email","error-messages":(r=s(m))==null?void 0:r.email},null,8,["modelValue","error-messages"])]}),_:1}),a(u,{cols:"12"},{default:o(()=>{var r;return[a(k,{modelValue:s(l).password,"onUpdate:modelValue":e[4]||(e[4]=n=>s(l).password=n),label:"Password",placeholder:"············",type:s(V)?"text":"password",autocomplete:"new-password","error-messages":(r=s(m))==null?void 0:r.password,"append-inner-icon":s(V)?"tabler-eye-off":"tabler-eye","onClick:appendInner":e[5]||(e[5]=n=>V.value=!s(V))},null,8,["modelValue","type","error-messages","append-inner-icon"]),e[17]||(e[17]=t("p",{class:"text-caption text-disabled mt-1"}," Password must be at least 8 characters and contain uppercase, lowercase, number, and special character. ",-1))]}),_:1,__:[17]}),a(u,{cols:"12"},{default:o(()=>{var r;return[a(k,{modelValue:s(l).password_confirmation,"onUpdate:modelValue":e[6]||(e[6]=n=>s(l).password_confirmation=n),label:"Confirm Password",autocomplete:"new-password",placeholder:"············",type:s(w)?"text":"password","error-messages":(r=s(m))==null?void 0:r.password_confirmation,"append-inner-icon":s(w)?"tabler-eye-off":"tabler-eye","onClick:appendInner":e[7]||(e[7]=n=>w.value=!s(w))},null,8,["modelValue","type","error-messages","append-inner-icon"])]}),_:1}),a(u,{cols:"12"},{default:o(()=>[t("div",_e,[a(oe,{id:"privacy-policy",modelValue:s(l).privacyPolicies,"onUpdate:modelValue":e[8]||(e[8]=r=>s(l).privacyPolicies=r),inline:""},null,8,["modelValue"]),a(te,{for:"privacy-policy",style:{opacity:"1"}},{default:o(()=>e[18]||(e[18]=[t("span",{class:"me-1 text-high-emphasis"},"I agree to",-1),t("a",{href:"javascript:void(0)",class:"text-primary"},"privacy policy & terms",-1)])),_:1,__:[18]})]),a(F,{block:"",type:"submit",loading:s(x),disabled:s(x)},{default:o(()=>e[19]||(e[19]=[_(" Sign up ")])),_:1,__:[19]},8,["loading","disabled"])]),_:1}),a(u,{cols:"12",class:"text-center text-base"},{default:o(()=>[e[21]||(e[21]=t("span",null,"Already have an account?",-1)),a(i,{class:"text-primary ms-1",to:{name:"login"}},{default:o(()=>e[20]||(e[20]=[_(" Sign in instead ")])),_:1,__:[20]})]),_:1,__:[21]}),a(u,{cols:"12",class:"d-flex align-center"},{default:o(()=>[a(U),e[22]||(e[22]=t("span",{class:"mx-4"},"or",-1)),a(U)]),_:1,__:[22]}),a(u,{cols:"12",class:"text-center"},{default:o(()=>[a(Z)]),_:1})]),_:1})]),_:1})]),_:1})):f("",!0)]),_:1},8,["class"])])])}}});export{$e as default};
