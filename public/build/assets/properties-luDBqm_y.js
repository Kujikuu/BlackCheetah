import{V as Pe,_ as Ue}from"./VDataTableServer-D_LCzetv.js";import{_ as oe}from"./AppTextField.vue_vue_type_script_setup_true_lang-Cn0UWUmm.js";import{_ as ae}from"./AppSelect.vue_vue_type_script_setup_true_lang-DfMDtwge.js";import{a_ as h,d as W,g,O as Q,a as M,o as L,k as o,y as t,b7 as me,i as e,a7 as z,q as w,aI as x,w as pe,av as F,l as C,t as T,E as ke,c as ie,F as we,r as Se,h as ne}from"./main-CSU6kgHA.js";import{f as De}from"./formatters-aoHiJebZ.js";import{_ as ce}from"./AppTextarea.vue_vue_type_script_setup_true_lang-yjpBO3IP.js";import{_ as fe,V as se}from"./VDialog-CdykBzC-.js";import{u as xe,a as Te}from"./useSaudiProvinces--qkjDuQK.js";import{a as $e,u as ve}from"./useValidationRules-BzjSj40d.js";import{V as j,f as O,g as re,d as ye,b as Ae,a as Ee}from"./VCard-C3SWsjmI.js";import{V as ge}from"./VForm-CPwOinhh.js";import{V as J,a as p}from"./VRow-BZVkTVe_.js";import{V as X}from"./VSpacer-BqsowJbv.js";import{V as de}from"./VDivider-MLBtUVJ7.js";import{V as qe}from"./VMenu-D1DxuMHS.js";import{V as ze,a as te,b as le}from"./VList-DCEwk4iA.js";import{V as ue}from"./VChip-5PNz7pmK.js";import"./VPagination-BoeKG-uc.js";import"./VDataTable-CQ2gcYKE.js";import"./VSelect-BqupoXgM.js";import"./VTextField-2OrF6uJE.js";import"./VField-C0HWX8hc.js";import"./form-CmgP78I7.js";import"./VInput-BdCPpNmf.js";import"./VCheckboxBtn-DTlNmqdA.js";import"./VSelectionControl-Co9vCtOS.js";import"./VTable-CJKL4Ra-.js";import"./VTextarea-UaGK6NZh.js";import"./VSlideGroup-0Gma-9UL.js";class Re{getBaseUrl(){return"/api/v1/brokers/properties"}async getProperties(f){return await h(this.getBaseUrl(),{method:"GET",query:f})}async getProperty(f){return await h(`${this.getBaseUrl()}/${f}`)}async createProperty(f){return await h(this.getBaseUrl(),{method:"POST",body:f})}async updateProperty(f,b){return await h(`${this.getBaseUrl()}/${f}`,{method:"PUT",body:b})}async deleteProperty(f){return await h(`${this.getBaseUrl()}/${f}`,{method:"DELETE"})}async bulkDelete(f){return await h(`${this.getBaseUrl()}/bulk-delete`,{method:"POST",body:{ids:f}})}async markLeased(f){return await h(`${this.getBaseUrl()}/${f}/mark-leased`,{method:"PATCH"})}}const K=new Re,n=$e(),Le=["retail","office","kiosk","food_court","standalone"],Be=["available","under_negotiation","leased","unavailable"];function _e(){return{title:[n.required("Property title is required"),n.string(),n.maxLength(255)],description:[n.required("Property description is required"),n.string(),n.maxLength(5e3)],propertyType:[n.required("Property type is required"),n.string(),n.inArray(Le,"Invalid property type selected")],sizeSqm:[n.required("Property size is required"),n.numeric(),n.min(0)],stateProvince:[n.required("State/Province is required"),n.string(),n.maxLength(255)],city:[n.required("City is required"),n.string(),n.maxLength(255)],address:[n.required("Address is required"),n.string(),n.maxLength(500)],postalCode:[n.string(),n.maxLength(20)],latitude:[n.numeric(),n.between(-90,90)],longitude:[n.numeric(),n.between(-180,180)],monthlyRent:[n.required("Monthly rent is required"),n.numeric(),n.min(0)],depositAmount:[n.numeric(),n.min(0)],leaseTermMonths:[n.integer(),n.min(1)],availableFrom:[n.date()],contactInfo:[n.string(),n.maxLength(1e3)],status:[n.string(),n.inArray(Be,"Invalid status selected")]}}function Ie(){return _e()}const he=W({__name:"CreatePropertyDialog",props:{isDialogVisible:{type:Boolean}},emits:["update:isDialogVisible","propertyCreated"],setup(B,{emit:f}){const b=B,U=f,V=g(),{backendErrors:u,setBackendErrors:E,clearError:y}=ve(),m=_e(),a=g({title:"",description:"",property_type:"retail",size_sqm:0,state_province:"",city:"",address:"",postal_code:"11111",monthly_rent:0,deposit_amount:0,lease_term_months:12,available_from:"",status:"available",amenities:[],images:[],contact_info:""}),_=g(!1),k=Q({get:()=>b.isDialogVisible,set:D=>U("update:isDialogVisible",D)}),$=()=>{a.value={title:"",description:"",property_type:"retail",size_sqm:0,state_province:"",city:"",address:"",postal_code:"11111",monthly_rent:0,deposit_amount:0,lease_term_months:12,available_from:"",status:"available",amenities:[],images:[],contact_info:""}};xe();const{provinces:A,getCitiesForProvince:c,isLoading:s}=Te(),Y=Q(()=>c(a.value.state_province||"")),P=async()=>{const{valid:D}=await V.value.validate();if(D)try{_.value=!0,(await K.createProperty(a.value)).success&&(U("propertyCreated"),k.value=!1,$())}catch(l){console.error("Error creating property:",l),E(l)}finally{_.value=!1}},S=()=>{k.value=!1,$()};return(D,l)=>{const Z=fe,q=oe,G=ce,N=ae;return L(),M(se,{modelValue:e(k),"onUpdate:modelValue":l[21]||(l[21]=d=>x(k)?k.value=d:null),"max-width":"900",persistent:""},{default:o(()=>[t(Z,{onClick:S}),t(j,{title:"Add New Property"},{default:o(()=>[t(O,null,{default:o(()=>[t(ge,{ref_key:"formRef",ref:V,onSubmit:me(P,["prevent"])},{default:o(()=>[t(J,null,{default:o(()=>[t(p,{cols:"12"},{default:o(()=>[t(q,{modelValue:e(a).title,"onUpdate:modelValue":l[0]||(l[0]=d=>e(a).title=d),label:"Property Title",placeholder:"Enter property title",rules:e(m).title,"error-messages":e(u).title,onInput:l[1]||(l[1]=d=>e(y)("title"))},null,8,["modelValue","rules","error-messages"])]),_:1}),t(p,{cols:"12"},{default:o(()=>[t(G,{modelValue:e(a).description,"onUpdate:modelValue":l[2]||(l[2]=d=>e(a).description=d),label:"Description",placeholder:"Enter property description",rows:"3",rules:e(m).description,"error-messages":e(u).description,onInput:l[3]||(l[3]=d=>e(y)("description"))},null,8,["modelValue","rules","error-messages"])]),_:1}),t(p,{cols:"12",md:"6"},{default:o(()=>[t(N,{modelValue:e(a).property_type,"onUpdate:modelValue":[l[4]||(l[4]=d=>e(a).property_type=d),l[5]||(l[5]=d=>e(y)("propertyType"))],label:"Property Type",items:[{title:"Retail",value:"retail"},{title:"Office",value:"office"},{title:"Kiosk",value:"kiosk"},{title:"Food Court",value:"food_court"},{title:"Standalone",value:"standalone"}],rules:e(m).propertyType,"error-messages":e(u).propertyType},null,8,["modelValue","rules","error-messages"])]),_:1}),t(p,{cols:"12",md:"6"},{default:o(()=>[t(q,{modelValue:e(a).size_sqm,"onUpdate:modelValue":l[6]||(l[6]=d=>e(a).size_sqm=d),label:"Size (m²)",type:"number",placeholder:"0",rules:e(m).sizeSqm,"error-messages":e(u).sizeSqm,onInput:l[7]||(l[7]=d=>e(y)("sizeSqm"))},null,8,["modelValue","rules","error-messages"])]),_:1}),t(p,{cols:"12",md:"6"},{default:o(()=>[t(q,{modelValue:e(a).monthly_rent,"onUpdate:modelValue":l[8]||(l[8]=d=>e(a).monthly_rent=d),label:"Monthly Rent (SAR)",type:"number",placeholder:"0",rules:e(m).monthlyRent,"error-messages":e(u).monthlyRent,onInput:l[9]||(l[9]=d=>e(y)("monthlyRent"))},null,8,["modelValue","rules","error-messages"])]),_:1}),t(p,{cols:"12",md:"6"},{default:o(()=>[t(q,{modelValue:e(a).deposit_amount,"onUpdate:modelValue":l[10]||(l[10]=d=>e(a).deposit_amount=d),label:"Deposit Amount (SAR)",type:"number",placeholder:"0"},null,8,["modelValue"])]),_:1}),t(p,{cols:"12",md:"6"},{default:o(()=>[t(q,{modelValue:e(a).lease_term_months,"onUpdate:modelValue":l[11]||(l[11]=d=>e(a).lease_term_months=d),label:"Lease Term (months)",type:"number",placeholder:"12"},null,8,["modelValue"])]),_:1}),t(p,{cols:"12",md:"6"},{default:o(()=>[t(q,{modelValue:e(a).available_from,"onUpdate:modelValue":l[12]||(l[12]=d=>e(a).available_from=d),label:"Available From",type:"date"},null,8,["modelValue"])]),_:1}),t(p,{cols:"12",md:"6"},{default:o(()=>[t(N,{modelValue:e(a).state_province,"onUpdate:modelValue":[l[13]||(l[13]=d=>e(a).state_province=d),l[14]||(l[14]=d=>e(y)("stateProvince"))],label:"State/Province",placeholder:"Select State/Province",items:e(A),loading:e(s),rules:e(m).stateProvince,"error-messages":e(u).stateProvince},null,8,["modelValue","items","loading","rules","error-messages"])]),_:1}),t(p,{cols:"12",md:"6"},{default:o(()=>[t(N,{modelValue:e(a).city,"onUpdate:modelValue":[l[15]||(l[15]=d=>e(a).city=d),l[16]||(l[16]=d=>e(y)("city"))],label:"City",placeholder:"Select City",items:e(Y),disabled:!e(a).state_province,rules:e(m).city,"error-messages":e(u).city},null,8,["modelValue","items","disabled","rules","error-messages"])]),_:1}),t(p,{cols:"12"},{default:o(()=>[t(q,{modelValue:e(a).address,"onUpdate:modelValue":l[17]||(l[17]=d=>e(a).address=d),label:"Address",placeholder:"Enter full address",rules:e(m).address,"error-messages":e(u).address,onInput:l[18]||(l[18]=d=>e(y)("address"))},null,8,["modelValue","rules","error-messages"])]),_:1}),t(p,{cols:"12"},{default:o(()=>[t(N,{modelValue:e(a).status,"onUpdate:modelValue":l[19]||(l[19]=d=>e(a).status=d),label:"Status",items:[{title:"Available",value:"available"},{title:"Under Negotiation",value:"under_negotiation"},{title:"Leased",value:"leased"},{title:"Unavailable",value:"unavailable"}]},null,8,["modelValue"])]),_:1}),t(p,{cols:"12"},{default:o(()=>[t(G,{modelValue:e(a).contact_info,"onUpdate:modelValue":l[20]||(l[20]=d=>e(a).contact_info=d),label:"Contact Information",placeholder:"Enter contact information",rows:"2"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},512)]),_:1}),t(re,null,{default:o(()=>[t(X),t(z,{color:"secondary",variant:"tonal",disabled:e(_),onClick:S},{default:o(()=>l[22]||(l[22]=[w(" Cancel ")])),_:1,__:[22]},8,["disabled"]),t(z,{color:"primary",loading:e(_),onClick:P},{default:o(()=>l[23]||(l[23]=[w(" Create Property ")])),_:1,__:[23]},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),Fe=W({__name:"EditPropertyDialog",props:{isDialogVisible:{type:Boolean},property:{}},emits:["update:isDialogVisible","propertyUpdated"],setup(B,{emit:f}){const b=B,U=f,V=g(),{backendErrors:u,setBackendErrors:E,clearError:y}=ve(),m=Ie(),a=g({title:"",description:"",property_type:"retail",size_sqm:0,state_province:"",city:"",address:"",postal_code:"11111",monthly_rent:0,deposit_amount:0,lease_term_months:12,available_from:"",status:"available",contact_info:""}),_=g(!1),k=Q({get:()=>b.isDialogVisible,set:c=>U("update:isDialogVisible",c)});pe(()=>b.property,c=>{c&&(a.value={title:c.title,description:c.description,property_type:c.property_type,size_sqm:c.size_sqm,state_province:c.state_province,city:c.city,address:c.address,postal_code:c.postal_code,monthly_rent:c.monthly_rent,deposit_amount:c.deposit_amount,lease_term_months:c.lease_term_months,available_from:c.available_from,status:c.status,contact_info:c.contact_info})},{immediate:!0});const $=async()=>{if(!b.property)return;const{valid:c}=await V.value.validate();if(c)try{_.value=!0,(await K.updateProperty(b.property.id,a.value)).success&&(U("propertyUpdated"),k.value=!1)}catch(s){console.error("Error updating property:",s),E(s)}finally{_.value=!1}},A=()=>{k.value=!1};return(c,s)=>{const Y=fe,P=oe,S=ce,D=ae;return L(),M(se,{modelValue:e(k),"onUpdate:modelValue":s[23]||(s[23]=l=>x(k)?k.value=l:null),"max-width":"900",persistent:""},{default:o(()=>[t(Y,{onClick:A}),t(j,{title:"Edit Property"},{default:o(()=>[t(O,null,{default:o(()=>[t(ge,{ref_key:"formRef",ref:V,onSubmit:me($,["prevent"])},{default:o(()=>[t(J,null,{default:o(()=>[t(p,{cols:"12"},{default:o(()=>[t(P,{modelValue:e(a).title,"onUpdate:modelValue":s[0]||(s[0]=l=>e(a).title=l),label:"Property Title",placeholder:"Enter property title",rules:e(m).title,"error-messages":e(u).title,onInput:s[1]||(s[1]=l=>e(y)("title"))},null,8,["modelValue","rules","error-messages"])]),_:1}),t(p,{cols:"12"},{default:o(()=>[t(S,{modelValue:e(a).description,"onUpdate:modelValue":s[2]||(s[2]=l=>e(a).description=l),label:"Description",placeholder:"Enter property description",rows:"3",rules:e(m).description,"error-messages":e(u).description,onInput:s[3]||(s[3]=l=>e(y)("description"))},null,8,["modelValue","rules","error-messages"])]),_:1}),t(p,{cols:"12",md:"6"},{default:o(()=>[t(D,{modelValue:e(a).property_type,"onUpdate:modelValue":[s[4]||(s[4]=l=>e(a).property_type=l),s[5]||(s[5]=l=>e(y)("propertyType"))],label:"Property Type",items:[{title:"Retail",value:"retail"},{title:"Office",value:"office"},{title:"Kiosk",value:"kiosk"},{title:"Food Court",value:"food_court"},{title:"Standalone",value:"standalone"}],rules:e(m).propertyType,"error-messages":e(u).propertyType},null,8,["modelValue","rules","error-messages"])]),_:1}),t(p,{cols:"12",md:"6"},{default:o(()=>[t(P,{modelValue:e(a).size_sqm,"onUpdate:modelValue":s[6]||(s[6]=l=>e(a).size_sqm=l),label:"Size (m²)",type:"number",placeholder:"0",rules:e(m).sizeSqm,"error-messages":e(u).sizeSqm,onInput:s[7]||(s[7]=l=>e(y)("sizeSqm"))},null,8,["modelValue","rules","error-messages"])]),_:1}),t(p,{cols:"12",md:"6"},{default:o(()=>[t(P,{modelValue:e(a).monthly_rent,"onUpdate:modelValue":s[8]||(s[8]=l=>e(a).monthly_rent=l),label:"Monthly Rent (SAR)",type:"number",placeholder:"0",rules:e(m).monthlyRent,"error-messages":e(u).monthlyRent,onInput:s[9]||(s[9]=l=>e(y)("monthlyRent"))},null,8,["modelValue","rules","error-messages"])]),_:1}),t(p,{cols:"12",md:"6"},{default:o(()=>[t(P,{modelValue:e(a).deposit_amount,"onUpdate:modelValue":s[10]||(s[10]=l=>e(a).deposit_amount=l),label:"Deposit Amount (SAR)",type:"number",placeholder:"0"},null,8,["modelValue"])]),_:1}),t(p,{cols:"12",md:"6"},{default:o(()=>[t(P,{modelValue:e(a).lease_term_months,"onUpdate:modelValue":s[11]||(s[11]=l=>e(a).lease_term_months=l),label:"Lease Term (months)",type:"number",placeholder:"12"},null,8,["modelValue"])]),_:1}),t(p,{cols:"12",md:"6"},{default:o(()=>[t(P,{modelValue:e(a).available_from,"onUpdate:modelValue":s[12]||(s[12]=l=>e(a).available_from=l),label:"Available From",type:"date"},null,8,["modelValue"])]),_:1}),t(p,{cols:"12",md:"6"},{default:o(()=>[t(P,{modelValue:e(a).state_province,"onUpdate:modelValue":s[13]||(s[13]=l=>e(a).state_province=l),label:"State/Province",placeholder:"Enter state/province",rules:e(m).stateProvince,"error-messages":e(u).stateProvince,onInput:s[14]||(s[14]=l=>e(y)("stateProvince"))},null,8,["modelValue","rules","error-messages"])]),_:1}),t(p,{cols:"12",md:"6"},{default:o(()=>[t(P,{modelValue:e(a).city,"onUpdate:modelValue":s[15]||(s[15]=l=>e(a).city=l),label:"City",placeholder:"Enter city",rules:e(m).city,"error-messages":e(u).city,onInput:s[16]||(s[16]=l=>e(y)("city"))},null,8,["modelValue","rules","error-messages"])]),_:1}),t(p,{cols:"12",md:"6"},{default:o(()=>[t(P,{modelValue:e(a).postal_code,"onUpdate:modelValue":s[17]||(s[17]=l=>e(a).postal_code=l),label:"Postal Code",placeholder:"Enter postal code",rules:e(m).postalCode,"error-messages":e(u).postalCode,onInput:s[18]||(s[18]=l=>e(y)("postalCode"))},null,8,["modelValue","rules","error-messages"])]),_:1}),t(p,{cols:"12"},{default:o(()=>[t(P,{modelValue:e(a).address,"onUpdate:modelValue":s[19]||(s[19]=l=>e(a).address=l),label:"Address",placeholder:"Enter full address",rules:e(m).address,"error-messages":e(u).address,onInput:s[20]||(s[20]=l=>e(y)("address"))},null,8,["modelValue","rules","error-messages"])]),_:1}),t(p,{cols:"12"},{default:o(()=>[t(D,{modelValue:e(a).status,"onUpdate:modelValue":s[21]||(s[21]=l=>e(a).status=l),label:"Status",items:[{title:"Available",value:"available"},{title:"Under Negotiation",value:"under_negotiation"},{title:"Leased",value:"leased"},{title:"Unavailable",value:"unavailable"}]},null,8,["modelValue"])]),_:1}),t(p,{cols:"12"},{default:o(()=>[t(S,{modelValue:e(a).contact_info,"onUpdate:modelValue":s[22]||(s[22]=l=>e(a).contact_info=l),label:"Contact Information",placeholder:"Enter contact information",rows:"2"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},512)]),_:1}),t(re,null,{default:o(()=>[t(X),t(z,{color:"secondary",variant:"tonal",disabled:e(_),onClick:A},{default:o(()=>s[24]||(s[24]=[w(" Cancel ")])),_:1,__:[24]},8,["disabled"]),t(z,{color:"primary",loading:e(_),onClick:$},{default:o(()=>s[25]||(s[25]=[w(" Update Property ")])),_:1,__:[25]},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),Ne={class:"font-weight-medium"},Me=W({__name:"DeletePropertyDialog",props:{isDialogVisible:{type:Boolean},property:{}},emits:["update:isDialogVisible","propertyDeleted"],setup(B,{emit:f}){const b=B,U=f,V=g(!1),u=Q({get:()=>b.isDialogVisible,set:m=>U("update:isDialogVisible",m)}),E=async()=>{if(b.property)try{V.value=!0,(await K.deleteProperty(b.property.id)).success&&(U("propertyDeleted"),u.value=!1)}catch(m){console.error("Error deleting property:",m)}finally{V.value=!1}},y=()=>{u.value=!1};return(m,a)=>(L(),M(se,{modelValue:e(u),"onUpdate:modelValue":a[0]||(a[0]=_=>x(u)?u.value=_:null),"max-width":"500"},{default:o(()=>[t(j,null,{default:o(()=>[t(ye,{class:"d-flex align-center gap-2"},{default:o(()=>[t(F,{icon:"tabler-alert-circle",color:"error",size:"24"}),a[1]||(a[1]=w(" Confirm Deletion "))]),_:1,__:[1]}),t(O,null,{default:o(()=>{var _;return[a[2]||(a[2]=C("p",{class:"mb-2"}," Are you sure you want to delete this property? ",-1)),C("p",Ne,T((_=m.property)==null?void 0:_.title),1),a[3]||(a[3]=C("p",{class:"text-sm text-error mt-2"}," This action cannot be undone. ",-1))]}),_:1,__:[2,3]}),t(re,null,{default:o(()=>[t(X),t(z,{color:"secondary",variant:"tonal",disabled:e(V),onClick:y},{default:o(()=>a[4]||(a[4]=[w(" Cancel ")])),_:1,__:[4]},8,["disabled"]),t(z,{color:"error",loading:e(V),onClick:E},{default:o(()=>a[5]||(a[5]=[w(" Delete Property ")])),_:1,__:[5]},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),Oe={class:"d-flex mb-6"},Ke={class:"d-flex justify-space-between"},Ye={class:"d-flex flex-column gap-y-1"},je={class:"text-body-1 text-high-emphasis"},Ge={class:"text-h4"},He={class:"me-3 d-flex gap-3"},Qe={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},Je={style:{"inline-size":"15.625rem"}},We={class:"text-body-1 font-weight-medium"},Xe={class:"text-body-1 font-weight-medium"},Ze={class:"text-body-2"},et={class:"text-body-1 font-weight-medium"},tt={class:"text-body-2"},lt={class:"text-body-2"},Et=W({__name:"properties",setup(B){const f=g(""),b=g(""),U=g(""),V=g(10),u=g(1),E=g(),y=g(),m=g([]),a=g(!1),_=g([]),k=g(0),$=g(!1),A=g(!1),c=g(!1),s=g(null),Y=[{title:"#",key:"index",sortable:!1},{title:"Title",key:"title"},{title:"Type",key:"property_type"},{title:"Location",key:"city"},{title:"Monthly Rent",key:"monthly_rent"},{title:"Size (m²)",key:"size_sqm"},{title:"Status",key:"status"},{title:"Created",key:"created_at"},{title:"Actions",key:"actions",sortable:!1}],P=g([{title:"Total Properties",value:"0",change:0,icon:"tabler-building",iconColor:"primary"},{title:"Available",value:"0",change:0,icon:"tabler-home-check",iconColor:"success"},{title:"Leased",value:"0",change:0,icon:"tabler-home-hand",iconColor:"info"},{title:"Under Negotiation",value:"0",change:0,icon:"tabler-message-circle",iconColor:"warning"}]),S=async()=>{try{a.value=!0;const v={page:u.value,per_page:V.value};f.value&&(v.search=f.value),b.value&&(v.status=b.value),U.value&&(v.property_type=U.value),E.value&&(v.sortBy=E.value),y.value&&(v.orderBy=y.value);const i=await K.getProperties(v);i.success&&i.data&&(_.value=i.data.data||[],k.value=i.data.total||0)}catch(v){console.error("Error fetching properties:",v)}finally{a.value=!1}},D=async()=>{const v=_.value.length,i=_.value.filter(I=>I.status==="available").length,R=_.value.filter(I=>I.status==="leased").length,ee=_.value.filter(I=>I.status==="under_negotiation").length;P.value=[{title:"Total Properties",value:String(v),change:0,icon:"tabler-building",iconColor:"primary"},{title:"Available",value:String(i),change:0,icon:"tabler-home-check",iconColor:"success"},{title:"Leased",value:String(R),change:0,icon:"tabler-home-hand",iconColor:"info"},{title:"Under Negotiation",value:String(ee),change:0,icon:"tabler-message-circle",iconColor:"warning"}]},l=v=>{s.value=v,A.value=!0},Z=v=>{s.value=v,c.value=!0},q=async()=>{await S(),await D(),$.value=!1},G=async()=>{await S(),await D(),A.value=!1},N=async()=>{await S(),await D(),c.value=!1},d=async()=>{if(m.value.length!==0)try{(await K.bulkDelete(m.value)).success&&(await S(),await D(),m.value=[])}catch(v){console.error("Error bulk deleting properties:",v)}},be=async v=>{try{(await K.markLeased(v.id)).success&&(await S(),await D())}catch(i){console.error("Error marking property as leased:",i)}},Ve=v=>{var i,R;E.value=(i=v.sortBy[0])==null?void 0:i.key,y.value=(R=v.sortBy[0])==null?void 0:R.order,S()},Ce=v=>new Date(v).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return ke(async()=>{await S(),await D()}),pe([f,b,U],()=>{u.value=1,S()}),(v,i)=>{const R=ae,ee=oe,I=Ue;return L(),ie("section",null,[C("div",Oe,[t(J,null,{default:o(()=>[(L(!0),ie(we,null,Se(e(P),(r,H)=>(L(),M(p,{key:H,cols:"12",md:"3",sm:"6"},{default:o(()=>[t(j,null,{default:o(()=>[t(O,null,{default:o(()=>[C("div",Ke,[C("div",Ye,[C("div",je,T(r.title),1),C("h4",Ge,T(r.value),1)]),t(Ae,{color:r.iconColor,variant:"tonal",rounded:"",size:"42"},{default:o(()=>[t(F,{icon:r.icon,size:"26"},null,8,["icon"])]),_:2},1032,["color"])])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),t(j,null,{default:o(()=>[t(Ee,{class:"pb-4"},{default:o(()=>[t(ye,null,{default:o(()=>i[12]||(i[12]=[w("Filters")])),_:1,__:[12]})]),_:1}),t(O,null,{default:o(()=>[t(J,null,{default:o(()=>[t(p,{cols:"12",sm:"3"},{default:o(()=>[t(R,{modelValue:e(b),"onUpdate:modelValue":i[0]||(i[0]=r=>x(b)?b.value=r:null),placeholder:"Select Status",items:[{title:"Available",value:"available"},{title:"Under Negotiation",value:"under_negotiation"},{title:"Leased",value:"leased"},{title:"Unavailable",value:"unavailable"}],clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1}),t(p,{cols:"12",sm:"3"},{default:o(()=>[t(R,{modelValue:e(U),"onUpdate:modelValue":i[1]||(i[1]=r=>x(U)?U.value=r:null),placeholder:"Property Type",items:[{title:"Retail",value:"retail"},{title:"Office",value:"office"},{title:"Kiosk",value:"kiosk"},{title:"Food Court",value:"food_court"},{title:"Standalone",value:"standalone"}],clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(de),t(O,{class:"d-flex flex-wrap gap-4"},{default:o(()=>[C("div",He,[t(R,{"model-value":e(V),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"}],style:{"inline-size":"6.25rem"},"onUpdate:modelValue":i[2]||(i[2]=r=>V.value=parseInt(r,10))},null,8,["model-value"]),e(m).length>0?(L(),M(z,{key:0,variant:"tonal",color:"error",onClick:d},{default:o(()=>[t(F,{icon:"tabler-trash",class:"me-2"}),w(" Delete Selected ("+T(e(m).length)+") ",1)]),_:1})):ne("",!0)]),t(X),C("div",Qe,[C("div",Je,[t(ee,{modelValue:e(f),"onUpdate:modelValue":i[3]||(i[3]=r=>x(f)?f.value=r:null),placeholder:"Search Properties","prepend-inner-icon":"tabler-search"},null,8,["modelValue"])]),t(z,{"prepend-icon":"tabler-plus",onClick:i[4]||(i[4]=r=>$.value=!0)},{default:o(()=>i[13]||(i[13]=[w(" Add Property ")])),_:1,__:[13]})])]),_:1}),t(de),t(Pe,{"items-per-page":e(V),"onUpdate:itemsPerPage":i[6]||(i[6]=r=>x(V)?V.value=r:null),"model-value":e(m),"onUpdate:modelValue":i[7]||(i[7]=r=>x(m)?m.value=r:null),page:e(u),"onUpdate:page":i[8]||(i[8]=r=>x(u)?u.value=r:null),items:e(_),"item-value":"id","items-length":e(k),headers:Y,loading:e(a),class:"text-no-wrap","show-select":"","onUpdate:options":Ve},{"item.index":o(({index:r})=>[C("div",We,T((e(u)-1)*e(V)+r+1),1)]),"item.title":o(({item:r})=>[C("div",Xe,T(r.title),1)]),"item.property_type":o(({item:r})=>[t(ue,{size:"small",color:"primary",variant:"tonal"},{default:o(()=>[w(T(r.property_type),1)]),_:2},1024)]),"item.city":o(({item:r})=>[C("div",Ze,T(r.city),1)]),"item.monthly_rent":o(({item:r})=>[C("div",et,T(e(De)(r.monthly_rent)),1)]),"item.size_sqm":o(({item:r})=>[C("div",tt,T(r.size_sqm)+" m² ",1)]),"item.status":o(({item:r})=>[t(ue,{size:"small",color:r.status==="available"?"success":r.status==="leased"?"info":r.status==="under_negotiation"?"warning":"error",variant:"tonal"},{default:o(()=>[w(T(r.status.replace("_"," ")),1)]),_:2},1032,["color"])]),"item.created_at":o(({item:r})=>[C("div",lt,T(Ce(r.created_at)),1)]),"item.actions":o(({item:r})=>[t(z,{icon:"",variant:"text",color:"medium-emphasis",size:"small"},{default:o(()=>[t(F,{icon:"tabler-dots-vertical"}),t(qe,{activator:"parent"},{default:o(()=>[t(ze,null,{default:o(()=>[t(te,{onClick:H=>l(r)},{prepend:o(()=>[t(F,{icon:"tabler-edit"})]),default:o(()=>[t(le,null,{default:o(()=>i[14]||(i[14]=[w("Edit")])),_:1,__:[14]})]),_:2},1032,["onClick"]),r.status!=="leased"?(L(),M(te,{key:0,onClick:H=>be(r)},{prepend:o(()=>[t(F,{icon:"tabler-home-check"})]),default:o(()=>[t(le,null,{default:o(()=>i[15]||(i[15]=[w("Mark as Leased")])),_:1,__:[15]})]),_:2},1032,["onClick"])):ne("",!0),t(te,{onClick:H=>Z(r)},{prepend:o(()=>[t(F,{icon:"tabler-trash",color:"error"})]),default:o(()=>[t(le,{class:"text-error"},{default:o(()=>i[16]||(i[16]=[w(" Delete ")])),_:1,__:[16]})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:o(()=>[t(I,{page:e(u),"onUpdate:page":i[5]||(i[5]=r=>x(u)?u.value=r:null),"items-per-page":e(V),"total-items":e(k)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","model-value","page","items","items-length","loading"])]),_:1}),t(he,{"is-dialog-visible":e($),"onUpdate:isDialogVisible":i[9]||(i[9]=r=>x($)?$.value=r:null),onPropertyCreated:q},null,8,["is-dialog-visible"]),t(Fe,{"is-dialog-visible":e(A),"onUpdate:isDialogVisible":i[10]||(i[10]=r=>x(A)?A.value=r:null),property:e(s),onPropertyUpdated:G},null,8,["is-dialog-visible","property"]),t(Me,{"is-dialog-visible":e(c),"onUpdate:isDialogVisible":i[11]||(i[11]=r=>x(c)?c.value=r:null),property:e(s),onPropertyDeleted:N},null,8,["is-dialog-visible","property"])])}}});export{Et as default};
