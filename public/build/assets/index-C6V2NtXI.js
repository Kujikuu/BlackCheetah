import{u as Q}from"./useFranchisorDashboard-C_GBiZfT.js";import{d as Y,e as G,g as J,O as K,E as U,c as m,o as l,a as p,h as g,y as e,i as r,k as t,l as o,q as n,t as i,a7 as x,F as k,r as C,bf as S,av as _,s as X}from"./main-DTJHMfaq.js";import{f as Z}from"./franchise-D_zzTmGQ.js";import{f as ee}from"./formatters--UtN2sCw.js";import{S as R}from"./saudi-riyal-D7scO9iM.js";import{a as B,V as D}from"./VAlert-DXxTS-yG.js";import{a as c,V as y}from"./VRow-vWSGPnzR.js";import{V as d,f as u,b as N,a as F,d as M}from"./VCard-BEgq0Zx7.js";import{V as te,a as L,b as O,c as se}from"./VList-Ep_DohB9.js";import{V as ae}from"./VDivider-zvRfNiVO.js";import{_ as oe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./lead-DLFCcCb-.js";import"./api-router-zf5lUZNn.js";import"./users-DEbK5f4r.js";/* empty css              */const re={class:"mb-3"},le={class:"d-flex align-center justify-space-between"},ne={class:"text-h2 mb-1"},ie={class:"d-flex align-center gap-3"},ce={class:"ms-4"},de={class:"text-body-2 text-disabled"},ue={class:"d-flex align-center flex-wrap"},fe={class:"text-h4 me-2"},me={class:"text-body-2 text-disabled"},pe={class:"text-body-2 font-weight-medium"},be=Y({__name:"index",setup(_e){const h=G(),T=J("Franchisor"),{isLoading:V,error:A,dashboardStats:v,brokers:I,recentActivities:w,isProfileComplete:$,dismissBanner:P,initializeDashboard:E,refreshDashboard:z}=Q(),j=K(()=>v.value?[{title:"Total Leads",value:v.value.totalLeads.toString(),change:0,desc:"Active leads in pipeline",icon:"tabler-users",iconColor:"primary"},{title:"Active Tasks",value:v.value.activeTasks.toString(),change:0,desc:"Ongoing operations",icon:"tabler-settings",iconColor:"success"},{title:"Brokers",value:I.value.length.toString(),change:0,desc:"Active brokers",icon:"tabler-user-check",iconColor:"info"},{title:"Monthly Revenue",value:ee(v.value.currentMonthRevenue,"SAR",!1),change:v.value.revenueChange,desc:"This month's revenue",icon:R,iconColor:"warning"}]:[{title:"Total Leads",value:"0",change:0,desc:"Active leads in pipeline",icon:"tabler-users",iconColor:"primary"},{title:"Active Tasks",value:"0",change:0,desc:"Ongoing operations",icon:"tabler-settings",iconColor:"success"},{title:"Brokers",value:"0",change:0,desc:"Active team members",icon:"tabler-user-check",iconColor:"info"},{title:"Monthly Revenue",value:"SAR0",change:0,desc:"This month's revenue",icon:R,iconColor:"warning"}]),q=[{title:"Add New Lead",icon:"tabler-user-plus",color:"primary",to:"/franchisor/add-lead"},{title:"Manage Leads",icon:"tabler-users",color:"success",to:"/franchisor/lead-management"},{title:"View Operations",icon:"tabler-settings",color:"info",to:"/franchisor/dashboard/operations"},{title:"Brokers",icon:"tabler-user-check",color:"warning",to:"/franchisor/brokers"}],W=()=>{h.push("/franchisor/franchise-registration")},H=async()=>{try{const f=await Z.getFranchiseData();f.success&&f.data&&f.data.franchise&&(T.value=f.data.franchise.franchiseDetails.franchiseName||"Franchisor")}catch(f){console.error("Error fetching franchise name:",f)}};return U(async()=>{await Promise.all([E(),H()])}),(f,s)=>(l(),m("section",null,[r(A)?(l(),p(D,{key:0,type:"error",variant:"tonal",class:"mb-6",closable:"","onClick:close":s[0]||(s[0]=a=>A.value=null)},{default:t(()=>[e(B,{class:"mb-2"},{default:t(()=>s[4]||(s[4]=[n(" Error Loading Dashboard ")])),_:1,__:[4]}),o("p",re,i(r(A)),1),e(x,{color:"error",variant:"elevated",size:"small",onClick:r(z)},{default:t(()=>s[5]||(s[5]=[n(" Retry ")])),_:1,__:[5]},8,["onClick"])]),_:1})):g("",!0),r($)?g("",!0):(l(),p(D,{key:1,type:"warning",variant:"tonal",class:"mb-6",closable:"","onClick:close":r(P)},{default:t(()=>[e(B,{class:"mb-2"},{default:t(()=>s[6]||(s[6]=[n(" Complete Your Franchise Profile ")])),_:1,__:[6]}),s[8]||(s[8]=o("p",{class:"mb-3"}," Welcome to your franchisor dashboard! To get started and unlock all features, please complete your franchise registration process. ",-1)),e(x,{color:"info",variant:"elevated",size:"small",onClick:W},{default:t(()=>s[7]||(s[7]=[n(" Complete Onboarding Process ")])),_:1,__:[7]})]),_:1,__:[8]},8,["onClick:close"])),e(y,{class:"mb-6"},{default:t(()=>[e(c,{cols:"12"},{default:t(()=>[o("div",le,[o("div",null,[o("h2",ne,i(r(T)),1),s[9]||(s[9]=o("p",{class:"text-body-1 text-medium-emphasis"}," Welcome back! Here's what's happening with your franchise. ",-1))]),o("div",ie,[r(V)?g("",!0):(l(),p(x,{key:0,color:"secondary",variant:"outlined","prepend-icon":"tabler-refresh",onClick:r(z)},{default:t(()=>s[10]||(s[10]=[n(" Refresh ")])),_:1,__:[10]},8,["onClick"])),e(x,{color:"primary","prepend-icon":"tabler-plus",to:"/franchisor/add-lead"},{default:t(()=>s[11]||(s[11]=[n(" Add New Lead ")])),_:1,__:[11]})])])]),_:1})]),_:1}),e(y,{class:"mb-6"},{default:t(()=>[r(V)?(l(),m(k,{key:0},C(4,a=>e(c,{key:`loading-${a}`,cols:"12",md:"3",sm:"6"},{default:t(()=>[e(d,null,{default:t(()=>[e(u,{class:"d-flex align-center justify-center",style:{"min-height":"100px"}},{default:t(()=>[e(S,{indeterminate:"",color:"primary"})]),_:1})]),_:1})]),_:2},1024)),64)):(l(!0),m(k,{key:1},C(r(j),(a,b)=>(l(),p(c,{key:b,cols:"12",md:"3",sm:"6"},{default:t(()=>[e(d,null,{default:t(()=>[e(u,{class:"d-flex align-center"},{default:t(()=>[e(N,{size:"44",rounded:"",color:a.iconColor,variant:"tonal"},{default:t(()=>[e(_,{icon:a.icon,size:"26"},null,8,["icon"])]),_:2},1032,["color"]),o("div",ce,[o("div",de,i(a.title),1),o("div",ue,[o("h4",fe,i(a.value),1),a.change!==0?(l(),m("div",{key:0,class:X(["text-body-2",a.change>0?"text-success":"text-error"])},i(a.change>0?"+":"")+i(a.change)+"% ",3)):g("",!0)]),o("div",me,i(a.desc),1)])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),e(y,null,{default:t(()=>[e(c,{cols:"12",md:"6"},{default:t(()=>[e(d,null,{default:t(()=>[e(F,{class:"pb-4"},{default:t(()=>[e(M,null,{default:t(()=>s[12]||(s[12]=[n("Quick Actions")])),_:1,__:[12]})]),_:1}),e(u,null,{default:t(()=>[e(y,null,{default:t(()=>[(l(),m(k,null,C(q,(a,b)=>e(c,{key:b,cols:"6"},{default:t(()=>[e(d,{variant:"tonal",color:a.color,class:"cursor-pointer",onClick:he=>r(h).push(a.to)},{default:t(()=>[e(u,{class:"text-center pa-4"},{default:t(()=>[e(_,{icon:a.icon,size:"32",class:"mb-2"},null,8,["icon"]),o("div",pe,i(a.title),1)]),_:2},1024)]),_:2},1032,["color","onClick"])]),_:2},1024)),64))]),_:1})]),_:1})]),_:1})]),_:1}),e(c,{cols:"12",md:"6"},{default:t(()=>[e(d,null,{default:t(()=>[e(F,{class:"pb-4"},{default:t(()=>[e(M,null,{default:t(()=>s[13]||(s[13]=[n("Recent Activity")])),_:1,__:[13]})]),_:1}),e(u,null,{default:t(()=>[e(te,{class:"card-list"},{default:t(()=>[r(V)?(l(),p(L,{key:0,class:"text-center py-8"},{default:t(()=>[e(S,{indeterminate:"",color:"primary"}),s[14]||(s[14]=o("div",{class:"mt-2 text-body-2 text-disabled"}," Loading recent activities... ",-1))]),_:1,__:[14]})):r(w).length>0?(l(!0),m(k,{key:1},C(r(w),(a,b)=>(l(),m(k,{key:b},[e(L,null,{prepend:t(()=>[e(N,{size:"32",color:a.color,variant:"tonal"},{default:t(()=>[e(_,{icon:a.icon,size:"18"},null,8,["icon"])]),_:2},1032,["color"])]),default:t(()=>[e(O,{class:"text-body-2 font-weight-medium"},{default:t(()=>[n(i(a.title),1)]),_:2},1024),e(se,{class:"text-body-2"},{default:t(()=>[n(i(a.time),1)]),_:2},1024)]),_:2},1024),b!==r(w).length-1?(l(),p(ae,{key:0})):g("",!0)],64))),128)):(l(),p(L,{key:2},{default:t(()=>[e(O,{class:"text-center text-disabled"},{default:t(()=>s[15]||(s[15]=[n(" No recent activities ")])),_:1,__:[15]})]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(y,{class:"mt-6"},{default:t(()=>[e(c,{cols:"12",md:"4"},{default:t(()=>[e(d,{class:"cursor-pointer",onClick:s[1]||(s[1]=a=>r(h).push("/franchisor/dashboard/leads"))},{default:t(()=>[e(u,{class:"text-center pa-6"},{default:t(()=>[e(_,{icon:"tabler-users",size:"48",color:"primary",class:"mb-4"}),s[16]||(s[16]=o("h5",{class:"text-h5 mb-2"}," Leads Dashboard ",-1)),s[17]||(s[17]=o("p",{class:"text-body-2 text-disabled mb-0"}," Manage and track all your leads ",-1))]),_:1,__:[16,17]})]),_:1})]),_:1}),e(c,{cols:"12",md:"4"},{default:t(()=>[e(d,{class:"cursor-pointer",onClick:s[2]||(s[2]=a=>r(h).push("/franchisor/dashboard/operations"))},{default:t(()=>[e(u,{class:"text-center pa-6"},{default:t(()=>[e(_,{icon:"tabler-settings",size:"48",color:"success",class:"mb-4"}),s[18]||(s[18]=o("h5",{class:"text-h5 mb-2"}," Operations Dashboard ",-1)),s[19]||(s[19]=o("p",{class:"text-body-2 text-disabled mb-0"}," Monitor operational activities ",-1))]),_:1,__:[18,19]})]),_:1})]),_:1}),e(c,{cols:"12",md:"4"},{default:t(()=>[e(d,{class:"cursor-pointer",onClick:s[3]||(s[3]=a=>r(h).push("/franchisor/brokers"))},{default:t(()=>[e(u,{class:"text-center pa-6"},{default:t(()=>[e(_,{icon:"tabler-user-check",size:"48",color:"info",class:"mb-4"}),s[20]||(s[20]=o("h5",{class:"text-h5 mb-2"}," Brokers ",-1)),s[21]||(s[21]=o("p",{class:"text-body-2 text-disabled mb-0"}," Manage your brokers ",-1))]),_:1,__:[20,21]})]),_:1})]),_:1})]),_:1})]))}}),De=oe(be,[["__scopeId","data-v-83c3726b"]]);export{De as default};
