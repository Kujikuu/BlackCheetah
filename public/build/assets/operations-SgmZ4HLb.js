import{m as G}from"./vue3-apexcharts-Bdw0aS-j.js";import{a as J,b as K}from"./apexCharConfig-CsiCi627.js";import{f as Q}from"./franchisee-dashboard-hElz2m-q.js";import{a as _,V as x}from"./VRow-DQylzCgd.js";import{V as h,f as g,b as L,a as T,d as z}from"./VCard-BQn_ZwHQ.js";import{d as X,g as d,aF as Y,E as Z,O as v,c as i,o as n,a as u,k as e,y as t,l as o,aD as w,q as c,t as r,a7 as ee,av as b,F as I,r as D,s as E}from"./main-CEM1QI86.js";import{V as te}from"./VAlert-D7jBKg4h.js";import{V as ae,a as le}from"./VTabs-Bxes0duv.js";import{a as F,V as oe}from"./VWindowItem-DfjmoSwF.js";import{V as se,a as ne,b as re,c as ie}from"./VList-DLC3F4tN.js";import"./_commonjsHelpers-CqkleIqs.js";import"./api-router-Bcbe8RlT.js";/* empty css              */import"./forwardRefs-B931MWyl.js";import"./VSlideGroup-Cc3zlOOJ.js";import"./scopeId-DY8qXCsp.js";import"./VDivider-MM1jTXpn.js";const ue={key:2},de={class:"d-flex mb-6"},ce={class:"d-flex justify-space-between"},me={class:"d-flex flex-column gap-y-1"},fe={class:"text-body-1 text-high-emphasis"},ve={class:"d-flex gap-x-2 align-center"},pe={class:"text-h4"},_e={class:"text-sm"},he={key:1,class:"text-center py-8"},ge={class:"d-flex mb-6"},ye={class:"d-flex justify-space-between"},xe={class:"d-flex flex-column gap-y-1"},be={class:"text-body-1 text-high-emphasis"},ke={class:"d-flex gap-x-2 align-center"},Ce={class:"text-h4"},Se={class:"text-sm"},Ve={class:"text-sm font-weight-medium"},we={class:"text-end"},Ie={class:"text-body-1 font-weight-medium"},De={key:1,class:"text-center py-8"},Ae={key:1},Le={key:1,class:"text-center py-8"},Ke=X({__name:"operations",setup(Te){const k=d("store"),N=Y(),p=d(!1),C=d(null),A=d(!1),P=s=>s>0?`+${s}`:s.toString(),y=d({totalItems:0,totalStocks:0,lowStockItems:0,outOfStockItems:0}),m=d({totalStaffs:0,newHires:0,monthlyAbsenteeismRate:0,topPerformers:[]}),S=d([{name:"Intake",data:[0,0,0,0,0,0,0,0,0,0,0,0]},{name:"Available",data:[0,0,0,0,0,0,0,0,0,0,0,0]}]),V=d([{name:"Morning Shift",data:[0,0,0,0,0,0,0]},{name:"Afternoon Shift",data:[0,0,0,0,0,0,0]},{name:"Evening Shift",data:[0,0,0,0,0,0,0]},{name:"Night Shift",data:[0,0,0,0,0,0,0]}]),R=async()=>{p.value=!0,C.value=null;try{const s=await Q.getOperationsData();if(s.success&&s.data){const a=s.data;y.value=a.storeData,m.value=a.staffData,S.value=a.lowStockChart,V.value=a.shiftCoverageChart,A.value=!0}}catch(s){C.value="Failed to load operations data. Please try again.",console.error("Error loading operations data:",s)}finally{p.value=!1}};Z(()=>{R()});const O=v(()=>J(N.current.value)),W=v(()=>K(N.current.value)),H=v(()=>!p.value&&A.value&&S.value.length>0&&S.value.every(s=>s.data&&Array.isArray(s.data)&&s.data.length>0&&s.data.every(a=>typeof a=="number"&&!Number.isNaN(a)))),M=v(()=>!p.value&&A.value&&V.value.length>0&&V.value.every(s=>s.data&&Array.isArray(s.data)&&s.data.length>0&&s.data.every(a=>typeof a=="number"&&!Number.isNaN(a)))),j=v(()=>[{title:"Total Items",value:y.value.totalItems.toLocaleString(),change:5,desc:"Inventory items",icon:"tabler-package",iconColor:"primary"},{title:"Total Stocks",value:y.value.totalStocks.toLocaleString(),change:12,desc:"Stock quantity",icon:"tabler-stack",iconColor:"success"},{title:"Low Stock Items",value:y.value.lowStockItems.toString(),change:-8,desc:"Items running low",icon:"tabler-alert-triangle",iconColor:"warning"},{title:"Out of Stock",value:y.value.outOfStockItems.toString(),change:-15,desc:"Items unavailable",icon:"tabler-x-circle",iconColor:"error"}]),q=v(()=>[{title:"Total Staffs",value:m.value.totalStaffs.toString(),change:8,desc:"Active employees",icon:"tabler-users",iconColor:"primary"},{title:"New Hires",value:m.value.newHires.toString(),change:25,desc:"This month",icon:"tabler-user-plus",iconColor:"success"},{title:"Absenteeism Rate",value:`${m.value.monthlyAbsenteeismRate.toFixed(1)}%`,change:-12,desc:"Monthly average",icon:"tabler-user-x",iconColor:"warning"}]),U=v(()=>m.value.topPerformers&&m.value.topPerformers.length>0),$=[{title:"Store",value:"store",icon:"tabler-building-store"},{title:"Staff",value:"staff",icon:"tabler-user"}];return(s,a)=>{const B=G;return n(),i("section",null,[p.value?(n(),u(x,{key:0,class:"mb-6"},{default:e(()=>[t(_,{cols:"12"},{default:e(()=>[t(h,null,{default:e(()=>[t(g,{class:"text-center py-8"},{default:e(()=>[t(w,{indeterminate:"",color:"primary",size:"64"}),a[2]||(a[2]=o("div",{class:"mt-4 text-body-1"}," Loading operations data... ",-1))]),_:1,__:[2]})]),_:1})]),_:1})]),_:1})):C.value?(n(),u(x,{key:1,class:"mb-6"},{default:e(()=>[t(_,{cols:"12"},{default:e(()=>[t(te,{type:"error",variant:"tonal",class:"mb-0"},{prepend:e(()=>[t(b,{icon:"tabler-alert-circle"})]),append:e(()=>[t(ee,{color:"error",variant:"text",size:"small",onClick:R},{default:e(()=>a[3]||(a[3]=[c(" Retry ")])),_:1,__:[3]})]),default:e(()=>[c(" "+r(C.value)+" ",1)]),_:1})]),_:1})]),_:1})):(n(),i("div",ue,[t(le,{modelValue:k.value,"onUpdate:modelValue":a[0]||(a[0]=l=>k.value=l),class:"mb-6"},{default:e(()=>[(n(),i(I,null,D($,l=>t(ae,{key:l.value,value:l.value},{default:e(()=>[t(b,{icon:l.icon,start:""},null,8,["icon"]),c(" "+r(l.title),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"]),t(oe,{modelValue:k.value,"onUpdate:modelValue":a[1]||(a[1]=l=>k.value=l),class:"disable-tab-transition"},{default:e(()=>[t(F,{value:"store"},{default:e(()=>[o("div",de,[t(x,null,{default:e(()=>[(n(!0),i(I,null,D(j.value,(l,f)=>(n(),u(_,{key:f,cols:"12",md:"3",sm:"6"},{default:e(()=>[t(h,null,{default:e(()=>[t(g,null,{default:e(()=>[o("div",ce,[o("div",me,[o("div",fe,r(l.title),1),o("div",ve,[o("h4",pe,r(l.value),1),o("div",{class:E(["text-base",l.change>0?"text-success":"text-error"])}," ("+r(P(l.change))+"%) ",3)]),o("div",_e,r(l.desc),1)]),t(L,{color:l.iconColor,variant:"tonal",rounded:"",size:"42"},{default:e(()=>[t(b,{icon:l.icon,size:"26"},null,8,["icon"])]),_:2},1032,["color"])])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),t(h,{class:"mb-6"},{default:e(()=>[t(T,null,{default:e(()=>[t(z,null,{default:e(()=>a[4]||(a[4]=[c("Items on Low Stock")])),_:1,__:[4]})]),_:1}),t(g,null,{default:e(()=>[H.value?(n(),u(B,{key:0,type:"line",height:"400",options:O.value,series:S.value},null,8,["options","series"])):(n(),i("div",he,[t(w,{indeterminate:"",color:"primary",size:"32"}),a[5]||(a[5]=o("div",{class:"mt-4 text-body-2 text-medium-emphasis"}," Loading chart data... ",-1))]))]),_:1})]),_:1})]),_:1}),t(F,{value:"staff"},{default:e(()=>[o("div",ge,[t(x,null,{default:e(()=>[(n(!0),i(I,null,D(q.value,(l,f)=>(n(),u(_,{key:f,cols:"12",md:"4",sm:"6"},{default:e(()=>[t(h,null,{default:e(()=>[t(g,null,{default:e(()=>[o("div",ye,[o("div",xe,[o("div",be,r(l.title),1),o("div",ke,[o("h4",Ce,r(l.value),1),o("div",{class:E(["text-base",l.change>0?"text-success":"text-error"])}," ("+r(P(l.change))+"%) ",3)]),o("div",Se,r(l.desc),1)]),t(L,{color:l.iconColor,variant:"tonal",rounded:"",size:"42"},{default:e(()=>[t(b,{icon:l.icon,size:"26"},null,8,["icon"])]),_:2},1032,["color"])])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),t(x,null,{default:e(()=>[t(_,{cols:"12",md:"6"},{default:e(()=>[t(h,null,{default:e(()=>[t(T,null,{default:e(()=>[t(z,null,{default:e(()=>a[6]||(a[6]=[c("Top 5 Performer")])),_:1,__:[6]})]),_:1}),t(g,null,{default:e(()=>[U.value?(n(),u(se,{key:0},{default:e(()=>[(n(!0),i(I,null,D(m.value.topPerformers,(l,f)=>(n(),u(ne,{key:l.id||f,class:"px-0"},{prepend:e(()=>[t(L,{size:"40",color:f<3?"primary":"secondary",variant:"tonal"},{default:e(()=>[o("span",Ve,r(f+1),1)]),_:2},1032,["color"])]),append:e(()=>[o("div",we,[o("div",Ie,r(l.performance||l.score)+"% ",1),a[7]||(a[7]=o("div",{class:"text-caption text-disabled"}," Performance ",-1))])]),default:e(()=>[t(re,{class:"font-weight-medium"},{default:e(()=>[c(r(l.name),1)]),_:2},1024),t(ie,null,{default:e(()=>[c(r(l.department),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(n(),i("div",De,[p.value?(n(),u(w,{key:0,indeterminate:"",color:"primary",size:"32"})):(n(),i("div",Ae,[t(b,{icon:"tabler-users",size:"48",class:"text-disabled mb-4"}),a[8]||(a[8]=o("div",{class:"text-body-2 text-medium-emphasis"}," No performance data available ",-1))]))]))]),_:1})]),_:1})]),_:1}),t(_,{cols:"12",md:"6"},{default:e(()=>[t(h,null,{default:e(()=>[t(T,null,{default:e(()=>[t(z,null,{default:e(()=>a[9]||(a[9]=[c("Employee Shift Coverage")])),_:1,__:[9]})]),_:1}),t(g,null,{default:e(()=>[M.value?(n(),u(B,{key:0,type:"radar",height:"300",options:W.value,series:V.value},null,8,["options","series"])):(n(),i("div",Le,[t(w,{indeterminate:"",color:"primary",size:"32"}),a[10]||(a[10]=o("div",{class:"mt-4 text-body-2 text-medium-emphasis"}," Loading chart data... ",-1))]))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))])}}});export{Ke as default};
