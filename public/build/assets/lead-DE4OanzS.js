import{a_ as o}from"./main-DjrYRpVy.js";import{g as a}from"./api-router-GltIg0kR.js";class r{getBaseUrl(){return a("leads")}async getStatistics(){return await o(`${this.getBaseUrl()}/statistics`)}async getLeads(t={}){const e=new URLSearchParams;t.status&&e.append("status",t.status),t.source&&e.append("source",t.source),t.owner&&e.append("owner",t.owner),t.search&&e.append("search",t.search),t.itemsPerPage&&e.append("itemsPerPage",t.itemsPerPage.toString()),t.page&&e.append("page",t.page.toString()),t.sortBy&&e.append("sortBy",t.sortBy),t.orderBy&&e.append("orderBy",t.orderBy);const i=e.toString(),s=this.getBaseUrl(),n=i?`${s}?${i}`:s;return await o(n)}async getLead(t){var i;const e=await o(`${this.getBaseUrl()}/${t}`);return e.success&&e.data&&(e.data={id:e.data.id,firstName:e.data.first_name,lastName:e.data.last_name,email:e.data.email,phone:e.data.phone,company:e.data.company_name||e.data.company,jobTitle:e.data.job_title,nationality:e.data.nationality,state:e.data.address,city:e.data.city,source:e.data.lead_source,status:e.data.status,owner:((i=e.data.assignedUser)==null?void 0:i.name)||e.data.assigned_to||"Unassigned",lastContacted:e.data.last_contact_date,scheduledMeeting:e.data.next_follow_up_date,note:e.data.notes,priority:e.data.priority,estimatedInvestment:e.data.estimated_investment,franchiseFeeQuoted:e.data.franchise_fee_quoted,expectedDecisionDate:e.data.expected_decision_date,contactAttempts:e.data.contact_attempts,interests:e.data.interests,documents:e.data.documents}),e}async createLead(t){const e={};return t.firstName!==void 0&&(e.first_name=t.firstName),t.lastName!==void 0&&(e.last_name=t.lastName),t.email!==void 0&&(e.email=t.email),t.phone!==void 0&&(e.phone=t.phone),t.company!==void 0&&(e.company_name=t.company),t.jobTitle!==void 0&&(e.job_title=t.jobTitle),t.nationality!==void 0&&(e.nationality=t.nationality),t.state!==void 0&&(e.address=t.state),t.city!==void 0&&(e.city=t.city),t.source!==void 0&&(e.lead_source=t.source),t.status!==void 0&&(e.status=t.status),t.note!==void 0&&(e.notes=t.note),t.priority!==void 0&&(e.priority=t.priority),t.estimatedInvestment!==void 0&&(e.estimated_investment=t.estimatedInvestment),t.franchiseFeeQuoted!==void 0&&(e.franchise_fee_quoted=t.franchiseFeeQuoted),t.expectedDecisionDate!==void 0&&(e.expected_decision_date=t.expectedDecisionDate),t.owner!==void 0&&typeof t.owner=="number"&&(e.assigned_to=t.owner),await o(this.getBaseUrl(),{method:"POST",body:e})}async updateLead(t,e){const i={};return e.firstName!==void 0&&(i.first_name=e.firstName),e.lastName!==void 0&&(i.last_name=e.lastName),e.email!==void 0&&(i.email=e.email),e.phone!==void 0&&(i.phone=e.phone),e.company!==void 0&&(i.company_name=e.company),e.jobTitle!==void 0&&(i.job_title=e.jobTitle),e.nationality!==void 0&&(i.nationality=e.nationality),e.state!==void 0&&(i.address=e.state),e.city!==void 0&&(i.city=e.city),e.source!==void 0&&(i.lead_source=e.source),e.status!==void 0&&(i.status=e.status),e.note!==void 0&&(i.notes=e.note),e.priority!==void 0&&(i.priority=e.priority),e.estimatedInvestment!==void 0&&(i.estimated_investment=e.estimatedInvestment),e.franchiseFeeQuoted!==void 0&&(i.franchise_fee_quoted=e.franchiseFeeQuoted),e.expectedDecisionDate!==void 0&&(i.expected_decision_date=e.expectedDecisionDate),e.owner!==void 0&&typeof e.owner=="number"&&(i.assigned_to=e.owner),await o(`${this.getBaseUrl()}/${t}`,{method:"PUT",body:i})}async deleteLead(t){return await o(`${this.getBaseUrl()}/${t}`,{method:"DELETE"})}async bulkDelete(t){return await o(`${this.getBaseUrl()}/bulk-delete`,{method:"POST",body:{ids:t}})}async importCsv(t){const e=new FormData;return e.append("file",t),await o(`${this.getBaseUrl()}/import`,{method:"POST",body:e})}exportCsv(t){const e=this.getBaseUrl(),i=new URLSearchParams;t&&t.length>0&&t.forEach(n=>i.append("ids[]",n.toString()));const s=i.toString();return s?`${e}/export?${s}`:`${e}/export`}async addNote(t,e){return await o(`${this.getBaseUrl()}/${t}/notes`,{method:"POST",body:e})}async addNoteToLead(t,e){return await o(`/v1/franchisor/leads/${t}/notes`,{method:"POST",body:{note:e}})}async getLeadsWithLimit(t=10){return await o(`${this.getBaseUrl()}?limit=${t}`)}async convertLead(t,e){return await o(`/v1/franchisor/leads/${t}/convert`,{method:"POST",body:{notes:e}})}async markAsLost(t,e){return await o(`/v1/franchisor/leads/${t}/mark-lost`,{method:"POST",body:{reason:e}})}async assignLead(t,e){return await o(`/v1/franchisor/leads/${t}/assign`,{method:"PATCH",body:{assigned_to:e}})}}const p=new r;export{p as l};
