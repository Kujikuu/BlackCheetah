import{_ as Y,V as E}from"./VDialog-BQITKorr.js";import{d as N,g as x,O as D,w as R,a as M,o as z,k as a,y as e,b5 as $,aI as H,i as l,a7 as S,q as _,t as b,l as T,av as j}from"./main-Ji38qWNq.js";import{u as J,a as Q,P as W,S as X}from"./EditTaskDialog.vue_vue_type_script_setup_true_lang-hXxYTGSe.js";import{V as I,f as P,g as G,d as Z}from"./VCard-CawK-7Mk.js";import{V as K}from"./VForm-DP38Bcc1.js";import{V as h,a as n}from"./VRow-DmXcz54G.js";import{V as y}from"./VTextField-Dd7MzrQd.js";import{V as L}from"./VTextarea-BCJMo_BQ.js";import{V as C}from"./VSelect-Dx19yBS5.js";import{V as B}from"./VDivider-Dc_kOOhx.js";import{V as ee}from"./VSpacer-Ds6NJ338.js";const ge=N({__name:"CreateTaskModal",props:{isDialogVisible:{type:Boolean},currentTab:{},defaultAssignedTo:{},unitId:{},disableAssignedTo:{type:Boolean}},emits:["update:isDialogVisible","taskCreated"],setup(k,{emit:A}){const s=k,g=A,{getUsersForSelect:V,initializeUsers:u,loading:U}=J(),o=x({title:"",description:"",category:"",assignedTo:"",startDate:"",dueDate:"",priority:"medium",status:"pending",estimatedHours:0,actualHours:0,completionPercentage:0}),m=x(!1),w=D(()=>{const r=s.currentTab||"franchisee";return V(r)}),d=r=>!!r||"This field is required",c=r=>{g("update:isDialogVisible",r)},f=()=>{o.value={title:"",description:"",category:"",assignedTo:"",startDate:"",dueDate:"",priority:"medium",status:"pending",estimatedHours:0,actualHours:0,completionPercentage:0}},v=()=>{if(m.value){const r={id:Date.now(),...o.value};g("taskCreated",r),f(),c(!1)}},q=()=>{f(),c(!1)};return R(()=>s.isDialogVisible,async r=>{if(r){const t=s.currentTab||"franchisee";await u(t),s.defaultAssignedTo&&(o.value.assignedTo=s.defaultAssignedTo)}else f()}),R(()=>s.currentTab,async r=>{s.isDialogVisible&&r&&(await u(r),o.value.assignedTo="")}),(r,t)=>{const p=Y;return z(),M(E,{"model-value":s.isDialogVisible,"max-width":"600",persistent:"","onUpdate:modelValue":c},{default:a(()=>[e(p,{onClick:t[0]||(t[0]=i=>c(!1))}),e(I,{title:"Create New Task"},{default:a(()=>[e(P,{class:"pa-6"},{default:a(()=>[e(K,{modelValue:l(m),"onUpdate:modelValue":t[11]||(t[11]=i=>H(m)?m.value=i:null),onSubmit:$(v,["prevent"])},{default:a(()=>[e(h,null,{default:a(()=>[e(n,{cols:"12"},{default:a(()=>[e(y,{modelValue:l(o).title,"onUpdate:modelValue":t[1]||(t[1]=i=>l(o).title=i),label:"Task Title",placeholder:"Enter task title",rules:[d],required:""},null,8,["modelValue","rules"])]),_:1}),e(n,{cols:"12"},{default:a(()=>[e(L,{modelValue:l(o).description,"onUpdate:modelValue":t[2]||(t[2]=i=>l(o).description=i),label:"Description",placeholder:"Enter task description",rows:"3",rules:[d],required:""},null,8,["modelValue","rules"])]),_:1}),e(n,{cols:"12",md:"6"},{default:a(()=>[e(C,{modelValue:l(o).category,"onUpdate:modelValue":t[3]||(t[3]=i=>l(o).category=i),label:"Category",placeholder:"Select category",items:l(Q),rules:[d],required:""},null,8,["modelValue","items","rules"])]),_:1}),e(n,{cols:"12",md:"6"},{default:a(()=>[e(C,{modelValue:l(o).assignedTo,"onUpdate:modelValue":t[4]||(t[4]=i=>l(o).assignedTo=i),label:"Assigned To",placeholder:"Select user",items:l(w),loading:l(U),rules:[d],"item-title":"title","item-value":"value",disabled:s.disableAssignedTo,required:""},null,8,["modelValue","items","loading","rules","disabled"])]),_:1}),e(n,{cols:"12",md:"6"},{default:a(()=>[e(y,{modelValue:l(o).startDate,"onUpdate:modelValue":t[5]||(t[5]=i=>l(o).startDate=i),label:"Start Date",type:"date",rules:[d],required:""},null,8,["modelValue","rules"])]),_:1}),e(n,{cols:"12",md:"6"},{default:a(()=>[e(y,{modelValue:l(o).dueDate,"onUpdate:modelValue":t[6]||(t[6]=i=>l(o).dueDate=i),label:"Due Date",type:"date",rules:[d],required:""},null,8,["modelValue","rules"])]),_:1}),e(n,{cols:"12",md:"6"},{default:a(()=>[e(C,{modelValue:l(o).priority,"onUpdate:modelValue":t[7]||(t[7]=i=>l(o).priority=i),label:"Priority",placeholder:"Select priority",items:l(W),rules:[d],required:""},null,8,["modelValue","items","rules"])]),_:1}),e(n,{cols:"12",md:"6"},{default:a(()=>[e(C,{modelValue:l(o).status,"onUpdate:modelValue":t[8]||(t[8]=i=>l(o).status=i),label:"Status",placeholder:"Select status",items:l(X),rules:[d],required:""},null,8,["modelValue","items","rules"])]),_:1}),e(n,{cols:"12",md:"6"},{default:a(()=>[e(y,{modelValue:l(o).estimatedHours,"onUpdate:modelValue":t[9]||(t[9]=i=>l(o).estimatedHours=i),label:"Estimated Hours",type:"number",min:"0"},null,8,["modelValue"])]),_:1}),e(n,{cols:"12",md:"6"},{default:a(()=>[e(y,{modelValue:l(o).actualHours,"onUpdate:modelValue":t[10]||(t[10]=i=>l(o).actualHours=i),label:"Actual Hours",type:"number",min:"0"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(B),e(G,{class:"pa-6"},{default:a(()=>[e(ee),e(S,{color:"error",variant:"text",onClick:q},{default:a(()=>t[12]||(t[12]=[_(" Cancel ")])),_:1,__:[12]}),e(S,{color:"primary",disabled:!l(m),onClick:v},{default:a(()=>t[13]||(t[13]=[_(" Create Task ")])),_:1,__:[13]},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}}),te={class:"text-body-1 text-medium-emphasis mb-6"},le={class:"d-flex align-center mb-2"},ae={class:"text-body-1 font-weight-medium"},oe={class:"text-body-2 text-disabled mb-1"},se={class:"text-body-2 text-disabled"},ve=N({__name:"DocumentActionModal",props:{isDialogVisible:{type:Boolean},document:{},action:{}},emits:["update:isDialogVisible","documentActionConfirmed"],setup(k,{emit:A}){const s=k,g=A,V=x(""),u=x(!1),U=r=>!!r||"Comment is required",o=D(()=>s.action==="approve"?"Approve Document":"Reject Document"),m=D(()=>s.action==="approve"?"success":"error"),w=D(()=>s.action==="approve"?"tabler-check":"tabler-x"),d=D(()=>s.action==="approve"?"Are you sure you want to approve this document? Please provide a comment.":"Are you sure you want to reject this document? Please provide a reason for rejection."),c=r=>{g("update:isDialogVisible",r)},f=()=>{V.value=""},v=()=>{u.value&&(g("documentActionConfirmed",{document:s.document,action:s.action,comment:V.value}),f(),c(!1))},q=()=>{f(),c(!1)};return R(()=>s.isDialogVisible,r=>{r||f()}),(r,t)=>(z(),M(E,{"model-value":s.isDialogVisible,"max-width":"500",persistent:"","onUpdate:modelValue":c},{default:a(()=>[e(I,null,{default:a(()=>[e(Z,{class:"text-h5 pa-6 pb-4"},{default:a(()=>[_(b(l(o)),1)]),_:1}),e(B),e(P,{class:"text-center px-10 py-6"},{default:a(()=>[e(j,{icon:l(w),color:l(m),size:"48",class:"mb-4"},null,8,["icon","color"]),T("p",te,b(l(d)),1),e(I,{variant:"outlined",class:"mb-6"},{default:a(()=>[e(P,{class:"text-start"},{default:a(()=>{var p,i,F,O;return[T("div",le,[e(j,{icon:"tabler-file-text",size:"20",color:"primary",class:"me-2"}),T("span",ae,b((p=s.document)==null?void 0:p.title),1)]),T("div",oe,b((i=s.document)==null?void 0:i.description),1),T("div",se,b((F=s.document)==null?void 0:F.fileName)+" â€¢ "+b((O=s.document)==null?void 0:O.fileSize),1)]}),_:1})]),_:1}),e(K,{modelValue:l(u),"onUpdate:modelValue":t[1]||(t[1]=p=>H(u)?u.value=p:null),onSubmit:$(v,["prevent"])},{default:a(()=>[e(L,{modelValue:l(V),"onUpdate:modelValue":t[0]||(t[0]=p=>H(V)?V.value=p:null),label:s.action==="approve"?"Approval Comment":"Rejection Reason",placeholder:s.action==="approve"?"Enter approval comment...":"Enter reason for rejection...",rows:"3",rules:[U],required:"",class:"mb-4"},null,8,["modelValue","label","placeholder","rules"])]),_:1},8,["modelValue"])]),_:1}),e(B),e(G,{class:"justify-center pa-6"},{default:a(()=>[e(S,{color:"error",variant:"text",onClick:q},{default:a(()=>t[2]||(t[2]=[_(" Cancel ")])),_:1,__:[2]}),e(S,{color:l(m),disabled:!l(u),onClick:v},{default:a(()=>[_(b(s.action==="approve"?"Approve":"Reject"),1)]),_:1},8,["color","disabled"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}});export{ge as _,ve as a};
