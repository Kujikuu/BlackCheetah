import{_ as D,V as T}from"./VDialog-B7W_OT1M.js";import{d as B,g as c,O as N,w as h,a as f,o as V,k as i,y as l,h as O,l as m,t as g,q as d,aM as k,i as n,a7 as v}from"./main-CEM1QI86.js";import{t as U}from"./task-CYDLN3MP.js";import{V as $,f as q,h as z}from"./VCard-BQn_ZwHQ.js";import{V as _}from"./VDivider-MM1jTXpn.js";import{V as A}from"./VChip-BShyV8jA.js";import{V as P}from"./VSelect-DAbGf17D.js";import{V as E}from"./VSpacer-CWg-Jdgc.js";const F={class:"mb-4"},H={class:"text-base font-weight-medium mb-2"},I={class:"text-body-2 text-disabled"},X=B({__name:"StatusChangeTaskDialog",props:{isDialogVisible:{type:Boolean},task:{}},emits:["update:isDialogVisible","status-updated"],setup(C,{emit:b}){const a=C,p=b,s=c(""),u=c(!1),r=N({get:()=>a.isDialogVisible,set:e=>{p("update:isDialogVisible",e),e||(s.value="")}});h(()=>{var e;return(e=a.task)==null?void 0:e.status},e=>{e&&(s.value=e)},{immediate:!0});const y=[{title:"Pending",value:"pending"},{title:"In Progress",value:"in_progress"},{title:"Completed",value:"completed"},{title:"Cancelled",value:"cancelled"},{title:"On Hold",value:"on_hold"}],S=e=>e==="completed"?"success":e==="in_progress"?"warning":e==="pending"?"info":e==="cancelled"?"error":"secondary",x=async()=>{if(!(!a.task||!s.value)){u.value=!0;try{const e=await U.updateTaskStatus(a.task.id,s.value);if(e.success){const t={...a.task,status:s.value};p("status-updated",t),r.value=!1}else console.error("Failed to update task status:",e.message)}catch(e){console.error("Error updating task status:",e)}finally{u.value=!1}}};return(e,t)=>{const w=D;return V(),f(T,{modelValue:n(r),"onUpdate:modelValue":t[3]||(t[3]=o=>k(r)?r.value=o:null),"max-width":"600"},{default:i(()=>[l(w,{onClick:t[0]||(t[0]=o=>r.value=!1)}),l($,{title:"Change Task Status"},{default:i(()=>[l(_),a.task?(V(),f(q,{key:0,class:"pa-6"},{default:i(()=>[m("div",F,[m("h6",H,g(a.task.title),1),m("div",I,[t[4]||(t[4]=d(" Current Status: ")),l(A,{color:S(a.task.status),size:"small",label:"",class:"text-capitalize ml-2"},{default:i(()=>[d(g(a.task.status),1)]),_:1},8,["color"])])]),l(P,{modelValue:n(s),"onUpdate:modelValue":t[1]||(t[1]=o=>k(s)?s.value=o:null),label:"New Status",items:y,"item-title":"title","item-value":"value",required:""},null,8,["modelValue"])]),_:1})):O("",!0),l(_),l(z,{class:"pa-6"},{default:i(()=>{var o;return[l(E),l(v,{color:"secondary",variant:"tonal",onClick:t[2]||(t[2]=L=>r.value=!1)},{default:i(()=>t[5]||(t[5]=[d(" Cancel ")])),_:1,__:[5]}),l(v,{color:"primary",disabled:!n(s)||n(s)===((o=a.task)==null?void 0:o.status)||n(u),loading:n(u),onClick:x},{default:i(()=>t[6]||(t[6]=[d(" Update Status ")])),_:1,__:[6]},8,["disabled","loading"])]}),_:1})]),_:1})]),_:1},8,["modelValue"])}}});export{X as _};
