import{d as B,aQ as y,a as D,o as w,k as L,y as g,av as p,K as I,L as S,P as _,bD as z,g as A,bq as C,c6 as F,w as E,M as k,bg as h,n as m,c2 as R,c3 as T,c1 as O,ae as W,ax as H}from"./main-BWNnj23H.js";import{a as M}from"./VMenu-0AUhCnQP.js";const K=B({__name:"DialogCloseBtn",props:{icon:{default:"tabler-x"},iconSize:{default:"20"}},setup(e){const f=e;return(d,r)=>{const c=y("IconBtn");return w(),D(c,{variant:"elevated",size:"30",ripple:!1,class:"v-dialog-close-btn"},{default:L(()=>[g(p,{icon:f.icon,size:f.iconSize},null,8,["icon","size"])]),_:1})}}}),N=S({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...T({origin:"center center",scrollStrategy:"block",transition:{component:M},zIndex:2400})},"VDialog"),Q=I()({name:"VDialog",props:N(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,f){let{emit:d,slots:r}=f;const c=_(e,"modelValue"),{scopeId:V}=z(),t=A();function v(n){var l,i;const o=n.relatedTarget,s=n.target;if(o!==s&&((l=t.value)!=null&&l.contentEl)&&((i=t.value)!=null&&i.globalTop)&&![document,t.value.contentEl].includes(s)&&!t.value.contentEl.contains(s)){const a=O(t.value.contentEl);if(!a.length)return;const u=a[0],x=a[a.length-1];o===u?x.focus():u.focus()}}C(()=>{document.removeEventListener("focusin",v)}),F&&E(()=>c.value&&e.retainFocus,n=>{n?document.addEventListener("focusin",v):document.removeEventListener("focusin",v)},{immediate:!0});function b(){var n;d("afterEnter"),(e.scrim||e.retainFocus)&&((n=t.value)!=null&&n.contentEl)&&!t.value.contentEl.contains(document.activeElement)&&t.value.contentEl.focus({preventScroll:!0})}function P(){d("afterLeave")}return E(c,async n=>{var o;n||(await W(),(o=t.value.activatorEl)==null||o.focus({preventScroll:!0}))}),k(()=>{const n=h.filterProps(e),o=m({"aria-haspopup":"dialog"},e.activatorProps),s=m({tabindex:-1},e.contentProps);return g(h,m({ref:t,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},n,{modelValue:c.value,"onUpdate:modelValue":l=>c.value=l,"aria-modal":"true",activatorProps:o,contentProps:s,height:e.fullscreen?void 0:e.height,width:e.fullscreen?void 0:e.width,maxHeight:e.fullscreen?void 0:e.maxHeight,maxWidth:e.fullscreen?void 0:e.maxWidth,role:"dialog",onAfterEnter:b,onAfterLeave:P},V),{activator:r.activator,default:function(){for(var l=arguments.length,i=new Array(l),a=0;a<l;a++)i[a]=arguments[a];return g(H,{root:"VDialog"},{default:()=>{var u;return[(u=r.default)==null?void 0:u.call(r,...i)]}})}})}),R({},t)}});export{Q as V,K as _};
