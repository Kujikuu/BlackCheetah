import{f as N}from"./franchisee-dashboard-CgqYzx__.js";import{_ as U}from"./ViewTaskDialog.vue_vue_type_script_setup_true_lang-BMhl5fGG.js";import{_ as R}from"./StatusChangeTaskDialog.vue_vue_type_script_setup_true_lang-BaQUxL72.js";import{a as m,V}from"./VRow-vWSGPnzR.js";import{V as f,f as k,b,a as q,d as H}from"./VCard-BEgq0Zx7.js";import{d as O,g as p,E as j,O as y,c as F,o as G,y as t,k as e,l as i,av as d,t as n,i as r,q as _,a7 as J,aI as x}from"./main-DTJHMfaq.js";import{V as K}from"./VDivider-zvRfNiVO.js";import{V as Q}from"./VDataTable-g1AsGRIG.js";import{V as W}from"./VMenu-AaevCT9J.js";import{V as X,a as h,b as T}from"./VList-Ep_DohB9.js";import{V as D}from"./VChip-DCBBAlzy.js";import"./api-router-zf5lUZNn.js";import"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-CarmOyZu.js";import"./VSpacer-C41_h5hf.js";/* empty css              */import"./VDialog-DAi3BTyw.js";import"./VOverlay-Cl5-0R4l.js";import"./forwardRefs-B931MWyl.js";import"./scopeId-Do09yNC1.js";import"./task-BxJC9pJL.js";import"./VSelect-DcsiMjZB.js";import"./VTextField-DW79TKGE.js";import"./VField-BTPv3jI0.js";import"./form-BTCRKuvE.js";import"./VInput-DnyuMNdn.js";import"./VCheckboxBtn-g4un3INl.js";import"./VSelectionControl-C7u8c___.js";import"./VPagination-DOW_yVym.js";import"./VTable-v4njjhfr.js";import"./VSlideGroup-D88xb4kb.js";const Y={class:"ms-4"},Z={class:"text-h4"},tt={class:"ms-4"},et={class:"text-h4"},st={class:"ms-4"},at={class:"text-h4"},lt={class:"ms-4"},it={class:"text-h4"},ot={class:"text-base font-weight-medium"},rt={class:"text-body-2 text-disabled"},Ut=O({__name:"my-tasks",setup(nt){const v=p(!1),u=p(!1),c=p(null),o=p([]),g=p(!1),C=async()=>{try{g.value=!0;const s=await N.getMyTasks();s.success&&s.data?o.value=Array.isArray(s.data)?s.data:s.data.data||[]:o.value=[]}catch(s){console.error("Error loading tasks:",s),o.value=[]}finally{g.value=!1}};j(async()=>{await C()});const w=y(()=>o.value.length),z=y(()=>o.value.filter(s=>s.status==="completed").length),I=y(()=>o.value.filter(s=>s.status==="in_progress").length),S=y(()=>{const s=new Date;return o.value.filter(a=>new Date(a.dueDate)<=s&&!["completed","cancelled"].includes(a.status)).length}),M=s=>s==="completed"?"success":s==="in_progress"?"warning":s==="pending"?"info":s==="cancelled"?"error":"secondary",A=s=>s==="high"?"error":s==="medium"?"warning":s==="low"?"info":"secondary",B=[{title:"Task Info",key:"taskInfo"},{title:"Category",key:"category"},{title:"Start Date",key:"startDate"},{title:"Due Date",key:"dueDate"},{title:"Priority",key:"priority"},{title:"Status",key:"status"},{title:"Actions",key:"actions",sortable:!1}],L=s=>{c.value=s,v.value=!0},P=s=>{c.value={...s},u.value=!0},$=s=>{const a=o.value.findIndex(l=>l.id===s.id);a!==-1&&(o.value[a]=s),u.value=!1,c.value=null};return(s,a)=>(G(),F("section",null,[t(V,{class:"mb-6"},{default:e(()=>[t(m,{cols:"12"},{default:e(()=>a[2]||(a[2]=[i("div",null,[i("h2",{class:"text-h2 mb-1"}," My Tasks "),i("p",{class:"text-body-1 text-medium-emphasis"}," Track and manage tasks assigned to you ")],-1)])),_:1,__:[2]})]),_:1}),t(V,{class:"mb-6"},{default:e(()=>[t(m,{cols:"12",md:"3"},{default:e(()=>[t(f,null,{default:e(()=>[t(k,{class:"d-flex align-center"},{default:e(()=>[t(b,{size:"44",rounded:"",color:"primary",variant:"tonal"},{default:e(()=>[t(d,{icon:"tabler-checklist",size:"26"})]),_:1}),i("div",Y,[a[3]||(a[3]=i("div",{class:"text-body-2 text-disabled"}," Total Tasks ",-1)),i("h4",Z,n(r(w)),1)])]),_:1})]),_:1})]),_:1}),t(m,{cols:"12",md:"3"},{default:e(()=>[t(f,null,{default:e(()=>[t(k,{class:"d-flex align-center"},{default:e(()=>[t(b,{size:"44",rounded:"",color:"success",variant:"tonal"},{default:e(()=>[t(d,{icon:"tabler-check",size:"26"})]),_:1}),i("div",tt,[a[4]||(a[4]=i("div",{class:"text-body-2 text-disabled"}," Completed ",-1)),i("h4",et,n(r(z)),1)])]),_:1})]),_:1})]),_:1}),t(m,{cols:"12",md:"3"},{default:e(()=>[t(f,null,{default:e(()=>[t(k,{class:"d-flex align-center"},{default:e(()=>[t(b,{size:"44",rounded:"",color:"warning",variant:"tonal"},{default:e(()=>[t(d,{icon:"tabler-clock",size:"26"})]),_:1}),i("div",st,[a[5]||(a[5]=i("div",{class:"text-body-2 text-disabled"}," In Progress ",-1)),i("h4",at,n(r(I)),1)])]),_:1})]),_:1})]),_:1}),t(m,{cols:"12",md:"3"},{default:e(()=>[t(f,null,{default:e(()=>[t(k,{class:"d-flex align-center"},{default:e(()=>[t(b,{size:"44",rounded:"",color:"error",variant:"tonal"},{default:e(()=>[t(d,{icon:"tabler-alert-circle",size:"26"})]),_:1}),i("div",lt,[a[6]||(a[6]=i("div",{class:"text-body-2 text-disabled"}," Due ",-1)),i("h4",it,n(r(S)),1)])]),_:1})]),_:1})]),_:1})]),_:1}),t(f,null,{default:e(()=>[t(q,{class:"pb-4"},{default:e(()=>[t(H,null,{default:e(()=>a[7]||(a[7]=[_("My Tasks")])),_:1,__:[7]})]),_:1}),t(K),t(Q,{items:r(o),headers:B,class:"text-no-wrap","item-value":"id"},{"item.taskInfo":e(({item:l})=>[i("div",null,[i("h6",ot,n(l.title),1),i("div",rt,n(l.description),1)])]),"item.priority":e(({item:l})=>[t(D,{color:A(l.priority),size:"small",label:"",class:"text-capitalize"},{default:e(()=>[_(n(l.priority),1)]),_:2},1032,["color"])]),"item.status":e(({item:l})=>[t(D,{color:M(l.status),size:"small",label:"",class:"text-capitalize"},{default:e(()=>[_(n(l.status),1)]),_:2},1032,["color"])]),"item.actions":e(({item:l})=>[t(J,{icon:"",variant:"text",color:"medium-emphasis",size:"small"},{default:e(()=>[t(d,{icon:"tabler-dots-vertical"}),t(W,{activator:"parent"},{default:e(()=>[t(X,null,{default:e(()=>[t(h,{onClick:E=>L(l)},{prepend:e(()=>[t(d,{icon:"tabler-eye"})]),default:e(()=>[t(T,null,{default:e(()=>a[8]||(a[8]=[_("View")])),_:1,__:[8]})]),_:2},1032,["onClick"]),t(h,{onClick:E=>P(l)},{prepend:e(()=>[t(d,{icon:"tabler-refresh"})]),default:e(()=>[t(T,null,{default:e(()=>a[9]||(a[9]=[_("Change Status")])),_:1,__:[9]})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["items"])]),_:1}),t(U,{"is-dialog-visible":r(v),"onUpdate:isDialogVisible":a[0]||(a[0]=l=>x(v)?v.value=l:null),task:r(c)},null,8,["is-dialog-visible","task"]),t(R,{"is-dialog-visible":r(u),"onUpdate:isDialogVisible":a[1]||(a[1]=l=>x(u)?u.value=l:null),task:r(c),onStatusUpdated:$},null,8,["is-dialog-visible","task"])]))}});export{Ut as default};
