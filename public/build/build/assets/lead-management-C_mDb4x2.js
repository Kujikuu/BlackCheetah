import{p as _e,a as ye}from"./formatters-WDr9EcLN.js";import{V as Ve,_ as be}from"./VDataTableServer-h2npWi6V.js";import{_ as xe}from"./AppTextField.vue_vue_type_script_setup_true_lang-BiY8T0bF.js";import{_ as Ce}from"./AppSelect.vue_vue_type_script_setup_true_lang-DXz23Wgu.js";import{_ as ge}from"./AddNoteModal.vue_vue_type_script_setup_true_lang-YE7J4pNi.js";import{d as he,r as d,P as M,c as q,e as s,b as l,f as a,au as p,m as o,j as we,a as Se,o as L,F as ke,i as Le,g as J,v as i,x as Ne,aa as C,t as r,l as Ue,a3 as f}from"./main-BFHJN9nb.js";import{V as W,a as N}from"./VRow-CkpL0RVO.js";import{V as U,a as E,b as B,d as Q}from"./VCard-DX1TBmaJ.js";import{V as Y}from"./VDialog-V4gnLJrB.js";import{V as w}from"./VCardText-DaLxJsvL.js";import{V as G}from"./VAvatar-0YR6k8GC.js";import{V as H}from"./VDivider-BkXgjbRp.js";import{V as F}from"./VSpacer-CCpGOsVL.js";import{V as $e}from"./VMenu-S7-3kIyf.js";import{V as De,a as O,b as P}from"./VList-BQIhB7WP.js";import{V as Te}from"./VChip-YDiTWgu4.js";import{V as Ae}from"./VFileInput-BP_SWKAb.js";import"./VPagination-C9KFFG-O.js";import"./VDataTable-KEGIK6KG.js";import"./VSelect-DRqAennZ.js";import"./VTextField-cuhL7eKu.js";/* empty css                   */import"./VCounter-Cd8lIrDY.js";import"./VImg-CUvr5mlE.js";import"./VField-5Oc1eDZT.js";import"./form-CRnOu3kV.js";import"./easing-Bybner-F.js";import"./VInput-C8j_k2yQ.js";import"./forwardRefs-C-GTDzx5.js";import"./dialog-transition-BI7rMvXb.js";import"./VOverlay-CCjswVhh.js";import"./lazy-CMH8XMVs.js";import"./scopeId-u705bwh2.js";import"./VCheckboxBtn-B9nMFPWY.js";import"./VSelectionControl-CRxaOcuF.js";import"./VTable-C9ODUf_b.js";import"./filter-B0dGONQA.js";import"./AppTextarea.vue_vue_type_script_setup_true_lang-CIe2COFg.js";import"./VTextarea-Bsvjwuux.js";import"./VForm-Bn7tXzHN.js";/* empty css              */import"./ssrBoot-BnhyewLe.js";import"./VSlideGroup-Crru8FDw.js";const Ie={class:"d-flex mb-6"},Re={class:"d-flex justify-space-between"},Ee={class:"d-flex flex-column gap-y-1"},Be={class:"text-body-1 text-high-emphasis"},Fe={class:"d-flex gap-x-2 align-center"},Oe={class:"text-h4"},Pe={class:"me-3 d-flex gap-3"},je={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},ze={style:{"inline-size":"15.625rem"}},Me={class:"text-body-1 font-weight-medium"},qe={class:"d-flex align-center gap-x-4"},Je={class:"d-flex flex-column"},We={class:"text-base font-weight-medium"},Qe={class:"text-body-1"},Ye={class:"text-body-1"},Ge={class:"text-body-1"},He={class:"text-body-1"},Ke={class:"text-body-1 text-capitalize"},Xe={class:"text-body-1"},Ze={class:"text-body-1"},et={class:"mb-4"},Jt=he({__name:"lead-management",setup(tt){const $=d(""),D=d(),T=d(),A=d(),S=d(!1),j=d(null),b=d(!1),x=d(!1),g=d(null),_=d(10),y=d(1),K=d(),X=d(),c=d([]),Z=n=>{var e,u;K.value=(e=n.sortBy[0])==null?void 0:e.key,X.value=(u=n.sortBy[0])==null?void 0:u.order},ee=[{title:"#",key:"index",sortable:!1},{title:"Lead Name",key:"name"},{title:"Company",key:"company"},{title:"Email",key:"email"},{title:"Phone",key:"phone"},{title:"Location",key:"location"},{title:"Source",key:"source"},{title:"Status",key:"status"},{title:"Owner",key:"owner"},{title:"Last Contacted",key:"lastContacted"},{title:"Actions",key:"actions",sortable:!1}],k=d({leads:[{id:1,firstName:"John",lastName:"Smith",email:"john.smith@example.com",phone:"+1 234-567-8900",company:"Tech Corp",country:"USA",state:"California",city:"San Francisco",source:"Website",status:"qualified",owner:"Sarah Johnson",lastContacted:"2024-01-15",scheduledMeeting:"2024-01-20"},{id:2,firstName:"Emily",lastName:"Davis",email:"emily.d@example.com",phone:"+1 234-567-8901",company:"Business Inc",country:"USA",state:"New York",city:"New York",source:"Referral",status:"unqualified",owner:"John Smith",lastContacted:"2024-01-14",scheduledMeeting:null},{id:3,firstName:"Michael",lastName:"Brown",email:"michael.b@example.com",phone:"+1 234-567-8902",company:"Solutions LLC",country:"Canada",state:"Ontario",city:"Toronto",source:"Social Media",status:"qualified",owner:"Sarah Johnson",lastContacted:"2024-01-13",scheduledMeeting:"2024-01-18"}],total:3}),I=M(()=>k.value.leads),z=M(()=>k.value.total),te=d([{title:"Total Leads",value:"1,245",change:15,icon:"tabler-users",iconColor:"primary"},{title:"Qualified",value:"847",change:22,icon:"tabler-user-check",iconColor:"success"},{title:"Unqualified",value:"398",change:-8,icon:"tabler-user-x",iconColor:"error"}]),le=[{title:"Website",value:"website"},{title:"Referral",value:"referral"},{title:"Social Media",value:"social_media"},{title:"Email Campaign",value:"email"}],ae=[{title:"Qualified",value:"qualified"},{title:"Unqualified",value:"unqualified"}],oe=[{title:"Sarah Johnson",value:"sarah_johnson"},{title:"John Smith",value:"john_smith"},{title:"Michael Brown",value:"michael_brown"}],se=n=>{const e=n.toLowerCase();return e==="qualified"?"success":e==="unqualified"?"error":"primary"},ne=n=>{g.value=n,x.value=!0},ie=async()=>{if(g.value===null)return;const n=k.value.leads.findIndex(u=>u.id===g.value);n!==-1&&k.value.leads.splice(n,1);const e=c.value.findIndex(u=>u===g.value);e!==-1&&c.value.splice(e,1),x.value=!1,g.value=null},V=d(null),re=n=>{const e=n.target;e.files&&e.files[0]&&(V.value=e.files[0])},de=()=>{const n=`First Name,Last Name,Email,Phone,Company,Country,State,City,Lead Source,Lead Status,Lead Owner
John,Doe,john.doe@example.com,+1234567890,Example Corp,USA,California,Los Angeles,Website,Qualified,Sarah Johnson`,e=new Blob([n],{type:"text/csv"}),u=window.URL.createObjectURL(e),v=document.createElement("a");v.href=u,v.download="leads_example.csv",v.click(),window.URL.revokeObjectURL(u)},ue=()=>{V.value&&(console.log("Importing CSV:",V.value),b.value=!1,V.value=null)},me=()=>{const e=["First Name,Last Name,Company,Email,Phone,City,State,Source,Status,Owner,Last Contacted",...(c.value.length>0?I.value.filter(m=>c.value.includes(m.id)):I.value).map(m=>`"${m.firstName}","${m.lastName}","${m.company}","${m.email}","${m.phone}","${m.city}","${m.state}","${m.source}","${m.status}","${m.owner}","${m.lastContacted}"`)].join(`
`),u=new Blob([e],{type:"text/csv"}),v=window.URL.createObjectURL(u),h=document.createElement("a");h.href=v,h.download=`leads_${c.value.length>0?"selected":"all"}_${new Date().toISOString().split("T")[0]}.csv`,h.click(),window.URL.revokeObjectURL(v)},ce=n=>{j.value=n,S.value=!0},pe=()=>{console.log("Note added successfully")},fe=we(),ve=()=>{fe.push({name:"franchisor-add-lead"})};return(n,e)=>{const u=Ce,v=xe,h=Se("RouterLink"),m=be;return L(),q("section",null,[s("div",Ie,[l(W,null,{default:a(()=>[(L(!0),q(ke,null,Le(o(te),(t,R)=>(L(),J(N,{key:R,cols:"12",md:"4",sm:"6"},{default:a(()=>[l(U,null,{default:a(()=>[l(w,null,{default:a(()=>[s("div",Re,[s("div",Ee,[s("div",Be,i(t.title),1),s("div",Fe,[s("h4",Oe,i(t.value),1),s("div",{class:Ne(["text-base",t.change>0?"text-success":"text-error"])}," ("+i(("prefixWithPlus"in n?n.prefixWithPlus:o(_e))(t.change))+"%) ",3)])]),l(G,{color:t.iconColor,variant:"tonal",rounded:"",size:"42"},{default:a(()=>[l(C,{icon:t.icon,size:"26"},null,8,["icon"])]),_:2},1032,["color"])])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),l(U,{class:"mb-6"},{default:a(()=>[l(E,{class:"pb-4"},{default:a(()=>[l(B,null,{default:a(()=>e[16]||(e[16]=[r("Filters")])),_:1,__:[16]})]),_:1}),l(w,null,{default:a(()=>[l(W,null,{default:a(()=>[l(N,{cols:"12",sm:"4"},{default:a(()=>[l(u,{modelValue:o(T),"onUpdate:modelValue":e[0]||(e[0]=t=>p(T)?T.value=t:null),placeholder:"Select Source",items:le,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1}),l(N,{cols:"12",sm:"4"},{default:a(()=>[l(u,{modelValue:o(D),"onUpdate:modelValue":e[1]||(e[1]=t=>p(D)?D.value=t:null),placeholder:"Select Status",items:ae,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1}),l(N,{cols:"12",sm:"4"},{default:a(()=>[l(u,{modelValue:o(A),"onUpdate:modelValue":e[2]||(e[2]=t=>p(A)?A.value=t:null),placeholder:"Select Owner",items:oe,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(H),l(w,{class:"d-flex flex-wrap gap-4"},{default:a(()=>[s("div",Pe,[l(u,{"model-value":o(_),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"6.25rem"},"onUpdate:modelValue":e[3]||(e[3]=t=>_.value=parseInt(t,10))},null,8,["model-value"]),o(c).length>0?(L(),J(f,{key:0,variant:"tonal",color:"error",onClick:n.bulkDelete},{default:a(()=>[l(C,{icon:"tabler-trash",class:"me-2"}),r(" Delete Selected ("+i(o(c).length)+") ",1)]),_:1},8,["onClick"])):Ue("",!0)]),l(F),s("div",je,[s("div",ze,[l(v,{modelValue:o($),"onUpdate:modelValue":e[4]||(e[4]=t=>p($)?$.value=t:null),placeholder:"Search Lead"},null,8,["modelValue"])]),l(f,{variant:"tonal",color:"secondary","prepend-icon":"tabler-file-import",onClick:e[5]||(e[5]=t=>b.value=!0)},{default:a(()=>e[17]||(e[17]=[r(" Import ")])),_:1,__:[17]}),l(f,{variant:"tonal",color:"secondary","prepend-icon":"tabler-upload",onClick:me},{default:a(()=>[r(" Export "+i(o(c).length>0?`(${o(c).length})`:"All"),1)]),_:1}),l(f,{"prepend-icon":"tabler-plus",onClick:ve},{default:a(()=>e[18]||(e[18]=[r(" Add Lead ")])),_:1,__:[18]})])]),_:1}),l(H),l(Ve,{"items-per-page":o(_),"onUpdate:itemsPerPage":e[7]||(e[7]=t=>p(_)?_.value=t:null),"model-value":o(c),"onUpdate:modelValue":e[8]||(e[8]=t=>p(c)?c.value=t:null),page:o(y),"onUpdate:page":e[9]||(e[9]=t=>p(y)?y.value=t:null),items:o(I),"item-value":"id","items-length":o(z),headers:ee,class:"text-no-wrap","show-select":"","onUpdate:options":Z},{"item.index":a(({index:t})=>[s("div",Me,i((o(y)-1)*o(_)+t+1),1)]),"item.name":a(({item:t})=>[s("div",qe,[l(G,{size:"34",variant:"tonal",color:"primary"},{default:a(()=>[s("span",null,i(("avatarText"in n?n.avatarText:o(ye))(`${t.firstName} ${t.lastName}`)),1)]),_:2},1024),s("div",Je,[s("h6",We,[l(h,{to:{name:"sales-leads-id",params:{id:t.id}},class:"text-link"},{default:a(()=>[r(i(t.firstName)+" "+i(t.lastName),1)]),_:2},1032,["to"])])])])]),"item.company":a(({item:t})=>[s("div",Qe,i(t.company),1)]),"item.email":a(({item:t})=>[s("div",Ye,i(t.email),1)]),"item.phone":a(({item:t})=>[s("div",Ge,i(t.phone),1)]),"item.location":a(({item:t})=>[s("div",He,i(t.city)+", "+i(t.state),1)]),"item.source":a(({item:t})=>[s("div",Ke,i(t.source),1)]),"item.status":a(({item:t})=>[l(Te,{color:se(t.status),size:"small",label:"",class:"text-capitalize"},{default:a(()=>[r(i(t.status),1)]),_:2},1032,["color"])]),"item.owner":a(({item:t})=>[s("div",Xe,i(t.owner),1)]),"item.lastContacted":a(({item:t})=>[s("div",Ze,i(t.lastContacted),1)]),"item.actions":a(({item:t})=>[l(f,{icon:"",variant:"text",color:"medium-emphasis"},{default:a(()=>[l(C,{icon:"tabler-dots-vertical"}),l($e,{activator:"parent"},{default:a(()=>[l(De,null,{default:a(()=>[l(O,{to:{name:"sales-leads-id",params:{id:t.id}}},{prepend:a(()=>[l(C,{icon:"tabler-eye"})]),default:a(()=>[l(P,null,{default:a(()=>e[19]||(e[19]=[r("View & Edit")])),_:1,__:[19]})]),_:2},1032,["to"]),l(O,{onClick:R=>ce(t.id)},{prepend:a(()=>[l(C,{icon:"tabler-note"})]),default:a(()=>[l(P,null,{default:a(()=>e[20]||(e[20]=[r("Add Note")])),_:1,__:[20]})]),_:2},1032,["onClick"]),l(O,{onClick:R=>ne(t.id)},{prepend:a(()=>[l(C,{icon:"tabler-trash"})]),default:a(()=>[l(P,null,{default:a(()=>e[21]||(e[21]=[r("Delete")])),_:1,__:[21]})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:a(()=>[l(m,{page:o(y),"onUpdate:page":e[6]||(e[6]=t=>p(y)?y.value=t:null),"items-per-page":o(_),"total-items":o(z)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","model-value","page","items","items-length"])]),_:1}),l(Y,{modelValue:o(b),"onUpdate:modelValue":e[12]||(e[12]=t=>p(b)?b.value=t:null),"max-width":"600"},{default:a(()=>[l(U,null,{default:a(()=>[l(E,null,{default:a(()=>[l(B,null,{default:a(()=>e[22]||(e[22]=[r("Import Leads from CSV")])),_:1,__:[22]})]),_:1}),l(w,null,{default:a(()=>[s("div",et,[l(f,{variant:"tonal",color:"secondary",size:"small","prepend-icon":"tabler-download",onClick:de},{default:a(()=>e[23]||(e[23]=[r(" Download Example CSV ")])),_:1,__:[23]})]),l(Ae,{modelValue:o(V),"onUpdate:modelValue":e[10]||(e[10]=t=>p(V)?V.value=t:null),label:"Select CSV File",accept:".csv","prepend-icon":"tabler-file-upload","show-size":"",onChange:re},null,8,["modelValue"])]),_:1}),l(Q,null,{default:a(()=>[l(F),l(f,{color:"secondary",variant:"tonal",onClick:e[11]||(e[11]=t=>b.value=!1)},{default:a(()=>e[24]||(e[24]=[r(" Cancel ")])),_:1,__:[24]}),l(f,{color:"primary",onClick:ue},{default:a(()=>e[25]||(e[25]=[r(" Import ")])),_:1,__:[25]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(Y,{modelValue:o(x),"onUpdate:modelValue":e[14]||(e[14]=t=>p(x)?x.value=t:null),"max-width":"500"},{default:a(()=>[l(U,null,{default:a(()=>[l(E,null,{default:a(()=>[l(B,null,{default:a(()=>e[26]||(e[26]=[r("Confirm Delete")])),_:1,__:[26]})]),_:1}),l(w,null,{default:a(()=>e[27]||(e[27]=[r(" Are you sure you want to delete this lead? This action cannot be undone. ")])),_:1,__:[27]}),l(Q,null,{default:a(()=>[l(F),l(f,{color:"secondary",variant:"tonal",onClick:e[13]||(e[13]=t=>x.value=!1)},{default:a(()=>e[28]||(e[28]=[r(" Cancel ")])),_:1,__:[28]}),l(f,{color:"error",onClick:ie},{default:a(()=>e[29]||(e[29]=[r(" Delete ")])),_:1,__:[29]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(ge,{"is-dialog-visible":o(S),"onUpdate:isDialogVisible":e[15]||(e[15]=t=>p(S)?S.value=t:null),"lead-id":o(j)||0,onNoteAdded:pe},null,8,["is-dialog-visible","lead-id"])])}}});export{Jt as default};
