import{_ as w}from"./AppTextarea.vue_vue_type_script_setup_true_lang-ClldfiF4.js";import{_ as D}from"./AppTextField.vue_vue_type_script_setup_true_lang-CE_-WvVa.js";import{d as F,r as d,P as N,g as U,f as l,au as i,m as u,b as e,t as m,aM as k,a3 as v,aO as B,o as I}from"./main-DIUPubGx.js";import{V as S}from"./VDialog-DcsiL6nn.js";import{a as h,b as E,d as M,V as $}from"./VCard-DMcKirUI.js";import{V as O}from"./VCardText-D2YeN9Zz.js";import{V as P}from"./VForm-eG2mnAns.js";import{V as R,a as p}from"./VRow-TTCWxOo6.js";import{V as z}from"./VFileInput-CG1N4mpY.js";import{V as j}from"./VSpacer-DaB-4bzu.js";const Z=F({__name:"AddNoteModal",props:{isDialogVisible:{type:Boolean},leadId:{}},emits:["update:isDialogVisible","noteAdded"],setup(b,{emit:C}){const f=b,c=C,t=d(""),s=d(""),V=d([]),n=N({get:()=>f.isDialogVisible,set:a=>c("update:isDialogVisible",a)}),_=()=>{t.value="",s.value="",V.value=[]},A=a=>{const o=a.target;o.files&&(V.value=Array.from(o.files))},g=async()=>{try{const a=await B("/v1/notes",{method:"POST",body:{lead_id:f.leadId,title:t.value,description:s.value}});a.success?(console.log("Note added successfully:",a.data),c("noteAdded"),n.value=!1,_()):console.error("Failed to add note:",a.message)}catch(a){console.error("Error adding note:",a)}},x=()=>{n.value=!1,_()};return(a,o)=>{const y=D,T=w;return I(),U(S,{modelValue:u(n),"onUpdate:modelValue":o[2]||(o[2]=r=>i(n)?n.value=r:null),"max-width":"600"},{default:l(()=>[e($,null,{default:l(()=>[e(h,null,{default:l(()=>[e(E,null,{default:l(()=>o[3]||(o[3]=[m("Add Note")])),_:1,__:[3]})]),_:1}),e(O,null,{default:l(()=>[e(P,{onSubmit:k(g,["prevent"])},{default:l(()=>[e(R,null,{default:l(()=>[e(p,{cols:"12"},{default:l(()=>[e(y,{modelValue:u(t),"onUpdate:modelValue":o[0]||(o[0]=r=>i(t)?t.value=r:null),label:"Title",placeholder:"Enter note title"},null,8,["modelValue"])]),_:1}),e(p,{cols:"12"},{default:l(()=>[e(T,{modelValue:u(s),"onUpdate:modelValue":o[1]||(o[1]=r=>i(s)?s.value=r:null),label:"Description",placeholder:"Enter note description...",rows:"6"},null,8,["modelValue"])]),_:1}),e(p,{cols:"12"},{default:l(()=>[e(z,{label:"Attachments",multiple:"","prepend-icon":"tabler-paperclip",placeholder:"Upload files",chips:"","show-size":"",onChange:A})]),_:1})]),_:1})]),_:1})]),_:1}),e(M,null,{default:l(()=>[e(j),e(v,{color:"secondary",variant:"tonal",onClick:x},{default:l(()=>o[4]||(o[4]=[m(" Cancel ")])),_:1,__:[4]}),e(v,{color:"primary",onClick:g},{default:l(()=>o[5]||(o[5]=[m(" Add Note ")])),_:1,__:[5]})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}});export{Z as _};
