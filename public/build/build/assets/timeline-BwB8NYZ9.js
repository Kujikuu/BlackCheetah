import{_ as le}from"./AppSelect.vue_vue_type_script_setup_true_lang-B5FICR3b.js";import{L,M as R,c3 as se,aq as O,ap as ae,ak as ne,N as A,b as i,ax as P,az as oe,ae as Y,c4 as G,af as H,a1 as M,U as J,bP as re,Y as de,r as S,w as K,_ as z,b9 as Q,bT as ce,bl as ue,bO as me,ab as fe,aB as ve,ac as v,P as B,bf as he,bU as _e,bY as ye,d as Ce,bt as be,G as ge,c as w,f as l,j as ke,o as C,F as j,i as N,m as T,g as D,e as m,v as b,t as k,aR as pe,l as F,a9 as I}from"./main-gemCwVks.js";import{u as Ve}from"./useApi-D_y4oFWX.js";import{V as Te,a as De}from"./VRow-DiX7eN30.js";import{V as x,a as U,b as E,d as Se}from"./VCard-DJ82mpnW.js";import{V as $}from"./VCardText-BD5AHO-w.js";import{V as q}from"./VAvatar-12xz6mHy.js";import{V as ze}from"./VChip-DlNApjyg.js";import{_ as we}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./form-DjHlhIbZ.js";import"./VSelect-C9dxRhag.js";import"./VTextField-BhxF6EAD.js";import"./VImg-DSB6m92Q.js";import"./VField-CsHfcJSz.js";import"./forwardRefs--KQCZfKO.js";import"./VInput-B3GinL-f.js";import"./VList-MyW-iB3v.js";import"./VDivider-B4ry9pxl.js";import"./dialog-transition-C9rYmnXC.js";import"./VMenu-CeaiRCNz.js";import"./VOverlay-p8m6-W96.js";import"./scopeId-BgtgI3QF.js";import"./VCheckboxBtn-ZAK0D-Rf.js";import"./VSelectionControl-COVpGwiX.js";/* empty css              */import"./VSlideGroup-CEWgOBQJ.js";const Ie=R({dotColor:String,fillDot:Boolean,hideDot:Boolean,icon:J,iconColor:String,lineColor:String,...M(),...H(),...G(),...Y()},"VTimelineDivider"),xe=L()({name:"VTimelineDivider",props:Ie(),setup(e,n){let{slots:d}=n;const{sizeClasses:_,sizeStyles:y}=se(e,"v-timeline-divider__dot"),{backgroundColorStyles:h,backgroundColorClasses:o}=O(()=>e.dotColor),{roundedClasses:c}=ae(e,"v-timeline-divider__dot"),{elevationClasses:u}=ne(e),{backgroundColorClasses:g,backgroundColorStyles:p}=O(()=>e.lineColor);return A(()=>i("div",{class:["v-timeline-divider",{"v-timeline-divider--fill-dot":e.fillDot},e.class],style:e.style},[i("div",{class:["v-timeline-divider__before",g.value],style:p.value},null),!e.hideDot&&i("div",{key:"dot",class:["v-timeline-divider__dot",u.value,c.value,_.value],style:y.value},[i("div",{class:["v-timeline-divider__inner-dot",o.value,c.value],style:h.value},[d.default?i(oe,{key:"icon-defaults",disabled:!e.icon,defaults:{VIcon:{color:e.iconColor,icon:e.icon,size:e.size}}},d.default):i(P,{key:"icon",color:e.iconColor,icon:e.icon,size:e.size},null)])]),i("div",{class:["v-timeline-divider__after",g.value],style:p.value},null)])),{}}}),W=R({density:String,dotColor:String,fillDot:Boolean,hideDot:Boolean,hideOpposite:{type:Boolean,default:void 0},icon:J,iconColor:String,lineInset:[Number,String],side:{type:String,validator:e=>e==null||["start","end"].includes(e)},...M(),...ce(),...Y(),...H(),...G(),...Q()},"VTimelineItem"),$e=L()({name:"VTimelineItem",props:W(),setup(e,n){let{slots:d}=n;const{dimensionStyles:_}=re(e),y=de(0),h=S();return K(h,o=>{var c;o&&(y.value=((c=o.$el.querySelector(".v-timeline-divider__dot"))==null?void 0:c.getBoundingClientRect().width)??0)},{flush:"post"}),A(()=>{var o,c;return i("div",{class:["v-timeline-item",{"v-timeline-item--fill-dot":e.fillDot,"v-timeline-item--side-start":e.side==="start","v-timeline-item--side-end":e.side==="end"},e.class],style:[{"--v-timeline-dot-size":z(y.value),"--v-timeline-line-inset":e.lineInset?`calc(var(--v-timeline-dot-size) / 2 + ${z(e.lineInset)})`:z(0)},e.style]},[i("div",{class:"v-timeline-item__body",style:_.value},[(o=d.default)==null?void 0:o.call(d)]),i(xe,{ref:h,hideDot:e.hideDot,icon:e.icon,iconColor:e.iconColor,size:e.size,elevation:e.elevation,dotColor:e.dotColor,fillDot:e.fillDot,rounded:e.rounded},{default:d.icon}),e.density!=="compact"&&i("div",{class:"v-timeline-item__opposite"},[!e.hideOpposite&&((c=d.opposite)==null?void 0:c.call(d))])])}),{}}}),Pe=R({align:{type:String,default:"center",validator:e=>["center","start"].includes(e)},direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},justify:{type:String,default:"auto",validator:e=>["auto","center"].includes(e)},side:{type:String,validator:e=>e==null||["start","end"].includes(e)},lineThickness:{type:[String,Number],default:2},lineColor:String,truncateLine:{type:String,validator:e=>["start","end","both"].includes(e)},...ye(W({lineInset:0}),["dotColor","fillDot","hideOpposite","iconColor","lineInset","size"]),...M(),..._e(),...Q(),...he()},"VTimeline"),Be=L()({name:"VTimeline",props:Pe(),setup(e,n){let{slots:d}=n;const{themeClasses:_}=ue(e),{densityClasses:y}=me(e),{rtlClasses:h}=fe();ve({VTimelineDivider:{lineColor:v(()=>e.lineColor)},VTimelineItem:{density:v(()=>e.density),dotColor:v(()=>e.dotColor),fillDot:v(()=>e.fillDot),hideOpposite:v(()=>e.hideOpposite),iconColor:v(()=>e.iconColor),lineColor:v(()=>e.lineColor),lineInset:v(()=>e.lineInset),size:v(()=>e.size)}});const o=B(()=>{const u=e.side?e.side:e.density!=="default"?"end":null;return u&&`v-timeline--side-${u}`}),c=B(()=>{const u=["v-timeline--truncate-line-start","v-timeline--truncate-line-end"];switch(e.truncateLine){case"both":return u;case"start":return u[0];case"end":return u[1];default:return null}});return A(()=>i(e.tag,{class:["v-timeline",`v-timeline--${e.direction}`,`v-timeline--align-${e.align}`,`v-timeline--justify-${e.justify}`,c.value,{"v-timeline--inset-line":!!e.lineInset},_.value,y.value,o.value,h.value,e.class],style:[{"--v-timeline-line-thickness":z(e.lineThickness)},e.style]},d)),{}}}),Le={class:"d-flex justify-space-between align-center"},Re={class:"text-body-1 text-high-emphasis mb-1"},Ae={class:"text-h4"},Me={style:{"inline-size":"10rem"}},Oe={class:"d-flex flex-column"},je={class:"app-timeline-meta text-sm font-weight-medium"},Ne={class:"app-timeline-meta text-xs"},Fe={class:"v-timeline-avatar-wrapper rounded-circle"},Ue={class:"app-timeline-text mb-0"},Ee=Ce({__name:"timeline",setup(e){const n=ke(),{data:d,execute:_,isFetching:y}=Ve("/v1/franchisor/dashboard/timeline"),{smAndDown:h}=be(),o=S("all"),c=[{title:"All",value:"all"},{title:"Completed",value:"completed"},{title:"Scheduled",value:"scheduled"},{title:"Overdue",value:"overdue"}],u=S([]),g=S([{title:"Total Milestones",value:"0",icon:"tabler-flag",color:"primary"},{title:"Completed",value:"0",icon:"tabler-circle-check",color:"success"},{title:"Scheduled",value:"0",icon:"tabler-calendar",color:"info"},{title:"Overdue",value:"0",icon:"tabler-alert-triangle",color:"error"}]),p=a=>{switch(a.toLowerCase()){case"completed":return"success";case"scheduled":return"info";case"overdue":return"error";default:return"primary"}},X=a=>{const s=new Date(a),t=new Date().getTime()-s.getTime(),r=Math.ceil(t/(1e3*60*60*24));if(r===0)return"Today";if(r===1)return"1 day ago";if(r>1&&r<=7)return`${r} days ago`;if(r>7&&r<=14)return`${Math.ceil(r/7)} week ago`;if(r>14)return`${Math.ceil(r/7)} weeks ago`;if(r<0){const V=Math.abs(r);return V===1?"In 1 day":V<=7?`In ${V} days`:`In ${Math.ceil(V/7)} weeks`}return a};K(d,a=>{const s=a;if(s!=null&&s.success&&(s!=null&&s.data)){const f=s.data;u.value=Array.isArray(f.timeline)?f.timeline.map(t=>({id:t.id,title:t.title,description:t.description,week:t.week,date:t.date||X(t.created_at),status:t.status,icon:t.icon||"tabler-calendar",color:p(t.status)})):[],f.stats&&(g.value=[{title:"Total Milestones",value:(f.stats.total_milestones||0).toLocaleString(),icon:"tabler-flag",color:"primary"},{title:"Completed",value:(f.stats.completed||0).toLocaleString(),icon:"tabler-circle-check",color:"success"},{title:"Scheduled",value:(f.stats.scheduled||0).toLocaleString(),icon:"tabler-calendar",color:"info"},{title:"Overdue",value:(f.stats.overdue||0).toLocaleString(),icon:"tabler-alert-triangle",color:"error"}])}},{immediate:!0});const Z=B(()=>o.value==="all"?u.value:u.value.filter(a=>a.status===o.value)),ee=a=>{a.description.includes("Lead")?n.push("/franchisor/dashboard/leads"):(a.description.includes("Task")||a.description.includes("Technical"))&&n.push("/franchisor/dashboard/operations")},te=a=>{a.description.includes("Lead")?n.push("/franchisor/dashboard/leads"):(a.description.includes("Task"),n.push("/franchisor/dashboard/operations"))},ie=a=>{a.description.includes("Lead")?n.push("/franchisor/dashboard/leads"):(a.description.includes("Task"),n.push("/franchisor/dashboard/operations"))};return ge(()=>{_()}),(a,s)=>{const f=le;return C(),w("section",null,[i(Te,{class:"mb-6"},{default:l(()=>[(C(!0),w(j,null,N(T(g),t=>(C(),D(De,{key:t.title,cols:"12",sm:"6",md:"3"},{default:l(()=>[i(x,null,{default:l(()=>[i($,null,{default:l(()=>[m("div",Le,[m("div",null,[m("div",Re,b(t.title),1),m("h4",Ae,b(t.value),1)]),i(q,{color:t.color,variant:"tonal",rounded:"",size:"42"},{default:l(()=>[i(P,{icon:t.icon,size:"26"},null,8,["icon"])]),_:2},1032,["color"])])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),i(x,null,{default:l(()=>[i(U,null,{append:l(()=>[m("div",Me,[i(f,{modelValue:T(o),"onUpdate:modelValue":s[0]||(s[0]=t=>pe(o)?o.value=t:null),items:c,placeholder:"Filter"},null,8,["modelValue"])])]),default:l(()=>[i(E,null,{default:l(()=>s[1]||(s[1]=[k("Development Timeline")])),_:1,__:[1]})]),_:1}),i($,null,{default:l(()=>[i(Be,{align:"start","line-inset":"19","truncate-line":"start",justify:"center",density:T(h)?"compact":"default",class:"mt-4"},{default:l(()=>[(C(!0),w(j,null,N(T(Z),t=>(C(),D($e,{key:t.id,"fill-dot":"",size:"small"},{opposite:l(()=>[m("div",Oe,[m("span",je,b(t.week),1),m("span",Ne,b(t.date),1)])]),icon:l(()=>[m("div",Fe,[i(q,{size:"32",color:t.color,variant:"tonal"},{default:l(()=>[i(P,{icon:t.icon,size:"20"},null,8,["icon"])]),_:2},1032,["color"])])]),default:l(()=>[i(x,{class:"mb-6 mt-n4"},{default:l(()=>[i(U,{class:"pb-4"},{default:l(()=>[i(E,{class:"d-flex align-center justify-space-between"},{default:l(()=>[m("span",null,b(t.title),1),i(ze,{color:t.color,size:"small",label:"",class:"text-capitalize"},{default:l(()=>[k(b(t.status),1)]),_:2},1032,["color"])]),_:2},1024)]),_:2},1024),i($,null,{default:l(()=>[m("p",Ue,b(t.description),1)]),_:2},1024),i(Se,null,{default:l(()=>[i(I,{variant:"tonal",size:"small",onClick:r=>ee(t)},{default:l(()=>s[2]||(s[2]=[k(" View Details ")])),_:2,__:[2]},1032,["onClick"]),t.status==="overdue"?(C(),D(I,{key:0,variant:"tonal",color:"error",size:"small",onClick:r=>te(t)},{default:l(()=>s[3]||(s[3]=[k(" Take Action ")])),_:2,__:[3]},1032,["onClick"])):F("",!0),t.status==="scheduled"?(C(),D(I,{key:1,variant:"tonal",color:"info",size:"small",onClick:r=>ie(t)},{default:l(()=>s[4]||(s[4]=[k(" Reschedule ")])),_:2,__:[4]},1032,["onClick"])):F("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["density"])]),_:1})]),_:1})])}}}),_t=we(Ee,[["__scopeId","data-v-5b0ddc98"]]);export{_t as default};
