import{_ as h}from"./AppTextarea.vue_vue_type_script_setup_true_lang-DJuxuOVb.js";import{_ as F}from"./AppTextField.vue_vue_type_script_setup_true_lang-DSmTBduk.js";import{V as T,_ as N}from"./VDialog-6C-NQXCx.js";import{d as k,r as p,P as B,g as S,f as t,aR as m,m as u,b as o,b3 as U,a9 as b,t as C,b5 as E,o as $}from"./main-gemCwVks.js";import{V as I}from"./VCardText-BD5AHO-w.js";import{V as R}from"./VForm-FUZpY-zG.js";import{V as P,a as c}from"./VRow-DiX7eN30.js";import{V as z}from"./VFileInput-CB0ItP4X.js";import{d as M,V as O}from"./VCard-DJ82mpnW.js";import{V as j}from"./VSpacer-Cpeayo2U.js";const Z=k({__name:"AddNoteDialog",props:{isDialogVisible:{type:Boolean},leadId:{}},emits:["update:isDialogVisible","noteAdded"],setup(D,{emit:A}){const f=D,V=A,l=p(""),s=p(""),i=p([]),n=B({get:()=>f.isDialogVisible,set:a=>V("update:isDialogVisible",a)}),_=()=>{l.value="",s.value="",i.value=[]},w=a=>{const e=a.target;e.files&&(i.value=Array.from(e.files))},g=async()=>{try{const a=new FormData;a.append("lead_id",String(f.leadId)),a.append("title",l.value),a.append("description",s.value),i.value.forEach(d=>{a.append("attachments[]",d)});const e=await E("/v1/notes",{method:"POST",body:a});e.success?(console.log("Note added successfully:",e.data),V("noteAdded"),n.value=!1,_()):console.error("Failed to add note:",e.message)}catch(a){console.error("Error adding note:",a)}},v=()=>{n.value=!1,_()};return(a,e)=>{const d=N,x=F,y=h;return $(),S(T,{modelValue:u(n),"onUpdate:modelValue":e[2]||(e[2]=r=>m(n)?n.value=r:null),"max-width":"600"},{default:t(()=>[o(d,{onClick:v}),o(O,{title:"Add Note"},{default:t(()=>[o(I,null,{default:t(()=>[o(R,{onSubmit:U(g,["prevent"])},{default:t(()=>[o(P,null,{default:t(()=>[o(c,{cols:"12"},{default:t(()=>[o(x,{modelValue:u(l),"onUpdate:modelValue":e[0]||(e[0]=r=>m(l)?l.value=r:null),label:"Title",placeholder:"Enter note title"},null,8,["modelValue"])]),_:1}),o(c,{cols:"12"},{default:t(()=>[o(y,{modelValue:u(s),"onUpdate:modelValue":e[1]||(e[1]=r=>m(s)?s.value=r:null),label:"Description",placeholder:"Enter note description...",rows:"6"},null,8,["modelValue"])]),_:1}),o(c,{cols:"12"},{default:t(()=>[o(z,{label:"Attachments",multiple:"","prepend-icon":"tabler-paperclip",placeholder:"Upload files",chips:"","show-size":"",onChange:w})]),_:1})]),_:1})]),_:1})]),_:1}),o(M,null,{default:t(()=>[o(j),o(b,{color:"secondary",variant:"tonal",onClick:v},{default:t(()=>e[3]||(e[3]=[C(" Cancel ")])),_:1,__:[3]}),o(b,{color:"primary",onClick:g},{default:t(()=>e[4]||(e[4]=[C(" Add Note ")])),_:1,__:[4]})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}});export{Z as _};
