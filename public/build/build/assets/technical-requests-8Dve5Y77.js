import{V as Re,_ as Ee}from"./VDataTableServer-CHHNzY5p.js";import{_ as Ve}from"./AppTextField.vue_vue_type_script_setup_true_lang-CE_-WvVa.js";import{_ as we}from"./AppSelect.vue_vue_type_script_setup_true_lang-BmIrMwIH.js";import{t as ce}from"./technical-request-KF7Vos1m.js";import{_ as Te}from"./AppTextarea.vue_vue_type_script_setup_true_lang-ClldfiF4.js";import{_ as je}from"./AppDrawerHeaderSection.vue_vue_type_script_setup_true_lang-BWySYBLI.js";import{d as ke,r as c,w as Ce,g as R,f as l,b as e,e as r,c as L,l as J,v as d,aM as Ie,m as f,au as Be,a3 as k,t as u,i as he,F as De,o as g,aa as p,P as Fe,G as Pe,a as Le,aO as fe}from"./main-DIUPubGx.js";import{r as Q}from"./validators-BYiRrju8.js";import{V as Oe}from"./VNavigationDrawer-Bn1cY3S8.js";import{V as j}from"./VDivider-C8QKKA0M.js";import{V as B}from"./VCardText-D2YeN9Zz.js";import{V as W}from"./VAvatar-DxIbsahA.js";import{V as X,a as ve,b as ye,d as Ne}from"./VCard-DMcKirUI.js";import{V as Me}from"./VForm-eG2mnAns.js";import{V as ae,a as v}from"./VRow-TTCWxOo6.js";import{V as se,a as q,b as A,d as qe,c as He}from"./VList-Dz5iFJjN.js";import{V as de}from"./VTooltip-Bo_A2YON.js";import{V as _e}from"./VDialog-DcsiL6nn.js";import{V as be}from"./VSpacer-DaB-4bzu.js";import{V as ge}from"./VMenu-CwiFW7kA.js";import{V as le}from"./VChip-Bi8x2DWS.js";import{V as xe}from"./VImg-Cfb8l-y3.js";import"./VPagination-ChxMJmKV.js";import"./VDataTable-DTRaAsCG.js";import"./VSelect-lJe6bIbl.js";import"./VTextField-X5C_UOFg.js";/* empty css                   */import"./VCounter-yasx3ALN.js";import"./VField-UKoo2CRi.js";import"./form-C6zvNQ_d.js";import"./easing-Bybner-F.js";import"./VInput-FDuNxTjf.js";import"./forwardRefs-C-GTDzx5.js";import"./dialog-transition-Kk_3GEtN.js";import"./VOverlay-DJ8t3L0E.js";import"./lazy-D-4YzKtR.js";import"./scopeId-DaLavy0g.js";import"./VCheckboxBtn-CNm0McQD.js";import"./VSelectionControl-Dd_69FEM.js";import"./VTable-B3jSOyM4.js";import"./filter-BCdKTBoI.js";import"./VTextarea-6ZyvmMaV.js";import"./ssrBoot-BDK10ZCO.js";/* empty css              */import"./VSlideGroup-Cg3oj3HT.js";const Ge={class:"d-flex align-center gap-3"},Ke={key:0,class:"text-sm font-weight-medium"},Qe={class:"text-body-1 font-weight-medium"},Je={class:"text-body-2 text-medium-emphasis"},We=ke({__name:"EditTechnicalRequestDrawer",props:{isDrawerOpen:{type:Boolean},request:{default:void 0}},emits:["update:isDrawerOpen","requestData"],setup(me,{emit:Y}){const b=me,U=Y,E=c(!1),T=c(),y=c({id:null,subject:"",description:"",category:"",priority:"medium",status:"open",attachments:[]}),S=c(null),x=c([]),Z=[{title:"Authentication",value:"Authentication"},{title:"Payment",value:"Payment"},{title:"Dashboard",value:"Dashboard"},{title:"Notifications",value:"Notifications"},{title:"Reports",value:"Reports"},{title:"Other",value:"Other"}],_=[{title:"Low",value:"low"},{title:"Medium",value:"medium"},{title:"High",value:"high"},{title:"Critical",value:"critical"}],oe=[{title:"Open",value:"open"},{title:"In Progress",value:"in-progress"},{title:"Resolved",value:"resolved"},{title:"Closed",value:"closed"}],O=()=>{var i;y.value={id:null,subject:"",description:"",category:"",priority:"medium",status:"open",attachments:[]},x.value=[],(i=T.value)==null||i.reset()},C=i=>{const o=i.target,h=o.files;h&&Array.from(h).forEach(D=>{const M={name:D.name,size:re(D.size),url:URL.createObjectURL(D),file:D};x.value.push(M)}),o&&(o.value="")},N=i=>{x.value.splice(i,1)},re=i=>{if(i===0)return"0 Bytes";const o=1024,h=["Bytes","KB","MB","GB"],D=Math.floor(Math.log(i)/Math.log(o));return`${Math.round(i/o**D*100)/100} ${h[D]}`},I=i=>{var h;if(!i||typeof i!="string")return"tabler-file";const o=(h=i.split(".").pop())==null?void 0:h.toLowerCase();return["jpg","jpeg","png","gif","svg","webp"].includes(o||"")?"tabler-photo":["pdf"].includes(o||"")?"tabler-file-type-pdf":["doc","docx"].includes(o||"")?"tabler-file-type-doc":["txt","log"].includes(o||"")?"tabler-file-text":"tabler-file"};Ce(()=>b.request,i=>{i?(y.value={id:i.id,subject:i.subject,description:i.description,category:i.category,priority:i.priority,status:i.status,attachments:i.attachments||[]},x.value=[...Array.isArray(i.attachments)?i.attachments.filter(o=>o&&(o.name||o.filename)):[]]):O()},{immediate:!0});const ie=()=>{var i;(i=T.value)==null||i.validate().then(({valid:o})=>{o&&(U("requestData",{...y.value,attachments:x.value}),U("update:isDrawerOpen",!1),O())})},F=i=>{U("update:isDrawerOpen",i),i||O()},ne=i=>i.split(" ").map(o=>o.charAt(0)).join("").toUpperCase();return(i,o)=>{const h=je,D=Ve,M=Te,H=we;return g(),R(Oe,{temporary:"",location:"end","model-value":b.isDrawerOpen,width:"500","onUpdate:modelValue":F},{default:l(()=>[e(h,{title:"Edit Technical Request",onCancel:o[0]||(o[0]=m=>F(!1))}),e(j),e(X,{flat:"",class:"mb-4"},{default:l(()=>[e(B,null,{default:l(()=>{var m,V,z,P;return[o[9]||(o[9]=r("div",{class:"text-body-2 text-medium-emphasis mb-3"}," Requested By ",-1)),r("div",Ge,[e(W,{size:"40",color:(m=b.request)!=null&&m.userAvatar?void 0:"primary",image:((V=b.request)==null?void 0:V.userAvatar)||void 0,variant:"tonal"},{default:l(()=>{var n,G;return[!((n=b.request)!=null&&n.userAvatar)&&((G=b.request)!=null&&G.userName)?(g(),L("span",Ke,d(ne(b.request.userName)),1)):J("",!0)]}),_:1},8,["color","image"]),r("div",null,[r("div",Qe,d(((z=b.request)==null?void 0:z.userName)||"Unknown User"),1),r("div",Je,d(((P=b.request)==null?void 0:P.userEmail)||"No email available"),1)])])]}),_:1,__:[9]})]),_:1}),e(j),e(X,{flat:""},{default:l(()=>[e(B,null,{default:l(()=>[e(Me,{ref_key:"refForm",ref:T,modelValue:f(E),"onUpdate:modelValue":o[8]||(o[8]=m=>Be(E)?E.value=m:null),onSubmit:Ie(ie,["prevent"])},{default:l(()=>[e(ae,null,{default:l(()=>[e(v,{cols:"12"},{default:l(()=>[e(D,{modelValue:f(y).subject,"onUpdate:modelValue":o[1]||(o[1]=m=>f(y).subject=m),label:"Subject",placeholder:"Enter request subject",rules:[f(Q)]},null,8,["modelValue","rules"])]),_:1}),e(v,{cols:"12"},{default:l(()=>[e(M,{modelValue:f(y).description,"onUpdate:modelValue":o[2]||(o[2]=m=>f(y).description=m),label:"Description",placeholder:"Enter detailed description",rows:"4",rules:[f(Q)]},null,8,["modelValue","rules"])]),_:1}),e(v,{cols:"12"},{default:l(()=>[e(H,{modelValue:f(y).category,"onUpdate:modelValue":o[3]||(o[3]=m=>f(y).category=m),label:"Category",items:Z,rules:[f(Q)]},null,8,["modelValue","rules"])]),_:1}),e(v,{cols:"12",md:"6"},{default:l(()=>[e(H,{modelValue:f(y).priority,"onUpdate:modelValue":o[4]||(o[4]=m=>f(y).priority=m),label:"Priority",items:_,rules:[f(Q)]},null,8,["modelValue","rules"])]),_:1}),e(v,{cols:"12",md:"6"},{default:l(()=>[e(H,{modelValue:f(y).status,"onUpdate:modelValue":o[5]||(o[5]=m=>f(y).status=m),label:"Status",items:oe,rules:[f(Q)]},null,8,["modelValue","rules"])]),_:1}),e(v,{cols:"12"},{default:l(()=>[o[12]||(o[12]=r("div",{class:"text-body-2 text-medium-emphasis mb-2"}," Attachments ",-1)),r("input",{ref_key:"fileInput",ref:S,type:"file",multiple:"",hidden:"",onChange:C},null,544),e(k,{variant:"outlined",color:"primary","prepend-icon":"tabler-paperclip",onClick:o[6]||(o[6]=m=>{var V;return(V=f(S))==null?void 0:V.click()})},{default:l(()=>o[10]||(o[10]=[u(" Add Attachment ")])),_:1,__:[10]}),f(x).length>0?(g(),R(se,{key:0,lines:"two",density:"compact",class:"mt-3"},{default:l(()=>[(g(!0),L(De,null,he(f(x),(m,V)=>(g(),R(q,{key:V},{prepend:l(()=>[e(W,{color:"primary",variant:"tonal",size:"40"},{default:l(()=>[e(p,{icon:I(m.name||m.filename)},null,8,["icon"])]),_:2},1024)]),append:l(()=>[e(k,{icon:"",variant:"text",size:"small",color:"error",onClick:z=>N(V)},{default:l(()=>[e(p,{icon:"tabler-x"}),e(de,{activator:"parent",location:"top"},{default:l(()=>o[11]||(o[11]=[u(" Remove ")])),_:1,__:[11]})]),_:2},1032,["onClick"])]),default:l(()=>[e(A,{class:"font-weight-medium"},{default:l(()=>[u(d(m.name||m.filename||"Unknown File"),1)]),_:2},1024),e(qe,null,{default:l(()=>[u(d(m.size||"Unknown Size"),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})):J("",!0)]),_:1,__:[12]}),e(v,{cols:"12"},{default:l(()=>[e(k,{type:"submit",class:"me-3"},{default:l(()=>o[13]||(o[13]=[u(" Update Request ")])),_:1,__:[13]}),e(k,{variant:"outlined",color:"secondary",onClick:o[7]||(o[7]=m=>F(!1))},{default:l(()=>o[14]||(o[14]=[u(" Cancel ")])),_:1,__:[14]})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}}),Xe={class:"me-3 d-flex gap-3"},Ye={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},Ze={style:{"inline-size":"15.625rem"}},et={class:"text-center pa-8"},tt={class:"text-body-1 font-weight-medium text-primary"},lt={class:"d-flex align-center gap-x-4"},at={key:1},st={class:"d-flex flex-column"},ot={class:"text-base font-weight-medium"},rt={class:"text-sm text-medium-emphasis"},it={class:"text-body-1"},nt={class:"text-sm text-medium-emphasis"},ut={class:"text-body-1"},dt={class:"d-flex gap-1"},mt={class:"d-flex align-center gap-x-4 mb-4"},pt={key:1},ct={class:"text-h6"},ft={class:"text-body-2 text-medium-emphasis"},vt={class:"text-body-1 font-weight-medium"},yt={class:"text-body-1"},_t={class:"text-body-1"},bt={class:"text-body-1 font-weight-medium"},gt={class:"text-body-1"},xt={class:"text-body-2 text-medium-emphasis mb-2"},Vt={class:"text-body-1 text-medium-emphasis mb-4"},wt={class:"text-start pa-4 bg-surface rounded"},kt={class:"text-body-1 font-weight-medium"},yl=ke({__name:"technical-requests",setup(me){const Y=c(!1),b=c(!1),U=c(!1),E=c(""),T=c(),y=c(),S=c(10),x=c(1),Z=c();c();const _=c([]),oe=s=>{s.sortBy&&s.sortBy.length>0?Z.value=[s.sortBy[0]]:Z.value=[]},O=[{title:"Request ID",key:"requestId"},{title:"User",key:"user"},{title:"Subject",key:"subject"},{title:"Priority",key:"priority"},{title:"Status",key:"status"},{title:"Date",key:"date"},{title:"Actions",key:"actions",sortable:!1}],C=c([]),N=c(0),re=s=>{var w,te;let t=[];return s.attachments&&Array.isArray(s.attachments)&&(t=s.attachments.map((K,ue)=>({name:K.split("/").pop()||`attachment-${ue}`,size:"Unknown",url:K}))),{id:s.id,requestId:s.ticket_number,userName:((w=s.requester)==null?void 0:w.name)||"Unknown",userEmail:((te=s.requester)==null?void 0:te.email)||"",userAvatar:"",subject:s.title,description:s.description,priority:s.priority,status:s.status.replace("_","-"),date:new Date(s.created_at).toISOString().split("T")[0],category:s.category,attachments:t}},I=async()=>{var s;try{Y.value=!0;const t=await ce.getAdminRequests({status:(s=T.value)==null?void 0:s.replace("-","_"),priority:y.value,search:E.value,per_page:S.value,page:x.value});C.value=t.data.data.map(re),N.value=t.data.total}catch(t){console.error("Error fetching technical requests:",t)}finally{Y.value=!1}},ie=Fe(()=>C.value),F=s=>!s||typeof s!="string"?"U":s.split(" ").map(t=>t.charAt(0)).join("").toUpperCase(),ne=async s=>{try{b.value=!0,await fe(`/api/v1/admin/technical-requests/${s}`,{method:"DELETE"}),await I()}catch(t){console.error("Error deleting request:",t)}finally{b.value=!1}},i=async(s,t)=>{try{await fe(`/api/v1/admin/technical-requests/${s}/status`,{method:"PATCH",body:{status:t}}),await I()}catch(w){console.error("Error updating status:",w)}},o=()=>{_.value.length!==0&&(U.value=!0)},h=async()=>{try{b.value=!0,await ce.bulkDelete(_.value),await I(),_.value=[],U.value=!1,console.log("Bulk delete successful")}catch(s){console.error("Error bulk deleting requests:",s)}finally{b.value=!1}},D=o,M=[{title:"Open",value:"open"},{title:"In Progress",value:"in-progress"},{title:"Resolved",value:"resolved"},{title:"Closed",value:"closed"}],H=[{title:"Low",value:"low"},{title:"Medium",value:"medium"},{title:"High",value:"high"},{title:"Critical",value:"critical"}],m=s=>{if(!s||typeof s!="string")return"primary";const t=s.toLowerCase();return t==="open"?"info":t==="in-progress"?"warning":t==="resolved"?"success":t==="closed"?"secondary":"primary"},V=s=>{if(!s||typeof s!="string")return{color:"primary",icon:"tabler-minus"};const t=s.toLowerCase();return t==="low"?{color:"info",icon:"tabler-arrow-down"}:t==="medium"?{color:"warning",icon:"tabler-minus"}:t==="high"?{color:"error",icon:"tabler-arrow-up"}:t==="critical"?{color:"error",icon:"tabler-alert-triangle"}:{color:"primary",icon:"tabler-minus"}},z=c(!1),P=c(!1),n=c(null),G=s=>{n.value={...s,attachments:Array.isArray(s.attachments)?s.attachments:[]},z.value=!0},pe=s=>{n.value={...s},P.value=!0},Ae=s=>{const t=C.value.findIndex(w=>w.id===s.id);t!==-1&&(C.value[t]={...C.value[t],...s}),n.value=null},ee=async(s,t)=>{await i(s,t)},ze=()=>{const s=_.value.length>0?C.value.filter(t=>_.value.includes(t.id)):C.value;console.log("Exporting to CSV:",s)},Ue=()=>{const s=_.value.length>0?C.value.filter(t=>_.value.includes(t.id)):C.value;console.log("Exporting to PDF:",s)},Se=s=>{console.log("Downloading:",s.name)},$e=s=>{var w;if(!s||typeof s!="string")return"tabler-file";const t=(w=s.split(".").pop())==null?void 0:w.toLowerCase();return["jpg","jpeg","png","gif","svg","webp"].includes(t||"")?"tabler-photo":["pdf"].includes(t||"")?"tabler-file-type-pdf":["doc","docx"].includes(t||"")?"tabler-file-type-doc":["xls","xlsx"].includes(t||"")?"tabler-file-type-xls":["txt","log"].includes(t||"")?"tabler-file-text":["zip","rar","7z"].includes(t||"")?"tabler-file-zip":"tabler-file"};return Pe(()=>{I()}),Ce([T,y,E],()=>{I()}),(s,t)=>{const w=we,te=Ve,K=Le("IconBtn"),ue=Ee;return g(),L("section",null,[e(ae,{class:"mb-6"},{default:l(()=>[e(v,{cols:"12"},{default:l(()=>t[15]||(t[15]=[r("div",{class:"d-flex align-center justify-space-between"},[r("div",null,[r("h2",{class:"text-h2 mb-1"}," Technical Requests "),r("p",{class:"text-body-1 text-medium-emphasis"}," Manage and track all technical support requests ")])],-1)])),_:1,__:[15]})]),_:1}),e(X,{class:"mb-6"},{default:l(()=>[e(ve,{class:"pb-4"},{default:l(()=>[e(ye,null,{default:l(()=>t[16]||(t[16]=[u("Filters")])),_:1,__:[16]})]),_:1}),e(B,null,{default:l(()=>[e(ae,null,{default:l(()=>[e(v,{cols:"12",sm:"4"},{default:l(()=>[e(w,{modelValue:T.value,"onUpdate:modelValue":t[0]||(t[0]=a=>T.value=a),placeholder:"Select Status",items:M,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1}),e(v,{cols:"12",sm:"4"},{default:l(()=>[e(w,{modelValue:y.value,"onUpdate:modelValue":t[1]||(t[1]=a=>y.value=a),placeholder:"Select Priority",items:H,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(j),e(B,{class:"d-flex flex-wrap gap-4"},{default:l(()=>[r("div",Xe,[e(w,{"model-value":S.value,items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"6.25rem"},"onUpdate:modelValue":t[2]||(t[2]=a=>S.value=parseInt(a,10))},null,8,["model-value"]),_.value.length>0?(g(),R(k,{key:0,variant:"tonal",color:"error",onClick:f(D)},{default:l(()=>[e(p,{icon:"tabler-trash",class:"me-2"}),u(" Delete Selected ("+d(_.value.length)+") ",1)]),_:1},8,["onClick"])):J("",!0)]),e(be),r("div",Ye,[r("div",Ze,[e(te,{modelValue:E.value,"onUpdate:modelValue":t[3]||(t[3]=a=>E.value=a),placeholder:"Search Requests"},null,8,["modelValue"])]),e(k,{variant:"tonal",color:"secondary"},{default:l(()=>[e(p,{icon:"tabler-upload",class:"me-2"}),t[19]||(t[19]=u(" Export ")),e(ge,{activator:"parent"},{default:l(()=>[e(se,null,{default:l(()=>[e(q,{onClick:ze},{prepend:l(()=>[e(p,{icon:"tabler-file-type-csv"})]),default:l(()=>[e(A,null,{default:l(()=>t[17]||(t[17]=[u("Export to CSV")])),_:1,__:[17]})]),_:1}),e(q,{onClick:Ue},{prepend:l(()=>[e(p,{icon:"tabler-file-type-pdf"})]),default:l(()=>[e(A,null,{default:l(()=>t[18]||(t[18]=[u("Export to PDF")])),_:1,__:[18]})]),_:1})]),_:1})]),_:1})]),_:1,__:[19]})])]),_:1}),e(j),e(Re,{"items-per-page":S.value,"onUpdate:itemsPerPage":t[5]||(t[5]=a=>S.value=a),"model-value":_.value,"onUpdate:modelValue":t[6]||(t[6]=a=>_.value=a),page:x.value,"onUpdate:page":t[7]||(t[7]=a=>x.value=a),items:ie.value,"item-value":"id","items-length":N.value,headers:O,class:"text-no-wrap","show-select":"","onUpdate:options":oe},{"no-data":l(()=>[r("div",et,[e(p,{icon:"tabler-inbox-off",size:"64",class:"mb-4 text-disabled"}),t[20]||(t[20]=r("h3",{class:"text-h5 mb-2"}," No Technical Requests Found ",-1)),t[21]||(t[21]=r("p",{class:"text-body-1 text-medium-emphasis mb-4"}," No requests match your search criteria. Try adjusting your filters. ",-1))])]),"item.requestId":l(({item:a})=>[r("div",tt,d(a.requestId),1)]),"item.user":l(({item:a})=>[r("div",lt,[e(W,{size:"34",variant:a.userAvatar?void 0:"tonal",color:"primary"},{default:l(()=>[a.userAvatar?(g(),R(xe,{key:0,src:a.userAvatar},null,8,["src"])):(g(),L("span",at,d(F(a.userName)),1))]),_:2},1032,["variant"]),r("div",st,[r("h6",ot,d(a.userName),1),r("div",rt,d(a.userEmail),1)])])]),"item.subject":l(({item:a})=>[r("div",it,d(a.subject),1),r("div",nt,d(a.category),1)]),"item.priority":l(({item:a})=>[e(le,{color:V(a.priority).color,size:"small",label:"",class:"text-capitalize"},{default:l(()=>[e(p,{icon:V(a.priority).icon,size:"16",class:"me-1"},null,8,["icon"]),u(" "+d(a.priority),1)]),_:2},1032,["color"])]),"item.status":l(({item:a})=>[e(le,{color:m(a.status),size:"small",label:"",class:"text-capitalize"},{default:l(()=>[u(d(a.status),1)]),_:2},1032,["color"])]),"item.date":l(({item:a})=>[r("div",ut,d(a.date),1)]),"item.actions":l(({item:a})=>[r("div",dt,[e(K,{size:"small",onClick:$=>G(a)},{default:l(()=>[e(p,{icon:"tabler-eye"}),e(de,{activator:"parent",location:"top"},{default:l(()=>t[22]||(t[22]=[u(" View ")])),_:1,__:[22]})]),_:2},1032,["onClick"]),e(k,{icon:"",variant:"text",color:"medium-emphasis",size:"small"},{default:l(()=>[e(p,{icon:"tabler-dots-vertical",size:"22"}),e(ge,{activator:"parent"},{default:l(()=>[e(se,null,{default:l(()=>[e(q,{onClick:$=>G(a)},{prepend:l(()=>[e(p,{icon:"tabler-eye"})]),default:l(()=>[e(A,null,{default:l(()=>t[23]||(t[23]=[u("View Details")])),_:1,__:[23]})]),_:2},1032,["onClick"]),e(q,{onClick:$=>pe(a)},{prepend:l(()=>[e(p,{icon:"tabler-pencil"})]),default:l(()=>[e(A,null,{default:l(()=>t[24]||(t[24]=[u("Edit")])),_:1,__:[24]})]),_:2},1032,["onClick"]),e(j,{class:"my-2"}),e(He,null,{default:l(()=>t[25]||(t[25]=[u("Change Status")])),_:1,__:[25]}),e(q,{onClick:$=>ee(a.id,"open")},{prepend:l(()=>[e(p,{icon:"tabler-circle",color:"info"})]),default:l(()=>[e(A,null,{default:l(()=>t[26]||(t[26]=[u("Open")])),_:1,__:[26]})]),_:2},1032,["onClick"]),e(q,{onClick:$=>ee(a.id,"in-progress")},{prepend:l(()=>[e(p,{icon:"tabler-circle",color:"warning"})]),default:l(()=>[e(A,null,{default:l(()=>t[27]||(t[27]=[u("In Progress")])),_:1,__:[27]})]),_:2},1032,["onClick"]),e(q,{onClick:$=>ee(a.id,"resolved")},{prepend:l(()=>[e(p,{icon:"tabler-circle",color:"success"})]),default:l(()=>[e(A,null,{default:l(()=>t[28]||(t[28]=[u("Resolved")])),_:1,__:[28]})]),_:2},1032,["onClick"]),e(q,{onClick:$=>ee(a.id,"closed")},{prepend:l(()=>[e(p,{icon:"tabler-circle",color:"secondary"})]),default:l(()=>[e(A,null,{default:l(()=>t[29]||(t[29]=[u("Closed")])),_:1,__:[29]})]),_:2},1032,["onClick"]),e(j,{class:"my-2"}),e(q,{onClick:$=>ne(a.id)},{prepend:l(()=>[e(p,{icon:"tabler-trash",color:"error"})]),default:l(()=>[e(A,{class:"text-error"},{default:l(()=>t[30]||(t[30]=[u(" Delete ")])),_:1,__:[30]})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])]),bottom:l(()=>[e(ue,{page:x.value,"onUpdate:page":t[4]||(t[4]=a=>x.value=a),"items-per-page":S.value,"total-items":N.value},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","model-value","page","items","items-length"])]),_:1}),e(_e,{modelValue:z.value,"onUpdate:modelValue":t[11]||(t[11]=a=>z.value=a),"max-width":"600"},{default:l(()=>[n.value?(g(),R(X,{key:0},{default:l(()=>[e(ve,null,{append:l(()=>[e(K,{onClick:t[8]||(t[8]=a=>z.value=!1)},{default:l(()=>[e(p,{icon:"tabler-x"})]),_:1})]),default:l(()=>[e(ye,null,{default:l(()=>t[31]||(t[31]=[u("Request Details")])),_:1,__:[31]})]),_:1}),e(j),e(B,null,{default:l(()=>[e(ae,null,{default:l(()=>[e(v,{cols:"12"},{default:l(()=>[r("div",mt,[e(W,{size:"48",variant:n.value.userAvatar?void 0:"tonal",color:"primary"},{default:l(()=>[n.value.userAvatar?(g(),R(xe,{key:0,src:n.value.userAvatar},null,8,["src"])):(g(),L("span",pt,d(F(n.value.userName)),1))]),_:1},8,["variant"]),r("div",null,[r("h6",ct,d(n.value.userName),1),r("div",ft,d(n.value.userEmail),1)])])]),_:1}),e(v,{cols:"6"},{default:l(()=>[t[32]||(t[32]=r("div",{class:"text-body-2 text-medium-emphasis mb-1"}," Request ID ",-1)),r("div",vt,d(n.value.requestId),1)]),_:1,__:[32]}),e(v,{cols:"6"},{default:l(()=>[t[33]||(t[33]=r("div",{class:"text-body-2 text-medium-emphasis mb-1"}," Date ",-1)),r("div",yt,d(n.value.date),1)]),_:1,__:[33]}),e(v,{cols:"6"},{default:l(()=>[t[34]||(t[34]=r("div",{class:"text-body-2 text-medium-emphasis mb-1"}," Priority ",-1)),e(le,{color:V(n.value.priority).color,size:"small",label:"",class:"text-capitalize"},{default:l(()=>[e(p,{icon:V(n.value.priority).icon,size:"16",class:"me-1"},null,8,["icon"]),u(" "+d(n.value.priority),1)]),_:1},8,["color"])]),_:1,__:[34]}),e(v,{cols:"6"},{default:l(()=>[t[35]||(t[35]=r("div",{class:"text-body-2 text-medium-emphasis mb-1"}," Status ",-1)),e(le,{color:m(n.value.status),size:"small",label:"",class:"text-capitalize"},{default:l(()=>[u(d(n.value.status),1)]),_:1},8,["color"])]),_:1,__:[35]}),e(v,{cols:"12"},{default:l(()=>[t[36]||(t[36]=r("div",{class:"text-body-2 text-medium-emphasis mb-1"}," Category ",-1)),r("div",_t,d(n.value.category),1)]),_:1,__:[36]}),e(v,{cols:"12"},{default:l(()=>[t[37]||(t[37]=r("div",{class:"text-body-2 text-medium-emphasis mb-1"}," Subject ",-1)),r("div",bt,d(n.value.subject),1)]),_:1,__:[37]}),e(v,{cols:"12"},{default:l(()=>[t[38]||(t[38]=r("div",{class:"text-body-2 text-medium-emphasis mb-1"}," Description ",-1)),r("div",gt,d(n.value.description),1)]),_:1,__:[38]}),n.value.attachments&&Array.isArray(n.value.attachments)&&n.value.attachments.length>0?(g(),R(v,{key:0,cols:"12"},{default:l(()=>[r("div",xt," Attachments ("+d(Array.isArray(n.value.attachments)?n.value.attachments.filter(a=>a&&(a.name||a.filename)).length:0)+") ",1),e(se,{lines:"two",density:"compact",class:"pa-0"},{default:l(()=>[(g(!0),L(De,null,he(Array.isArray(n.value.attachments)?n.value.attachments.filter(a=>a&&(a.name||a.filename)):[],(a,$)=>(g(),R(q,{key:$,class:"px-0"},{prepend:l(()=>[e(W,{color:"primary",variant:"tonal",size:"40"},{default:l(()=>[e(p,{icon:$e(a.name||a.filename)},null,8,["icon"])]),_:2},1024)]),append:l(()=>[e(k,{icon:"",variant:"text",size:"small",color:"primary",onClick:Ct=>Se(a)},{default:l(()=>[e(p,{icon:"tabler-download"}),e(de,{activator:"parent",location:"top"},{default:l(()=>t[39]||(t[39]=[u(" Download ")])),_:1,__:[39]})]),_:2},1032,["onClick"])]),default:l(()=>[e(A,{class:"font-weight-medium"},{default:l(()=>[u(d(a.name||a.filename||"Unknown File"),1)]),_:2},1024),e(qe,null,{default:l(()=>[u(d(a.size||"Unknown Size"),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):J("",!0)]),_:1})]),_:1}),e(j),e(Ne,null,{default:l(()=>[e(be),e(k,{variant:"outlined",onClick:t[9]||(t[9]=a=>z.value=!1)},{default:l(()=>t[40]||(t[40]=[u(" Close ")])),_:1,__:[40]}),e(k,{color:"primary",onClick:t[10]||(t[10]=a=>{pe(n.value),z.value=!1})},{default:l(()=>t[41]||(t[41]=[u(" Edit Request ")])),_:1,__:[41]})]),_:1})]),_:1})):J("",!0)]),_:1},8,["modelValue"]),e(We,{"is-drawer-open":P.value,"onUpdate:isDrawerOpen":t[12]||(t[12]=a=>P.value=a),request:n.value,onRequestData:Ae},null,8,["is-drawer-open","request"]),e(_e,{modelValue:U.value,"onUpdate:modelValue":t[14]||(t[14]=a=>U.value=a),"max-width":"500"},{default:l(()=>[e(X,{class:"text-center px-10 py-6"},{default:l(()=>[e(B,null,{default:l(()=>[e(p,{icon:"tabler-alert-triangle",size:"64",color:"warning",class:"mb-4"}),t[43]||(t[43]=r("h3",{class:"text-h5 mb-2"}," Confirm Bulk Delete ",-1)),r("p",Vt," Are you sure you want to delete "+d(_.value.length)+" technical request(s)? ",1),r("div",wt,[t[42]||(t[42]=r("div",{class:"text-body-2 text-medium-emphasis mb-1"}," Selected Requests ",-1)),r("div",kt,d(_.value.length)+" request(s) will be permanently deleted ",1)]),t[44]||(t[44]=r("p",{class:"text-body-2 text-error mt-4 mb-0"}," This action cannot be undone. ",-1))]),_:1,__:[43,44]}),e(B,{class:"d-flex align-center justify-center gap-2"},{default:l(()=>[e(k,{variant:"outlined",onClick:t[13]||(t[13]=a=>U.value=!1)},{default:l(()=>t[45]||(t[45]=[u(" Cancel ")])),_:1,__:[45]}),e(k,{color:"error",loading:b.value,onClick:h},{default:l(()=>[u(" Delete "+d(_.value.length)+" Request(s) ",1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}});export{yl as default};
