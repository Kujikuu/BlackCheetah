import{d as N,r as y,w as U,g as R,f as l,b as e,t as V,aM as $,m as i,au as q,l as L,e as u,aa as F,v as d,a3 as C,o as z,P as w}from"./main-DDcdwm3V.js";import{V as I}from"./VDialog-CM6OFaQ4.js";import{b as O,V as T,d as X}from"./VCard-Da4wWZa-.js";import{V as h}from"./VDivider-CRFyNRVK.js";import{V as A}from"./VCardText-ATWVip1e.js";import{V as E}from"./VForm-D1MZgsEH.js";import{V as J,a as D}from"./VRow-Du7OY2aM.js";import{V as K}from"./VTextField-B3UCTUVZ.js";import{V as G}from"./VTextarea-Ce0clciZ.js";import{V as Q}from"./VSelect-Ycs8z1Yr.js";import{V as H}from"./VFileInput-BEyi66Tk.js";import{V as W}from"./VSpacer-BtGSH8cN.js";const Y={class:"flex-grow-1"},Z={class:"text-body-1 font-weight-medium"},ee={class:"text-body-2 text-disabled"},xe=N({__name:"AddDocumentModal",props:{isDialogVisible:{type:Boolean}},emits:["update:isDialogVisible","documentAdded"],setup(M,{emit:k}){const s=M,v=k,o=y({title:"",description:"",type:"",file:null}),r=y(!1),m=y(),B=["FDD","Franchise Agreement","Operations Manual","Brand Guidelines","Legal Documents","Sales Report","Financial Statement","Marketing Materials","Training Materials","Quality Standards","Other"],f=a=>!!a||"This field is required",P=a=>!!a||"Please select a file",b=a=>{v("update:isDialogVisible",a)},p=()=>{o.value={title:"",description:"",type:"",file:null},m.value&&(m.value.value="")},x=a=>{const t=a.target;t.files&&t.files.length>0&&(o.value.file=t.files[0])},_=a=>{if(a===0)return"0 Bytes";const t=1024,n=["Bytes","KB","MB","GB"],g=Math.floor(Math.log(a)/Math.log(t));return`${Number.parseFloat((a/t**g).toFixed(2))} ${n[g]}`},S=()=>{if(r.value&&o.value.file){const a={id:Date.now(),title:o.value.title,description:o.value.description,type:o.value.type,fileName:o.value.file.name,fileSize:_(o.value.file.size),uploadDate:new Date().toISOString().split("T")[0],status:"pending",comment:"",file:o.value.file};v("documentAdded",a),p(),b(!1)}},c=()=>{p(),b(!1)};return U(()=>s.isDialogVisible,a=>{a||p()}),(a,t)=>(z(),R(I,{"model-value":s.isDialogVisible,"max-width":"600",persistent:"","onUpdate:modelValue":b},{default:l(()=>[e(T,null,{default:l(()=>[e(O,{class:"text-h5 pa-6 pb-4"},{default:l(()=>t[5]||(t[5]=[V(" Add Document ")])),_:1,__:[5]}),e(h),e(A,{class:"pa-6"},{default:l(()=>[e(E,{modelValue:i(r),"onUpdate:modelValue":t[4]||(t[4]=n=>q(r)?r.value=n:null),onSubmit:$(S,["prevent"])},{default:l(()=>[e(J,null,{default:l(()=>[e(D,{cols:"12"},{default:l(()=>[e(K,{modelValue:i(o).title,"onUpdate:modelValue":t[0]||(t[0]=n=>i(o).title=n),label:"Document Title",placeholder:"Enter document title",rules:[f],required:""},null,8,["modelValue","rules"])]),_:1}),e(D,{cols:"12"},{default:l(()=>[e(G,{modelValue:i(o).description,"onUpdate:modelValue":t[1]||(t[1]=n=>i(o).description=n),label:"Description",placeholder:"Enter document description",rows:"3",rules:[f],required:""},null,8,["modelValue","rules"])]),_:1}),e(D,{cols:"12"},{default:l(()=>[e(Q,{modelValue:i(o).type,"onUpdate:modelValue":t[2]||(t[2]=n=>i(o).type=n),label:"Document Type",placeholder:"Select document type",items:B,rules:[f],required:""},null,8,["modelValue","rules"])]),_:1}),e(D,{cols:"12"},{default:l(()=>[e(H,{ref_key:"fileInput",ref:m,label:"Select File",placeholder:"Choose a file to upload","prepend-icon":"tabler-paperclip",accept:".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.txt,.jpg,.jpeg,.png",rules:[P],required:"",onChange:x},null,8,["rules"]),t[6]||(t[6]=u("div",{class:"text-caption text-disabled mt-2"}," Supported formats: PDF, DOC, DOCX, XLS, XLSX, PPT, PPTX, TXT, JPG, JPEG, PNG ",-1))]),_:1,__:[6]}),i(o).file?(z(),R(D,{key:0,cols:"12"},{default:l(()=>[e(T,{variant:"outlined"},{default:l(()=>[e(A,{class:"d-flex align-center gap-3"},{default:l(()=>[e(F,{icon:"tabler-file-text",size:"24",color:"primary"}),u("div",Y,[u("div",Z,d(i(o).file.name),1),u("div",ee,d(_(i(o).file.size)),1)]),e(C,{icon:"",variant:"text",color:"error",size:"small",onClick:t[3]||(t[3]=n=>{i(o).file=null,i(m)&&(i(m).value="")})},{default:l(()=>[e(F,{icon:"tabler-x"})]),_:1})]),_:1})]),_:1})]),_:1})):L("",!0)]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(h),e(X,{class:"pa-6"},{default:l(()=>[e(W),e(C,{color:"error",variant:"text",onClick:c},{default:l(()=>t[7]||(t[7]=[V(" Cancel ")])),_:1,__:[7]}),e(C,{color:"primary",disabled:!i(r),onClick:S},{default:l(()=>t[8]||(t[8]=[V(" Add Document ")])),_:1,__:[8]},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}}),te={class:"text-body-1 text-medium-emphasis mb-6"},le={class:"d-flex align-center mb-2"},oe={class:"text-body-1 font-weight-medium"},ae={class:"text-body-2 text-disabled mb-1"},ie={class:"text-body-2 text-disabled"},_e=N({__name:"DocumentActionModal",props:{isDialogVisible:{type:Boolean},document:{},action:{}},emits:["update:isDialogVisible","documentActionConfirmed"],setup(M,{emit:k}){const s=M,v=k,o=y(""),r=y(!1),m=c=>!!c||"Comment is required",B=w(()=>s.action==="approve"?"Approve Document":"Reject Document"),f=w(()=>s.action==="approve"?"success":"error"),P=w(()=>s.action==="approve"?"tabler-check":"tabler-x"),b=w(()=>s.action==="approve"?"Are you sure you want to approve this document? Please provide a comment.":"Are you sure you want to reject this document? Please provide a reason for rejection."),p=c=>{v("update:isDialogVisible",c)},x=()=>{o.value=""},_=()=>{r.value&&(v("documentActionConfirmed",{document:s.document,action:s.action,comment:o.value}),x(),p(!1))},S=()=>{x(),p(!1)};return U(()=>s.isDialogVisible,c=>{c||x()}),(c,a)=>(z(),R(I,{"model-value":s.isDialogVisible,"max-width":"500",persistent:"","onUpdate:modelValue":p},{default:l(()=>[e(T,null,{default:l(()=>[e(O,{class:"text-h5 pa-6 pb-4"},{default:l(()=>[V(d(i(B)),1)]),_:1}),e(h),e(A,{class:"text-center px-10 py-6"},{default:l(()=>[e(F,{icon:i(P),color:i(f),size:"48",class:"mb-4"},null,8,["icon","color"]),u("p",te,d(i(b)),1),e(T,{variant:"outlined",class:"mb-6"},{default:l(()=>[e(A,{class:"text-start"},{default:l(()=>{var t,n,g,j;return[u("div",le,[e(F,{icon:"tabler-file-text",size:"20",color:"primary",class:"me-2"}),u("span",oe,d((t=s.document)==null?void 0:t.title),1)]),u("div",ae,d((n=s.document)==null?void 0:n.description),1),u("div",ie,d((g=s.document)==null?void 0:g.fileName)+" â€¢ "+d((j=s.document)==null?void 0:j.fileSize),1)]}),_:1})]),_:1}),e(E,{modelValue:i(r),"onUpdate:modelValue":a[1]||(a[1]=t=>q(r)?r.value=t:null),onSubmit:$(_,["prevent"])},{default:l(()=>[e(G,{modelValue:i(o),"onUpdate:modelValue":a[0]||(a[0]=t=>q(o)?o.value=t:null),label:s.action==="approve"?"Approval Comment":"Rejection Reason",placeholder:s.action==="approve"?"Enter approval comment...":"Enter reason for rejection...",rows:"3",rules:[m],required:"",class:"mb-4"},null,8,["modelValue","label","placeholder","rules"])]),_:1},8,["modelValue"])]),_:1}),e(h),e(X,{class:"justify-center pa-6"},{default:l(()=>[e(C,{color:"error",variant:"text",onClick:S},{default:l(()=>a[2]||(a[2]=[V(" Cancel ")])),_:1,__:[2]}),e(C,{color:i(f),disabled:!i(r),onClick:_},{default:l(()=>[V(d(s.action==="approve"?"Approve":"Reject"),1)]),_:1},8,["color","disabled"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}});export{xe as _,_e as a};
