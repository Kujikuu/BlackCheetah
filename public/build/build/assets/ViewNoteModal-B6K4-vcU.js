import{_ as J}from"./AppTextarea.vue_vue_type_script_setup_true_lang-w75la0I5.js";import{_ as Q}from"./AppTextField.vue_vue_type_script_setup_true_lang-C1QkJzRA.js";import{d as I,r as M,P as W,w as X,g as b,f as a,au as L,m as n,l as y,b as e,t as V,aM as Y,e as u,c as A,i as P,F as G,a3 as x,aO as T,o as c,aa as B,v as f}from"./main-CmF9Tu9X.js";import{V as K}from"./VDialog-d18aDjvw.js";import{V as D,b as O,a as R,d as j,c as Z}from"./VCard-BaQ80E-1.js";import{V as $}from"./VDivider-Bg3_3YcA.js";import{V as ee}from"./VForm-DZliotcg.js";import{V as N,a as v}from"./VRow-CHcR5qvn.js";import{V as te}from"./VFileInput-DSgmT0Gs.js";import{V as q}from"./VCardText-C80XsO14.js";import{V as H}from"./VSpacer-BvvuRniz.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ae={class:"flex-grow-1 me-3"},oe={class:"text-body-2 font-weight-medium"},se={class:"text-caption text-disabled"},De=I({__name:"EditNoteModal",props:{isDialogVisible:{type:Boolean},note:{}},emits:["update:isDialogVisible","noteUpdated"],setup(F,{emit:z}){const _=F,C=z,s=M(null),h=M([]),d=M(!1),p=W({get:()=>_.isDialogVisible,set:l=>C("update:isDialogVisible",l)});X(()=>_.note,l=>{l&&(s.value={...l})},{immediate:!0});const E=l=>{const o=l.target;o.files&&(h.value=Array.from(o.files))},t=l=>{if(l===0)return"0 Bytes";const o=1024,w=["Bytes","KB","MB","GB"],k=Math.floor(Math.log(l)/Math.log(o));return`${Number.parseFloat((l/o**k).toFixed(2))} ${w[k]}`},i=async l=>{if(s.value)try{const o=await T(`/v1/notes/${s.value.id}/attachments/${l}`,{method:"DELETE"});o.success?(s.value.attachments.splice(l,1),console.log("Attachment removed successfully")):console.error("Failed to remove attachment:",o.message)}catch(o){console.error("Error removing attachment:",o)}},r=async()=>{if(s.value)try{d.value=!0;const l=new FormData;l.append("title",s.value.title),l.append("description",s.value.description),l.append("_method","PUT"),h.value.forEach(w=>{l.append("attachments[]",w)});const o=await T(`/v1/notes/${s.value.id}`,{method:"POST",body:l});o.success?(console.log("Note updated successfully"),C("noteUpdated"),p.value=!1,h.value=[]):console.error("Failed to update note:",o.message)}catch(l){console.error("Error updating note:",l)}finally{d.value=!1}},g=()=>{p.value=!1,h.value=[],_.note&&(s.value={..._.note})},S=l=>l.startsWith("image/")?"tabler-photo":l.startsWith("video/")?"tabler-video":l.startsWith("audio/")?"tabler-music":l.includes("pdf")?"tabler-file-type-pdf":l.includes("word")||l.includes("document")?"tabler-file-type-doc":l.includes("excel")||l.includes("spreadsheet")?"tabler-file-type-xls":l.includes("zip")||l.includes("compressed")?"tabler-file-zip":"tabler-file";return(l,o)=>{const w=Q,k=J;return c(),b(K,{modelValue:n(p),"onUpdate:modelValue":o[2]||(o[2]=m=>L(p)?p.value=m:null),"max-width":"800"},{default:a(()=>[n(s)?(c(),b(D,{key:0},{default:a(()=>[e(R,null,{default:a(()=>[e(O,null,{default:a(()=>o[3]||(o[3]=[V("Edit Note")])),_:1,__:[3]})]),_:1}),e($),e(q,null,{default:a(()=>[e(ee,{onSubmit:Y(r,["prevent"])},{default:a(()=>[e(N,null,{default:a(()=>[e(v,{cols:"12"},{default:a(()=>[e(w,{modelValue:n(s).title,"onUpdate:modelValue":o[0]||(o[0]=m=>n(s).title=m),label:"Title",placeholder:"Enter note title",disabled:n(d)},null,8,["modelValue","disabled"])]),_:1}),e(v,{cols:"12"},{default:a(()=>[e(k,{modelValue:n(s).description,"onUpdate:modelValue":o[1]||(o[1]=m=>n(s).description=m),label:"Description",placeholder:"Enter note description...",rows:"6",disabled:n(d)},null,8,["modelValue","disabled"])]),_:1}),n(s).attachments&&n(s).attachments.length>0?(c(),b(v,{key:0,cols:"12"},{default:a(()=>[o[4]||(o[4]=u("h6",{class:"text-h6 mb-3"}," Existing Attachments ",-1)),e(N,null,{default:a(()=>[(c(!0),A(G,null,P(n(s).attachments,(m,U)=>(c(),b(v,{key:U,cols:"12",md:"6"},{default:a(()=>[e(D,{variant:"tonal",class:"d-flex align-center pa-3"},{default:a(()=>[e(B,{icon:S(m.type),size:"32",class:"me-3"},null,8,["icon"]),u("div",ae,[u("div",oe,f(m.name),1),u("div",se,f(t(m.size)),1)]),e(x,{icon:"",size:"small",variant:"text",color:"error",disabled:n(d),onClick:pe=>i(U)},{default:a(()=>[e(B,{icon:"tabler-trash"})]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1,__:[4]})):y("",!0),e(v,{cols:"12"},{default:a(()=>[e(te,{label:"Attachments",multiple:"","prepend-icon":"tabler-paperclip",placeholder:"Upload files",chips:"","show-size":"",disabled:n(d),onChange:E},null,8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1}),e($),e(j,null,{default:a(()=>[e(H),e(x,{color:"secondary",variant:"tonal",disabled:n(d),onClick:g},{default:a(()=>o[5]||(o[5]=[V(" Cancel ")])),_:1,__:[5]},8,["disabled"]),e(x,{color:"primary",loading:n(d),disabled:n(d),onClick:r},{default:a(()=>o[6]||(o[6]=[V(" Update Note ")])),_:1,__:[6]},8,["loading","disabled"])]),_:1})]),_:1})):y("",!0)]),_:1},8,["modelValue"])}}}),ie={class:"mb-6"},ne={class:"text-body-1 whitespace-pre-wrap"},re={key:0},de={class:"text-h6 mb-3"},ue={class:"flex-grow-1 me-3"},ce={class:"text-body-2 font-weight-medium"},me={class:"text-caption text-disabled"},fe=I({__name:"ViewNoteModal",props:{isDialogVisible:{type:Boolean},note:{}},emits:["update:isDialogVisible"],setup(F,{emit:z}){const _=F,C=z,s=W({get:()=>_.isDialogVisible,set:t=>C("update:isDialogVisible",t)}),h=t=>new Date(t).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),d=t=>{if(t===0)return"0 Bytes";const i=1024,r=["Bytes","KB","MB","GB"],g=Math.floor(Math.log(t)/Math.log(i));return`${Number.parseFloat((t/i**g).toFixed(2))} ${r[g]}`},p=t=>{const i=document.createElement("a");i.href=`/storage/${t.path}`,i.download=t.name,i.target="_blank",document.body.appendChild(i),i.click(),document.body.removeChild(i)},E=t=>t.startsWith("image/")?"tabler-photo":t.startsWith("video/")?"tabler-video":t.startsWith("audio/")?"tabler-music":t.includes("pdf")?"tabler-file-type-pdf":t.includes("word")||t.includes("document")?"tabler-file-type-doc":t.includes("excel")||t.includes("spreadsheet")?"tabler-file-type-xls":t.includes("zip")||t.includes("compressed")?"tabler-file-zip":"tabler-file";return(t,i)=>(c(),b(K,{modelValue:n(s),"onUpdate:modelValue":i[1]||(i[1]=r=>L(s)?s.value=r:null),"max-width":"800"},{default:a(()=>[t.note?(c(),b(D,{key:0},{default:a(()=>[e(R,null,{default:a(()=>[e(O,null,{default:a(()=>[V(f(t.note.title),1)]),_:1}),e(Z,null,{default:a(()=>[V(" Created by "+f(t.note.createdBy)+" at "+f(h(t.note.createdAt)),1)]),_:1})]),_:1}),e($),e(q,null,{default:a(()=>[u("div",ie,[i[2]||(i[2]=u("h6",{class:"text-h6 mb-3"}," Description ",-1)),u("p",ne,f(t.note.description),1)]),t.note.attachments&&t.note.attachments.length>0?(c(),A("div",re,[u("h6",de," Attachments ("+f(t.note.attachments.length)+") ",1),e(N,null,{default:a(()=>[(c(!0),A(G,null,P(t.note.attachments,(r,g)=>(c(),b(v,{key:g,cols:"12",md:"6"},{default:a(()=>[e(D,{variant:"tonal",class:"d-flex align-center pa-3"},{default:a(()=>[e(B,{icon:E(r.type),size:"32",class:"me-3"},null,8,["icon"]),u("div",ue,[u("div",ce,f(r.name),1),u("div",me,f(d(r.size)),1)]),e(x,{icon:"",size:"small",variant:"text",color:"primary",onClick:S=>p(r)},{default:a(()=>[e(B,{icon:"tabler-download"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})])):y("",!0)]),_:1}),e($),e(j,null,{default:a(()=>[e(H),e(x,{color:"secondary",variant:"tonal",onClick:i[0]||(i[0]=r=>s.value=!1)},{default:a(()=>i[3]||(i[3]=[V(" Close ")])),_:1,__:[3]})]),_:1})]),_:1})):y("",!0)]),_:1},8,["modelValue"]))}}),$e=le(fe,[["__scopeId","data-v-5b2b139e"]]);export{$e as V,De as _};
