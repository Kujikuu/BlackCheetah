import{_ as Wt}from"./AddDocumentDialog.vue_vue_type_script_setup_true_lang-BPRVLnbR.js";import{_ as Qt,a as Xt}from"./DocumentActionModal.vue_vue_type_script_setup_true_lang-wMy8QgN6.js";import{_ as Gt}from"./ViewTaskDialog.vue_vue_type_script_setup_true_lang-B3a2djQH.js";import{_ as Yt}from"./EditTaskDialog.vue_vue_type_script_setup_true_lang-BUT02yBP.js";import{_ as Kt}from"./DeleteTaskDialog.vue_vue_type_script_setup_true_lang-cZnQU0HL.js";import{_ as W,V as Q}from"./VDialog-DNQTNeT1.js";import{V as D,f as T,h as O,b as I,a as oe,d as ie,g as Zt}from"./VCard-D0Kr6jJ3.js";import{V as N,a as r}from"./VRow-I0aFN3ft.js";import{V as Se}from"./VRating-BCYmsUcw.js";import{V as M}from"./VChip-B4nRRsDL.js";import{V as F}from"./VDivider-BaGqyL8B.js";import{V as X}from"./VSpacer-CqgjN_yM.js";import{d as H,O as S,a as P,o as V,k as t,y as e,h as J,l as o,t as c,q as f,a7 as k,g as _,w as Te,c as A,bE as el,bF as tl,av as y,u as ll,E as al,aD as de,F as ce,r as sl,b1 as ol}from"./main-CJoUlw71.js";import{V as C}from"./VTextField-D8E1qX-C.js";import{V as pe}from"./VTextarea-DlMZvYlN.js";import{V as fe}from"./VSelect-DrBKrWpC.js";import{a as L,b as B,c as il,V as De}from"./VList-dBGtPQa1.js";import{f as $}from"./franchisee-dashboard-CfAqfQfD.js";import{V as dl}from"./VSkeletonLoader-4jAbGrJD.js";import{V as ne,a as nl}from"./VTabs-CPaS4mMT.js";import{a as ue,V as ul}from"./VWindowItem-Sru_LTmb.js";import{V as Ce}from"./VDataTable-bPHraWWW.js";import{V as Ue}from"./VMenu-ChdF8Fzb.js";import"./franchise-CaBrEO2E.js";import"./api-router-CWf8jKcZ.js";import"./VForm-MxPZnCnL.js";import"./form-TZVfOcgQ.js";import"./forwardRefs-B931MWyl.js";import"./VFileInput-CLfIo29r.js";import"./VField-BK8GYuQp.js";import"./VInput-ljW8JGQT.js";import"./users-Dd4GaIo9.js";import"./VOverlay-DNweL6TL.js";import"./scopeId-BW4ci1pC.js";/* empty css              */import"./VSlideGroup-CFd1UCPD.js";import"./VCheckboxBtn-ClRj4-k1.js";import"./VSelectionControl-DPYfPVD0.js";import"./VTable-Z6ii9VWQ.js";const rl={class:"text-body-1 font-weight-medium"},ml={class:"text-body-1 font-weight-medium"},vl={class:"d-flex align-center gap-1"},cl={class:"text-body-1 font-weight-medium"},fl={class:"text-body-1 font-weight-medium"},pl={class:"text-body-1"},bl=H({__name:"ViewReviewDialog",props:{isDialogVisible:{type:Boolean},selectedReview:{}},emits:["update:isDialogVisible"],setup(E,{emit:z}){const w=E,U=z,p=S({get:()=>w.isDialogVisible,set:b=>U("update:isDialogVisible",b)}),a=()=>{p.value=!1};return(b,v)=>{const u=W;return V(),P(Q,{modelValue:p.value,"onUpdate:modelValue":v[0]||(v[0]=n=>p.value=n),"max-width":"600"},{default:t(()=>[e(u,{onClick:a}),e(D,{title:"Review Details"},{default:t(()=>[b.selectedReview?(V(),P(T,{key:0,class:"pa-6"},{default:t(()=>[e(N,null,{default:t(()=>[e(r,{cols:"12",md:"6"},{default:t(()=>[v[1]||(v[1]=o("div",{class:"text-body-2 text-disabled mb-1"}," Customer Name ",-1)),o("div",rl,c(b.selectedReview.customerName),1)]),_:1,__:[1]}),e(r,{cols:"12",md:"6"},{default:t(()=>[v[2]||(v[2]=o("div",{class:"text-body-2 text-disabled mb-1"}," Customer Email ",-1)),o("div",ml,c(b.selectedReview.customerEmail||"N/A"),1)]),_:1,__:[2]}),e(r,{cols:"12",md:"6"},{default:t(()=>[v[3]||(v[3]=o("div",{class:"text-body-2 text-disabled mb-1"}," Rating ",-1)),o("div",vl,[e(Se,{"model-value":b.selectedReview.rating,readonly:"",size:"small",density:"compact"},null,8,["model-value"]),o("span",cl,c(b.selectedReview.rating)+"/5",1)])]),_:1,__:[3]}),e(r,{cols:"12",md:"6"},{default:t(()=>[v[4]||(v[4]=o("div",{class:"text-body-2 text-disabled mb-1"}," Date ",-1)),o("div",fl,c(b.selectedReview.date),1)]),_:1,__:[4]}),e(r,{cols:"12",md:"6"},{default:t(()=>[v[5]||(v[5]=o("div",{class:"text-body-2 text-disabled mb-1"}," Sentiment ",-1)),e(M,{color:b.selectedReview.sentiment==="positive"?"success":b.selectedReview.sentiment==="neutral"?"warning":"error",size:"small",label:"",class:"text-capitalize"},{default:t(()=>[f(c(b.selectedReview.sentiment),1)]),_:1},8,["color"])]),_:1,__:[5]}),e(r,{cols:"12"},{default:t(()=>[v[6]||(v[6]=o("div",{class:"text-body-2 text-disabled mb-1"}," Comment ",-1)),o("div",pl,c(b.selectedReview.comment),1)]),_:1,__:[6]})]),_:1})]),_:1})):J("",!0),e(F),e(O,{class:"pa-6"},{default:t(()=>[e(X),e(k,{color:"secondary",variant:"tonal",onClick:a},{default:t(()=>v[7]||(v[7]=[f(" Close ")])),_:1,__:[7]})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),_l={class:"text-body-1 font-weight-medium"},yl={class:"text-body-1 font-weight-medium"},gl={class:"text-body-1"},Vl={class:"text-body-1 font-weight-medium"},xl=H({__name:"ViewProductDialog",props:{isDialogVisible:{type:Boolean},selectedProduct:{}},emits:["update:isDialogVisible"],setup(E,{emit:z}){const w=E,U=z,p=S({get:()=>w.isDialogVisible,set:u=>U("update:isDialogVisible",u)}),a=u=>new Intl.NumberFormat("en-US",{style:"currency",currency:"SAR"}).format(u),b=u=>u==="active"||u==="completed"||u==="approved"||u==="working"?"success":u==="pending"||u==="in_progress"?"warning":u==="inactive"||u==="cancelled"||u==="rejected"?"error":"default",v=()=>{p.value=!1};return(u,n)=>{const g=W;return V(),P(Q,{modelValue:p.value,"onUpdate:modelValue":n[0]||(n[0]=d=>p.value=d),"max-width":"600"},{default:t(()=>[e(g,{onClick:v}),e(D,{title:"Product Details"},{default:t(()=>[u.selectedProduct?(V(),P(T,{key:0,class:"pa-6"},{default:t(()=>[e(N,null,{default:t(()=>[e(r,{cols:"12",md:"6"},{default:t(()=>[n[1]||(n[1]=o("div",{class:"text-body-2 text-disabled mb-1"}," Product Name ",-1)),o("div",_l,c(u.selectedProduct.name),1)]),_:1,__:[1]}),e(r,{cols:"12",md:"6"},{default:t(()=>[n[2]||(n[2]=o("div",{class:"text-body-2 text-disabled mb-1"}," Category ",-1)),o("div",yl,c(u.selectedProduct.category),1)]),_:1,__:[2]}),e(r,{cols:"12"},{default:t(()=>[n[3]||(n[3]=o("div",{class:"text-body-2 text-disabled mb-1"}," Description ",-1)),o("div",gl,c(u.selectedProduct.description),1)]),_:1,__:[3]}),e(r,{cols:"12",md:"6"},{default:t(()=>[n[4]||(n[4]=o("div",{class:"text-body-2 text-disabled mb-1"}," Unit Price ",-1)),o("div",Vl,c(a(u.selectedProduct.unitPrice)),1)]),_:1,__:[4]}),e(r,{cols:"12",md:"6"},{default:t(()=>[n[5]||(n[5]=o("div",{class:"text-body-2 text-disabled mb-1"}," Stock ",-1)),e(M,{color:u.selectedProduct.stock===0?"error":u.selectedProduct.stock<=10?"warning":"success",size:"small",label:""},{default:t(()=>[f(c(u.selectedProduct.stock)+" units ",1)]),_:1},8,["color"])]),_:1,__:[5]}),e(r,{cols:"12",md:"6"},{default:t(()=>[n[6]||(n[6]=o("div",{class:"text-body-2 text-disabled mb-1"}," Status ",-1)),e(M,{color:b(u.selectedProduct.status),size:"small",label:"",class:"text-capitalize"},{default:t(()=>[f(c(u.selectedProduct.status),1)]),_:1},8,["color"])]),_:1,__:[6]})]),_:1})]),_:1})):J("",!0),e(F),e(O,{class:"pa-6"},{default:t(()=>[e(X),e(k,{color:"secondary",variant:"tonal",onClick:v},{default:t(()=>n[7]||(n[7]=[f(" Close ")])),_:1,__:[7]})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),kl={class:"text-h4"},wl={class:"text-body-1 font-weight-medium"},Dl={class:"text-body-1 font-weight-medium"},Cl={class:"text-body-1 font-weight-medium"},Ul={class:"text-body-1 font-weight-medium"},Sl={class:"text-body-1 font-weight-medium"},Tl=H({__name:"ViewStaffDialog",props:{isDialogVisible:{type:Boolean},selectedStaff:{}},emits:["update:isDialogVisible"],setup(E,{emit:z}){const w=E,U=z,p=S({get:()=>w.isDialogVisible,set:v=>U("update:isDialogVisible",v)}),a=v=>v==="active"||v==="completed"||v==="approved"||v==="working"?"success":v==="pending"||v==="in_progress"?"warning":v==="inactive"||v==="cancelled"||v==="rejected"?"error":"default",b=()=>{p.value=!1};return(v,u)=>{const n=W;return V(),P(Q,{modelValue:p.value,"onUpdate:modelValue":u[0]||(u[0]=g=>p.value=g),"max-width":"600"},{default:t(()=>[e(n,{onClick:b}),e(D,{title:"Staff Details"},{default:t(()=>[v.selectedStaff?(V(),P(T,{key:0,class:"pa-6"},{default:t(()=>[e(N,null,{default:t(()=>[e(r,{cols:"12",class:"text-center pb-6"},{default:t(()=>[e(I,{size:"80",color:"primary",variant:"tonal"},{default:t(()=>[o("span",kl,c(v.selectedStaff.name.split(" ").map(g=>g[0]).join("")),1)]),_:1})]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[u[1]||(u[1]=o("div",{class:"text-body-2 text-disabled mb-1"}," Full Name ",-1)),o("div",wl,c(v.selectedStaff.name),1)]),_:1,__:[1]}),e(r,{cols:"12",md:"6"},{default:t(()=>[u[2]||(u[2]=o("div",{class:"text-body-2 text-disabled mb-1"}," Email ",-1)),o("div",Dl,c(v.selectedStaff.email),1)]),_:1,__:[2]}),e(r,{cols:"12",md:"6"},{default:t(()=>[u[3]||(u[3]=o("div",{class:"text-body-2 text-disabled mb-1"}," Job Title ",-1)),o("div",Cl,c(v.selectedStaff.jobTitle),1)]),_:1,__:[3]}),e(r,{cols:"12",md:"6"},{default:t(()=>[u[4]||(u[4]=o("div",{class:"text-body-2 text-disabled mb-1"}," Shift Time ",-1)),o("div",Ul,c(v.selectedStaff.shiftTime||"N/A"),1)]),_:1,__:[4]}),e(r,{cols:"12",md:"6"},{default:t(()=>[u[5]||(u[5]=o("div",{class:"text-body-2 text-disabled mb-1"}," Shift Time ",-1)),o("div",Sl,c(v.selectedStaff.shiftTime),1)]),_:1,__:[5]}),e(r,{cols:"12",md:"6"},{default:t(()=>[u[6]||(u[6]=o("div",{class:"text-body-2 text-disabled mb-1"}," Status ",-1)),e(M,{color:a(v.selectedStaff.status),size:"small",label:"",class:"text-capitalize"},{default:t(()=>[f(c(v.selectedStaff.status),1)]),_:1},8,["color"])]),_:1,__:[6]})]),_:1})]),_:1})):J("",!0),e(F),e(O,{class:"pa-6"},{default:t(()=>[e(X),e(k,{color:"secondary",variant:"tonal",onClick:b},{default:t(()=>u[7]||(u[7]=[f(" Close ")])),_:1,__:[7]})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),Rl=H({__name:"AddReviewDialog",props:{isDialogVisible:{type:Boolean}},emits:["update:isDialogVisible","reviewAdded"],setup(E,{emit:z}){const w=E,U=z,p=S({get:()=>w.isDialogVisible,set:u=>U("update:isDialogVisible",u)}),a=_({customerName:"",customerEmail:"",rating:0,comment:"",date:""}),b=()=>{!a.value.customerName||!a.value.comment||!a.value.date||(U("reviewAdded",{...a.value}),a.value={customerName:"",customerEmail:"",rating:0,comment:"",date:""},p.value=!1)},v=()=>{p.value=!1,a.value={customerName:"",customerEmail:"",rating:0,comment:"",date:""}};return(u,n)=>{const g=W;return V(),P(Q,{modelValue:p.value,"onUpdate:modelValue":n[5]||(n[5]=d=>p.value=d),"max-width":"600"},{default:t(()=>[e(g,{onClick:v}),e(D,{title:"Add Customer Review"},{default:t(()=>[e(T,{class:"pa-6"},{default:t(()=>[e(N,null,{default:t(()=>[e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.customerName,"onUpdate:modelValue":n[0]||(n[0]=d=>a.value.customerName=d),label:"Customer Name",required:""},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.customerEmail,"onUpdate:modelValue":n[1]||(n[1]=d=>a.value.customerEmail=d),label:"Customer Email",type:"email"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[n[6]||(n[6]=o("div",{class:"text-body-2 text-disabled mb-2"}," Rating ",-1)),e(Se,{modelValue:a.value.rating,"onUpdate:modelValue":n[2]||(n[2]=d=>a.value.rating=d),size:"large"},null,8,["modelValue"])]),_:1,__:[6]}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.date,"onUpdate:modelValue":n[3]||(n[3]=d=>a.value.date=d),label:"Date",type:"date",required:""},null,8,["modelValue"])]),_:1}),e(r,{cols:"12"},{default:t(()=>[e(pe,{modelValue:a.value.comment,"onUpdate:modelValue":n[4]||(n[4]=d=>a.value.comment=d),label:"Review Comment",rows:"4",required:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(F),e(O,{class:"pa-6"},{default:t(()=>[e(X),e(k,{color:"secondary",variant:"tonal",onClick:v},{default:t(()=>n[7]||(n[7]=[f(" Cancel ")])),_:1,__:[7]}),e(k,{color:"primary",disabled:!a.value.customerName||!a.value.comment||!a.value.date,onClick:b},{default:t(()=>n[8]||(n[8]=[f(" Add Review ")])),_:1,__:[8]},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),Pl=H({__name:"EditReviewDialog",props:{isDialogVisible:{type:Boolean},selectedReview:{}},emits:["update:isDialogVisible","reviewUpdated"],setup(E,{emit:z}){const w=E,U=z,p=S({get:()=>w.isDialogVisible,set:u=>U("update:isDialogVisible",u)}),a=_(null);Te(()=>w.selectedReview,u=>{u&&(a.value={...u})},{immediate:!0});const b=()=>{a.value&&(U("reviewUpdated",a.value),p.value=!1)},v=()=>{p.value=!1};return(u,n)=>{const g=W;return V(),P(Q,{modelValue:p.value,"onUpdate:modelValue":n[5]||(n[5]=d=>p.value=d),"max-width":"600"},{default:t(()=>[e(g,{onClick:v}),e(D,{title:"Edit Customer Review"},{default:t(()=>[a.value?(V(),P(T,{key:0,class:"pa-6"},{default:t(()=>[e(N,null,{default:t(()=>[e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.customerName,"onUpdate:modelValue":n[0]||(n[0]=d=>a.value.customerName=d),label:"Customer Name",required:""},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.customerEmail,"onUpdate:modelValue":n[1]||(n[1]=d=>a.value.customerEmail=d),label:"Customer Email",type:"email"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[n[6]||(n[6]=o("div",{class:"text-body-2 text-disabled mb-2"}," Rating ",-1)),e(Se,{modelValue:a.value.rating,"onUpdate:modelValue":n[2]||(n[2]=d=>a.value.rating=d),size:"large"},null,8,["modelValue"])]),_:1,__:[6]}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.date,"onUpdate:modelValue":n[3]||(n[3]=d=>a.value.date=d),label:"Date",type:"date",required:""},null,8,["modelValue"])]),_:1}),e(r,{cols:"12"},{default:t(()=>[e(pe,{modelValue:a.value.comment,"onUpdate:modelValue":n[4]||(n[4]=d=>a.value.comment=d),label:"Review Comment",rows:"4",required:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})):J("",!0),e(F),e(O,{class:"pa-6"},{default:t(()=>{var d,R,m;return[e(X),e(k,{color:"secondary",variant:"tonal",onClick:v},{default:t(()=>n[7]||(n[7]=[f(" Cancel ")])),_:1,__:[7]}),e(k,{color:"primary",disabled:!((d=a.value)!=null&&d.customerName)||!((R=a.value)!=null&&R.comment)||!((m=a.value)!=null&&m.date),onClick:b},{default:t(()=>n[8]||(n[8]=[f(" Save Changes ")])),_:1,__:[8]},8,["disabled"])]}),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),zl={class:"text-body-2 text-disabled mb-3"},El={class:"font-weight-medium text-high-emphasis"},Al={class:"text-h6"},Nl=H({__name:"EditProductDialog",props:{isDialogVisible:{type:Boolean},selectedProduct:{}},emits:["update:isDialogVisible","productUpdated"],setup(E,{emit:z}){const w=E,U=z,p=S({get:()=>w.isDialogVisible,set:n=>U("update:isDialogVisible",n)}),a=_(null);Te(()=>w.selectedProduct,n=>{n&&(a.value={...n})},{immediate:!0});const b=()=>{a.value&&(U("productUpdated",a.value),p.value=!1)},v=()=>{p.value=!1},u=n=>new Intl.NumberFormat("en-US",{style:"currency",currency:"SAR",minimumFractionDigits:0,maximumFractionDigits:0}).format(n);return(n,g)=>{const d=W;return V(),P(Q,{modelValue:p.value,"onUpdate:modelValue":g[1]||(g[1]=R=>p.value=R),"max-width":"600"},{default:t(()=>[e(d,{onClick:v}),e(D,{title:"Edit Product Inventory"},{default:t(()=>[a.value?(V(),P(T,{key:0,class:"pa-6"},{default:t(()=>[e(N,null,{default:t(()=>[e(r,{cols:"12"},{default:t(()=>[o("div",zl,[g[2]||(g[2]=f(" Product: ")),o("span",El,c(a.value.name),1)])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.stock,"onUpdate:modelValue":g[0]||(g[0]=R=>a.value.stock=R),modelModifiers:{number:!0},label:"Stock Quantity",type:"number",min:"0",required:""},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[g[3]||(g[3]=o("div",{class:"text-body-2 text-disabled mb-1"}," Unit Price ",-1)),o("div",Al,c(u(a.value.unitPrice)),1)]),_:1,__:[3]}),e(r,{cols:"12"},{default:t(()=>g[4]||(g[4]=[o("div",{class:"text-caption text-disabled"}," Note: You can only update the stock quantity. Product details like name, price, and category are managed at the franchise level. ",-1)])),_:1,__:[4]})]),_:1})]),_:1})):J("",!0),e(F),e(O,{class:"pa-6"},{default:t(()=>{var R,m;return[e(X),e(k,{color:"secondary",variant:"tonal",onClick:v},{default:t(()=>g[5]||(g[5]=[f(" Cancel ")])),_:1,__:[5]}),e(k,{color:"primary",disabled:((R=a.value)==null?void 0:R.stock)===void 0||((m=a.value)==null?void 0:m.stock)<0,onClick:b},{default:t(()=>g[6]||(g[6]=[f(" Save Changes ")])),_:1,__:[6]},8,["disabled"])]}),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),$l=H({__name:"EditStaffDialog",props:{isDialogVisible:{type:Boolean},selectedStaff:{}},emits:["update:isDialogVisible","staffUpdated"],setup(E,{emit:z}){const w=E,U=z,p=S({get:()=>w.isDialogVisible,set:g=>U("update:isDialogVisible",g)}),a=_(null);Te(()=>w.selectedStaff,g=>{g&&(a.value={...g})},{immediate:!0});const b=()=>{a.value&&(U("staffUpdated",a.value),p.value=!1)},v=()=>{p.value=!1},u=["working","leave","terminated","inactive"],n=[{title:"Full Time",value:"full_time"},{title:"Part Time",value:"part_time"},{title:"Contract",value:"contract"},{title:"Temporary",value:"temporary"}];return(g,d)=>{const R=W;return V(),P(Q,{modelValue:p.value,"onUpdate:modelValue":d[12]||(d[12]=m=>p.value=m),"max-width":"600"},{default:t(()=>[e(R,{onClick:v}),e(D,{title:"Edit Staff Member"},{default:t(()=>[a.value?(V(),P(T,{key:0,class:"pa-6"},{default:t(()=>[e(N,null,{default:t(()=>[e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.name,"onUpdate:modelValue":d[0]||(d[0]=m=>a.value.name=m),label:"Full Name",required:""},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.email,"onUpdate:modelValue":d[1]||(d[1]=m=>a.value.email=m),label:"Email",type:"email",required:""},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.phone,"onUpdate:modelValue":d[2]||(d[2]=m=>a.value.phone=m),label:"Phone"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.jobTitle,"onUpdate:modelValue":d[3]||(d[3]=m=>a.value.jobTitle=m),label:"Job Title",required:""},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.department,"onUpdate:modelValue":d[4]||(d[4]=m=>a.value.department=m),label:"Department"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.salary,"onUpdate:modelValue":d[5]||(d[5]=m=>a.value.salary=m),label:"Salary",type:"number",prefix:"SAR"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.hireDate,"onUpdate:modelValue":d[6]||(d[6]=m=>a.value.hireDate=m),label:"Hire Date",type:"date"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.shiftStart,"onUpdate:modelValue":d[7]||(d[7]=m=>a.value.shiftStart=m),label:"Shift Start",type:"time"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.shiftEnd,"onUpdate:modelValue":d[8]||(d[8]=m=>a.value.shiftEnd=m),label:"Shift End",type:"time"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(fe,{modelValue:a.value.status,"onUpdate:modelValue":d[9]||(d[9]=m=>a.value.status=m),label:"Status",items:u,required:""},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(fe,{modelValue:a.value.employmentType,"onUpdate:modelValue":d[10]||(d[10]=m=>a.value.employmentType=m),label:"Employment Type",items:n},null,8,["modelValue"])]),_:1}),e(r,{cols:"12"},{default:t(()=>[e(pe,{modelValue:a.value.notes,"onUpdate:modelValue":d[11]||(d[11]=m=>a.value.notes=m),label:"Notes",rows:"2"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})):J("",!0),e(F),e(O,{class:"pa-6"},{default:t(()=>{var m,j,G,te;return[e(X),e(k,{color:"secondary",variant:"tonal",onClick:v},{default:t(()=>d[13]||(d[13]=[f(" Cancel ")])),_:1,__:[13]}),e(k,{color:"primary",disabled:!((m=a.value)!=null&&m.name)||!((j=a.value)!=null&&j.email)||!((G=a.value)!=null&&G.jobTitle)||!((te=a.value)!=null&&te.status),onClick:b},{default:t(()=>d[14]||(d[14]=[f(" Save Changes ")])),_:1,__:[14]},8,["disabled"])]}),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),Il=H({__name:"AddStaffDialog",props:{isDialogVisible:{type:Boolean}},emits:["update:isDialogVisible","staffAdded"],setup(E,{emit:z}){const w=E,U=z,p=S({get:()=>w.isDialogVisible,set:g=>U("update:isDialogVisible",g)}),a=_({name:"",email:"",phone:"",jobTitle:"",department:"",salary:0,hireDate:"",shiftStart:"",shiftEnd:"",status:"Active",employmentType:"full_time",notes:""}),b=()=>{!a.value.name||!a.value.email||!a.value.jobTitle||!a.value.hireDate||!a.value.status||(U("staffAdded",{...a.value}),a.value={name:"",email:"",phone:"",jobTitle:"",department:"",salary:0,hireDate:"",shiftStart:"",shiftEnd:"",status:"Active",employmentType:"full_time",notes:""},p.value=!1)},v=()=>{p.value=!1,a.value={name:"",email:"",phone:"",jobTitle:"",department:"",salary:0,hireDate:"",shiftStart:"",shiftEnd:"",status:"Active",employmentType:"full_time",notes:""}},u=["Active","On Leave","Terminated","Inactive"],n=[{title:"Full Time",value:"full_time"},{title:"Part Time",value:"part_time"},{title:"Contract",value:"contract"},{title:"Temporary",value:"temporary"}];return(g,d)=>{const R=W;return V(),P(Q,{modelValue:p.value,"onUpdate:modelValue":d[12]||(d[12]=m=>p.value=m),"max-width":"600"},{default:t(()=>[e(R,{onClick:v}),e(D,{title:"Add New Staff Member"},{default:t(()=>[e(T,{class:"pa-6"},{default:t(()=>[e(N,null,{default:t(()=>[e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.name,"onUpdate:modelValue":d[0]||(d[0]=m=>a.value.name=m),label:"Full Name",required:""},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.email,"onUpdate:modelValue":d[1]||(d[1]=m=>a.value.email=m),label:"Email",type:"email",required:""},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.phone,"onUpdate:modelValue":d[2]||(d[2]=m=>a.value.phone=m),label:"Phone"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.jobTitle,"onUpdate:modelValue":d[3]||(d[3]=m=>a.value.jobTitle=m),label:"Job Title",required:""},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.department,"onUpdate:modelValue":d[4]||(d[4]=m=>a.value.department=m),label:"Department"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.salary,"onUpdate:modelValue":d[5]||(d[5]=m=>a.value.salary=m),label:"Salary",type:"number",prefix:"SAR"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.hireDate,"onUpdate:modelValue":d[6]||(d[6]=m=>a.value.hireDate=m),label:"Hire Date",type:"date",required:""},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.shiftStart,"onUpdate:modelValue":d[7]||(d[7]=m=>a.value.shiftStart=m),label:"Shift Start",type:"time"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.shiftEnd,"onUpdate:modelValue":d[8]||(d[8]=m=>a.value.shiftEnd=m),label:"Shift End",type:"time"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(fe,{modelValue:a.value.status,"onUpdate:modelValue":d[9]||(d[9]=m=>a.value.status=m),label:"Status",items:u,required:""},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(fe,{modelValue:a.value.employmentType,"onUpdate:modelValue":d[10]||(d[10]=m=>a.value.employmentType=m),label:"Employment Type",items:n,required:""},null,8,["modelValue"])]),_:1}),e(r,{cols:"12"},{default:t(()=>[e(pe,{modelValue:a.value.notes,"onUpdate:modelValue":d[11]||(d[11]=m=>a.value.notes=m),label:"Notes",rows:"2"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(F),e(O,{class:"pa-6"},{default:t(()=>[e(X),e(k,{color:"secondary",variant:"tonal",onClick:v},{default:t(()=>d[13]||(d[13]=[f(" Cancel ")])),_:1,__:[13]}),e(k,{color:"primary",disabled:!a.value.name||!a.value.email||!a.value.jobTitle||!a.value.hireDate||!a.value.status,onClick:b},{default:t(()=>d[14]||(d[14]=[f(" Add Staff ")])),_:1,__:[14]},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),ql=H({__name:"EditUnitDialog",props:{isDialogVisible:{type:Boolean},unitData:{}},emits:["update:isDialogVisible","unitUpdated"],setup(E,{emit:z}){const w=E,U=z,p=S({get:()=>w.isDialogVisible,set:u=>U("update:isDialogVisible",u)}),a=_({});Te(()=>w.unitData,u=>{u&&(a.value={...u})},{immediate:!0});const b=()=>{a.value&&w.unitData&&(U("unitUpdated",a.value),p.value=!1)},v=()=>{p.value=!1};return(u,n)=>{const g=W;return V(),P(Q,{modelValue:p.value,"onUpdate:modelValue":n[5]||(n[5]=d=>p.value=d),"max-width":"600"},{default:t(()=>[e(g,{onClick:v}),e(D,{title:"Edit Unit Details"},{default:t(()=>[e(T,{class:"pa-6"},{default:t(()=>[e(N,null,{default:t(()=>[e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.branchName,"onUpdate:modelValue":n[0]||(n[0]=d=>a.value.branchName=d),label:"Branch Name",required:""},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.city,"onUpdate:modelValue":n[1]||(n[1]=d=>a.value.city=d),label:"City",required:""},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.franchiseeName,"onUpdate:modelValue":n[2]||(n[2]=d=>a.value.franchiseeName=d),label:"Franchisee",disabled:""},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.contactNumber,"onUpdate:modelValue":n[3]||(n[3]=d=>a.value.contactNumber=d),label:"Contact Number",required:""},null,8,["modelValue"])]),_:1}),e(r,{cols:"12"},{default:t(()=>[e(pe,{modelValue:a.value.address,"onUpdate:modelValue":n[4]||(n[4]=d=>a.value.address=d),label:"Address",rows:"3"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(F),e(O,{class:"pa-6"},{default:t(()=>[e(X),e(k,{color:"secondary",variant:"tonal",onClick:v},{default:t(()=>n[6]||(n[6]=[f(" Cancel ")])),_:1,__:[6]}),e(k,{color:"primary",disabled:!a.value.branchName||!a.value.city||!a.value.contactNumber,onClick:b},{default:t(()=>n[7]||(n[7]=[f(" Save Changes ")])),_:1,__:[7]},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),Fl={key:0,class:"text-center py-4"},Ll={class:"d-flex align-center gap-3"},Bl={class:"text-h6"},Ml={class:"text-body-2 mb-0"},jl={class:"text-body-2 text-medium-emphasis"},hl=H({__name:"AddProductToInventoryDialog",props:{isDialogVisible:{type:Boolean},availableFranchiseProducts:{}},emits:["update:isDialogVisible","productAdded"],setup(E,{emit:z}){const w=E,U=z,p=S({get:()=>w.isDialogVisible,set:g=>U("update:isDialogVisible",g)}),a=_(null),b=_({quantity:0,reorderLevel:5}),v=S(()=>a.value?w.availableFranchiseProducts.find(g=>g.id===a.value):null),u=()=>{a.value&&(U("productAdded",{productId:a.value,quantity:Number.parseInt(b.value.quantity.toString()),reorderLevel:Number.parseInt(b.value.reorderLevel.toString())}),a.value=null,b.value={quantity:0,reorderLevel:5},p.value=!1)},n=()=>{p.value=!1,a.value=null,b.value={quantity:0,reorderLevel:5}};return(g,d)=>{const R=W;return V(),P(Q,{modelValue:p.value,"onUpdate:modelValue":d[3]||(d[3]=m=>p.value=m),"max-width":"600"},{default:t(()=>[e(R,{onClick:n}),e(D,{title:"Add Product to Inventory"},{default:t(()=>[e(T,{class:"pa-6"},{default:t(()=>[e(N,null,{default:t(()=>[e(r,{cols:"12"},{default:t(()=>[e(fe,{modelValue:a.value,"onUpdate:modelValue":d[0]||(d[0]=m=>a.value=m),label:"Select Product",items:w.availableFranchiseProducts,"item-title":"name","item-value":"id",required:"",placeholder:"Choose a product from franchise catalog","no-data-text":w.availableFranchiseProducts.length===0?"No available franchise products to add":"No products match your search"},{item:t(({item:m,props:j})=>[e(L,el(tl(j)),{default:t(()=>[e(B,null,{default:t(()=>[f(c(m.raw.name),1)]),_:2},1024),e(il,null,{default:t(()=>[f(c(m.raw.category)+" • SAR "+c(m.raw.unitPrice.toFixed(2)),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","items","no-data-text"]),w.availableFranchiseProducts.length===0?(V(),A("div",Fl,[e(y,{icon:"tabler-package-off",size:"48",class:"text-disabled mb-2"}),d[4]||(d[4]=o("div",{class:"text-body-2 text-disabled"}," All franchise products are already in this unit's inventory ",-1))])):J("",!0)]),_:1}),v.value?(V(),P(r,{key:0,cols:"12"},{default:t(()=>[e(D,{variant:"tonal",color:"primary"},{default:t(()=>[e(T,null,{default:t(()=>[o("div",Ll,[e(y,{icon:"tabler-package",size:"24"}),o("div",null,[o("h6",Bl,c(v.value.name),1),o("p",Ml,c(v.value.description),1),o("div",jl," Category: "+c(v.value.category)+" • Price: SAR "+c(v.value.unitPrice.toFixed(2)),1)])])]),_:1})]),_:1})]),_:1})):J("",!0),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:b.value.quantity,"onUpdate:modelValue":d[1]||(d[1]=m=>b.value.quantity=m),label:"Initial Stock Quantity",type:"number",min:"0",required:"",placeholder:"Enter quantity to add"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:b.value.reorderLevel,"onUpdate:modelValue":d[2]||(d[2]=m=>b.value.reorderLevel=m),label:"Reorder Level",type:"number",min:"0",required:"",placeholder:"Minimum stock alert level"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(F),e(O,{class:"pa-6"},{default:t(()=>[e(X),e(k,{color:"secondary",variant:"tonal",onClick:n},{default:t(()=>d[5]||(d[5]=[f(" Cancel ")])),_:1,__:[5]}),e(k,{color:"primary",disabled:!a.value||!b.value.quantity,onClick:u},{default:t(()=>d[6]||(d[6]=[f(" Add to Inventory ")])),_:1,__:[6]},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),Ol={class:"d-flex align-center justify-space-between"},Hl={class:"d-flex align-center gap-3"},Jl={class:"text-h2 mb-1"},Wl={class:"text-body-1 text-medium-emphasis"},Ql={key:0,class:"text-center py-8"},Xl={key:1,class:"text-center py-8"},Gl={class:"text-body-1 text-error"},Yl={class:"mb-4"},Kl={class:"text-body-1 font-weight-medium"},Zl={class:"mb-4"},ea={class:"text-body-1"},ta={class:"mb-4"},la={class:"text-body-1"},aa=["href"],sa={class:"mb-4"},oa={class:"text-body-1"},ia={class:"mb-4"},da={class:"text-body-1"},na={key:0,class:"text-center py-8"},ua={key:1,class:"text-center py-8"},ra={class:"text-body-1 text-error"},ma={class:"ms-4"},va={class:"text-h4"},ca={class:"ms-4"},fa={class:"text-h4"},pa={class:"ms-4"},ba={class:"text-h4"},_a={class:"ms-4"},ya={class:"text-h4"},ga={class:"text-base font-weight-medium"},Va={class:"text-body-2 text-disabled"},xa={key:0,class:"text-center py-8"},ka={key:1,class:"text-center py-8"},wa={class:"text-body-1 text-error"},Da={key:2,class:"text-center py-8"},Ca={class:"d-flex align-center mb-3"},Ua={class:"text-h6"},Sa={class:"text-body-2 text-disabled mb-0"},Ta={class:"text-body-2 mb-3"},Ra={class:"d-flex align-center justify-space-between mb-3"},Pa={class:"text-body-2 text-disabled"},za={class:"d-flex align-center justify-space-between mb-3"},Ea={class:"text-body-2 text-disabled"},Aa={key:0,class:"text-center py-8"},Na={key:1,class:"text-center py-8"},$a={class:"text-body-1 text-error"},Ia={class:"ms-4"},qa={class:"text-h4"},Fa={class:"ms-4"},La={class:"text-h4"},Ba={class:"ms-4"},Ma={class:"text-h4"},ja={class:"d-flex align-center gap-x-3"},ha={class:"text-base font-weight-medium"},Oa={class:"text-body-2 text-disabled"},Ha={key:0,class:"text-center py-8"},Ja={key:1,class:"text-center py-8"},Wa={class:"text-body-1 text-error"},Qa={class:"ms-4"},Xa={class:"text-h4"},Ga={class:"ms-4"},Ya={class:"text-h4"},Ka={class:"ms-4"},Za={class:"text-h4"},es={class:"ms-4"},ts={class:"text-h4"},ls={class:"text-body-1 font-weight-medium"},as={key:0,class:"text-center py-8"},ss={key:1,class:"text-center py-8"},os={class:"text-body-1 text-error"},is={class:"ms-4"},ds={class:"text-h4"},ns={class:"ms-4"},us={class:"text-h4"},rs={class:"ms-4"},ms={class:"text-h4"},vs={class:"d-flex align-center gap-1"},cs={class:"text-body-2"},fs={class:"text-body-2",style:{"max-width":"300px"}},eo=H({__name:"unit-operation",setup(E){const z=ll(),w=_("overview"),U=S(()=>{const i=z.params.id;return typeof i=="string"?i:""}),p=S(()=>{if(U.value){const i=Number.parseInt(U.value);if(!Number.isNaN(i))return i}return null}),a=S(()=>{var i;return((i=u.value)==null?void 0:i.id)||p.value}),b=_(!1),v=_(null),u=_(null),n=_([]),g=_([]),d=_([]),R=_([]),m=_([]),j=_([]),G=_(null),te=_({quantity:0,reorderLevel:5}),h=()=>{var l;const i=((l=u.value)==null?void 0:l.id)||p.value;if(!i)throw new Error("Unit ID is not available");return i};S(()=>G.value?j.value.find(i=>i.id===G.value):null);const Y=async()=>{try{b.value=!0,v.value=null;const i=p.value||void 0,l=await $.getUnitDetails(i);l.success&&(u.value=l.data);const s=await $.getUnitTasks(i);s.success&&(n.value=s.data);const x=await $.getUnitStaff(i);x.success&&(d.value=x.data);const q=await $.getUnitProducts(i);q.success&&(R.value=q.data);const Z=await $.getUnitReviews(i);Z.success&&(m.value=Z.data);const ee=await $.getUnitDocuments(i);ee.success&&(g.value=ee.data)}catch(i){console.error("Error loading unit data:",i),v.value="Failed to load unit data. Please try again."}finally{b.value=!1}};al(()=>{Y()});const Re=_(!1),Pe=_(!1),be=_(!1),_e=_(!1),ye=_(!1),ge=_(!1),ze=_(!1),Ve=_(!1),K=_(!1),re=_(null),Ee=_(null),Ae=_(!1),xe=_(!1),le=_(null),je=_(null),Ne=_(!1),ke=_(!1),ae=_(null),he=_(null),$e=_(!1),we=_(!1),se=_(null),Oe=_(null),Ie=_(!1),Fe=_(null),qe=_(null),Le=_({name:"",email:"",phone:"",jobTitle:"",department:"",salary:0,hireDate:"",shiftStart:"",shiftEnd:"",status:"Active",employmentType:"full_time",notes:""}),Be=_({customerName:"",customerEmail:"",rating:0,comment:"",date:""}),Me=_({...u.value}),He=S(()=>n.value.length),Je=S(()=>n.value.filter(i=>i.status==="completed").length),We=S(()=>n.value.filter(i=>i.status==="in_progress").length),Qe=S(()=>{const i=new Date;return n.value.filter(l=>new Date(l.dueDate)<=i&&l.status!=="completed").length}),Xe=S(()=>d.value.length),Ge=S(()=>d.value.filter(i=>i.status==="working").length),Ye=S(()=>d.value.filter(i=>i.status==="leave").length),Ke=S(()=>R.value.length),Ze=S(()=>R.value.reduce((i,l)=>i+l.stock,0)),et=S(()=>R.value.filter(i=>i.stock>0&&i.stock<=10).length),tt=S(()=>R.value.filter(i=>i.stock===0).length),lt=S(()=>m.value.length===0?0:(m.value.reduce((l,s)=>l+s.rating,0)/m.value.length).toFixed(1)),at=S(()=>m.value.filter(i=>i.sentiment==="positive").length),st=S(()=>m.value.filter(i=>i.sentiment==="negative").length),me=i=>i==="active"||i==="completed"||i==="approved"||i==="working"?"success":i==="pending"||i==="in_progress"||i==="leave"?"warning":i==="inactive"||i==="rejected"||i==="terminated"?"error":"secondary",ot=i=>i==="high"?"error":i==="medium"?"warning":i==="low"?"info":"secondary",it=()=>{Me.value={...u.value},be.value=!0},dt=async i=>{const l=i||Me.value;try{const s=await $.updateUnitDetails(h(),l);s.success&&(u.value=s.data,be.value=!1)}catch(s){console.error("Error updating unit details:",s)}},nt=async i=>{await dt(i)},ut=async i=>{try{const l=await $.createTask(h(),i);l.success&&n.value.push(l.data)}catch(l){console.error("Error creating task:",l)}},rt=async i=>{try{const l=new FormData;l.append("title",i.title),l.append("description",i.description),l.append("type",i.type),l.append("status",i.status||"pending"),l.append("comment",i.comment||""),i.file&&l.append("file",i.file);const s=await $.createDocument(h(),l);s.success&&g.value.push(s.data)}catch(l){console.error("Error creating document:",l)}},mt=async i=>{try{i.action==="approve"?console.log("Approving document:",i.document,"with comment:",i.comment):i.action==="reject"&&console.log("Rejecting document:",i.document,"with comment:",i.comment)}catch(l){console.error("Error performing document action:",l)}finally{Ie.value=!1,Fe.value=null,qe.value=null}},vt=async i=>{var l;try{const s=((l=u.value)==null?void 0:l.id)||h(),x=ol("accessToken").value;if(!x){console.error("No access token found");return}const q=await fetch(`/api/v1/unit-manager/units/documents/${s}/${i.id}/download`,{method:"GET",headers:{Authorization:`Bearer ${x}`,Accept:"application/octet-stream","X-Requested-With":"XMLHttpRequest"},credentials:"include"});if(!q.ok){const Jt=await q.text();throw console.error("Download failed:",q.status,Jt),new Error(`Failed to download document: ${q.status}`)}const Z=await q.blob(),ee=window.URL.createObjectURL(Z),ve=window.document.createElement("a");ve.href=ee,ve.download=i.fileName,window.document.body.appendChild(ve),ve.click(),window.document.body.removeChild(ve),window.URL.revokeObjectURL(ee)}catch(s){console.error("Error downloading document:",s)}},ct=i=>{le.value=i,Ae.value=!0},ft=i=>{le.value={...i},xe.value=!0},pt=i=>{je.value=i,K.value=!0},bt=async i=>{const l=i||le.value;if(l)try{const s=await $.updateStaff(h(),l.id,l);if(s.success){const x=d.value.findIndex(q=>q.id===l.id);x!==-1&&(d.value[x]=s.data)}}catch(s){console.error("Error updating staff:",s)}finally{xe.value=!1,le.value=null}},_t=async i=>{await bt(i)},yt=async i=>{const l=i||Le.value;try{const s=await $.createStaff(h(),l);s.success&&(d.value.push(s.data),_e.value=!1,Le.value={name:"",email:"",phone:"",jobTitle:"",department:"",salary:0,hireDate:"",shiftStart:"",shiftEnd:"",status:"Active",employmentType:"full_time",notes:""})}catch(s){console.error("Error adding staff:",s)}},gt=async i=>{await yt(i)},Vt=i=>{ae.value=i,Ne.value=!0},xt=i=>{ae.value={...i},ke.value=!0},kt=i=>{he.value=i,K.value=!0},wt=async i=>{const l=i||ae.value;if(l)try{const s=await $.updateProduct(h(),l.id,l);if(s.success){const x=R.value.findIndex(q=>q.id===l.id);x!==-1&&(R.value[x]=s.data)}}catch(s){console.error("Error updating product:",s)}finally{ke.value=!1,ae.value=null}},Dt=async i=>{await wt(i)},Ct=async()=>{var i;try{const l=((i=u.value)==null?void 0:i.id)||h();if(!l){console.error("Unit ID not available yet. Please wait for unit data to load."),j.value=[];return}const s=await $.getAvailableFranchiseProducts(l);s.success&&(j.value=s.data)}catch(l){console.error("Error loading franchise products:",l),j.value=[]}},Ut=async i=>{var s;const l=i||{productId:G.value,quantity:Number.parseInt(te.value.quantity.toString()),reorderLevel:Number.parseInt(te.value.reorderLevel.toString())};try{const x=((s=u.value)==null?void 0:s.id)||h();if(!x){console.error("Unit ID not available for adding product");return}if((await $.addProductToInventory(x,l)).success){const Z=j.value.find(ee=>ee.id===l.productId);Z&&R.value.push({...Z,stock:l.quantity}),Tt()}}catch(x){console.error("Error adding product to inventory:",x)}},St=async i=>{await Ut(i)},Tt=()=>{ye.value=!1,G.value=null,te.value={quantity:0,reorderLevel:5}},Rt=()=>{Ct(),ye.value=!0},Pt=i=>{se.value=i,$e.value=!0},zt=i=>{se.value={...i},we.value=!0},Et=i=>{Oe.value=i,K.value=!0},At=async i=>{const l=i||se.value;if(l)try{const s=await $.updateReview(h(),l.id,l);if(s.success){const x=m.value.findIndex(q=>q.id===l.id);x!==-1&&(m.value[x]=s.data)}}catch(s){console.error("Error updating review:",s)}finally{we.value=!1,se.value=null}},Nt=async i=>{await At(i)},$t=async i=>{const l=i||Be.value;try{const s=await $.createReview(h(),l);s.success&&(m.value.push(s.data),ge.value=!1,Be.value={customerName:"",customerEmail:"",rating:0,comment:"",date:""})}catch(s){console.error("Error adding review:",s)}},It=async i=>{await $t(i)},qt=i=>{re.value=i,ze.value=!0},Ft=i=>{re.value={...i},Ve.value=!0},Lt=i=>{Ee.value=i,K.value=!0},Bt=i=>{const l=n.value.findIndex(s=>s.id===i.id);l!==-1&&(n.value[l]=i),Ve.value=!1,re.value=null},Mt=i=>{const l=n.value.findIndex(s=>s.id===i);l!==-1&&n.value.splice(l,1),K.value=!1,Ee.value=null},jt=[{title:"Task Info",key:"taskInfo"},{title:"Category",key:"category"},{title:"Start Date",key:"startDate"},{title:"Due Date",key:"dueDate"},{title:"Priority",key:"priority"},{title:"Status",key:"status"},{title:"Actions",key:"actions",sortable:!1}],ht=[{title:"Name",key:"name"},{title:"Job Title",key:"jobTitle"},{title:"Email",key:"email"},{title:"Shift Time",key:"shiftTime"},{title:"Status",key:"status"}],Ot=[{title:"Product Name",key:"name"},{title:"Description",key:"description"},{title:"Category",key:"category"},{title:"Unit Price",key:"unitPrice"},{title:"Stock",key:"stock"},{title:"Status",key:"status"}],Ht=[{title:"Customer",key:"customerName"},{title:"Rating",key:"rating"},{title:"Comment",key:"comment"},{title:"Date",key:"date"},{title:"Sentiment",key:"sentiment"}];return(i,l)=>(V(),A("section",null,[e(N,{class:"mb-6"},{default:t(()=>[e(r,{cols:"12"},{default:t(()=>{var s;return[o("div",Ol,[o("div",Hl,[o("div",null,[o("h2",Jl,c(((s=u.value)==null?void 0:s.branchName)||"Loading..."),1),o("p",Wl,c(u.value?`Managed by ${u.value.franchiseeName} • ${u.value.city}, ${u.value.state}`:"Loading unit information..."),1)])]),u.value?(V(),P(M,{key:0,color:me(u.value.status),size:"large",label:"",class:"text-capitalize"},{default:t(()=>[f(c(u.value.status),1)]),_:1},8,["color"])):(V(),P(dl,{key:1,type:"chip",width:"80",height:"32"}))])]}),_:1})]),_:1}),e(nl,{modelValue:w.value,"onUpdate:modelValue":l[0]||(l[0]=s=>w.value=s),class:"mb-6"},{default:t(()=>[e(ne,{value:"overview"},{default:t(()=>[e(y,{icon:"tabler-info-circle",start:""}),l[22]||(l[22]=f(" Overview "))]),_:1,__:[22]}),e(ne,{value:"tasks",hidden:""},{default:t(()=>[e(y,{icon:"tabler-checklist",start:""}),l[23]||(l[23]=f(" Tasks "))]),_:1,__:[23]}),e(ne,{value:"documents"},{default:t(()=>[e(y,{icon:"tabler-files",start:""}),l[24]||(l[24]=f(" Documents "))]),_:1,__:[24]}),e(ne,{value:"staffs"},{default:t(()=>[e(y,{icon:"tabler-users",start:""}),l[25]||(l[25]=f(" Staffs "))]),_:1,__:[25]}),e(ne,{value:"inventory"},{default:t(()=>[e(y,{icon:"tabler-package",start:""}),l[26]||(l[26]=f(" Inventory Management "))]),_:1,__:[26]}),e(ne,{value:"reviews"},{default:t(()=>[e(y,{icon:"tabler-star",start:""}),l[27]||(l[27]=f(" Customer Reviews "))]),_:1,__:[27]})]),_:1},8,["modelValue"]),e(ul,{modelValue:w.value,"onUpdate:modelValue":l[5]||(l[5]=s=>w.value=s),class:"disable-tab-transition"},{default:t(()=>[e(ue,{value:"overview"},{default:t(()=>[e(D,null,{default:t(()=>[e(oe,{class:"pb-4"},{append:t(()=>[e(k,{color:"primary","prepend-icon":"tabler-edit",disabled:!u.value,onClick:it},{default:t(()=>l[29]||(l[29]=[f(" Edit Details ")])),_:1,__:[29]},8,["disabled"])]),default:t(()=>[e(ie,null,{default:t(()=>l[28]||(l[28]=[f("Unit Information")])),_:1,__:[28]})]),_:1}),e(F),e(T,null,{default:t(()=>[b.value?(V(),A("div",Ql,[e(de,{indeterminate:"",color:"primary"}),l[30]||(l[30]=o("div",{class:"mt-3 text-body-1"}," Loading unit information... ",-1))])):v.value?(V(),A("div",Xl,[e(y,{icon:"tabler-alert-circle",color:"error",size:"48",class:"mb-3"}),o("div",Gl,c(v.value),1),e(k,{color:"primary",variant:"tonal",class:"mt-3",onClick:Y},{default:t(()=>l[31]||(l[31]=[f(" Retry ")])),_:1,__:[31]})])):u.value?(V(),P(N,{key:2},{default:t(()=>[e(r,{cols:"12"},{default:t(()=>[l[37]||(l[37]=o("h4",{class:"text-h6 mb-4"}," Basic Information ",-1)),e(N,null,{default:t(()=>[e(r,{cols:"12",md:"6"},{default:t(()=>[o("div",Yl,[l[32]||(l[32]=o("div",{class:"text-sm text-disabled mb-1"}," Branch Name ",-1)),o("div",Kl,c(u.value.branchName),1)])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[o("div",Zl,[l[33]||(l[33]=o("div",{class:"text-sm text-disabled mb-1"}," Franchisee Name ",-1)),o("div",ea,c(u.value.franchiseeName),1)])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[o("div",ta,[l[34]||(l[34]=o("div",{class:"text-sm text-disabled mb-1"}," Email Address ",-1)),o("div",la,[o("a",{href:`mailto:${u.value.email}`,class:"text-primary"},c(u.value.email),9,aa)])])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[o("div",sa,[l[35]||(l[35]=o("div",{class:"text-sm text-disabled mb-1"}," Contact Number ",-1)),o("div",oa,c(u.value.contactNumber),1)])]),_:1}),e(r,{cols:"12"},{default:t(()=>[o("div",ia,[l[36]||(l[36]=o("div",{class:"text-sm text-disabled mb-1"}," Address ",-1)),o("div",da,c(u.value.address)+", "+c(u.value.city)+", "+c(u.value.state)+", "+c(u.value.country),1)])]),_:1})]),_:1})]),_:1,__:[37]})]),_:1})):J("",!0)]),_:1})]),_:1})]),_:1}),e(ue,{value:"tasks"},{default:t(()=>[b.value?(V(),A("div",na,[e(de,{indeterminate:"",color:"primary"}),l[38]||(l[38]=o("div",{class:"mt-3 text-body-1"}," Loading tasks data... ",-1))])):v.value?(V(),A("div",ua,[e(y,{icon:"tabler-alert-circle",color:"error",size:"48",class:"mb-3"}),o("div",ra,c(v.value),1),e(k,{color:"primary",variant:"tonal",class:"mt-3",onClick:Y},{default:t(()=>l[39]||(l[39]=[f(" Retry ")])),_:1,__:[39]})])):(V(),A(ce,{key:2},[e(N,{class:"mb-6"},{default:t(()=>[e(r,{cols:"12",md:"3"},{default:t(()=>[e(D,null,{default:t(()=>[e(T,{class:"d-flex align-center"},{default:t(()=>[e(I,{size:"44",rounded:"",color:"primary",variant:"tonal"},{default:t(()=>[e(y,{icon:"tabler-checklist",size:"26"})]),_:1}),o("div",ma,[l[40]||(l[40]=o("div",{class:"text-body-2 text-disabled"}," Total Tasks ",-1)),o("h4",va,c(He.value),1)])]),_:1})]),_:1})]),_:1}),e(r,{cols:"12",md:"3"},{default:t(()=>[e(D,null,{default:t(()=>[e(T,{class:"d-flex align-center"},{default:t(()=>[e(I,{size:"44",rounded:"",color:"success",variant:"tonal"},{default:t(()=>[e(y,{icon:"tabler-check",size:"26"})]),_:1}),o("div",ca,[l[41]||(l[41]=o("div",{class:"text-body-2 text-disabled"}," Completed ",-1)),o("h4",fa,c(Je.value),1)])]),_:1})]),_:1})]),_:1}),e(r,{cols:"12",md:"3"},{default:t(()=>[e(D,null,{default:t(()=>[e(T,{class:"d-flex align-center"},{default:t(()=>[e(I,{size:"44",rounded:"",color:"warning",variant:"tonal"},{default:t(()=>[e(y,{icon:"tabler-clock",size:"26"})]),_:1}),o("div",pa,[l[42]||(l[42]=o("div",{class:"text-body-2 text-disabled"}," In Progress ",-1)),o("h4",ba,c(We.value),1)])]),_:1})]),_:1})]),_:1}),e(r,{cols:"12",md:"3"},{default:t(()=>[e(D,null,{default:t(()=>[e(T,{class:"d-flex align-center"},{default:t(()=>[e(I,{size:"44",rounded:"",color:"error",variant:"tonal"},{default:t(()=>[e(y,{icon:"tabler-alert-circle",size:"26"})]),_:1}),o("div",_a,[l[43]||(l[43]=o("div",{class:"text-body-2 text-disabled"}," Due ",-1)),o("h4",ya,c(Qe.value),1)])]),_:1})]),_:1})]),_:1})]),_:1}),e(D,null,{default:t(()=>[e(oe,{class:"pb-4"},{append:t(()=>[e(k,{color:"primary","prepend-icon":"tabler-plus",onClick:l[1]||(l[1]=s=>Re.value=!0)},{default:t(()=>l[45]||(l[45]=[f(" Create Task ")])),_:1,__:[45]})]),default:t(()=>[e(ie,null,{default:t(()=>l[44]||(l[44]=[f("Tasks")])),_:1,__:[44]})]),_:1}),e(F),e(Ce,{items:n.value,headers:jt,class:"text-no-wrap","item-value":"id"},{"item.taskInfo":t(({item:s})=>[o("div",null,[o("h6",ga,c(s.title),1),o("div",Va,c(s.description),1)])]),"item.priority":t(({item:s})=>[e(M,{color:ot(s.priority),size:"small",label:"",class:"text-capitalize"},{default:t(()=>[f(c(s.priority),1)]),_:2},1032,["color"])]),"item.status":t(({item:s})=>[e(M,{color:me(s.status),size:"small",label:"",class:"text-capitalize"},{default:t(()=>[f(c(s.status),1)]),_:2},1032,["color"])]),"item.actions":t(({item:s})=>[e(k,{icon:"",variant:"text",color:"medium-emphasis",size:"small"},{default:t(()=>[e(y,{icon:"tabler-dots-vertical"}),e(Ue,{activator:"parent"},{default:t(()=>[e(De,null,{default:t(()=>[e(L,{onClick:x=>qt(s)},{prepend:t(()=>[e(y,{icon:"tabler-eye"})]),default:t(()=>[e(B,null,{default:t(()=>l[46]||(l[46]=[f("View")])),_:1,__:[46]})]),_:2},1032,["onClick"]),e(L,{onClick:x=>Ft(s)},{prepend:t(()=>[e(y,{icon:"tabler-edit"})]),default:t(()=>[e(B,null,{default:t(()=>l[47]||(l[47]=[f("Edit")])),_:1,__:[47]})]),_:2},1032,["onClick"]),e(L,{onClick:x=>Lt(s.id)},{prepend:t(()=>[e(y,{icon:"tabler-trash"})]),default:t(()=>[e(B,null,{default:t(()=>l[48]||(l[48]=[f("Delete")])),_:1,__:[48]})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["items"])]),_:1})],64))]),_:1}),e(ue,{value:"documents"},{default:t(()=>[e(D,null,{default:t(()=>[e(oe,{class:"pb-4"},{append:t(()=>[e(k,{color:"primary","prepend-icon":"tabler-plus",disabled:b.value,onClick:l[2]||(l[2]=s=>Pe.value=!0)},{default:t(()=>l[50]||(l[50]=[f(" Add Document ")])),_:1,__:[50]},8,["disabled"])]),default:t(()=>[e(ie,null,{default:t(()=>l[49]||(l[49]=[f("Unit Documents")])),_:1,__:[49]})]),_:1}),e(T,null,{default:t(()=>[b.value?(V(),A("div",xa,[e(de,{indeterminate:"",color:"primary"}),l[51]||(l[51]=o("div",{class:"mt-3 text-body-1"}," Loading documents... ",-1))])):v.value?(V(),A("div",ka,[e(y,{icon:"tabler-alert-circle",color:"error",size:"48",class:"mb-3"}),o("div",wa,c(v.value),1),e(k,{color:"primary",variant:"tonal",class:"mt-3",onClick:Y},{default:t(()=>l[52]||(l[52]=[f(" Retry ")])),_:1,__:[52]})])):g.value.length===0?(V(),A("div",Da,[e(y,{icon:"tabler-folder-open",size:"48",class:"text-disabled mb-3"}),l[53]||(l[53]=o("div",{class:"text-body-1 text-disabled"}," No documents found for this unit ",-1))])):(V(),P(N,{key:3},{default:t(()=>[(V(!0),A(ce,null,sl(g.value,s=>(V(),P(r,{key:s.id,cols:"12",md:"6",lg:"4"},{default:t(()=>[e(D,null,{default:t(()=>[e(T,null,{default:t(()=>[o("div",Ca,[e(y,{icon:"tabler-file-text",size:"24",color:"primary",class:"me-3"}),o("div",null,[o("h6",Ua,c(s.title),1),o("p",Sa,c(s.type),1)])]),o("p",Ta,c(s.description),1),o("div",Ra,[o("span",Pa,c(s.fileName),1),e(M,{size:"small",color:"secondary"},{default:t(()=>[f(c(s.fileSize),1)]),_:2},1024)]),o("div",za,[o("span",Ea,c(s.uploadDate),1),e(M,{color:me(s.status),size:"small",label:"",class:"text-capitalize"},{default:t(()=>[f(c(s.status),1)]),_:2},1032,["color"])])]),_:2},1024),e(O,null,{default:t(()=>[e(k,{size:"small",variant:"text",color:"primary","prepend-icon":"tabler-download",onClick:x=>vt(s)},{default:t(()=>l[54]||(l[54]=[f(" Download ")])),_:2,__:[54]},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}))]),_:1})]),_:1})]),_:1}),e(ue,{value:"staffs"},{default:t(()=>[b.value?(V(),A("div",Aa,[e(de,{indeterminate:"",color:"primary"}),l[55]||(l[55]=o("div",{class:"mt-3 text-body-1"}," Loading staff data... ",-1))])):v.value?(V(),A("div",Na,[e(y,{icon:"tabler-alert-circle",color:"error",size:"48",class:"mb-3"}),o("div",$a,c(v.value),1),e(k,{color:"primary",variant:"tonal",class:"mt-3",onClick:Y},{default:t(()=>l[56]||(l[56]=[f(" Retry ")])),_:1,__:[56]})])):(V(),A(ce,{key:2},[e(N,{class:"mb-6"},{default:t(()=>[e(r,{cols:"12",md:"4"},{default:t(()=>[e(D,null,{default:t(()=>[e(T,{class:"d-flex align-center"},{default:t(()=>[e(I,{size:"44",rounded:"",color:"primary",variant:"tonal"},{default:t(()=>[e(y,{icon:"tabler-users",size:"26"})]),_:1}),o("div",Ia,[l[57]||(l[57]=o("div",{class:"text-body-2 text-disabled"}," Total Employees ",-1)),o("h4",qa,c(Xe.value),1)])]),_:1})]),_:1})]),_:1}),e(r,{cols:"12",md:"4"},{default:t(()=>[e(D,null,{default:t(()=>[e(T,{class:"d-flex align-center"},{default:t(()=>[e(I,{size:"44",rounded:"",color:"success",variant:"tonal"},{default:t(()=>[e(y,{icon:"tabler-user-check",size:"26"})]),_:1}),o("div",Fa,[l[58]||(l[58]=o("div",{class:"text-body-2 text-disabled"}," Working ",-1)),o("h4",La,c(Ge.value),1)])]),_:1})]),_:1})]),_:1}),e(r,{cols:"12",md:"4"},{default:t(()=>[e(D,null,{default:t(()=>[e(T,{class:"d-flex align-center"},{default:t(()=>[e(I,{size:"44",rounded:"",color:"warning",variant:"tonal"},{default:t(()=>[e(y,{icon:"tabler-user-minus",size:"26"})]),_:1}),o("div",Ba,[l[59]||(l[59]=o("div",{class:"text-body-2 text-disabled"}," On Leave ",-1)),o("h4",Ma,c(Ye.value),1)])]),_:1})]),_:1})]),_:1})]),_:1}),e(D,null,{default:t(()=>[e(oe,{class:"pb-4"},{append:t(()=>[e(k,{color:"primary","prepend-icon":"tabler-plus",onClick:l[3]||(l[3]=s=>_e.value=!0)},{default:t(()=>l[61]||(l[61]=[f(" Add Staff ")])),_:1,__:[61]})]),default:t(()=>[e(ie,null,{default:t(()=>l[60]||(l[60]=[f("Staff Members")])),_:1,__:[60]})]),_:1}),e(F),e(Ce,{items:d.value,headers:[...ht,{title:"Actions",key:"actions",sortable:!1}],class:"text-no-wrap","item-value":"id"},{"item.name":t(({item:s})=>[o("div",ja,[e(I,{size:"34",color:"primary",variant:"tonal"},{default:t(()=>[o("span",null,c(s.name.split(" ").map(x=>x[0]).join("")),1)]),_:2},1024),o("div",null,[o("h6",ha,c(s.name),1),o("div",Oa,c(s.email),1)])])]),"item.status":t(({item:s})=>[e(M,{color:me(s.status),size:"small",label:"",class:"text-capitalize"},{default:t(()=>[f(c(s.status),1)]),_:2},1032,["color"])]),"item.actions":t(({item:s})=>[e(k,{icon:"",variant:"text",color:"medium-emphasis",size:"small"},{default:t(()=>[e(y,{icon:"tabler-dots-vertical"}),e(Ue,{activator:"parent"},{default:t(()=>[e(De,null,{default:t(()=>[e(L,{onClick:x=>ct(s)},{prepend:t(()=>[e(y,{icon:"tabler-eye"})]),default:t(()=>[e(B,null,{default:t(()=>l[62]||(l[62]=[f("View")])),_:1,__:[62]})]),_:2},1032,["onClick"]),e(L,{onClick:x=>ft(s)},{prepend:t(()=>[e(y,{icon:"tabler-edit"})]),default:t(()=>[e(B,null,{default:t(()=>l[63]||(l[63]=[f("Edit")])),_:1,__:[63]})]),_:2},1032,["onClick"]),e(L,{onClick:x=>pt(s.id)},{prepend:t(()=>[e(y,{icon:"tabler-trash"})]),default:t(()=>[e(B,null,{default:t(()=>l[64]||(l[64]=[f("Remove")])),_:1,__:[64]})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["items","headers"])]),_:1})],64))]),_:1}),e(ue,{value:"inventory"},{default:t(()=>[b.value?(V(),A("div",Ha,[e(de,{indeterminate:"",color:"primary"}),l[65]||(l[65]=o("div",{class:"mt-3 text-body-1"}," Loading inventory data... ",-1))])):v.value?(V(),A("div",Ja,[e(y,{icon:"tabler-alert-circle",color:"error",size:"48",class:"mb-3"}),o("div",Wa,c(v.value),1),e(k,{color:"primary",variant:"tonal",class:"mt-3",onClick:Y},{default:t(()=>l[66]||(l[66]=[f(" Retry ")])),_:1,__:[66]})])):(V(),A(ce,{key:2},[e(N,{class:"mb-6"},{default:t(()=>[e(r,{cols:"12",md:"3"},{default:t(()=>[e(D,null,{default:t(()=>[e(T,{class:"d-flex align-center"},{default:t(()=>[e(I,{size:"44",rounded:"",color:"primary",variant:"tonal"},{default:t(()=>[e(y,{icon:"tabler-package",size:"26"})]),_:1}),o("div",Qa,[l[67]||(l[67]=o("div",{class:"text-body-2 text-disabled"}," Total Products ",-1)),o("h4",Xa,c(Ke.value),1)])]),_:1})]),_:1})]),_:1}),e(r,{cols:"12",md:"3"},{default:t(()=>[e(D,null,{default:t(()=>[e(T,{class:"d-flex align-center"},{default:t(()=>[e(I,{size:"44",rounded:"",color:"info",variant:"tonal"},{default:t(()=>[e(y,{icon:"tabler-stack",size:"26"})]),_:1}),o("div",Ga,[l[68]||(l[68]=o("div",{class:"text-body-2 text-disabled"}," Total Stock ",-1)),o("h4",Ya,c(Ze.value),1)])]),_:1})]),_:1})]),_:1}),e(r,{cols:"12",md:"3"},{default:t(()=>[e(D,null,{default:t(()=>[e(T,{class:"d-flex align-center"},{default:t(()=>[e(I,{size:"44",rounded:"",color:"warning",variant:"tonal"},{default:t(()=>[e(y,{icon:"tabler-alert-triangle",size:"26"})]),_:1}),o("div",Ka,[l[69]||(l[69]=o("div",{class:"text-body-2 text-disabled"}," Low Stock ",-1)),o("h4",Za,c(et.value),1)])]),_:1})]),_:1})]),_:1}),e(r,{cols:"12",md:"3"},{default:t(()=>[e(D,null,{default:t(()=>[e(T,{class:"d-flex align-center"},{default:t(()=>[e(I,{size:"44",rounded:"",color:"error",variant:"tonal"},{default:t(()=>[e(y,{icon:"tabler-x",size:"26"})]),_:1}),o("div",es,[l[70]||(l[70]=o("div",{class:"text-body-2 text-disabled"}," Out of Stock ",-1)),o("h4",ts,c(tt.value),1)])]),_:1})]),_:1})]),_:1})]),_:1}),e(D,null,{default:t(()=>[e(oe,{class:"pb-4"},{append:t(()=>[e(k,{color:"primary","prepend-icon":"tabler-plus",onClick:Rt},{default:t(()=>l[73]||(l[73]=[f(" Add to Inventory ")])),_:1,__:[73]})]),default:t(()=>[e(ie,null,{default:t(()=>l[71]||(l[71]=[f("Inventory")])),_:1,__:[71]}),e(Zt,null,{default:t(()=>l[72]||(l[72]=[f("Manage stock levels for franchise products")])),_:1,__:[72]})]),_:1}),e(F),e(Ce,{items:R.value,headers:[...Ot,{title:"Actions",key:"actions",sortable:!1}],class:"text-no-wrap","item-value":"id"},{"item.unitPrice":t(({item:s})=>[o("div",ls," SAR "+c(s.unitPrice.toFixed(2)),1)]),"item.stock":t(({item:s})=>[e(M,{color:s.stock===0?"error":s.stock<=10?"warning":"success",size:"small",label:""},{default:t(()=>[f(c(s.stock),1)]),_:2},1032,["color"])]),"item.status":t(({item:s})=>[e(M,{color:me(s.status),size:"small",label:"",class:"text-capitalize"},{default:t(()=>[f(c(s.status),1)]),_:2},1032,["color"])]),"item.actions":t(({item:s})=>[e(k,{icon:"",variant:"text",color:"medium-emphasis",size:"small"},{default:t(()=>[e(y,{icon:"tabler-dots-vertical"}),e(Ue,{activator:"parent"},{default:t(()=>[e(De,null,{default:t(()=>[e(L,{onClick:x=>Vt(s)},{prepend:t(()=>[e(y,{icon:"tabler-eye"})]),default:t(()=>[e(B,null,{default:t(()=>l[74]||(l[74]=[f("View")])),_:1,__:[74]})]),_:2},1032,["onClick"]),e(L,{onClick:x=>xt(s)},{prepend:t(()=>[e(y,{icon:"tabler-edit"})]),default:t(()=>[e(B,null,{default:t(()=>l[75]||(l[75]=[f("Edit")])),_:1,__:[75]})]),_:2},1032,["onClick"]),e(L,{onClick:x=>kt(s.id)},{prepend:t(()=>[e(y,{icon:"tabler-trash"})]),default:t(()=>[e(B,null,{default:t(()=>l[76]||(l[76]=[f("Remove from Inventory")])),_:1,__:[76]})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["items","headers"])]),_:1})],64))]),_:1}),e(ue,{value:"reviews"},{default:t(()=>[b.value?(V(),A("div",as,[e(de,{indeterminate:"",color:"primary"}),l[77]||(l[77]=o("div",{class:"mt-3 text-body-1"}," Loading reviews data... ",-1))])):v.value?(V(),A("div",ss,[e(y,{icon:"tabler-alert-circle",color:"error",size:"48",class:"mb-3"}),o("div",os,c(v.value),1),e(k,{color:"primary",variant:"tonal",class:"mt-3",onClick:Y},{default:t(()=>l[78]||(l[78]=[f(" Retry ")])),_:1,__:[78]})])):(V(),A(ce,{key:2},[e(N,{class:"mb-6"},{default:t(()=>[e(r,{cols:"12",md:"4"},{default:t(()=>[e(D,null,{default:t(()=>[e(T,{class:"d-flex align-center"},{default:t(()=>[e(I,{size:"44",rounded:"",color:"primary",variant:"tonal"},{default:t(()=>[e(y,{icon:"tabler-star",size:"26"})]),_:1}),o("div",is,[l[79]||(l[79]=o("div",{class:"text-body-2 text-disabled"}," Average Rating ",-1)),o("h4",ds,c(lt.value),1)])]),_:1})]),_:1})]),_:1}),e(r,{cols:"12",md:"4"},{default:t(()=>[e(D,null,{default:t(()=>[e(T,{class:"d-flex align-center"},{default:t(()=>[e(I,{size:"44",rounded:"",color:"success",variant:"tonal"},{default:t(()=>[e(y,{icon:"tabler-thumb-up",size:"26"})]),_:1}),o("div",ns,[l[80]||(l[80]=o("div",{class:"text-body-2 text-disabled"}," Positive Reviews ",-1)),o("h4",us,c(at.value),1)])]),_:1})]),_:1})]),_:1}),e(r,{cols:"12",md:"4"},{default:t(()=>[e(D,null,{default:t(()=>[e(T,{class:"d-flex align-center"},{default:t(()=>[e(I,{size:"44",rounded:"",color:"error",variant:"tonal"},{default:t(()=>[e(y,{icon:"tabler-thumb-down",size:"26"})]),_:1}),o("div",rs,[l[81]||(l[81]=o("div",{class:"text-body-2 text-disabled"}," Negative Reviews ",-1)),o("h4",ms,c(st.value),1)])]),_:1})]),_:1})]),_:1})]),_:1}),e(D,null,{default:t(()=>[e(oe,{class:"pb-4"},{append:t(()=>[e(k,{color:"primary","prepend-icon":"tabler-plus",onClick:l[4]||(l[4]=s=>ge.value=!0)},{default:t(()=>l[83]||(l[83]=[f(" Add Review ")])),_:1,__:[83]})]),default:t(()=>[e(ie,null,{default:t(()=>l[82]||(l[82]=[f("Customer Reviews")])),_:1,__:[82]})]),_:1}),e(F),e(Ce,{items:m.value,headers:[...Ht,{title:"Actions",key:"actions",sortable:!1}],class:"text-no-wrap","item-value":"id"},{"item.rating":t(({item:s})=>[o("div",vs,[e(Se,{"model-value":s.rating,readonly:"",size:"small",color:"warning"},null,8,["model-value"]),o("span",cs,"("+c(s.rating)+")",1)])]),"item.comment":t(({item:s})=>[o("div",fs,c(s.comment),1)]),"item.sentiment":t(({item:s})=>[e(M,{color:s.sentiment==="positive"?"success":"error",size:"small",label:"",class:"text-capitalize"},{default:t(()=>[f(c(s.sentiment),1)]),_:2},1032,["color"])]),"item.actions":t(({item:s})=>[e(k,{icon:"",variant:"text",color:"medium-emphasis",size:"small"},{default:t(()=>[e(y,{icon:"tabler-dots-vertical"}),e(Ue,{activator:"parent"},{default:t(()=>[e(De,null,{default:t(()=>[e(L,{onClick:x=>Pt(s)},{prepend:t(()=>[e(y,{icon:"tabler-eye"})]),default:t(()=>[e(B,null,{default:t(()=>l[84]||(l[84]=[f("View")])),_:1,__:[84]})]),_:2},1032,["onClick"]),e(L,{onClick:x=>zt(s)},{prepend:t(()=>[e(y,{icon:"tabler-edit"})]),default:t(()=>[e(B,null,{default:t(()=>l[85]||(l[85]=[f("Edit")])),_:1,__:[85]})]),_:2},1032,["onClick"]),e(L,{onClick:x=>Et(s.id)},{prepend:t(()=>[e(y,{icon:"tabler-trash"})]),default:t(()=>[e(B,null,{default:t(()=>l[86]||(l[86]=[f("Remove")])),_:1,__:[86]})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["items","headers"])]),_:1})],64))]),_:1})]),_:1},8,["modelValue"]),e(Qt,{"is-dialog-visible":Re.value,"onUpdate:isDialogVisible":l[6]||(l[6]=s=>Re.value=s),onTaskCreated:ut},null,8,["is-dialog-visible"]),e(Wt,{"is-dialog-visible":Pe.value,"onUpdate:isDialogVisible":l[7]||(l[7]=s=>Pe.value=s),"unit-id":a.value,mode:"unit",onDocumentAdded:rt},null,8,["is-dialog-visible","unit-id"]),qe.value?(V(),P(Xt,{key:0,"is-dialog-visible":Ie.value,"onUpdate:isDialogVisible":l[8]||(l[8]=s=>Ie.value=s),document:Fe.value,action:qe.value,onDocumentActionConfirmed:mt},null,8,["is-dialog-visible","document","action"])):J("",!0),e(Gt,{"is-dialog-visible":ze.value,"onUpdate:isDialogVisible":l[9]||(l[9]=s=>ze.value=s),task:re.value},null,8,["is-dialog-visible","task"]),e(Yt,{"is-dialog-visible":Ve.value,"onUpdate:isDialogVisible":l[10]||(l[10]=s=>Ve.value=s),task:re.value,"user-options":[],"users-loading":!1,onTaskUpdated:Bt},null,8,["is-dialog-visible","task"]),e(Kt,{"is-dialog-visible":K.value,"onUpdate:isDialogVisible":l[11]||(l[11]=s=>K.value=s),"task-id":Ee.value,onTaskDeleted:Mt},null,8,["is-dialog-visible","task-id"]),e(ql,{"is-dialog-visible":be.value,"onUpdate:isDialogVisible":l[12]||(l[12]=s=>be.value=s),"unit-data":u.value,onUnitUpdated:nt},null,8,["is-dialog-visible","unit-data"]),e(Il,{"is-dialog-visible":_e.value,"onUpdate:isDialogVisible":l[13]||(l[13]=s=>_e.value=s),onStaffAdded:gt},null,8,["is-dialog-visible"]),e(Tl,{"is-dialog-visible":Ae.value,"onUpdate:isDialogVisible":l[14]||(l[14]=s=>Ae.value=s),"selected-staff":le.value},null,8,["is-dialog-visible","selected-staff"]),e($l,{"is-dialog-visible":xe.value,"onUpdate:isDialogVisible":l[15]||(l[15]=s=>xe.value=s),"selected-staff":le.value,onStaffUpdated:_t},null,8,["is-dialog-visible","selected-staff"]),e(hl,{"is-dialog-visible":ye.value,"onUpdate:isDialogVisible":l[16]||(l[16]=s=>ye.value=s),"available-franchise-products":j.value,onProductAdded:St},null,8,["is-dialog-visible","available-franchise-products"]),e(Rl,{"is-dialog-visible":ge.value,"onUpdate:isDialogVisible":l[17]||(l[17]=s=>ge.value=s),onReviewAdded:It},null,8,["is-dialog-visible"]),e(xl,{"is-dialog-visible":Ne.value,"onUpdate:isDialogVisible":l[18]||(l[18]=s=>Ne.value=s),"selected-product":ae.value},null,8,["is-dialog-visible","selected-product"]),e(Nl,{"is-dialog-visible":ke.value,"onUpdate:isDialogVisible":l[19]||(l[19]=s=>ke.value=s),"selected-product":ae.value,onProductUpdated:Dt},null,8,["is-dialog-visible","selected-product"]),e(bl,{"is-dialog-visible":$e.value,"onUpdate:isDialogVisible":l[20]||(l[20]=s=>$e.value=s),"selected-review":se.value},null,8,["is-dialog-visible","selected-review"]),e(Pl,{"is-dialog-visible":we.value,"onUpdate:isDialogVisible":l[21]||(l[21]=s=>we.value=s),"selected-review":se.value,onReviewUpdated:Nt},null,8,["is-dialog-visible","selected-review"])]))}});export{eo as default};
