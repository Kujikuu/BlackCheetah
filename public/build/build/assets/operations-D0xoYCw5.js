import{m as G}from"./vue3-apexcharts-2_0LHsmE.js";import{a as J,e as K}from"./apexCharConfig-DBm89VeG.js";import{f as Q}from"./franchisee-dashboard-C8Eyu-Rg.js";import{V as b,a as _}from"./VRow-BSfsb00B.js";import{a as X,V as Y}from"./VTabs-CODMI5EY.js";import{a as Z,V as F}from"./VWindowItem-BDbMGyIp.js";import{V as h,a as L,b as T}from"./VCard-DXwsm8sH.js";import{V as g}from"./VCardText-881-qsDn.js";import{d as ee,r as d,ak as te,G as ae,P as c,c as i,g as u,f as e,b as t,o as n,e as l,a$ as w,t as m,v as r,a3 as oe,aa as k,F as I,i as D,x as O}from"./main-Bx5MqBCc.js";import{V as le}from"./VAlert-BH88qGLz.js";import{V as z}from"./VAvatar-Dq0WBzTg.js";import{V as se,a as ne,b as re,d as ie}from"./VList-Bj_5rawV.js";import"./_commonjsHelpers-CqkleIqs.js";/* empty css              */import"./forwardRefs-C-GTDzx5.js";import"./easing-Bybner-F.js";import"./VSlideGroup-rdxh0fbF.js";import"./scopeId-DLFuo6Fo.js";import"./lazy-DJP8iQaQ.js";import"./ssrBoot-CXMLMhxv.js";import"./VImg-CzTq61uy.js";import"./VDivider-BD3st0Tt.js";const ue={key:2},de={class:"d-flex mb-6"},ce={class:"d-flex justify-space-between"},me={class:"d-flex flex-column gap-y-1"},fe={class:"text-body-1 text-high-emphasis"},ve={class:"d-flex gap-x-2 align-center"},pe={class:"text-h4"},_e={class:"text-sm"},he={key:1,class:"text-center py-8"},ge={class:"d-flex mb-6"},ye={class:"d-flex justify-space-between"},xe={class:"d-flex flex-column gap-y-1"},be={class:"text-body-1 text-high-emphasis"},ke={class:"d-flex gap-x-2 align-center"},Ce={class:"text-h4"},Ve={class:"text-sm"},Se={class:"text-sm font-weight-medium"},we={class:"text-end"},Ie={class:"text-body-1 font-weight-medium"},De={key:1,class:"text-center py-8"},Ae={key:1},Le={key:1,class:"text-center py-8"},et=ee({__name:"operations",setup(Te){const y=d("store"),P=te(),p=d(!1),C=d(null),A=d(!1),N=s=>s>0?`+${s}`:s.toString(),x=d({totalItems:0,totalStocks:0,lowStockItems:0,outOfStockItems:0}),f=d({totalStaffs:0,newHires:0,monthlyAbsenteeismRate:0,topPerformers:[]}),V=d([{name:"Intake",data:[0,0,0,0,0,0,0,0,0,0,0,0]},{name:"Available",data:[0,0,0,0,0,0,0,0,0,0,0,0]}]),S=d([{name:"Morning Shift",data:[0,0,0,0,0,0,0]},{name:"Afternoon Shift",data:[0,0,0,0,0,0,0]},{name:"Evening Shift",data:[0,0,0,0,0,0,0]},{name:"Night Shift",data:[0,0,0,0,0,0,0]}]),R=async()=>{p.value=!0,C.value=null;try{const s=await Q.getOperationsData();if(s.success&&s.data){const a=s.data;x.value=a.storeData,f.value=a.staffData,V.value=a.lowStockChart,S.value=a.shiftCoverageChart,A.value=!0}}catch(s){C.value="Failed to load operations data. Please try again.",console.error("Error loading operations data:",s)}finally{p.value=!1}};ae(()=>{R()});const H=c(()=>J(P.current.value)),M=c(()=>K(P.current.value)),$=c(()=>!p.value&&A.value&&V.value.length>0&&V.value.every(s=>s.data&&Array.isArray(s.data)&&s.data.length>0&&s.data.every(a=>typeof a=="number"&&!isNaN(a)))),j=c(()=>!p.value&&A.value&&S.value.length>0&&S.value.every(s=>s.data&&Array.isArray(s.data)&&s.data.length>0&&s.data.every(a=>typeof a=="number"&&!isNaN(a)))),B=c(()=>[{title:"Total Items",value:x.value.totalItems.toLocaleString(),change:5,desc:"Inventory items",icon:"tabler-package",iconColor:"primary"},{title:"Total Stocks",value:x.value.totalStocks.toLocaleString(),change:12,desc:"Stock quantity",icon:"tabler-stack",iconColor:"success"},{title:"Low Stock Items",value:x.value.lowStockItems.toString(),change:-8,desc:"Items running low",icon:"tabler-alert-triangle",iconColor:"warning"},{title:"Out of Stock",value:x.value.outOfStockItems.toString(),change:-15,desc:"Items unavailable",icon:"tabler-x-circle",iconColor:"error"}]),W=c(()=>[{title:"Total Staffs",value:f.value.totalStaffs.toString(),change:8,desc:"Active employees",icon:"tabler-users",iconColor:"primary"},{title:"New Hires",value:f.value.newHires.toString(),change:25,desc:"This month",icon:"tabler-user-plus",iconColor:"success"},{title:"Absenteeism Rate",value:`${f.value.monthlyAbsenteeismRate.toFixed(1)}%`,change:-12,desc:"Monthly average",icon:"tabler-user-x",iconColor:"warning"}]);c(()=>y.value==="store"?B.value:W.value);const U=c(()=>f.value.topPerformers&&f.value.topPerformers.length>0),q=[{title:"Store",value:"store",icon:"tabler-building-store"},{title:"Staff",value:"staff",icon:"tabler-user"}];return(s,a)=>{const E=G;return n(),i("section",null,[p.value?(n(),u(b,{key:0,class:"mb-6"},{default:e(()=>[t(_,{cols:"12"},{default:e(()=>[t(h,null,{default:e(()=>[t(g,{class:"text-center py-8"},{default:e(()=>[t(w,{indeterminate:"",color:"primary",size:"64"}),a[2]||(a[2]=l("div",{class:"mt-4 text-body-1"}," Loading operations data... ",-1))]),_:1,__:[2]})]),_:1})]),_:1})]),_:1})):C.value?(n(),u(b,{key:1,class:"mb-6"},{default:e(()=>[t(_,{cols:"12"},{default:e(()=>[t(le,{type:"error",variant:"tonal",class:"mb-0"},{prepend:e(()=>[t(k,{icon:"tabler-alert-circle"})]),append:e(()=>[t(oe,{color:"error",variant:"text",size:"small",onClick:R},{default:e(()=>a[3]||(a[3]=[m(" Retry ")])),_:1,__:[3]})]),default:e(()=>[m(" "+r(C.value)+" ",1)]),_:1})]),_:1})]),_:1})):(n(),i("div",ue,[t(X,{modelValue:y.value,"onUpdate:modelValue":a[0]||(a[0]=o=>y.value=o),class:"mb-6"},{default:e(()=>[(n(),i(I,null,D(q,o=>t(Y,{key:o.value,value:o.value},{default:e(()=>[t(k,{icon:o.icon,start:""},null,8,["icon"]),m(" "+r(o.title),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"]),t(Z,{modelValue:y.value,"onUpdate:modelValue":a[1]||(a[1]=o=>y.value=o),class:"disable-tab-transition"},{default:e(()=>[t(F,{value:"store"},{default:e(()=>[l("div",de,[t(b,null,{default:e(()=>[(n(!0),i(I,null,D(B.value,(o,v)=>(n(),u(_,{key:v,cols:"12",md:"3",sm:"6"},{default:e(()=>[t(h,null,{default:e(()=>[t(g,null,{default:e(()=>[l("div",ce,[l("div",me,[l("div",fe,r(o.title),1),l("div",ve,[l("h4",pe,r(o.value),1),l("div",{class:O(["text-base",o.change>0?"text-success":"text-error"])}," ("+r(N(o.change))+"%) ",3)]),l("div",_e,r(o.desc),1)]),t(z,{color:o.iconColor,variant:"tonal",rounded:"",size:"42"},{default:e(()=>[t(k,{icon:o.icon,size:"26"},null,8,["icon"])]),_:2},1032,["color"])])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),t(h,{class:"mb-6"},{default:e(()=>[t(L,null,{default:e(()=>[t(T,null,{default:e(()=>a[4]||(a[4]=[m("Items on Low Stock")])),_:1,__:[4]})]),_:1}),t(g,null,{default:e(()=>[$.value?(n(),u(E,{key:0,type:"line",height:"400",options:H.value,series:V.value},null,8,["options","series"])):(n(),i("div",he,[t(w,{indeterminate:"",color:"primary",size:"32"}),a[5]||(a[5]=l("div",{class:"mt-4 text-body-2 text-medium-emphasis"}," Loading chart data... ",-1))]))]),_:1})]),_:1})]),_:1}),t(F,{value:"staff"},{default:e(()=>[l("div",ge,[t(b,null,{default:e(()=>[(n(!0),i(I,null,D(W.value,(o,v)=>(n(),u(_,{key:v,cols:"12",md:"4",sm:"6"},{default:e(()=>[t(h,null,{default:e(()=>[t(g,null,{default:e(()=>[l("div",ye,[l("div",xe,[l("div",be,r(o.title),1),l("div",ke,[l("h4",Ce,r(o.value),1),l("div",{class:O(["text-base",o.change>0?"text-success":"text-error"])}," ("+r(N(o.change))+"%) ",3)]),l("div",Ve,r(o.desc),1)]),t(z,{color:o.iconColor,variant:"tonal",rounded:"",size:"42"},{default:e(()=>[t(k,{icon:o.icon,size:"26"},null,8,["icon"])]),_:2},1032,["color"])])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),t(b,null,{default:e(()=>[t(_,{cols:"12",md:"6"},{default:e(()=>[t(h,null,{default:e(()=>[t(L,null,{default:e(()=>[t(T,null,{default:e(()=>a[6]||(a[6]=[m("Top 5 Performer")])),_:1,__:[6]})]),_:1}),t(g,null,{default:e(()=>[U.value?(n(),u(se,{key:0},{default:e(()=>[(n(!0),i(I,null,D(f.value.topPerformers,(o,v)=>(n(),u(ne,{key:o.id||v,class:"px-0"},{prepend:e(()=>[t(z,{size:"40",color:v<3?"primary":"secondary",variant:"tonal"},{default:e(()=>[l("span",Se,r(v+1),1)]),_:2},1032,["color"])]),append:e(()=>[l("div",we,[l("div",Ie,r(o.performance||o.score)+"% ",1),a[7]||(a[7]=l("div",{class:"text-caption text-disabled"}," Performance ",-1))])]),default:e(()=>[t(re,{class:"font-weight-medium"},{default:e(()=>[m(r(o.name),1)]),_:2},1024),t(ie,null,{default:e(()=>[m(r(o.department),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(n(),i("div",De,[p.value?(n(),u(w,{key:0,indeterminate:"",color:"primary",size:"32"})):(n(),i("div",Ae,[t(k,{icon:"tabler-users",size:"48",class:"text-disabled mb-4"}),a[8]||(a[8]=l("div",{class:"text-body-2 text-medium-emphasis"}," No performance data available ",-1))]))]))]),_:1})]),_:1})]),_:1}),t(_,{cols:"12",md:"6"},{default:e(()=>[t(h,null,{default:e(()=>[t(L,null,{default:e(()=>[t(T,null,{default:e(()=>a[9]||(a[9]=[m("Employee Shift Coverage")])),_:1,__:[9]})]),_:1}),t(g,null,{default:e(()=>[j.value?(n(),u(E,{key:0,type:"radar",height:"300",options:M.value,series:S.value},null,8,["options","series"])):(n(),i("div",Le,[t(w,{indeterminate:"",color:"primary",size:"32"}),a[10]||(a[10]=l("div",{class:"mt-4 text-body-2 text-medium-emphasis"}," Loading chart data... ",-1))]))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))])}}});export{et as default};
