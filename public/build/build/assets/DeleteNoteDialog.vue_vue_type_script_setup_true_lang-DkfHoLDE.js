import{_ as J}from"./AppTextarea.vue_vue_type_script_setup_true_lang-DJuxuOVb.js";import{_ as Q}from"./AppTextField.vue_vue_type_script_setup_true_lang-DSmTBduk.js";import{V as I,_ as W}from"./VDialog-6C-NQXCx.js";import{d as S,r as $,P as L,w as X,g as b,f as s,aR as P,m as r,b as o,l as B,b3 as Y,e as u,c as N,i as R,F as G,a9 as C,t as A,b5 as U,o as m,ax as E,v as g}from"./main-gemCwVks.js";import{V as F,d as K}from"./VCard-DJ82mpnW.js";import{V as Z}from"./VForm-FUZpY-zG.js";import{V as T,a as V}from"./VRow-DiX7eN30.js";import{V as ee}from"./VFileInput-CB0ItP4X.js";import{V as O}from"./VCardText-BD5AHO-w.js";import{V as j}from"./VDivider-B4ry9pxl.js";import{V as q}from"./VSpacer-Cpeayo2U.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as oe}from"./ConfirmDeleteDialog.vue_vue_type_script_setup_true_lang-DLjIa95G.js";const le={class:"flex-grow-1 me-3"},ae={class:"text-body-2 font-weight-medium"},se={class:"text-caption text-disabled"},Ee=S({__name:"EditNoteDialog",props:{isDialogVisible:{type:Boolean},note:{}},emits:["update:isDialogVisible","noteUpdated"],setup(D,{emit:w}){const c=D,h=w,l=$(null),_=$([]),n=$(!1),f=L({get:()=>c.isDialogVisible,set:e=>h("update:isDialogVisible",e)});X(()=>c.note,e=>{e&&(l.value={...e})},{immediate:!0});const x=e=>{const a=e.target;a.files&&(_.value=Array.from(a.files))},t=e=>{if(e===0)return"0 Bytes";const a=1024,y=["Bytes","KB","MB","GB"],k=Math.floor(Math.log(e)/Math.log(a));return`${Number.parseFloat((e/a**k).toFixed(2))} ${y[k]}`},i=async e=>{if(l.value)try{const a=await U(`/v1/notes/${l.value.id}/attachments/${e}`,{method:"DELETE"});a.success?(l.value.attachments.splice(e,1),console.log("Attachment removed successfully")):console.error("Failed to remove attachment:",a.message)}catch(a){console.error("Error removing attachment:",a)}},v=async()=>{if(l.value)try{n.value=!0;const e=new FormData;e.append("title",l.value.title),e.append("description",l.value.description),e.append("_method","PUT"),_.value.forEach(y=>{e.append("attachments[]",y)});const a=await U(`/v1/notes/${l.value.id}`,{method:"POST",body:e});a.success?(console.log("Note updated successfully"),h("noteUpdated"),f.value=!1,_.value=[]):console.error("Failed to update note:",a.message)}catch(e){console.error("Error updating note:",e)}finally{n.value=!1}},d=()=>{f.value=!1,_.value=[],c.note&&(l.value={...c.note})},z=e=>e.startsWith("image/")?"tabler-photo":e.startsWith("video/")?"tabler-video":e.startsWith("audio/")?"tabler-music":e.includes("pdf")?"tabler-file-type-pdf":e.includes("word")||e.includes("document")?"tabler-file-type-doc":e.includes("excel")||e.includes("spreadsheet")?"tabler-file-type-xls":e.includes("zip")||e.includes("compressed")?"tabler-file-zip":"tabler-file";return(e,a)=>{const y=W,k=Q,H=J;return m(),b(I,{modelValue:r(f),"onUpdate:modelValue":a[2]||(a[2]=p=>P(f)?f.value=p:null),"max-width":"800"},{default:s(()=>[o(y,{onClick:d}),r(l)?(m(),b(F,{key:0,title:"Edit Note"},{default:s(()=>[o(O,null,{default:s(()=>[o(Z,{onSubmit:Y(v,["prevent"])},{default:s(()=>[o(T,null,{default:s(()=>[o(V,{cols:"12"},{default:s(()=>[o(k,{modelValue:r(l).title,"onUpdate:modelValue":a[0]||(a[0]=p=>r(l).title=p),label:"Title",placeholder:"Enter note title",disabled:r(n)},null,8,["modelValue","disabled"])]),_:1}),o(V,{cols:"12"},{default:s(()=>[o(H,{modelValue:r(l).description,"onUpdate:modelValue":a[1]||(a[1]=p=>r(l).description=p),label:"Description",placeholder:"Enter note description...",rows:"6",disabled:r(n)},null,8,["modelValue","disabled"])]),_:1}),r(l).attachments&&r(l).attachments.length>0?(m(),b(V,{key:0,cols:"12"},{default:s(()=>[a[3]||(a[3]=u("h6",{class:"text-h6 mb-3"}," Existing Attachments ",-1)),o(T,null,{default:s(()=>[(m(!0),N(G,null,R(r(l).attachments,(p,M)=>(m(),b(V,{key:M,cols:"12",md:"6"},{default:s(()=>[o(F,{variant:"tonal",class:"d-flex align-center pa-3"},{default:s(()=>[o(E,{icon:z(p.type),size:"32",class:"me-3"},null,8,["icon"]),u("div",le,[u("div",ae,g(p.name),1),u("div",se,g(t(p.size)),1)]),o(C,{icon:"",size:"small",variant:"text",color:"error",disabled:r(n),onClick:_e=>i(M)},{default:s(()=>[o(E,{icon:"tabler-trash"})]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1,__:[3]})):B("",!0),o(V,{cols:"12"},{default:s(()=>[o(ee,{label:"Attachments",multiple:"","prepend-icon":"tabler-paperclip",placeholder:"Upload files",chips:"","show-size":"",disabled:r(n),onChange:x},null,8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1}),o(j),o(K,null,{default:s(()=>[o(q),o(C,{color:"secondary",variant:"tonal",disabled:r(n),onClick:d},{default:s(()=>a[4]||(a[4]=[A(" Cancel ")])),_:1,__:[4]},8,["disabled"]),o(C,{color:"primary",loading:r(n),disabled:r(n),onClick:v},{default:s(()=>a[5]||(a[5]=[A(" Update Note ")])),_:1,__:[5]},8,["loading","disabled"])]),_:1})]),_:1})):B("",!0)]),_:1},8,["modelValue"])}}}),ie={class:"mb-6"},ne={class:"text-body-1 whitespace-pre-wrap"},re={class:"text-body-2 text-medium-emphasis"},de={key:0},ce={class:"text-h6 mb-3"},ue={class:"flex-grow-1 me-3"},me={class:"text-body-2 font-weight-medium"},fe={class:"text-caption text-disabled"},pe=S({__name:"ViewNoteDialog",props:{isDialogVisible:{type:Boolean},note:{}},emits:["update:isDialogVisible"],setup(D,{emit:w}){const c=D,h=w,l=L({get:()=>c.isDialogVisible,set:t=>h("update:isDialogVisible",t)}),_=t=>new Date(t).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),n=t=>{if(t===0)return"0 Bytes";const i=1024,v=["Bytes","KB","MB","GB"],d=Math.floor(Math.log(t)/Math.log(i));return`${Number.parseFloat((t/i**d).toFixed(2))} ${v[d]}`},f=t=>{const i=document.createElement("a");i.href=`/storage/${t.path}`,i.download=t.name,i.target="_blank",document.body.appendChild(i),i.click(),document.body.removeChild(i)},x=t=>t.startsWith("image/")?"tabler-photo":t.startsWith("video/")?"tabler-video":t.startsWith("audio/")?"tabler-music":t.includes("pdf")?"tabler-file-type-pdf":t.includes("word")||t.includes("document")?"tabler-file-type-doc":t.includes("excel")||t.includes("spreadsheet")?"tabler-file-type-xls":t.includes("zip")||t.includes("compressed")?"tabler-file-zip":"tabler-file";return(t,i)=>{const v=W;return m(),b(I,{modelValue:r(l),"onUpdate:modelValue":i[2]||(i[2]=d=>P(l)?l.value=d:null),"max-width":"800"},{default:s(()=>[o(v,{onClick:i[0]||(i[0]=d=>l.value=!1)}),t.note?(m(),b(F,{key:0,title:"Note Details"},{default:s(()=>[o(O,null,{default:s(()=>[u("div",ie,[u("p",ne,g(t.note.description),1),u("p",re," Created by "+g(t.note.createdBy)+" at "+g(_(t.note.createdAt)),1)]),t.note.attachments&&t.note.attachments.length>0?(m(),N("div",de,[u("h6",ce," Attachments ("+g(t.note.attachments.length)+") ",1),o(T,null,{default:s(()=>[(m(!0),N(G,null,R(t.note.attachments,(d,z)=>(m(),b(V,{key:z,cols:"12",md:"6"},{default:s(()=>[o(F,{variant:"tonal",class:"d-flex align-center pa-3"},{default:s(()=>[o(E,{icon:x(d.type),size:"32",class:"me-3"},null,8,["icon"]),u("div",ue,[u("div",me,g(d.name),1),u("div",fe,g(n(d.size)),1)]),o(C,{icon:"",size:"small",variant:"text",color:"primary",onClick:e=>f(d)},{default:s(()=>[o(E,{icon:"tabler-download"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})])):B("",!0)]),_:1}),o(j),o(K,null,{default:s(()=>[o(q),o(C,{color:"secondary",variant:"tonal",onClick:i[1]||(i[1]=d=>l.value=!1)},{default:s(()=>i[3]||(i[3]=[A(" Close ")])),_:1,__:[3]})]),_:1})]),_:1})):B("",!0)]),_:1},8,["modelValue"])}}}),Fe=te(pe,[["__scopeId","data-v-99cf038d"]]),ze=S({__name:"DeleteNoteDialog",props:{isDialogVisible:{type:Boolean},noteId:{}},emits:["update:isDialogVisible","note-deleted"],setup(D,{emit:w}){const c=D,h=w,l=$(!1),_=async()=>{if(c.noteId!==null){l.value=!0;try{const n=await U(`/v1/notes/${c.noteId}`,{method:"DELETE"});n.success?(h("note-deleted"),h("update:isDialogVisible",!1)):console.error("Failed to delete note:",n.message)}catch(n){console.error("Error deleting note:",n)}finally{l.value=!1}}};return(n,f)=>(m(),b(oe,{"is-dialog-visible":c.isDialogVisible,"onUpdate:isDialogVisible":f[0]||(f[0]=x=>c.isDialogVisible=x),title:"Confirm Delete Note",message:"Are you sure you want to delete this note? This action cannot be undone.",onConfirm:_},null,8,["is-dialog-visible"]))}});export{Fe as V,Ee as _,ze as a};
