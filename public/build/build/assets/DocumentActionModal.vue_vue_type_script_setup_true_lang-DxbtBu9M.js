import{V as N,_ as Y}from"./VDialog-6C-NQXCx.js";import{d as O,r as x,P as D,w as R,g as M,f as o,b as e,b3 as z,m as l,aR as H,a9 as S,t as _,o as $,v as b,e as T,ax as E}from"./main-gemCwVks.js";import{u as J,T as Q,P as W,S as X}from"./EditTaskDialog.vue_vue_type_script_setup_true_lang-CnXGptQS.js";import{V as P}from"./VCardText-BD5AHO-w.js";import{V as G}from"./VForm-FUZpY-zG.js";import{V as Z,a as n}from"./VRow-DiX7eN30.js";import{V as y}from"./VTextField-BhxF6EAD.js";import{V as K}from"./VTextarea-OEcL0zKK.js";import{V as C}from"./VSelect-C9dxRhag.js";import{V as B}from"./VDivider-B4ry9pxl.js";import{d as L,V as F,b as h}from"./VCard-DJ82mpnW.js";import{V as ee}from"./VSpacer-Cpeayo2U.js";const ve=O({__name:"CreateTaskModal",props:{isDialogVisible:{type:Boolean},currentTab:{},defaultAssignedTo:{},unitId:{},disableAssignedTo:{type:Boolean}},emits:["update:isDialogVisible","taskCreated"],setup(k,{emit:A}){const s=k,g=A,{getUsersForSelect:V,initializeUsers:u,loading:U}=J(),a=x({title:"",description:"",category:"",assignedTo:"",startDate:"",dueDate:"",priority:"medium",status:"pending",estimatedHours:0,actualHours:0,completionPercentage:0}),m=x(!1),w=D(()=>{const r=s.currentTab||"franchisee";return V(r)}),d=r=>!!r||"This field is required",p=r=>{g("update:isDialogVisible",r)},f=()=>{a.value={title:"",description:"",category:"",assignedTo:"",startDate:"",dueDate:"",priority:"medium",status:"pending",estimatedHours:0,actualHours:0,completionPercentage:0}},v=()=>{if(m.value){const r={id:Date.now(),...a.value};g("taskCreated",r),f(),p(!1)}},q=()=>{f(),p(!1)};return R(()=>s.isDialogVisible,async r=>{if(r){const t=s.currentTab||"franchisee";await u(t),s.defaultAssignedTo&&(a.value.assignedTo=s.defaultAssignedTo)}else f()}),R(()=>s.currentTab,async r=>{s.isDialogVisible&&r&&(await u(r),a.value.assignedTo="")}),(r,t)=>{const c=Y;return $(),M(N,{"model-value":s.isDialogVisible,"max-width":"600",persistent:"","onUpdate:modelValue":p},{default:o(()=>[e(c,{onClick:t[0]||(t[0]=i=>p(!1))}),e(F,{title:"Create New Task"},{default:o(()=>[e(P,{class:"pa-6"},{default:o(()=>[e(G,{modelValue:l(m),"onUpdate:modelValue":t[11]||(t[11]=i=>H(m)?m.value=i:null),onSubmit:z(v,["prevent"])},{default:o(()=>[e(Z,null,{default:o(()=>[e(n,{cols:"12"},{default:o(()=>[e(y,{modelValue:l(a).title,"onUpdate:modelValue":t[1]||(t[1]=i=>l(a).title=i),label:"Task Title",placeholder:"Enter task title",rules:[d],required:""},null,8,["modelValue","rules"])]),_:1}),e(n,{cols:"12"},{default:o(()=>[e(K,{modelValue:l(a).description,"onUpdate:modelValue":t[2]||(t[2]=i=>l(a).description=i),label:"Description",placeholder:"Enter task description",rows:"3",rules:[d],required:""},null,8,["modelValue","rules"])]),_:1}),e(n,{cols:"12",md:"6"},{default:o(()=>[e(C,{modelValue:l(a).category,"onUpdate:modelValue":t[3]||(t[3]=i=>l(a).category=i),label:"Category",placeholder:"Select category",items:l(Q),rules:[d],required:""},null,8,["modelValue","items","rules"])]),_:1}),e(n,{cols:"12",md:"6"},{default:o(()=>[e(C,{modelValue:l(a).assignedTo,"onUpdate:modelValue":t[4]||(t[4]=i=>l(a).assignedTo=i),label:"Assigned To",placeholder:"Select user",items:l(w),loading:l(U),rules:[d],"item-title":"title","item-value":"value",disabled:s.disableAssignedTo,required:""},null,8,["modelValue","items","loading","rules","disabled"])]),_:1}),e(n,{cols:"12",md:"6"},{default:o(()=>[e(y,{modelValue:l(a).startDate,"onUpdate:modelValue":t[5]||(t[5]=i=>l(a).startDate=i),label:"Start Date",type:"date",rules:[d],required:""},null,8,["modelValue","rules"])]),_:1}),e(n,{cols:"12",md:"6"},{default:o(()=>[e(y,{modelValue:l(a).dueDate,"onUpdate:modelValue":t[6]||(t[6]=i=>l(a).dueDate=i),label:"Due Date",type:"date",rules:[d],required:""},null,8,["modelValue","rules"])]),_:1}),e(n,{cols:"12",md:"6"},{default:o(()=>[e(C,{modelValue:l(a).priority,"onUpdate:modelValue":t[7]||(t[7]=i=>l(a).priority=i),label:"Priority",placeholder:"Select priority",items:l(W),rules:[d],required:""},null,8,["modelValue","items","rules"])]),_:1}),e(n,{cols:"12",md:"6"},{default:o(()=>[e(C,{modelValue:l(a).status,"onUpdate:modelValue":t[8]||(t[8]=i=>l(a).status=i),label:"Status",placeholder:"Select status",items:l(X),rules:[d],required:""},null,8,["modelValue","items","rules"])]),_:1}),e(n,{cols:"12",md:"6"},{default:o(()=>[e(y,{modelValue:l(a).estimatedHours,"onUpdate:modelValue":t[9]||(t[9]=i=>l(a).estimatedHours=i),label:"Estimated Hours",type:"number",min:"0"},null,8,["modelValue"])]),_:1}),e(n,{cols:"12",md:"6"},{default:o(()=>[e(y,{modelValue:l(a).actualHours,"onUpdate:modelValue":t[10]||(t[10]=i=>l(a).actualHours=i),label:"Actual Hours",type:"number",min:"0"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(B),e(L,{class:"pa-6"},{default:o(()=>[e(ee),e(S,{color:"error",variant:"text",onClick:q},{default:o(()=>t[12]||(t[12]=[_(" Cancel ")])),_:1,__:[12]}),e(S,{color:"primary",disabled:!l(m),onClick:v},{default:o(()=>t[13]||(t[13]=[_(" Create Task ")])),_:1,__:[13]},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}}),te={class:"text-body-1 text-medium-emphasis mb-6"},le={class:"d-flex align-center mb-2"},oe={class:"text-body-1 font-weight-medium"},ae={class:"text-body-2 text-disabled mb-1"},se={class:"text-body-2 text-disabled"},Te=O({__name:"DocumentActionModal",props:{isDialogVisible:{type:Boolean},document:{},action:{}},emits:["update:isDialogVisible","documentActionConfirmed"],setup(k,{emit:A}){const s=k,g=A,V=x(""),u=x(!1),U=r=>!!r||"Comment is required",a=D(()=>s.action==="approve"?"Approve Document":"Reject Document"),m=D(()=>s.action==="approve"?"success":"error"),w=D(()=>s.action==="approve"?"tabler-check":"tabler-x"),d=D(()=>s.action==="approve"?"Are you sure you want to approve this document? Please provide a comment.":"Are you sure you want to reject this document? Please provide a reason for rejection."),p=r=>{g("update:isDialogVisible",r)},f=()=>{V.value=""},v=()=>{u.value&&(g("documentActionConfirmed",{document:s.document,action:s.action,comment:V.value}),f(),p(!1))},q=()=>{f(),p(!1)};return R(()=>s.isDialogVisible,r=>{r||f()}),(r,t)=>($(),M(N,{"model-value":s.isDialogVisible,"max-width":"500",persistent:"","onUpdate:modelValue":p},{default:o(()=>[e(F,null,{default:o(()=>[e(h,{class:"text-h5 pa-6 pb-4"},{default:o(()=>[_(b(l(a)),1)]),_:1}),e(B),e(P,{class:"text-center px-10 py-6"},{default:o(()=>[e(E,{icon:l(w),color:l(m),size:"48",class:"mb-4"},null,8,["icon","color"]),T("p",te,b(l(d)),1),e(F,{variant:"outlined",class:"mb-6"},{default:o(()=>[e(P,{class:"text-start"},{default:o(()=>{var c,i,I,j;return[T("div",le,[e(E,{icon:"tabler-file-text",size:"20",color:"primary",class:"me-2"}),T("span",oe,b((c=s.document)==null?void 0:c.title),1)]),T("div",ae,b((i=s.document)==null?void 0:i.description),1),T("div",se,b((I=s.document)==null?void 0:I.fileName)+" â€¢ "+b((j=s.document)==null?void 0:j.fileSize),1)]}),_:1})]),_:1}),e(G,{modelValue:l(u),"onUpdate:modelValue":t[1]||(t[1]=c=>H(u)?u.value=c:null),onSubmit:z(v,["prevent"])},{default:o(()=>[e(K,{modelValue:l(V),"onUpdate:modelValue":t[0]||(t[0]=c=>H(V)?V.value=c:null),label:s.action==="approve"?"Approval Comment":"Rejection Reason",placeholder:s.action==="approve"?"Enter approval comment...":"Enter reason for rejection...",rows:"3",rules:[U],required:"",class:"mb-4"},null,8,["modelValue","label","placeholder","rules"])]),_:1},8,["modelValue"])]),_:1}),e(B),e(L,{class:"justify-center pa-6"},{default:o(()=>[e(S,{color:"error",variant:"text",onClick:q},{default:o(()=>t[2]||(t[2]=[_(" Cancel ")])),_:1,__:[2]}),e(S,{color:l(m),disabled:!l(u),onClick:v},{default:o(()=>[_(b(s.action==="approve"?"Approve":"Reject"),1)]),_:1},8,["color","disabled"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}});export{ve as _,Te as a};
