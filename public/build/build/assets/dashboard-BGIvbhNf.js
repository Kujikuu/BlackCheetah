import{m as H}from"./vue3-apexcharts-DSb83cqz.js";import{d as B,r as c,G as q,P as Z,g as S,o as d,f as t,b as e,t as w,c as v,m as a,v as p,e as s,x as P,aO as R,ak as ee,a$ as re,aa as L,a as le,l as ne,F as W,i as N,a3 as ie,au as A}from"./main-CmF9Tu9X.js";import{a as J,b as K,c as Q,V as F}from"./VCard-BaQ80E-1.js";import{V as E}from"./VCardText-C80XsO14.js";import{V}from"./VSkeletonLoader-fbio1-ky.js";import{V as G}from"./VChip-C8np5did.js";import{_ as ce}from"./AddEditFranchiseeDrawer.vue_vue_type_script_setup_true_lang-D7A8y0Vi.js";import{_ as de}from"./AddEditFranchisorDrawer.vue_vue_type_script_setup_true_lang-BA1u7t4d.js";import{_ as ue}from"./AddEditSalesDrawer.vue_vue_type_script_setup_true_lang-CQc77auG.js";import{_ as pe}from"./ViewUserDialog.vue_vue_type_script_setup_true_lang-DP9kFMZu.js";import{a as U,V as T}from"./VRow-CHcR5qvn.js";import{V as he}from"./VAlert-hOlFNs2Y.js";import{V as X}from"./VAvatar-BtKH23RP.js";import{V as fe}from"./VDivider-Bg3_3YcA.js";import{V as me}from"./VTable-BuP0AM6H.js";import{V as _e}from"./VImg-DCfN5bGZ.js";import{V as Y}from"./VTooltip-uh7bNbi1.js";import"./_commonjsHelpers-CqkleIqs.js";import"./VSlideGroup-rtSzF4dh.js";import"./validators-BYiRrju8.js";import"./AppSelect.vue_vue_type_script_setup_true_lang-Dmp4G9dU.js";import"./form-0sOYWFNG.js";import"./VSelect-DtFFpYD6.js";import"./VTextField-aisKyR0y.js";/* empty css                   */import"./VCounter-BFtCiXsp.js";import"./VField-CBysmnBE.js";import"./easing-Bybner-F.js";import"./VInput-D3l3p6I4.js";import"./forwardRefs-C-GTDzx5.js";import"./VList-CAsLa3ZS.js";import"./ssrBoot-XEleUk5n.js";import"./dialog-transition-Dt_2P4kD.js";import"./VMenu-B8DK95Ht.js";import"./VOverlay-26Lm7od8.js";import"./lazy-X6OUuNhY.js";import"./scopeId-nZWRusZv.js";import"./VCheckboxBtn-oyTmTyVr.js";import"./VSelectionControl-D8diO4uz.js";import"./AppTextField.vue_vue_type_script_setup_true_lang-C1QkJzRA.js";import"./AppDrawerHeaderSection.vue_vue_type_script_setup_true_lang-CzNP1lus.js";import"./VSpacer-BvvuRniz.js";/* empty css              */import"./VNavigationDrawer-8ULaR44l.js";import"./VForm-DZliotcg.js";import"./formatters-WDr9EcLN.js";import"./VDialog-d18aDjvw.js";const ve={key:0,class:"d-flex align-center justify-space-between gap-x-2 mt-3"},xe={key:1,class:"text-center text-error text-sm mt-3"},ge={key:2,class:"d-flex align-center justify-space-between gap-x-2 mt-3"},be={class:"text-h4 text-center"},ye=B({__name:"AdminRequestsChart",setup(j){const k=c(!0),h=c(""),b=c(0),f=c(0),x=c([{name:"Requests",data:[0,0,0,0,0,0,0]}]),C=async()=>{try{k.value=!0;const m=await R("/v1/admin/dashboard/chart-data");if(m.success&&m.data.requests){const l=m.data.requests.slice(-7),i=l.map(u=>u.requests);x.value=[{name:"Requests",data:i}];const _=i[i.length-1]||0,g=i[i.length-2]||0;b.value=l.reduce((u,$)=>u+$.requests,0),g>0?f.value=(_-g)/g*100:f.value=_>0?100:0}}catch(m){console.error("Error fetching requests chart data:",m),h.value="Failed to load chart data"}finally{k.value=!1}};q(()=>{C()});const y={warning:"#FFB400"},D=Z(()=>({chart:{height:90,parentHeightOffset:0,type:"bar",toolbar:{show:!1}},tooltip:{enabled:!1},plotOptions:{bar:{barHeight:"100%",columnWidth:"30%",startingShape:"rounded",endingShape:"rounded",borderRadius:4,colors:{backgroundBarColors:[y.warning,y.warning,y.warning,y.warning,y.warning,y.warning,y.warning],backgroundBarRadius:4}}},colors:[y.warning],grid:{show:!1,padding:{top:-30,left:-16,bottom:0,right:-6}},dataLabels:{enabled:!1},legend:{show:!1},xaxis:{categories:["M","T","W","T","F","S","S"],axisBorder:{show:!1},axisTicks:{show:!1},labels:{show:!1}},yaxis:{labels:{show:!1}},responsive:[{breakpoint:1264,options:{plotOptions:{bar:{borderRadius:6,columnWidth:"30%",colors:{backgroundBarRadius:6}}}}}]}));return(m,l)=>{const i=H;return d(),S(F,null,{default:t(()=>[e(J,{class:"pb-3"},{default:t(()=>[e(K,null,{default:t(()=>l[0]||(l[0]=[w("Technical Requests")])),_:1,__:[0]}),e(Q,null,{default:t(()=>l[1]||(l[1]=[w("Last Week")])),_:1,__:[1]})]),_:1}),e(E,null,{default:t(()=>[e(i,{options:a(D),series:a(x),height:62},null,8,["options","series"]),a(k)?(d(),v("div",ve,[e(V,{type:"text",width:"60px",height:"32px"}),e(V,{type:"text",width:"40px"})])):a(h)?(d(),v("div",xe,p(a(h)),1)):(d(),v("div",ge,[s("h4",be,p(a(b).toLocaleString()),1),s("div",{class:P(["text-sm",a(f)>=0?"text-success":"text-error"])},p(a(f)>=0?"+":"")+p(a(f).toFixed(1))+"% ",3)]))]),_:1})]),_:1})}}}),we={class:"d-flex flex-column"},ke={key:0},Ve={key:1},Ce={key:2},$e={class:"text-h3 mb-2"},De={key:1,class:"d-flex align-center justify-center",style:{height:"162px",width:"162px"}},Ue={key:2,class:"d-flex align-center justify-center",style:{height:"162px",width:"162px"}},Se=B({__name:"AdminRevenueGrowth",setup(j){const k=ee(),h=c(!0),b=c(""),f=c(0),x=c(0),C=c([{data:[0,0,0,0,0,0,0]}]),y=async()=>{try{h.value=!0;const m=await R("/v1/admin/dashboard/chart-data");if(m.success&&m.data.revenue){const l=m.data.revenue.slice(-7),i=l.map(u=>u.revenue);C.value=[{data:i}];const _=i[i.length-1]||0,g=i[i.length-2]||0;f.value=l.reduce((u,$)=>u+$.revenue,0),g>0?x.value=(_-g)/g*100:x.value=_>0?100:0}}catch(m){console.error("Error fetching revenue chart data:",m),b.value="Failed to load chart data"}finally{h.value=!1}};q(()=>{y()});const D=Z(()=>{k.current.value.colors,k.current.value.variables;const m="rgba(var(--v-theme-on-background), var(--v-medium-emphasis-opacity))",l={success:"#56CA00"};return{chart:{height:162,type:"bar",parentHeightOffset:0,toolbar:{show:!1}},plotOptions:{bar:{barHeight:"80%",columnWidth:"30%",startingShape:"rounded",endingShape:"rounded",borderRadius:6,distributed:!0}},tooltip:{enabled:!1},grid:{show:!1,padding:{top:-20,bottom:-12,left:-10,right:0}},colors:[l.success,l.success,l.success,l.success,l.success,l.success,l.success],dataLabels:{enabled:!1},legend:{show:!1},xaxis:{categories:["M","T","W","T","F","S","S"],axisBorder:{show:!1},axisTicks:{show:!1},labels:{style:{colors:m,fontSize:"13px"}}},yaxis:{labels:{show:!1}},states:{hover:{filter:{type:"none"}}},responsive:[{breakpoint:1640,options:{plotOptions:{bar:{columnWidth:"40%",borderRadius:6}}}}]}});return(m,l)=>{const i=H;return d(),S(F,null,{default:t(()=>[e(E,{class:"d-flex justify-space-between"},{default:t(()=>[s("div",we,[l[2]||(l[2]=s("div",{class:"mb-auto"},[s("h5",{class:"text-h5 text-no-wrap mb-2"}," Revenue Growth "),s("div",{class:"text-body-1"}," Last 7 Months ")],-1)),a(h)?(d(),v("div",ke,[e(V,{type:"text",width:"100px",height:"32px",class:"mb-2"}),e(V,{type:"chip",width:"60px",height:"24px"})])):a(b)?(d(),v("div",Ve,[l[1]||(l[1]=s("h5",{class:"text-h3 mb-2 text-error"}," Error ",-1)),e(G,{label:"",color:"error",size:"small"},{default:t(()=>l[0]||(l[0]=[w(" Failed to load ")])),_:1,__:[0]})])):(d(),v("div",Ce,[s("h5",$e," SAR "+p(a(f).toLocaleString()),1),e(G,{label:"",color:a(x)>=0?"success":"error",size:"small"},{default:t(()=>[w(p(a(x)>=0?"+":"")+p(a(x).toFixed(1))+"% ",1)]),_:1},8,["color"])]))]),s("div",null,[!a(h)&&!a(b)?(d(),S(i,{key:0,options:a(D),series:a(C),height:162},null,8,["options","series"])):a(h)?(d(),v("div",De,[e(re,{indeterminate:"",color:"primary",size:"40"})])):(d(),v("div",Ue,[e(L,{icon:"tabler-alert-circle",color:"error",size:"40"})]))])]),_:1})]),_:1})}}}),Fe={key:0,class:"d-flex align-center justify-space-between gap-x-2"},Te={key:1,class:"text-center text-error text-sm"},Le={key:2,class:"d-flex align-center justify-space-between gap-x-2"},Re={class:"text-h4 text-center"},Ee=B({__name:"AdminUsersChart",setup(j){ee().current.value.colors;const h=c(!0),b=c(""),f=c(0),x=c(0),C=c([{name:"Users",data:[0,0,0,0,0,0,0]}]),y=async()=>{try{h.value=!0;const l=await R("/v1/admin/dashboard/chart-data");if(l.success&&l.data.users){const i=l.data.users.slice(-7),_=i.map($=>$.users);C.value=[{name:"Users",data:_}];const g=_[_.length-1]||0,u=_[_.length-2]||0;f.value=i.reduce(($,O)=>$+O.users,0),u>0?x.value=(g-u)/u*100:x.value=g>0?100:0}}catch(l){console.error("Error fetching chart data:",l),b.value="Failed to load chart data"}finally{h.value=!1}};q(()=>{y()});const m={chart:{type:"area",parentHeightOffset:0,toolbar:{show:!1},sparkline:{enabled:!0}},markers:{colors:"transparent",strokeColors:"transparent"},grid:{show:!1},colors:[{primary:"#9155FD"}.primary],fill:{type:"gradient",gradient:{shadeIntensity:.9,opacityFrom:.5,opacityTo:.07,stops:[0,80,100]}},dataLabels:{enabled:!1},stroke:{width:2,curve:"smooth"},xaxis:{show:!0,lines:{show:!1},labels:{show:!1},stroke:{width:0},axisBorder:{show:!1}},yaxis:{stroke:{width:0},show:!1},tooltip:{enabled:!1}};return(l,i)=>{const _=H;return d(),S(F,null,{default:t(()=>[e(J,{class:"pb-3"},{default:t(()=>[e(K,null,{default:t(()=>i[0]||(i[0]=[w(" Total Users ")])),_:1,__:[0]}),e(Q,null,{default:t(()=>i[1]||(i[1]=[w(" Last 7 Days ")])),_:1,__:[1]})]),_:1}),e(_,{options:m,series:a(C),height:68},null,8,["series"]),e(E,{class:"pt-1"},{default:t(()=>[a(h)?(d(),v("div",Fe,[e(V,{type:"text",width:"60px",height:"32px"}),e(V,{type:"text",width:"40px"})])):a(b)?(d(),v("div",Te,p(a(b)),1)):(d(),v("div",Le,[s("h4",Re,p(a(f).toLocaleString()),1),s("span",{class:P(["text-sm",a(x)>=0?"text-success":"text-error"])},p(a(x)>=0?"+":"")+p(a(x).toFixed(1))+"% ",3)]))]),_:1})]),_:1})}}}),Oe={class:"d-flex justify-space-between"},ze={class:"d-flex flex-column gap-y-1"},Ae={class:"d-flex justify-space-between"},Be={class:"d-flex flex-column gap-y-1"},qe={class:"text-body-1 text-high-emphasis"},je={class:"d-flex gap-x-2 align-center"},Me={class:"text-h4"},Ie={class:"text-sm"},We={class:"d-flex align-center gap-x-4"},Ne={key:1},Ge={class:"d-flex flex-column"},He={class:"text-base font-weight-medium"},Pe={class:"text-sm text-medium-emphasis"},Je={class:"d-flex align-center gap-x-2"},Ke={class:"text-capitalize text-high-emphasis text-body-1"},Qe={class:"text-body-1"},Xe={class:"d-flex gap-1"},Gt=B({__name:"dashboard",setup(j){const k=c([]),h=c([]),b=c(!0),f=c(""),x=async()=>{try{const o=await R("/v1/admin/dashboard/stats");o.success&&(k.value=o.data)}catch(o){console.error("Error fetching stats:",o),f.value="Failed to load dashboard statistics"}},C=async()=>{try{const o=await R("/v1/admin/dashboard/recent-users");o.success&&(h.value=o.data)}catch(o){console.error("Error fetching recent users:",o),f.value="Failed to load recent users"}},y=async()=>{b.value=!0,f.value="";try{await Promise.all([x(),C()])}catch(o){console.error("Error loading dashboard data:",o),f.value="Failed to load dashboard data"}finally{b.value=!1}};q(()=>{y()});const D=o=>{const r=o.toLowerCase();return r==="franchisor"?{color:"success",icon:"tabler-building-store"}:r==="franchisee"?{color:"info",icon:"tabler-user-check"}:r==="sales"?{color:"warning",icon:"tabler-chart-line"}:{color:"primary",icon:"tabler-user"}},m=o=>{const r=o.toLowerCase();return r==="pending"?"warning":r==="active"?"success":r==="inactive"?"secondary":"primary"},l=c(!1),i=c(!1),_=c(!1),g=c(!1),u=c(null),$=o=>{u.value=o,l.value=!0},O=o=>{u.value={...o},o.role==="franchisor"?i.value=!0:o.role==="franchisee"?_.value=!0:o.role==="sales"&&(g.value=!0)},te=()=>{u.value&&O(u.value)},M=o=>{const r=h.value.findIndex(z=>z.id===o.id);r!==-1&&(h.value[r]={...h.value[r],...o}),u.value=null},se=o=>o==="franchisor"?"Franchisor":o==="franchisee"?"Franchisee":o==="sales"?"Sales User":"User",ae=o=>o>0?`+${o}`:o.toString(),oe=o=>!o||typeof o!="string"?"U":o.split(" ").map(r=>r.charAt(0)).join("").toUpperCase();return(o,r)=>{const z=le("IconBtn");return d(),v("section",null,[e(T,{class:"mb-6"},{default:t(()=>[e(U,{cols:"12"},{default:t(()=>r[5]||(r[5]=[s("div",{class:"d-flex align-center justify-space-between"},[s("div",null,[s("h2",{class:"text-h2 mb-1"}," Admin Dashboard "),s("p",{class:"text-body-1 text-medium-emphasis"}," Welcome back! Here's what's happening with your platform today. ")])],-1)])),_:1,__:[5]})]),_:1}),a(f)?(d(),S(T,{key:0,class:"mb-6"},{default:t(()=>[e(U,{cols:"12"},{default:t(()=>[e(he,{type:"error",variant:"tonal",closable:"","onClick:close":r[0]||(r[0]=n=>f.value="")},{default:t(()=>[w(p(a(f)),1)]),_:1})]),_:1})]),_:1})):ne("",!0),e(T,{class:"mb-6"},{default:t(()=>[a(b)?(d(),v(W,{key:0},N(4,n=>e(U,{key:n,cols:"12",md:"3",sm:"6"},{default:t(()=>[e(F,null,{default:t(()=>[e(E,null,{default:t(()=>[s("div",Oe,[s("div",ze,[e(V,{type:"text",width:"80px"}),e(V,{type:"text",width:"60px",height:"32px"}),e(V,{type:"text",width:"120px"})]),e(V,{type:"avatar",size:"42"})])]),_:1})]),_:1})]),_:2},1024)),64)):(d(!0),v(W,{key:1},N(a(k),(n,I)=>(d(),S(U,{key:I,cols:"12",md:"3",sm:"6"},{default:t(()=>[e(F,null,{default:t(()=>[e(E,null,{default:t(()=>[s("div",Ae,[s("div",Be,[s("div",qe,p(n.title),1),s("div",je,[s("h4",Me,p(n.value),1),s("div",{class:P(["text-base",n.change>0?"text-success":"text-error"])}," ("+p(ae(n.change))+"%) ",3)]),s("div",Ie,p(n.desc),1)]),e(X,{color:n.iconColor,variant:"tonal",rounded:"",size:"42"},{default:t(()=>[e(L,{icon:n.icon,size:"26"},null,8,["icon"])]),_:2},1032,["color"])])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),e(T,{class:"mb-6"},{default:t(()=>[e(U,{cols:"12",md:"4"},{default:t(()=>[e(Ee)]),_:1}),e(U,{cols:"12",md:"4"},{default:t(()=>[e(Se)]),_:1}),e(U,{cols:"12",md:"4"},{default:t(()=>[e(ye)]),_:1})]),_:1}),e(T,null,{default:t(()=>[e(U,{cols:"12"},{default:t(()=>[e(F,null,{default:t(()=>[e(J,{class:"pb-4"},{append:t(()=>[e(ie,{variant:"outlined",color:"primary",size:"small",to:{name:"admin-users-franchisors"}},{default:t(()=>r[8]||(r[8]=[w(" View All ")])),_:1,__:[8]})]),default:t(()=>[e(K,null,{default:t(()=>r[6]||(r[6]=[w("Recent Users")])),_:1,__:[6]}),e(Q,null,{default:t(()=>r[7]||(r[7]=[w("Latest registered users")])),_:1,__:[7]})]),_:1}),e(fe),e(me,{class:"text-no-wrap"},{default:t(()=>[r[11]||(r[11]=s("thead",null,[s("tr",null,[s("th",{scope:"col"}," USER "),s("th",{scope:"col"}," ROLE "),s("th",{scope:"col"}," STATUS "),s("th",{scope:"col"}," JOINED DATE "),s("th",{scope:"col"}," ACTIONS ")])],-1)),s("tbody",null,[(d(!0),v(W,null,N(a(h),n=>(d(),v("tr",{key:n.id},[s("td",null,[s("div",We,[e(X,{size:"34",variant:n.avatar?void 0:"tonal",color:n.avatar?void 0:D(n.role).color},{default:t(()=>[n.avatar?(d(),S(_e,{key:0,src:n.avatar},null,8,["src"])):(d(),v("span",Ne,p(oe(n.fullName)),1))]),_:2},1032,["variant","color"]),s("div",Ge,[s("h6",He,p(n.fullName),1),s("div",Pe,p(n.email),1)])])]),s("td",null,[s("div",Je,[e(L,{size:22,icon:D(n.role).icon,color:D(n.role).color},null,8,["icon","color"]),s("div",Ke,p(n.role),1)])]),s("td",null,[e(G,{color:m(n.status),size:"small",label:"",class:"text-capitalize"},{default:t(()=>[w(p(n.status),1)]),_:2},1032,["color"])]),s("td",null,[s("div",Qe,p(n.joinedDate),1)]),s("td",null,[s("div",Xe,[e(z,{size:"small",onClick:I=>$(n)},{default:t(()=>[e(L,{icon:"tabler-eye"}),e(Y,{activator:"parent",location:"top"},{default:t(()=>r[9]||(r[9]=[w(" View ")])),_:1,__:[9]})]),_:2},1032,["onClick"]),e(z,{size:"small",onClick:I=>O(n)},{default:t(()=>[e(L,{icon:"tabler-edit"}),e(Y,{activator:"parent",location:"top"},{default:t(()=>r[10]||(r[10]=[w(" Edit ")])),_:1,__:[10]})]),_:2},1032,["onClick"])])])]))),128))])]),_:1,__:[11]})]),_:1})]),_:1})]),_:1}),e(pe,{"is-dialog-open":a(l),"onUpdate:isDialogOpen":r[1]||(r[1]=n=>A(l)?l.value=n:null),user:a(u),"user-type":a(u)?se(a(u).role):"User",onEdit:te},null,8,["is-dialog-open","user","user-type"]),e(de,{"is-drawer-open":a(i),"onUpdate:isDrawerOpen":r[2]||(r[2]=n=>A(i)?i.value=n:null),franchisor:a(u),onFranchisorData:M},null,8,["is-drawer-open","franchisor"]),e(ce,{"is-drawer-open":a(_),"onUpdate:isDrawerOpen":r[3]||(r[3]=n=>A(_)?_.value=n:null),franchisee:a(u),onFranchiseeData:M},null,8,["is-drawer-open","franchisee"]),e(ue,{"is-drawer-open":a(g),"onUpdate:isDrawerOpen":r[4]||(r[4]=n=>A(g)?g.value=n:null),"sales-user":a(u),onSalesUserData:M},null,8,["is-drawer-open","sales-user"])])}}});export{Gt as default};
