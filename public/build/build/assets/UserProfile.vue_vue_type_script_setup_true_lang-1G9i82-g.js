import{C as L}from"./vue3-perfect-scrollbar-D-9SOPqH.js";import{L as P,M as A,N as B,b as o,b9 as C,a1 as w,ba as N,d as S,j as T,b2 as d,g as l,l as z,m as e,o as s,f as a,ax as m,e as i,v as p,t as f,c as _,F as g,i as D,bb as F,q as R,a9 as M,b5 as U}from"./main-ZX0RELSf.js";import{V}from"./VAvatar-Dwbi0l9K.js";import{V as k}from"./VImg-BhWA0TmX.js";import{V as $}from"./VMenu-CFk79Z2P.js";import{V as j,a as h,d as q,b as E}from"./VList-lm2yDhsx.js";import{V as v}from"./VBadge-BbQV6JLc.js";import{V as O}from"./VDivider-DRORfMXN.js";const G=A({start:Boolean,end:Boolean,...w(),...C()},"VListItemAction"),H=P()({name:"VListItemAction",props:G(),setup(n,c){let{slots:u}=c;return B(()=>o(n.tag,{class:["v-list-item-action",{"v-list-item-action--start":n.start,"v-list-item-action--end":n.end},n.class],style:n.style},u)),{}}}),J=()=>N(),K={class:"d-flex gap-2 align-center"},Q={class:"text-h6 font-weight-medium"},W={class:"px-4 py-2"},rt=S({__name:"UserProfile",setup(n){const c=T(),u=J(),t=d("userData"),x=async()=>{try{await U("/auth/logout",{method:"POST"})}catch(y){console.error("Logout API error:",y)}finally{d("accessToken").value=null,t.value=null,d("userAbilityRules").value=null,u.update([]),await c.push("/login")}},I=[{type:"divider"},{type:"navItem",icon:"tabler-user",title:"Profile",to:{name:"account-settings-tab",params:{tab:"account"}}},{type:"navItem",icon:"tabler-settings",title:"Settings",to:{name:"account-settings-tab",params:{tab:"security"}}},{type:"divider"}];return(y,b)=>e(t)?(s(),l(v,{key:0,dot:"",bordered:"",location:"bottom right","offset-x":"1","offset-y":"2",color:"success"},{default:a(()=>[o(V,{size:"38",class:"cursor-pointer",color:e(t)&&e(t).avatar?void 0:"primary",variant:e(t)&&e(t).avatar?void 0:"tonal"},{default:a(()=>[e(t)&&e(t).avatar?(s(),l(k,{key:0,src:e(t).avatar},null,8,["src"])):(s(),l(m,{key:1,icon:"tabler-user"})),o($,{activator:"parent",width:"240",location:"bottom end",offset:"12px"},{default:a(()=>[o(j,null,{default:a(()=>[o(h,null,{default:a(()=>[i("div",K,[o(H,null,{default:a(()=>[o(v,{dot:"",location:"bottom right","offset-x":"3","offset-y":"3",color:"success",bordered:""},{default:a(()=>[o(V,{color:e(t)&&e(t).avatar?void 0:"primary",variant:e(t)&&e(t).avatar?void 0:"tonal"},{default:a(()=>[e(t)&&e(t).avatar?(s(),l(k,{key:0,src:e(t).avatar},null,8,["src"])):(s(),l(m,{key:1,icon:"tabler-user"}))]),_:1},8,["color","variant"])]),_:1})]),_:1}),i("div",null,[i("h6",Q,p(e(t).fullName||e(t).name||e(t).username||"User"),1),o(q,{class:"text-capitalize text-disabled"},{default:a(()=>[f(p(e(t).role),1)]),_:1})])])]),_:1}),o(e(L),{options:{wheelPropagation:!1}},{default:a(()=>[(s(),_(g,null,D(I,r=>(s(),_(g,{key:r.title},[r.type==="navItem"?(s(),l(h,{key:0,to:r.to},F({prepend:a(()=>[o(m,{icon:r.icon,size:"22"},null,8,["icon"])]),default:a(()=>[o(E,null,{default:a(()=>[f(p(r.title),1)]),_:2},1024)]),_:2},[r.badgeProps?{name:"append",fn:a(()=>[o(v,R({rounded:"sm",class:"me-3",ref_for:!0},r.badgeProps),null,16)]),key:"0"}:void 0]),1032,["to"])):(s(),l(O,{key:1,class:"my-2"}))],64))),64)),i("div",W,[o(M,{block:"",size:"small",color:"error","append-icon":"tabler-logout",onClick:x},{default:a(()=>b[0]||(b[0]=[f(" Logout ")])),_:1,__:[0]})])]),_:1})]),_:1})]),_:1})]),_:1},8,["color","variant"])]),_:1})):z("",!0)}});export{rt as _};
