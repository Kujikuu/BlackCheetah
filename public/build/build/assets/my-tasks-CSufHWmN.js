import{_ as F,t as C}from"./StatusChangeTaskDialog.vue_vue_type_script_setup_true_lang-C5AietOg.js";import{_ as G}from"./ViewTaskDialog.vue_vue_type_script_setup_true_lang-DR7wBnkT.js";import{d as H,r as n,P as V,G as q,c as J,b as t,g as K,l as O,f as s,m as i,aR as h,j as Q,o as z,e as o,ax as d,v as r,t as u,a9 as W}from"./main-gemCwVks.js";import{V as w,a as k}from"./VRow-DiX7eN30.js";import{V as X}from"./VAlert-RufLsxZw.js";import{V as v,a as Y,b as Z}from"./VCard-DJ82mpnW.js";import{V as g}from"./VCardText-BD5AHO-w.js";import{V as x}from"./VAvatar-12xz6mHy.js";import{V as tt}from"./VDivider-B4ry9pxl.js";import{V as st}from"./VDataTable-C-SlKz4P.js";import{V as et}from"./VMenu-CeaiRCNz.js";import{V as at,a as D,b as I}from"./VList-MyW-iB3v.js";import{V as S}from"./VChip-DlNApjyg.js";import"./VDialog-6C-NQXCx.js";import"./VOverlay-p8m6-W96.js";import"./forwardRefs--KQCZfKO.js";import"./scopeId-BgtgI3QF.js";import"./VImg-DSB6m92Q.js";import"./dialog-transition-C9rYmnXC.js";import"./VSelect-C9dxRhag.js";import"./VTextField-BhxF6EAD.js";import"./VField-CsHfcJSz.js";import"./form-DjHlhIbZ.js";import"./VInput-B3GinL-f.js";import"./VCheckboxBtn-ZAK0D-Rf.js";import"./VSelectionControl-COVpGwiX.js";import"./VSpacer-Cpeayo2U.js";/* empty css              */import"./VTable-0Z68chLt.js";import"./VSlideGroup-CEWgOBQJ.js";const lt={class:"ms-4"},ot={class:"text-h4"},it={class:"ms-4"},rt={class:"text-h4"},nt={class:"ms-4"},dt={class:"text-h4"},ut={class:"ms-4"},ct={class:"text-h4"},mt={class:"text-base font-weight-medium"},ft={class:"text-body-2 text-disabled"},qt=H({__name:"my-tasks",setup(pt){Q();const _=n(!1),c=n(!1),m=n(null),b=n([]),f=n({totalTasks:0,completedTasks:0,inProgressTasks:0,dueTasks:0}),y=n(!1),p=n(null),P=V(()=>f.value.totalTasks),M=V(()=>f.value.completedTasks),R=V(()=>f.value.inProgressTasks),B=V(()=>f.value.dueTasks),T=async()=>{try{y.value=!0,p.value=null;const[a,e]=await Promise.all([C.getMyTasks(),C.getStatistics()]);a.success&&(b.value=a.data),e.success&&(f.value=e.data)}catch(a){console.error("Error fetching tasks:",a),p.value=a.message||"Failed to load tasks"}finally{y.value=!1}};q(()=>{T()});const $=a=>a==="completed"?"success":a==="in_progress"?"warning":a==="pending"?"info":"secondary",A=a=>a==="high"?"error":a==="medium"?"warning":a==="low"?"info":"secondary",L=[{title:"Task Info",key:"taskInfo"},{title:"Category",key:"category"},{title:"Start Date",key:"startDate"},{title:"Due Date",key:"dueDate"},{title:"Priority",key:"priority"},{title:"Status",key:"status"},{title:"Actions",key:"actions",sortable:!1}],N=a=>{m.value=a,_.value=!0},U=a=>{m.value={...a},c.value=!0},E=a=>{const e=b.value.findIndex(l=>l.id===a.id);e!==-1&&(b.value[e]=a),T(),c.value=!1,m.value=null};return(a,e)=>(z(),J("section",null,[t(w,{class:"mb-6"},{default:s(()=>[t(k,{cols:"12"},{default:s(()=>e[3]||(e[3]=[o("div",null,[o("h2",{class:"text-h2 mb-1"}," My Tasks "),o("p",{class:"text-body-1 text-medium-emphasis"}," Track and manage tasks assigned to you ")],-1)])),_:1,__:[3]})]),_:1}),t(w,{class:"mb-6"},{default:s(()=>[t(k,{cols:"12",md:"3"},{default:s(()=>[t(v,null,{default:s(()=>[t(g,{class:"d-flex align-center"},{default:s(()=>[t(x,{size:"44",rounded:"",color:"primary",variant:"tonal"},{default:s(()=>[t(d,{icon:"tabler-checklist",size:"26"})]),_:1}),o("div",lt,[e[4]||(e[4]=o("div",{class:"text-body-2 text-disabled"}," Total Tasks ",-1)),o("h4",ot,r(i(P)),1)])]),_:1})]),_:1})]),_:1}),t(k,{cols:"12",md:"3"},{default:s(()=>[t(v,null,{default:s(()=>[t(g,{class:"d-flex align-center"},{default:s(()=>[t(x,{size:"44",rounded:"",color:"success",variant:"tonal"},{default:s(()=>[t(d,{icon:"tabler-check",size:"26"})]),_:1}),o("div",it,[e[5]||(e[5]=o("div",{class:"text-body-2 text-disabled"}," Completed ",-1)),o("h4",rt,r(i(M)),1)])]),_:1})]),_:1})]),_:1}),t(k,{cols:"12",md:"3"},{default:s(()=>[t(v,null,{default:s(()=>[t(g,{class:"d-flex align-center"},{default:s(()=>[t(x,{size:"44",rounded:"",color:"warning",variant:"tonal"},{default:s(()=>[t(d,{icon:"tabler-clock",size:"26"})]),_:1}),o("div",nt,[e[6]||(e[6]=o("div",{class:"text-body-2 text-disabled"}," In Progress ",-1)),o("h4",dt,r(i(R)),1)])]),_:1})]),_:1})]),_:1}),t(k,{cols:"12",md:"3"},{default:s(()=>[t(v,null,{default:s(()=>[t(g,{class:"d-flex align-center"},{default:s(()=>[t(x,{size:"44",rounded:"",color:"error",variant:"tonal"},{default:s(()=>[t(d,{icon:"tabler-alert-circle",size:"26"})]),_:1}),o("div",ut,[e[7]||(e[7]=o("div",{class:"text-body-2 text-disabled"}," Due ",-1)),o("h4",ct,r(i(B)),1)])]),_:1})]),_:1})]),_:1})]),_:1}),i(p)?(z(),K(X,{key:0,type:"error",variant:"tonal",closable:"",class:"mb-6","onClick:close":e[0]||(e[0]=l=>p.value=null)},{default:s(()=>[u(r(i(p)),1)]),_:1})):O("",!0),t(v,null,{default:s(()=>[t(Y,{class:"pb-4"},{default:s(()=>[t(Z,null,{default:s(()=>e[8]||(e[8]=[u("My Tasks")])),_:1,__:[8]})]),_:1}),t(tt),t(st,{items:i(b),headers:L,loading:i(y),class:"text-no-wrap","item-value":"id"},{"item.taskInfo":s(({item:l})=>[o("div",null,[o("h6",mt,r(l.title),1),o("div",ft,r(l.description),1)])]),"item.priority":s(({item:l})=>[t(S,{color:A(l.priority),size:"small",label:"",class:"text-capitalize"},{default:s(()=>[u(r(l.priority),1)]),_:2},1032,["color"])]),"item.status":s(({item:l})=>[t(S,{color:$(l.status),size:"small",label:"",class:"text-capitalize"},{default:s(()=>[u(r(l.status),1)]),_:2},1032,["color"])]),"item.actions":s(({item:l})=>[t(W,{icon:"",variant:"text",color:"medium-emphasis",size:"small"},{default:s(()=>[t(d,{icon:"tabler-dots-vertical"}),t(et,{activator:"parent"},{default:s(()=>[t(at,null,{default:s(()=>[t(D,{onClick:j=>N(l)},{prepend:s(()=>[t(d,{icon:"tabler-eye"})]),default:s(()=>[t(I,null,{default:s(()=>e[9]||(e[9]=[u("View")])),_:1,__:[9]})]),_:2},1032,["onClick"]),t(D,{onClick:j=>U(l)},{prepend:s(()=>[t(d,{icon:"tabler-refresh"})]),default:s(()=>[t(I,null,{default:s(()=>e[10]||(e[10]=[u("Change Status")])),_:1,__:[10]})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["items","loading"])]),_:1}),t(G,{"is-dialog-visible":i(_),"onUpdate:isDialogVisible":e[1]||(e[1]=l=>h(_)?_.value=l:null),task:i(m)},null,8,["is-dialog-visible","task"]),t(F,{"is-dialog-visible":i(c),"onUpdate:isDialogVisible":e[2]||(e[2]=l=>h(c)?c.value=l:null),task:i(m),onStatusUpdated:E},null,8,["is-dialog-visible","task"])]))}});export{qt as default};
