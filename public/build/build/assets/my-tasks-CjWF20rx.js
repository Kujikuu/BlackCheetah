import{f as I}from"./franchisee-dashboard-DWdYft-w.js";import{d as K,r as b,G as Q,P as V,c as W,b as t,f as e,au as M,m as o,j as X,o as T,e as a,aa as c,v as d,t as n,a3 as D,g as P,l as B}from"./main-D1fyEajF.js";import{V as h,a as u}from"./VRow-Bcs3kVTZ.js";import{V as f,a as Y,b as w,d as N}from"./VCard-1LLKrENU.js";import{V as A}from"./VDialog-bW95kt9i.js";import{V as _}from"./VCardText-CBbEpO-S.js";import{V as k}from"./VAvatar-ecTgImbX.js";import{V as x}from"./VDivider-DdY94hA9.js";import{q as Z}from"./VDataTable-CcnCf89h.js";import{V as tt}from"./VMenu-TAYxhMnW.js";import{V as et,a as L,b as $}from"./VList-CsUSD2is.js";import{V as y}from"./VChip-BTX0QEl9.js";import{V as E}from"./VSpacer-hubulHsa.js";import{V as st}from"./VSelect-Ds26Pc33.js";/* empty css              */import"./VImg-CX1yCZ5B.js";import"./VOverlay-Df-Y_mZo.js";import"./easing-Bybner-F.js";import"./lazy-xg_CVELJ.js";import"./scopeId-BxkdZ-Wh.js";import"./forwardRefs-C-GTDzx5.js";import"./dialog-transition-DGEZA_Vw.js";import"./VPagination-BAzVtBCk.js";import"./VCheckboxBtn-D82KFSVD.js";import"./VSelectionControl-BFoKADBy.js";import"./form-DL6xjoYm.js";import"./VTable-CTjtGCXA.js";import"./filter-SVfiIaX7.js";import"./ssrBoot-B1nVHPGZ.js";import"./VSlideGroup-CrEtt6po.js";import"./VTextField-BLAytSxV.js";/* empty css                   */import"./VCounter-QrdsizNe.js";import"./VField-CeM4dkxm.js";import"./VInput-D8aen6Ef.js";const at={class:"ms-4"},lt={class:"text-h4"},ot={class:"ms-4"},it={class:"text-h4"},rt={class:"ms-4"},dt={class:"text-h4"},nt={class:"ms-4"},ut={class:"text-h4"},mt={class:"text-base font-weight-medium"},ct={class:"text-body-2 text-disabled"},ft={class:"text-h6 mb-2"},pt={class:"text-body-1 mb-4"},_t={class:"text-body-1"},vt={class:"text-body-1"},bt={class:"text-body-1"},xt={class:"mb-4"},yt={class:"text-base font-weight-medium mb-2"},Vt={class:"text-body-2 text-disabled"},ae=K({__name:"my-tasks",setup(kt){X();const v=b(!1),p=b(!1),i=b(null),m=b([]),z=b(!1);Q(async()=>{await R()});const R=async()=>{try{z.value=!0;const l=await I.getMyTasks();l.success&&(m.value=l.data)}catch(l){console.error("Error loading tasks:",l)}finally{z.value=!1}},U=V(()=>m.value.length),q=V(()=>m.value.filter(l=>l.status==="completed").length),H=V(()=>m.value.filter(l=>l.status==="in_progress").length),j=V(()=>{const l=new Date;return m.value.filter(s=>new Date(s.dueDate)<=l&&!["completed","cancelled"].includes(s.status)).length}),g=l=>l==="completed"?"success":l==="in_progress"?"warning":l==="pending"?"info":l==="cancelled"?"error":"secondary",S=l=>l==="high"?"error":l==="medium"?"warning":l==="low"?"info":"secondary",G=[{title:"Task Info",key:"taskInfo"},{title:"Category",key:"category"},{title:"Start Date",key:"startDate"},{title:"Due Date",key:"dueDate"},{title:"Priority",key:"priority"},{title:"Status",key:"status"},{title:"Actions",key:"actions",sortable:!1}],O=l=>{i.value=l,v.value=!0},F=l=>{i.value={...l},p.value=!0},J=async l=>{if(i.value)try{if((await I.updateMyTaskStatus(i.value.id,l)).success){const r=m.value.findIndex(C=>C.id===i.value.id);r!==-1&&(m.value[r].status=l),p.value=!1,i.value=null}}catch(s){console.error("Error updating task status:",s)}};return(l,s)=>(T(),W("section",null,[t(h,{class:"mb-6"},{default:e(()=>[t(u,{cols:"12"},{default:e(()=>s[4]||(s[4]=[a("div",null,[a("h2",{class:"text-h2 mb-1"}," My Tasks "),a("p",{class:"text-body-1 text-medium-emphasis"}," Track and manage tasks assigned to you ")],-1)])),_:1,__:[4]})]),_:1}),t(h,{class:"mb-6"},{default:e(()=>[t(u,{cols:"12",md:"3"},{default:e(()=>[t(f,null,{default:e(()=>[t(_,{class:"d-flex align-center"},{default:e(()=>[t(k,{size:"44",rounded:"",color:"primary",variant:"tonal"},{default:e(()=>[t(c,{icon:"tabler-checklist",size:"26"})]),_:1}),a("div",at,[s[5]||(s[5]=a("div",{class:"text-body-2 text-disabled"}," Total Tasks ",-1)),a("h4",lt,d(o(U)),1)])]),_:1})]),_:1})]),_:1}),t(u,{cols:"12",md:"3"},{default:e(()=>[t(f,null,{default:e(()=>[t(_,{class:"d-flex align-center"},{default:e(()=>[t(k,{size:"44",rounded:"",color:"success",variant:"tonal"},{default:e(()=>[t(c,{icon:"tabler-check",size:"26"})]),_:1}),a("div",ot,[s[6]||(s[6]=a("div",{class:"text-body-2 text-disabled"}," Completed ",-1)),a("h4",it,d(o(q)),1)])]),_:1})]),_:1})]),_:1}),t(u,{cols:"12",md:"3"},{default:e(()=>[t(f,null,{default:e(()=>[t(_,{class:"d-flex align-center"},{default:e(()=>[t(k,{size:"44",rounded:"",color:"warning",variant:"tonal"},{default:e(()=>[t(c,{icon:"tabler-clock",size:"26"})]),_:1}),a("div",rt,[s[7]||(s[7]=a("div",{class:"text-body-2 text-disabled"}," In Progress ",-1)),a("h4",dt,d(o(H)),1)])]),_:1})]),_:1})]),_:1}),t(u,{cols:"12",md:"3"},{default:e(()=>[t(f,null,{default:e(()=>[t(_,{class:"d-flex align-center"},{default:e(()=>[t(k,{size:"44",rounded:"",color:"error",variant:"tonal"},{default:e(()=>[t(c,{icon:"tabler-alert-circle",size:"26"})]),_:1}),a("div",nt,[s[8]||(s[8]=a("div",{class:"text-body-2 text-disabled"}," Due ",-1)),a("h4",ut,d(o(j)),1)])]),_:1})]),_:1})]),_:1})]),_:1}),t(f,null,{default:e(()=>[t(Y,{class:"pb-4"},{default:e(()=>[t(w,null,{default:e(()=>s[9]||(s[9]=[n("My Tasks")])),_:1,__:[9]})]),_:1}),t(x),t(Z,{items:o(m),headers:G,class:"text-no-wrap","item-value":"id"},{"item.taskInfo":e(({item:r})=>[a("div",null,[a("h6",mt,d(r.title),1),a("div",ct,d(r.description),1)])]),"item.priority":e(({item:r})=>[t(y,{color:S(r.priority),size:"small",label:"",class:"text-capitalize"},{default:e(()=>[n(d(r.priority),1)]),_:2},1032,["color"])]),"item.status":e(({item:r})=>[t(y,{color:g(r.status),size:"small",label:"",class:"text-capitalize"},{default:e(()=>[n(d(r.status),1)]),_:2},1032,["color"])]),"item.actions":e(({item:r})=>[t(D,{icon:"",variant:"text",color:"medium-emphasis",size:"small"},{default:e(()=>[t(c,{icon:"tabler-dots-vertical"}),t(tt,{activator:"parent"},{default:e(()=>[t(et,null,{default:e(()=>[t(L,{onClick:C=>O(r)},{prepend:e(()=>[t(c,{icon:"tabler-eye"})]),default:e(()=>[t($,null,{default:e(()=>s[10]||(s[10]=[n("View")])),_:1,__:[10]})]),_:2},1032,["onClick"]),t(L,{onClick:C=>F(r)},{prepend:e(()=>[t(c,{icon:"tabler-refresh"})]),default:e(()=>[t($,null,{default:e(()=>s[11]||(s[11]=[n("Change Status")])),_:1,__:[11]})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["items"])]),_:1}),t(A,{modelValue:o(v),"onUpdate:modelValue":s[1]||(s[1]=r=>M(v)?v.value=r:null),"max-width":"600"},{default:e(()=>[t(f,null,{default:e(()=>[t(w,{class:"text-h5 pa-6 pb-4"},{default:e(()=>s[12]||(s[12]=[n(" Task Details ")])),_:1,__:[12]}),t(x),o(i)?(T(),P(_,{key:0,class:"pa-6"},{default:e(()=>[t(h,null,{default:e(()=>[t(u,{cols:"12"},{default:e(()=>[a("h6",ft,d(o(i).title),1),a("p",pt,d(o(i).description),1)]),_:1}),t(u,{cols:"12",md:"6"},{default:e(()=>[s[13]||(s[13]=a("div",{class:"text-body-2 text-disabled mb-1"}," Category ",-1)),a("div",_t,d(o(i).category),1)]),_:1,__:[13]}),t(u,{cols:"12",md:"6"},{default:e(()=>[s[14]||(s[14]=a("div",{class:"text-body-2 text-disabled mb-1"}," Start Date ",-1)),a("div",vt,d(o(i).startDate),1)]),_:1,__:[14]}),t(u,{cols:"12",md:"6"},{default:e(()=>[s[15]||(s[15]=a("div",{class:"text-body-2 text-disabled mb-1"}," Due Date ",-1)),a("div",bt,d(o(i).dueDate),1)]),_:1,__:[15]}),t(u,{cols:"12",md:"6"},{default:e(()=>[s[16]||(s[16]=a("div",{class:"text-body-2 text-disabled mb-1"}," Priority ",-1)),t(y,{color:S(o(i).priority),size:"small",label:"",class:"text-capitalize"},{default:e(()=>[n(d(o(i).priority),1)]),_:1},8,["color"])]),_:1,__:[16]}),t(u,{cols:"12",md:"6"},{default:e(()=>[s[17]||(s[17]=a("div",{class:"text-body-2 text-disabled mb-1"}," Status ",-1)),t(y,{color:g(o(i).status),size:"small",label:"",class:"text-capitalize"},{default:e(()=>[n(d(o(i).status),1)]),_:1},8,["color"])]),_:1,__:[17]})]),_:1})]),_:1})):B("",!0),t(x),t(N,{class:"pa-6"},{default:e(()=>[t(E),t(D,{color:"secondary",variant:"tonal",onClick:s[0]||(s[0]=r=>v.value=!1)},{default:e(()=>s[18]||(s[18]=[n(" Close ")])),_:1,__:[18]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(A,{modelValue:o(p),"onUpdate:modelValue":s[3]||(s[3]=r=>M(p)?p.value=r:null),"max-width":"400"},{default:e(()=>[t(f,null,{default:e(()=>[t(w,{class:"text-h5 pa-6 pb-4"},{default:e(()=>s[19]||(s[19]=[n(" Change Task Status ")])),_:1,__:[19]}),t(x),o(i)?(T(),P(_,{key:0,class:"pa-6"},{default:e(()=>[a("div",xt,[a("h6",yt,d(o(i).title),1),a("div",Vt,[s[20]||(s[20]=n(" Current Status: ")),t(y,{color:g(o(i).status),size:"small",label:"",class:"text-capitalize ml-2"},{default:e(()=>[n(d(o(i).status),1)]),_:1},8,["color"])])]),t(st,{label:"New Status",items:[{title:"Pending",value:"pending"},{title:"In Progress",value:"in_progress"},{title:"Completed",value:"completed"},{title:"Cancelled",value:"cancelled"},{title:"On Hold",value:"on_hold"}],"model-value":o(i).status,required:"","onUpdate:modelValue":J},null,8,["model-value"])]),_:1})):B("",!0),t(x),t(N,{class:"pa-6"},{default:e(()=>[t(E),t(D,{color:"secondary",variant:"tonal",onClick:s[2]||(s[2]=r=>p.value=!1)},{default:e(()=>s[21]||(s[21]=[n(" Cancel ")])),_:1,__:[21]})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}});export{ae as default};
