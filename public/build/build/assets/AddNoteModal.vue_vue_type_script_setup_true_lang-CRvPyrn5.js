import{_ as y}from"./AppTextarea.vue_vue_type_script_setup_true_lang-nRgD-ubi.js";import{_ as T}from"./AppTextField.vue_vue_type_script_setup_true_lang-DNHIefB9.js";import{d as F,r as p,P as N,g as h,f as a,aR as u,m,b as o,t as f,b3 as S,a9 as v,b5 as U,o as k}from"./main-ZX0RELSf.js";import{V as B}from"./VDialog-Dnb-q-MU.js";import{a as E,b as I,d as R,V as $}from"./VCard-BPtOKe4P.js";import{V as M}from"./VCardText-DO_FRZge.js";import{V as P}from"./VForm-CMcQHaRk.js";import{V as z,a as c}from"./VRow-Cqbjxu10.js";import{V as O}from"./VFileInput-BX2KlnoB.js";import{V as j}from"./VSpacer-DBsXqXW-.js";const Z=F({__name:"AddNoteModal",props:{isDialogVisible:{type:Boolean},leadId:{}},emits:["update:isDialogVisible","noteAdded"],setup(C,{emit:A}){const V=C,_=A,t=p(""),s=p(""),d=p([]),n=N({get:()=>V.isDialogVisible,set:l=>_("update:isDialogVisible",l)}),b=()=>{t.value="",s.value="",d.value=[]},D=l=>{const e=l.target;e.files&&(d.value=Array.from(e.files))},g=async()=>{try{const l=new FormData;l.append("lead_id",String(V.leadId)),l.append("title",t.value),l.append("description",s.value),d.value.forEach(i=>{l.append("attachments[]",i)});const e=await U("/v1/notes",{method:"POST",body:l});e.success?(console.log("Note added successfully:",e.data),_("noteAdded"),n.value=!1,b()):console.error("Failed to add note:",e.message)}catch(l){console.error("Error adding note:",l)}},w=()=>{n.value=!1,b()};return(l,e)=>{const i=T,x=y;return k(),h(B,{modelValue:m(n),"onUpdate:modelValue":e[2]||(e[2]=r=>u(n)?n.value=r:null),"max-width":"600"},{default:a(()=>[o($,null,{default:a(()=>[o(E,null,{default:a(()=>[o(I,null,{default:a(()=>e[3]||(e[3]=[f("Add Note")])),_:1,__:[3]})]),_:1}),o(M,null,{default:a(()=>[o(P,{onSubmit:S(g,["prevent"])},{default:a(()=>[o(z,null,{default:a(()=>[o(c,{cols:"12"},{default:a(()=>[o(i,{modelValue:m(t),"onUpdate:modelValue":e[0]||(e[0]=r=>u(t)?t.value=r:null),label:"Title",placeholder:"Enter note title"},null,8,["modelValue"])]),_:1}),o(c,{cols:"12"},{default:a(()=>[o(x,{modelValue:m(s),"onUpdate:modelValue":e[1]||(e[1]=r=>u(s)?s.value=r:null),label:"Description",placeholder:"Enter note description...",rows:"6"},null,8,["modelValue"])]),_:1}),o(c,{cols:"12"},{default:a(()=>[o(O,{label:"Attachments",multiple:"","prepend-icon":"tabler-paperclip",placeholder:"Upload files",chips:"","show-size":"",onChange:D})]),_:1})]),_:1})]),_:1})]),_:1}),o(R,null,{default:a(()=>[o(j),o(v,{color:"secondary",variant:"tonal",onClick:w},{default:a(()=>e[4]||(e[4]=[f(" Cancel ")])),_:1,__:[4]}),o(v,{color:"primary",onClick:g},{default:a(()=>e[5]||(e[5]=[f(" Add Note ")])),_:1,__:[5]})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}});export{Z as _};
