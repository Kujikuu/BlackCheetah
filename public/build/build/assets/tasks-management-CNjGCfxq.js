import{V as He,_ as Ne}from"./VDialog-6C-NQXCx.js";import{d as Se,r as T,P as y,w as K,g as H,f as t,b as e,b3 as Pe,m as l,aR as N,a9 as M,t as p,o as k,G as $e,c as L,b5 as J,j as Oe,e as o,ax as _,l as _e,v as b,aF as be,F as ge}from"./main-gemCwVks.js";import{u as ze,T as Ee,P as Le,S as qe,_ as Me,a as Re}from"./EditTaskDialog.vue_vue_type_script_setup_true_lang-CnXGptQS.js";import{V as h}from"./VCardText-BD5AHO-w.js";import{V as Be}from"./VForm-FUZpY-zG.js";import{V as G,a as V}from"./VRow-DiX7eN30.js";import{V as q}from"./VTextField-BhxF6EAD.js";import{V as je}from"./VTextarea-OEcL0zKK.js";import{V as B}from"./VSelect-C9dxRhag.js";import{V as Q}from"./VDivider-B4ry9pxl.js";import{d as Ge,V as C,a as Ve,b as ye,c as Te}from"./VCard-DJ82mpnW.js";import{V as Ke}from"./VSpacer-Cpeayo2U.js";import{_ as We}from"./ViewTaskDialog.vue_vue_type_script_setup_true_lang-DR7wBnkT.js";import{_ as Ye}from"./DeleteTaskDialog.vue_vue_type_script_setup_true_lang-fFIWZoVX.js";import{a as Je,V as xe}from"./VTabs-CeX-zYGq.js";import{a as Qe,V as ke}from"./VWindowItem-CPQ2k3dD.js";import{V as De}from"./VAlert-RufLsxZw.js";import{V as U}from"./VAvatar-12xz6mHy.js";import{V as we}from"./VDataTable-C-SlKz4P.js";import{V as he}from"./VMenu-CeaiRCNz.js";import{V as Ce,a as $,b as O}from"./VList-MyW-iB3v.js";import{V as j}from"./VChip-DlNApjyg.js";import"./VOverlay-p8m6-W96.js";import"./forwardRefs--KQCZfKO.js";import"./scopeId-BgtgI3QF.js";import"./VImg-DSB6m92Q.js";import"./dialog-transition-C9rYmnXC.js";import"./form-DjHlhIbZ.js";/* empty css              */import"./VField-CsHfcJSz.js";import"./VInput-B3GinL-f.js";import"./VCheckboxBtn-ZAK0D-Rf.js";import"./VSelectionControl-COVpGwiX.js";import"./VSlideGroup-CEWgOBQJ.js";import"./VTable-0Z68chLt.js";const Xe=Se({__name:"CreateTaskDialog",props:{isDialogVisible:{type:Boolean},currentTab:{},defaultAssignedTo:{},unitId:{},disableAssignedTo:{type:Boolean}},emits:["update:isDialogVisible","taskCreated"],setup(X,{emit:W}){const x=X,R=W,{getUsersForSelect:f,initializeUsers:I,loading:z}=ze(),r=T({title:"",description:"",category:"",assignedTo:"",startDate:"",dueDate:"",priority:"medium",status:"pending",estimatedHours:0,actualHours:0,completionPercentage:0}),D=T(!1),E=y(()=>{const g=x.currentTab||"franchisee";return f(g)}),m=g=>!!g||"This field is required",v=g=>{R("update:isDialogVisible",g)},A=()=>{r.value={title:"",description:"",category:"",assignedTo:"",startDate:"",dueDate:"",priority:"medium",status:"pending",estimatedHours:0,actualHours:0,completionPercentage:0}},P=()=>{if(D.value){const g={id:Date.now(),...r.value};R("taskCreated",g),A(),v(!1)}},F=()=>{A(),v(!1)};return K(()=>x.isDialogVisible,async g=>{if(g){const d=x.currentTab||"franchisee";await I(d),x.defaultAssignedTo&&(r.value.assignedTo=x.defaultAssignedTo)}else A()}),K(()=>x.currentTab,async g=>{x.isDialogVisible&&g&&(await I(g),r.value.assignedTo="")}),(g,d)=>{const Y=Ne;return k(),H(He,{"model-value":x.isDialogVisible,"max-width":"600",persistent:"","onUpdate:modelValue":v},{default:t(()=>[e(Y,{onClick:d[0]||(d[0]=c=>v(!1))}),e(C,{title:"Create New Task"},{default:t(()=>[e(h,{class:"pa-6"},{default:t(()=>[e(Be,{modelValue:l(D),"onUpdate:modelValue":d[11]||(d[11]=c=>N(D)?D.value=c:null),onSubmit:Pe(P,["prevent"])},{default:t(()=>[e(G,null,{default:t(()=>[e(V,{cols:"12"},{default:t(()=>[e(q,{modelValue:l(r).title,"onUpdate:modelValue":d[1]||(d[1]=c=>l(r).title=c),label:"Task Title",placeholder:"Enter task title",rules:[m],required:""},null,8,["modelValue","rules"])]),_:1}),e(V,{cols:"12"},{default:t(()=>[e(je,{modelValue:l(r).description,"onUpdate:modelValue":d[2]||(d[2]=c=>l(r).description=c),label:"Description",placeholder:"Enter task description",rows:"3",rules:[m],required:""},null,8,["modelValue","rules"])]),_:1}),e(V,{cols:"12",md:"6"},{default:t(()=>[e(B,{modelValue:l(r).category,"onUpdate:modelValue":d[3]||(d[3]=c=>l(r).category=c),label:"Category",placeholder:"Select category",items:l(Ee),rules:[m],required:""},null,8,["modelValue","items","rules"])]),_:1}),e(V,{cols:"12",md:"6"},{default:t(()=>[e(B,{modelValue:l(r).assignedTo,"onUpdate:modelValue":d[4]||(d[4]=c=>l(r).assignedTo=c),label:"Assigned To",placeholder:"Select user",items:l(E),loading:l(z),rules:[m],"item-title":"title","item-value":"value",disabled:x.disableAssignedTo,required:""},null,8,["modelValue","items","loading","rules","disabled"])]),_:1}),e(V,{cols:"12",md:"6"},{default:t(()=>[e(q,{modelValue:l(r).startDate,"onUpdate:modelValue":d[5]||(d[5]=c=>l(r).startDate=c),label:"Start Date",type:"date",rules:[m],required:""},null,8,["modelValue","rules"])]),_:1}),e(V,{cols:"12",md:"6"},{default:t(()=>[e(q,{modelValue:l(r).dueDate,"onUpdate:modelValue":d[6]||(d[6]=c=>l(r).dueDate=c),label:"Due Date",type:"date",rules:[m],required:""},null,8,["modelValue","rules"])]),_:1}),e(V,{cols:"12",md:"6"},{default:t(()=>[e(B,{modelValue:l(r).priority,"onUpdate:modelValue":d[7]||(d[7]=c=>l(r).priority=c),label:"Priority",placeholder:"Select priority",items:l(Le),rules:[m],required:""},null,8,["modelValue","items","rules"])]),_:1}),e(V,{cols:"12",md:"6"},{default:t(()=>[e(B,{modelValue:l(r).status,"onUpdate:modelValue":d[8]||(d[8]=c=>l(r).status=c),label:"Status",placeholder:"Select status",items:l(qe),rules:[m],required:""},null,8,["modelValue","items","rules"])]),_:1}),e(V,{cols:"12",md:"6"},{default:t(()=>[e(q,{modelValue:l(r).estimatedHours,"onUpdate:modelValue":d[9]||(d[9]=c=>l(r).estimatedHours=c),label:"Estimated Hours",type:"number",min:"0"},null,8,["modelValue"])]),_:1}),e(V,{cols:"12",md:"6"},{default:t(()=>[e(q,{modelValue:l(r).actualHours,"onUpdate:modelValue":d[10]||(d[10]=c=>l(r).actualHours=c),label:"Actual Hours",type:"number",min:"0"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(Q),e(Ge,{class:"pa-6"},{default:t(()=>[e(Ke),e(M,{color:"error",variant:"text",onClick:F},{default:t(()=>d[12]||(d[12]=[p(" Cancel ")])),_:1,__:[12]}),e(M,{color:"primary",disabled:!l(D),onClick:P},{default:t(()=>d[13]||(d[13]=[p(" Create Task ")])),_:1,__:[13]},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}}),Ze={class:"d-flex align-center justify-space-between"},et={key:1,class:"text-center py-12"},tt={class:"ms-4"},st={class:"text-h4"},at={class:"ms-4"},lt={class:"text-h4"},it={class:"ms-4"},ot={class:"text-h4"},nt={class:"ms-4"},dt={class:"text-h4"},rt={class:"text-base font-weight-medium"},ut={class:"text-body-2 text-disabled"},mt={class:"text-body-1"},ct={class:"text-center"},ft={key:1,class:"text-center py-12"},pt={class:"ms-4"},vt={class:"text-h4"},_t={class:"ms-4"},bt={class:"text-h4"},gt={class:"ms-4"},Vt={class:"text-h4"},yt={class:"ms-4"},Tt={class:"text-h4"},xt={class:"text-base font-weight-medium"},kt={class:"text-body-2 text-disabled"},Dt={class:"text-body-1"},wt={class:"text-center"},ns=Se({__name:"tasks-management",setup(X){Oe();const{getUsersForSelect:W,initializeUsers:x,loading:R}=ze(),f=T("franchisee"),I=T(!1),z=T(!1),r=T(!1),D=T(null),E=T(null),m=T([]),v=T([]),A=T(!1),P=T(!1),F=T(null),g=T(null),d=T(!1),Y=async()=>{var i,s;A.value=!0,F.value=null;try{const a=await J("/v1/franchisor/tasks");if(a.success&&((i=a.data)!=null&&i.data)){const u=a.data.data.filter(n=>{var S,w;return((S=n.assigned_to)==null?void 0:S.role)==="franchisee"||((w=n.assigned_to)==null?void 0:w.role)==="unit_manager"});m.value=u.map(n=>{var S,w;return{id:n.id,title:n.title,description:n.description,category:n.type||"other",assignedTo:((S=n.assigned_to)==null?void 0:S.name)||"Unassigned",unitName:((w=n.unit)==null?void 0:w.unit_name)||"N/A",startDate:n.started_at?new Date(n.started_at).toISOString().split("T")[0]:null,dueDate:n.due_date?new Date(n.due_date).toISOString().split("T")[0]:null,priority:n.priority||"medium",status:n.status||"pending",estimatedHours:n.estimated_hours||0,actualHours:n.actual_hours||0,createdAt:n.created_at,updatedAt:n.updated_at}})}else m.value=[]}catch(a){console.error("Failed to load franchisee tasks:",a),F.value=((s=a==null?void 0:a.data)==null?void 0:s.message)||"Failed to load franchisee tasks",m.value=[]}finally{A.value=!1}},c=async()=>{var i,s;P.value=!0,g.value=null;try{const a=await J("/v1/franchisor/tasks");if(a.success&&((i=a.data)!=null&&i.data)){const u=a.data.data.filter(n=>{var w,fe,pe,ve;return["Marketing","Customer Service"].includes(n.type)||((w=n.assigned_to)==null?void 0:w.role)==="sales"||((fe=n.title)==null?void 0:fe.toLowerCase().includes("sales"))||((pe=n.title)==null?void 0:pe.toLowerCase().includes("lead"))||((ve=n.title)==null?void 0:ve.toLowerCase().includes("client"))});v.value=u.map(n=>{var S,w;return{id:n.id,title:n.title,description:n.description,category:n.type||"other",assignedTo:((S=n.assigned_to)==null?void 0:S.name)||"Unassigned",unitName:((w=n.unit)==null?void 0:w.unit_name)||"N/A",startDate:n.started_at?new Date(n.started_at).toISOString().split("T")[0]:null,dueDate:n.due_date?new Date(n.due_date).toISOString().split("T")[0]:null,priority:n.priority||"medium",status:n.status||"pending",estimatedHours:n.estimated_hours||0,actualHours:n.actual_hours||0,createdAt:n.created_at,updatedAt:n.updated_at}})}else v.value=[]}catch(a){console.error("Failed to load sales tasks:",a),g.value=((s=a==null?void 0:a.data)==null?void 0:s.message)||"Failed to load sales tasks",v.value=[]}finally{P.value=!1}},Z=y(()=>m.value.length),ee=y(()=>m.value.filter(i=>i.status==="completed").length),te=y(()=>m.value.filter(i=>i.status==="in_progress").length),se=y(()=>{const i=new Date;return m.value.filter(s=>s.dueDate?new Date(s.dueDate)<=i&&s.status!=="completed":!1).length}),ae=y(()=>v.value.length),le=y(()=>v.value.filter(i=>i.status==="completed").length),ie=y(()=>v.value.filter(i=>i.status==="in_progress").length),oe=y(()=>{const i=new Date;return v.value.filter(s=>s.dueDate?new Date(s.dueDate)<=i&&s.status!=="completed":!1).length});y(()=>f.value==="franchisee"?m.value:v.value),y(()=>f.value==="franchisee"?Z.value:ae.value),y(()=>f.value==="franchisee"?ee.value:le.value),y(()=>f.value==="franchisee"?te.value:ie.value),y(()=>f.value==="franchisee"?se.value:oe.value);const Ue=y(()=>W(f.value)),ne=i=>i==="completed"?"success":i==="in_progress"?"warning":i==="pending"?"info":"secondary",de=i=>i==="high"?"error":i==="medium"?"warning":i==="low"?"info":"secondary",Ie=async i=>{var s,a;try{const u=await J("/v1/franchisor/tasks",{method:"POST",body:{title:i.title,description:i.description,category:i.category,priority:i.priority,status:i.status||"pending",due_date:i.dueDate,estimated_hours:i.estimatedHours}});if(u.success){const n={id:u.data.id,title:u.data.title,description:u.data.description,category:u.data.type||"other",assignedTo:((s=u.data.assigned_to)==null?void 0:s.name)||"Unassigned",unitName:((a=u.data.unit)==null?void 0:a.unit_name)||"N/A",startDate:u.data.started_at?new Date(u.data.started_at).toISOString().split("T")[0]:null,dueDate:u.data.due_date?new Date(u.data.due_date).toISOString().split("T")[0]:null,priority:u.data.priority||"medium",status:u.data.status||"pending",estimatedHours:u.data.estimated_hours||0,actualHours:u.data.actual_hours||0,createdAt:u.data.created_at,updatedAt:u.data.updated_at};f.value==="franchisee"?m.value.unshift(n):v.value.unshift(n)}else console.error("Failed to create task:",u)}catch(u){console.error("Error creating task:",u)}},re=[...Re],ue=i=>{D.value=i,I.value=!0},me=i=>{D.value={...i},z.value=!0},ce=i=>{E.value=i,r.value=!0},Ae=i=>{if(f.value==="franchisee"){const s=m.value.findIndex(a=>a.id===i.id);s!==-1&&(m.value[s]=i)}else{const s=v.value.findIndex(a=>a.id===i.id);s!==-1&&(v.value[s]=i)}z.value=!1,D.value=null},Fe=i=>{if(f.value==="franchisee"){const s=m.value.findIndex(a=>a.id===i);s!==-1&&m.value.splice(s,1)}else{const s=v.value.findIndex(a=>a.id===i);s!==-1&&v.value.splice(s,1)}r.value=!1,E.value=null};return K(f,async i=>{await x(i)}),K(z,async i=>{i&&await x(f.value)}),$e(async()=>{Y(),c(),await x(f.value)}),(i,s)=>(k(),L("section",null,[e(G,{class:"mb-6"},{default:t(()=>[e(V,{cols:"12"},{default:t(()=>[o("div",Ze,[s[10]||(s[10]=o("div",null,[o("h2",{class:"text-h2 mb-1"}," Tasks Management "),o("p",{class:"text-body-1 text-medium-emphasis"}," Manage and track tasks across franchisees and sales teams ")],-1)),e(M,{color:"primary","prepend-icon":"tabler-plus",onClick:s[0]||(s[0]=a=>d.value=!0)},{default:t(()=>s[9]||(s[9]=[p(" Create Task ")])),_:1,__:[9]})])]),_:1})]),_:1}),e(Je,{modelValue:l(f),"onUpdate:modelValue":s[1]||(s[1]=a=>N(f)?f.value=a:null),class:"mb-6"},{default:t(()=>[e(xe,{value:"franchisee"},{default:t(()=>[e(_,{icon:"tabler-building-store",start:""}),s[11]||(s[11]=p(" Franchisee Tasks "))]),_:1,__:[11]}),e(xe,{value:"sales"},{default:t(()=>[e(_,{icon:"tabler-user-star",start:""}),s[12]||(s[12]=p(" Sales Tasks "))]),_:1,__:[12]})]),_:1},8,["modelValue"]),e(Qe,{modelValue:l(f),"onUpdate:modelValue":s[4]||(s[4]=a=>N(f)?f.value=a:null),class:"disable-tab-transition"},{default:t(()=>[e(ke,{value:"franchisee"},{default:t(()=>[l(F)?(k(),H(De,{key:0,type:"error",variant:"tonal",class:"mb-4",closable:"","onClick:close":s[2]||(s[2]=a=>F.value=null)},{default:t(()=>[p(b(l(F)),1)]),_:1})):_e("",!0),l(A)?(k(),L("div",et,[e(be,{indeterminate:"",size:"64",class:"mb-4"}),s[13]||(s[13]=o("h3",{class:"text-h3 mb-2"}," Loading Franchisee Tasks... ",-1)),s[14]||(s[14]=o("p",{class:"text-body-1 text-medium-emphasis"}," Please wait while we fetch the task information. ",-1))])):(k(),L(ge,{key:2},[e(G,{class:"mb-6"},{default:t(()=>[e(V,{cols:"12",md:"3"},{default:t(()=>[e(C,null,{default:t(()=>[e(h,{class:"d-flex align-center"},{default:t(()=>[e(U,{size:"44",rounded:"",color:"primary",variant:"tonal"},{default:t(()=>[e(_,{icon:"tabler-checklist",size:"26"})]),_:1}),o("div",tt,[s[15]||(s[15]=o("div",{class:"text-body-2 text-disabled"}," Total Tasks ",-1)),o("h4",st,b(l(Z)),1)])]),_:1})]),_:1})]),_:1}),e(V,{cols:"12",md:"3"},{default:t(()=>[e(C,null,{default:t(()=>[e(h,{class:"d-flex align-center"},{default:t(()=>[e(U,{size:"44",rounded:"",color:"success",variant:"tonal"},{default:t(()=>[e(_,{icon:"tabler-check",size:"26"})]),_:1}),o("div",at,[s[16]||(s[16]=o("div",{class:"text-body-2 text-disabled"}," Completed ",-1)),o("h4",lt,b(l(ee)),1)])]),_:1})]),_:1})]),_:1}),e(V,{cols:"12",md:"3"},{default:t(()=>[e(C,null,{default:t(()=>[e(h,{class:"d-flex align-center"},{default:t(()=>[e(U,{size:"44",rounded:"",color:"warning",variant:"tonal"},{default:t(()=>[e(_,{icon:"tabler-clock",size:"26"})]),_:1}),o("div",it,[s[17]||(s[17]=o("div",{class:"text-body-2 text-disabled"}," In Progress ",-1)),o("h4",ot,b(l(te)),1)])]),_:1})]),_:1})]),_:1}),e(V,{cols:"12",md:"3"},{default:t(()=>[e(C,null,{default:t(()=>[e(h,{class:"d-flex align-center"},{default:t(()=>[e(U,{size:"44",rounded:"",color:"error",variant:"tonal"},{default:t(()=>[e(_,{icon:"tabler-alert-circle",size:"26"})]),_:1}),o("div",nt,[s[18]||(s[18]=o("div",{class:"text-body-2 text-disabled"}," Due ",-1)),o("h4",dt,b(l(se)),1)])]),_:1})]),_:1})]),_:1})]),_:1}),e(C,null,{default:t(()=>[e(Ve,{class:"pb-4"},{default:t(()=>[e(ye,null,{default:t(()=>s[19]||(s[19]=[p("Franchisee Tasks")])),_:1,__:[19]}),e(Te,{class:"text-body-2 text-disabled"},{default:t(()=>s[20]||(s[20]=[p(" View and manage tasks assigned to your franchisees ")])),_:1,__:[20]})]),_:1}),e(Q),l(m).length>0?(k(),H(we,{key:0,items:l(m),headers:re,class:"text-no-wrap","item-value":"id"},{"item.taskInfo":t(({item:a})=>[o("div",null,[o("h6",rt,b(a.title),1),o("div",ut,b(a.description),1)])]),"item.unitName":t(({item:a})=>[o("div",mt,b(a.unitName),1)]),"item.priority":t(({item:a})=>[e(j,{color:de(a.priority),size:"small",label:"",class:"text-capitalize"},{default:t(()=>[p(b(a.priority),1)]),_:2},1032,["color"])]),"item.status":t(({item:a})=>[e(j,{color:ne(a.status),size:"small",label:"",class:"text-capitalize"},{default:t(()=>[p(b(a.status),1)]),_:2},1032,["color"])]),"item.actions":t(({item:a})=>[e(M,{icon:"",variant:"text",color:"medium-emphasis",size:"small"},{default:t(()=>[e(_,{icon:"tabler-dots-vertical"}),e(he,{activator:"parent"},{default:t(()=>[e(Ce,null,{default:t(()=>[e($,{onClick:u=>ue(a)},{prepend:t(()=>[e(_,{icon:"tabler-eye"})]),default:t(()=>[e(O,null,{default:t(()=>s[21]||(s[21]=[p("View")])),_:1,__:[21]})]),_:2},1032,["onClick"]),e($,{onClick:u=>me(a)},{prepend:t(()=>[e(_,{icon:"tabler-edit"})]),default:t(()=>[e(O,null,{default:t(()=>s[22]||(s[22]=[p("Edit")])),_:1,__:[22]})]),_:2},1032,["onClick"]),e($,{onClick:u=>ce(a.id)},{prepend:t(()=>[e(_,{icon:"tabler-trash"})]),default:t(()=>[e(O,null,{default:t(()=>s[23]||(s[23]=[p("Delete")])),_:1,__:[23]})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["items"])):(k(),H(h,{key:1,class:"py-8"},{default:t(()=>[o("div",ct,[e(_,{icon:"tabler-checklist",size:"64",class:"text-disabled mb-4"}),s[24]||(s[24]=o("h4",{class:"text-h4 mb-2"}," No Franchisee Tasks Found ",-1)),s[25]||(s[25]=o("p",{class:"text-body-1 text-medium-emphasis"}," There are no tasks assigned to franchisees yet. Create tasks to manage operations across your franchise network. ",-1))])]),_:1}))]),_:1})],64))]),_:1}),e(ke,{value:"sales"},{default:t(()=>[l(g)?(k(),H(De,{key:0,type:"error",variant:"tonal",class:"mb-4",closable:"","onClick:close":s[3]||(s[3]=a=>g.value=null)},{default:t(()=>[p(b(l(g)),1)]),_:1})):_e("",!0),l(P)?(k(),L("div",ft,[e(be,{indeterminate:"",size:"64",class:"mb-4"}),s[26]||(s[26]=o("h3",{class:"text-h3 mb-2"}," Loading Sales Tasks... ",-1)),s[27]||(s[27]=o("p",{class:"text-body-1 text-medium-emphasis"}," Please wait while we fetch the sales team task information. ",-1))])):(k(),L(ge,{key:2},[e(G,{class:"mb-6"},{default:t(()=>[e(V,{cols:"12",md:"3"},{default:t(()=>[e(C,null,{default:t(()=>[e(h,{class:"d-flex align-center"},{default:t(()=>[e(U,{size:"44",rounded:"",color:"primary",variant:"tonal"},{default:t(()=>[e(_,{icon:"tabler-checklist",size:"26"})]),_:1}),o("div",pt,[s[28]||(s[28]=o("div",{class:"text-body-2 text-disabled"}," Total Tasks ",-1)),o("h4",vt,b(l(ae)),1)])]),_:1})]),_:1})]),_:1}),e(V,{cols:"12",md:"3"},{default:t(()=>[e(C,null,{default:t(()=>[e(h,{class:"d-flex align-center"},{default:t(()=>[e(U,{size:"44",rounded:"",color:"success",variant:"tonal"},{default:t(()=>[e(_,{icon:"tabler-check",size:"26"})]),_:1}),o("div",_t,[s[29]||(s[29]=o("div",{class:"text-body-2 text-disabled"}," Completed ",-1)),o("h4",bt,b(l(le)),1)])]),_:1})]),_:1})]),_:1}),e(V,{cols:"12",md:"3"},{default:t(()=>[e(C,null,{default:t(()=>[e(h,{class:"d-flex align-center"},{default:t(()=>[e(U,{size:"44",rounded:"",color:"warning",variant:"tonal"},{default:t(()=>[e(_,{icon:"tabler-clock",size:"26"})]),_:1}),o("div",gt,[s[30]||(s[30]=o("div",{class:"text-body-2 text-disabled"}," In Progress ",-1)),o("h4",Vt,b(l(ie)),1)])]),_:1})]),_:1})]),_:1}),e(V,{cols:"12",md:"3"},{default:t(()=>[e(C,null,{default:t(()=>[e(h,{class:"d-flex align-center"},{default:t(()=>[e(U,{size:"44",rounded:"",color:"error",variant:"tonal"},{default:t(()=>[e(_,{icon:"tabler-alert-circle",size:"26"})]),_:1}),o("div",yt,[s[31]||(s[31]=o("div",{class:"text-body-2 text-disabled"}," Due ",-1)),o("h4",Tt,b(l(oe)),1)])]),_:1})]),_:1})]),_:1})]),_:1}),e(C,null,{default:t(()=>[e(Ve,{class:"pb-4"},{default:t(()=>[e(ye,null,{default:t(()=>s[32]||(s[32]=[p("Sales Team Tasks")])),_:1,__:[32]}),e(Te,{class:"text-body-2 text-disabled"},{default:t(()=>s[33]||(s[33]=[p(" View and manage tasks assigned to your sales team ")])),_:1,__:[33]})]),_:1}),e(Q),l(v).length>0?(k(),H(we,{key:0,items:l(v),headers:re,class:"text-no-wrap","item-value":"id"},{"item.taskInfo":t(({item:a})=>[o("div",null,[o("h6",xt,b(a.title),1),o("div",kt,b(a.description),1)])]),"item.unitName":t(({item:a})=>[o("div",Dt,b(a.unitName),1)]),"item.priority":t(({item:a})=>[e(j,{color:de(a.priority),size:"small",label:"",class:"text-capitalize"},{default:t(()=>[p(b(a.priority),1)]),_:2},1032,["color"])]),"item.status":t(({item:a})=>[e(j,{color:ne(a.status),size:"small",label:"",class:"text-capitalize"},{default:t(()=>[p(b(a.status),1)]),_:2},1032,["color"])]),"item.actions":t(({item:a})=>[e(M,{icon:"",variant:"text",color:"medium-emphasis",size:"small"},{default:t(()=>[e(_,{icon:"tabler-dots-vertical"}),e(he,{activator:"parent"},{default:t(()=>[e(Ce,null,{default:t(()=>[e($,{onClick:u=>ue(a)},{prepend:t(()=>[e(_,{icon:"tabler-eye"})]),default:t(()=>[e(O,null,{default:t(()=>s[34]||(s[34]=[p("View")])),_:1,__:[34]})]),_:2},1032,["onClick"]),e($,{onClick:u=>me(a)},{prepend:t(()=>[e(_,{icon:"tabler-edit"})]),default:t(()=>[e(O,null,{default:t(()=>s[35]||(s[35]=[p("Edit")])),_:1,__:[35]})]),_:2},1032,["onClick"]),e($,{onClick:u=>ce(a.id)},{prepend:t(()=>[e(_,{icon:"tabler-trash"})]),default:t(()=>[e(O,null,{default:t(()=>s[36]||(s[36]=[p("Delete")])),_:1,__:[36]})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["items"])):(k(),H(h,{key:1,class:"py-8"},{default:t(()=>[o("div",wt,[e(_,{icon:"tabler-user-star",size:"64",class:"text-disabled mb-4"}),s[37]||(s[37]=o("h4",{class:"text-h4 mb-2"}," No Sales Tasks Found ",-1)),s[38]||(s[38]=o("p",{class:"text-body-1 text-medium-emphasis"}," There are no tasks assigned to the sales team yet. Create tasks to track sales activities and goals. ",-1))])]),_:1}))]),_:1})],64))]),_:1})]),_:1},8,["modelValue"]),e(Xe,{"is-dialog-visible":l(d),"onUpdate:isDialogVisible":s[5]||(s[5]=a=>N(d)?d.value=a:null),"current-tab":l(f),onTaskCreated:Ie},null,8,["is-dialog-visible","current-tab"]),e(Me,{"is-dialog-visible":l(z),"onUpdate:isDialogVisible":s[6]||(s[6]=a=>N(z)?z.value=a:null),task:l(D),"user-options":l(Ue),"users-loading":l(R),onTaskUpdated:Ae},null,8,["is-dialog-visible","task","user-options","users-loading"]),e(Ye,{"is-dialog-visible":l(r),"onUpdate:isDialogVisible":s[7]||(s[7]=a=>N(r)?r.value=a:null),"task-id":l(E),onTaskDeleted:Fe},null,8,["is-dialog-visible","task-id"]),e(We,{"is-dialog-visible":l(I),"onUpdate:isDialogVisible":s[8]||(s[8]=a=>N(I)?I.value=a:null),task:l(D)},null,8,["is-dialog-visible","task"])]))}});export{ns as default};
