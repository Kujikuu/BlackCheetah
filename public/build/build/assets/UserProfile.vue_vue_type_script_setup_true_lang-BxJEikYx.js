import{aS as I,d as L,j as P,aL as n,g as l,l as w,m as a,o as r,f as e,b as o,aa as c,e as i,v as u,t as d,c as v,F as y,i as A,aT as B,q as C,a3 as S,aO as N}from"./main-DGm6yV1K.js";import{C as T}from"./vue3-perfect-scrollbar-CaBcfnjx.js";import{V as _}from"./VAvatar-DPtk-yN5.js";import{V as b}from"./VImg-C0tMXNU8.js";import{V as z}from"./VMenu-DnTGfH_L.js";import{V as D,a as g,d as F,b as O}from"./VList-BB8Xr9_D.js";import{V as R}from"./VListItemAction-ptsZBFdS.js";import{V as m}from"./VBadge-pvYiW-0k.js";import{V as U}from"./VDivider-D1nVP5py.js";const $=()=>I(),j={class:"d-flex gap-2 align-center"},q={class:"text-h6 font-weight-medium"},E={class:"px-4 py-2"},tt=L({__name:"UserProfile",setup(M){const V=P(),k=$(),t=n("userData"),h=async()=>{try{await N("/auth/logout",{method:"POST"})}catch(f){console.error("Logout API error:",f)}finally{n("accessToken").value=null,t.value=null,n("userAbilityRules").value=null,k.update([]),await V.push("/login")}},x=[{type:"divider"},{type:"navItem",icon:"tabler-user",title:"Profile",to:{name:"account-settings-tab",params:{tab:"account"}}},{type:"navItem",icon:"tabler-settings",title:"Settings",to:{name:"account-settings-tab",params:{tab:"security"}}},{type:"divider"}];return(f,p)=>a(t)?(r(),l(m,{key:0,dot:"",bordered:"",location:"bottom right","offset-x":"1","offset-y":"2",color:"success"},{default:e(()=>[o(_,{size:"38",class:"cursor-pointer",color:a(t)&&a(t).avatar?void 0:"primary",variant:a(t)&&a(t).avatar?void 0:"tonal"},{default:e(()=>[a(t)&&a(t).avatar?(r(),l(b,{key:0,src:a(t).avatar},null,8,["src"])):(r(),l(c,{key:1,icon:"tabler-user"})),o(z,{activator:"parent",width:"240",location:"bottom end",offset:"12px"},{default:e(()=>[o(D,null,{default:e(()=>[o(g,null,{default:e(()=>[i("div",j,[o(R,null,{default:e(()=>[o(m,{dot:"",location:"bottom right","offset-x":"3","offset-y":"3",color:"success",bordered:""},{default:e(()=>[o(_,{color:a(t)&&a(t).avatar?void 0:"primary",variant:a(t)&&a(t).avatar?void 0:"tonal"},{default:e(()=>[a(t)&&a(t).avatar?(r(),l(b,{key:0,src:a(t).avatar},null,8,["src"])):(r(),l(c,{key:1,icon:"tabler-user"}))]),_:1},8,["color","variant"])]),_:1})]),_:1}),i("div",null,[i("h6",q,u(a(t).fullName||a(t).name||a(t).username||"User"),1),o(F,{class:"text-capitalize text-disabled"},{default:e(()=>[d(u(a(t).role),1)]),_:1})])])]),_:1}),o(a(T),{options:{wheelPropagation:!1}},{default:e(()=>[(r(),v(y,null,A(x,s=>(r(),v(y,{key:s.title},[s.type==="navItem"?(r(),l(g,{key:0,to:s.to},B({prepend:e(()=>[o(c,{icon:s.icon,size:"22"},null,8,["icon"])]),default:e(()=>[o(O,null,{default:e(()=>[d(u(s.title),1)]),_:2},1024)]),_:2},[s.badgeProps?{name:"append",fn:e(()=>[o(m,C({rounded:"sm",class:"me-3",ref_for:!0},s.badgeProps),null,16)]),key:"0"}:void 0]),1032,["to"])):(r(),l(U,{key:1,class:"my-2"}))],64))),64)),i("div",E,[o(S,{block:"",size:"small",color:"error","append-icon":"tabler-logout",onClick:h},{default:e(()=>p[0]||(p[0]=[d(" Logout ")])),_:1,__:[0]})])]),_:1})]),_:1})]),_:1})]),_:1},8,["color","variant"])]),_:1})):w("",!0)}});export{tt as _};
