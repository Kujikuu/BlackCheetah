import{_ as y}from"./AppTextarea.vue_vue_type_script_setup_true_lang-CBFh1yq_.js";import{_ as T}from"./AppTextField.vue_vue_type_script_setup_true_lang-Bu2f9sqN.js";import{d as F,r as p,P as N,g as h,f as o,au as u,m,b as a,t as f,aM as S,a3 as b,aO as U,o as k}from"./main-DGm6yV1K.js";import{V as B}from"./VDialog-B-R7Rjej.js";import{a as E,b as I,d as M,V as $}from"./VCard-Dnm1uaQD.js";import{V as O}from"./VCardText-BVvU-0tD.js";import{V as P}from"./VForm-BoIFETfG.js";import{V as R,a as c}from"./VRow-Ytj8TpkY.js";import{V as z}from"./VFileInput-Bq_mLyhd.js";import{V as j}from"./VSpacer-BbhlTdTa.js";const Z=F({__name:"AddNoteModal",props:{isDialogVisible:{type:Boolean},leadId:{}},emits:["update:isDialogVisible","noteAdded"],setup(C,{emit:A}){const V=C,_=A,t=p(""),s=p(""),d=p([]),n=N({get:()=>V.isDialogVisible,set:l=>_("update:isDialogVisible",l)}),g=()=>{t.value="",s.value="",d.value=[]},D=l=>{const e=l.target;e.files&&(d.value=Array.from(e.files))},v=async()=>{try{const l=new FormData;l.append("lead_id",String(V.leadId)),l.append("title",t.value),l.append("description",s.value),d.value.forEach(i=>{l.append("attachments[]",i)});const e=await U("/v1/notes",{method:"POST",body:l});e.success?(console.log("Note added successfully:",e.data),_("noteAdded"),n.value=!1,g()):console.error("Failed to add note:",e.message)}catch(l){console.error("Error adding note:",l)}},w=()=>{n.value=!1,g()};return(l,e)=>{const i=T,x=y;return k(),h(B,{modelValue:m(n),"onUpdate:modelValue":e[2]||(e[2]=r=>u(n)?n.value=r:null),"max-width":"600"},{default:o(()=>[a($,null,{default:o(()=>[a(E,null,{default:o(()=>[a(I,null,{default:o(()=>e[3]||(e[3]=[f("Add Note")])),_:1,__:[3]})]),_:1}),a(O,null,{default:o(()=>[a(P,{onSubmit:S(v,["prevent"])},{default:o(()=>[a(R,null,{default:o(()=>[a(c,{cols:"12"},{default:o(()=>[a(i,{modelValue:m(t),"onUpdate:modelValue":e[0]||(e[0]=r=>u(t)?t.value=r:null),label:"Title",placeholder:"Enter note title"},null,8,["modelValue"])]),_:1}),a(c,{cols:"12"},{default:o(()=>[a(x,{modelValue:m(s),"onUpdate:modelValue":e[1]||(e[1]=r=>u(s)?s.value=r:null),label:"Description",placeholder:"Enter note description...",rows:"6"},null,8,["modelValue"])]),_:1}),a(c,{cols:"12"},{default:o(()=>[a(z,{label:"Attachments",multiple:"","prepend-icon":"tabler-paperclip",placeholder:"Upload files",chips:"","show-size":"",onChange:D})]),_:1})]),_:1})]),_:1})]),_:1}),a(M,null,{default:o(()=>[a(j),a(b,{color:"secondary",variant:"tonal",onClick:w},{default:o(()=>e[4]||(e[4]=[f(" Cancel ")])),_:1,__:[4]}),a(b,{color:"primary",onClick:v},{default:o(()=>e[5]||(e[5]=[f(" Add Note ")])),_:1,__:[5]})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}});export{Z as _};
