import{f as I}from"./franchisee-dashboard-CFvhFAU3.js";import{V as T,a as u}from"./VRow-Cqbjxu10.js";import{V as m,a as K,b as D,d as M}from"./VCard-BPtOKe4P.js";import{V as P}from"./VDialog-Dnb-q-MU.js";import{V as _}from"./VCardText-DO_FRZge.js";import{V}from"./VAvatar-Dwbi0l9K.js";import{d as Q,r as b,G as W,P as k,c as X,b as t,f as e,aR as B,m as o,o as h,e as a,ax as f,v as r,t as n,a9 as w,g as N,l as A}from"./main-ZX0RELSf.js";import{V as x}from"./VDivider-DRORfMXN.js";import{V as Y}from"./VDataTable-CHmbGzQf.js";import{V as Z}from"./VMenu-CFk79Z2P.js";import{V as tt,a as L,b as $}from"./VList-lm2yDhsx.js";import{V as y}from"./VChip-BX1klc4g.js";import{V as E}from"./VSpacer-DBsXqXW-.js";import{V as et}from"./VSelect-CM_Ce6Fz.js";/* empty css              */import"./VImg-BhWA0TmX.js";import"./VOverlay-B0AA_Njd.js";import"./forwardRefs--KQCZfKO.js";import"./scopeId-B6sKQhYQ.js";import"./dialog-transition-DDagBWdU.js";import"./VCheckboxBtn-CZL42UAA.js";import"./VSelectionControl-6Sm4Tpt1.js";import"./form-BPJFMOHG.js";import"./VTable-BRZOEiHP.js";import"./VSlideGroup-D2CZ4fkn.js";import"./VTextField-vxp1RpFW.js";import"./VField-D__vLB60.js";import"./VInput-CMh6ZUdK.js";const st={class:"ms-4"},at={class:"text-h4"},lt={class:"ms-4"},ot={class:"text-h4"},it={class:"ms-4"},dt={class:"text-h4"},rt={class:"ms-4"},nt={class:"text-h4"},ut={class:"text-base font-weight-medium"},ct={class:"text-body-2 text-disabled"},mt={class:"text-h6 mb-2"},ft={class:"text-body-1 mb-4"},pt={class:"text-body-1"},_t={class:"text-body-1"},vt={class:"text-body-1"},bt={class:"mb-4"},xt={class:"text-base font-weight-medium mb-2"},yt={class:"text-body-2 text-disabled"},Qt=Q({__name:"my-tasks",setup(Vt){const v=b(!1),p=b(!1),i=b(null),c=b([]),z=b(!1),R=async()=>{try{z.value=!0;const l=await I.getMyTasks();l.success&&(c.value=l.data)}catch(l){console.error("Error loading tasks:",l)}finally{z.value=!1}};W(async()=>{await R()});const U=k(()=>c.value.length),H=k(()=>c.value.filter(l=>l.status==="completed").length),q=k(()=>c.value.filter(l=>l.status==="in_progress").length),G=k(()=>{const l=new Date;return c.value.filter(s=>new Date(s.dueDate)<=l&&!["completed","cancelled"].includes(s.status)).length}),g=l=>l==="completed"?"success":l==="in_progress"?"warning":l==="pending"?"info":l==="cancelled"?"error":"secondary",S=l=>l==="high"?"error":l==="medium"?"warning":l==="low"?"info":"secondary",O=[{title:"Task Info",key:"taskInfo"},{title:"Category",key:"category"},{title:"Start Date",key:"startDate"},{title:"Due Date",key:"dueDate"},{title:"Priority",key:"priority"},{title:"Status",key:"status"},{title:"Actions",key:"actions",sortable:!1}],j=l=>{i.value=l,v.value=!0},F=l=>{i.value={...l},p.value=!0},J=async l=>{if(i.value)try{if((await I.updateMyTaskStatus(i.value.id,l)).success){const d=c.value.findIndex(C=>C.id===i.value.id);d!==-1&&(c.value[d].status=l),p.value=!1,i.value=null}}catch(s){console.error("Error updating task status:",s)}};return(l,s)=>(h(),X("section",null,[t(T,{class:"mb-6"},{default:e(()=>[t(u,{cols:"12"},{default:e(()=>s[4]||(s[4]=[a("div",null,[a("h2",{class:"text-h2 mb-1"}," My Tasks "),a("p",{class:"text-body-1 text-medium-emphasis"}," Track and manage tasks assigned to you ")],-1)])),_:1,__:[4]})]),_:1}),t(T,{class:"mb-6"},{default:e(()=>[t(u,{cols:"12",md:"3"},{default:e(()=>[t(m,null,{default:e(()=>[t(_,{class:"d-flex align-center"},{default:e(()=>[t(V,{size:"44",rounded:"",color:"primary",variant:"tonal"},{default:e(()=>[t(f,{icon:"tabler-checklist",size:"26"})]),_:1}),a("div",st,[s[5]||(s[5]=a("div",{class:"text-body-2 text-disabled"}," Total Tasks ",-1)),a("h4",at,r(o(U)),1)])]),_:1})]),_:1})]),_:1}),t(u,{cols:"12",md:"3"},{default:e(()=>[t(m,null,{default:e(()=>[t(_,{class:"d-flex align-center"},{default:e(()=>[t(V,{size:"44",rounded:"",color:"success",variant:"tonal"},{default:e(()=>[t(f,{icon:"tabler-check",size:"26"})]),_:1}),a("div",lt,[s[6]||(s[6]=a("div",{class:"text-body-2 text-disabled"}," Completed ",-1)),a("h4",ot,r(o(H)),1)])]),_:1})]),_:1})]),_:1}),t(u,{cols:"12",md:"3"},{default:e(()=>[t(m,null,{default:e(()=>[t(_,{class:"d-flex align-center"},{default:e(()=>[t(V,{size:"44",rounded:"",color:"warning",variant:"tonal"},{default:e(()=>[t(f,{icon:"tabler-clock",size:"26"})]),_:1}),a("div",it,[s[7]||(s[7]=a("div",{class:"text-body-2 text-disabled"}," In Progress ",-1)),a("h4",dt,r(o(q)),1)])]),_:1})]),_:1})]),_:1}),t(u,{cols:"12",md:"3"},{default:e(()=>[t(m,null,{default:e(()=>[t(_,{class:"d-flex align-center"},{default:e(()=>[t(V,{size:"44",rounded:"",color:"error",variant:"tonal"},{default:e(()=>[t(f,{icon:"tabler-alert-circle",size:"26"})]),_:1}),a("div",rt,[s[8]||(s[8]=a("div",{class:"text-body-2 text-disabled"}," Due ",-1)),a("h4",nt,r(o(G)),1)])]),_:1})]),_:1})]),_:1})]),_:1}),t(m,null,{default:e(()=>[t(K,{class:"pb-4"},{default:e(()=>[t(D,null,{default:e(()=>s[9]||(s[9]=[n("My Tasks")])),_:1,__:[9]})]),_:1}),t(x),t(Y,{items:o(c),headers:O,class:"text-no-wrap","item-value":"id"},{"item.taskInfo":e(({item:d})=>[a("div",null,[a("h6",ut,r(d.title),1),a("div",ct,r(d.description),1)])]),"item.priority":e(({item:d})=>[t(y,{color:S(d.priority),size:"small",label:"",class:"text-capitalize"},{default:e(()=>[n(r(d.priority),1)]),_:2},1032,["color"])]),"item.status":e(({item:d})=>[t(y,{color:g(d.status),size:"small",label:"",class:"text-capitalize"},{default:e(()=>[n(r(d.status),1)]),_:2},1032,["color"])]),"item.actions":e(({item:d})=>[t(w,{icon:"",variant:"text",color:"medium-emphasis",size:"small"},{default:e(()=>[t(f,{icon:"tabler-dots-vertical"}),t(Z,{activator:"parent"},{default:e(()=>[t(tt,null,{default:e(()=>[t(L,{onClick:C=>j(d)},{prepend:e(()=>[t(f,{icon:"tabler-eye"})]),default:e(()=>[t($,null,{default:e(()=>s[10]||(s[10]=[n("View")])),_:1,__:[10]})]),_:2},1032,["onClick"]),t(L,{onClick:C=>F(d)},{prepend:e(()=>[t(f,{icon:"tabler-refresh"})]),default:e(()=>[t($,null,{default:e(()=>s[11]||(s[11]=[n("Change Status")])),_:1,__:[11]})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["items"])]),_:1}),t(P,{modelValue:o(v),"onUpdate:modelValue":s[1]||(s[1]=d=>B(v)?v.value=d:null),"max-width":"600"},{default:e(()=>[t(m,null,{default:e(()=>[t(D,{class:"text-h5 pa-6 pb-4"},{default:e(()=>s[12]||(s[12]=[n(" Task Details ")])),_:1,__:[12]}),t(x),o(i)?(h(),N(_,{key:0,class:"pa-6"},{default:e(()=>[t(T,null,{default:e(()=>[t(u,{cols:"12"},{default:e(()=>[a("h6",mt,r(o(i).title),1),a("p",ft,r(o(i).description),1)]),_:1}),t(u,{cols:"12",md:"6"},{default:e(()=>[s[13]||(s[13]=a("div",{class:"text-body-2 text-disabled mb-1"}," Category ",-1)),a("div",pt,r(o(i).category),1)]),_:1,__:[13]}),t(u,{cols:"12",md:"6"},{default:e(()=>[s[14]||(s[14]=a("div",{class:"text-body-2 text-disabled mb-1"}," Start Date ",-1)),a("div",_t,r(o(i).startDate),1)]),_:1,__:[14]}),t(u,{cols:"12",md:"6"},{default:e(()=>[s[15]||(s[15]=a("div",{class:"text-body-2 text-disabled mb-1"}," Due Date ",-1)),a("div",vt,r(o(i).dueDate),1)]),_:1,__:[15]}),t(u,{cols:"12",md:"6"},{default:e(()=>[s[16]||(s[16]=a("div",{class:"text-body-2 text-disabled mb-1"}," Priority ",-1)),t(y,{color:S(o(i).priority),size:"small",label:"",class:"text-capitalize"},{default:e(()=>[n(r(o(i).priority),1)]),_:1},8,["color"])]),_:1,__:[16]}),t(u,{cols:"12",md:"6"},{default:e(()=>[s[17]||(s[17]=a("div",{class:"text-body-2 text-disabled mb-1"}," Status ",-1)),t(y,{color:g(o(i).status),size:"small",label:"",class:"text-capitalize"},{default:e(()=>[n(r(o(i).status),1)]),_:1},8,["color"])]),_:1,__:[17]})]),_:1})]),_:1})):A("",!0),t(x),t(M,{class:"pa-6"},{default:e(()=>[t(E),t(w,{color:"secondary",variant:"tonal",onClick:s[0]||(s[0]=d=>v.value=!1)},{default:e(()=>s[18]||(s[18]=[n(" Close ")])),_:1,__:[18]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(P,{modelValue:o(p),"onUpdate:modelValue":s[3]||(s[3]=d=>B(p)?p.value=d:null),"max-width":"400"},{default:e(()=>[t(m,null,{default:e(()=>[t(D,{class:"text-h5 pa-6 pb-4"},{default:e(()=>s[19]||(s[19]=[n(" Change Task Status ")])),_:1,__:[19]}),t(x),o(i)?(h(),N(_,{key:0,class:"pa-6"},{default:e(()=>[a("div",bt,[a("h6",xt,r(o(i).title),1),a("div",yt,[s[20]||(s[20]=n(" Current Status: ")),t(y,{color:g(o(i).status),size:"small",label:"",class:"text-capitalize ms-2"},{default:e(()=>[n(r(o(i).status),1)]),_:1},8,["color"])])]),t(et,{label:"New Status",items:[{title:"Pending",value:"pending"},{title:"In Progress",value:"in_progress"},{title:"Completed",value:"completed"},{title:"Cancelled",value:"cancelled"},{title:"On Hold",value:"on_hold"}],"model-value":o(i).status,required:"","onUpdate:modelValue":J},null,8,["model-value"])]),_:1})):A("",!0),t(x),t(M,{class:"pa-6"},{default:e(()=>[t(E),t(w,{color:"secondary",variant:"tonal",onClick:s[2]||(s[2]=d=>p.value=!1)},{default:e(()=>s[21]||(s[21]=[n(" Cancel ")])),_:1,__:[21]})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}});export{Qt as default};
