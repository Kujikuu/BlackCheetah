import{d as p,g as B,a as D,f as w,b as g,ax as y,o as L,L as z,M as I,Q as S,r as _,bn as A,aD as C,w as E,N as F,bD as R,q as v,ag as T,az as k}from"./main-B8QbR-yS.js";import{b as N,a as h}from"./VOverlay-B3La6Ajr.js";import{f as O}from"./forwardRefs--KQCZfKO.js";import{u as W}from"./scopeId-DyQ6a1uN.js";import{V as H}from"./dialog-transition-Dy2Gj1XO.js";const J=p({__name:"DialogCloseBtn",props:{icon:{default:"tabler-x"},iconSize:{default:"20"}},setup(e){const f=e;return(d,c)=>{const r=D("IconBtn");return L(),B(r,{variant:"elevated",size:"30",ripple:!1,class:"v-dialog-close-btn"},{default:w(()=>[g(y,{icon:f.icon,size:f.iconSize},null,8,["icon","size"])]),_:1})}}}),M=I({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...N({origin:"center center",scrollStrategy:"block",transition:{component:H},zIndex:2400})},"VDialog"),K=z()({name:"VDialog",props:M(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,f){let{emit:d,slots:c}=f;const r=S(e,"modelValue"),{scopeId:V}=W(),t=_();function m(n){var l,i;const o=n.relatedTarget,s=n.target;if(o!==s&&((l=t.value)!=null&&l.contentEl)&&((i=t.value)!=null&&i.globalTop)&&![document,t.value.contentEl].includes(s)&&!t.value.contentEl.contains(s)){const a=R(t.value.contentEl);if(!a.length)return;const u=a[0],P=a[a.length-1];o===u?P.focus():u.focus()}}A(()=>{document.removeEventListener("focusin",m)}),C&&E(()=>r.value&&e.retainFocus,n=>{n?document.addEventListener("focusin",m):document.removeEventListener("focusin",m)},{immediate:!0});function b(){var n;d("afterEnter"),(e.scrim||e.retainFocus)&&((n=t.value)!=null&&n.contentEl)&&!t.value.contentEl.contains(document.activeElement)&&t.value.contentEl.focus({preventScroll:!0})}function x(){d("afterLeave")}return E(r,async n=>{var o;n||(await T(),(o=t.value.activatorEl)==null||o.focus({preventScroll:!0}))}),F(()=>{const n=h.filterProps(e),o=v({"aria-haspopup":"dialog"},e.activatorProps),s=v({tabindex:-1},e.contentProps);return g(h,v({ref:t,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},n,{modelValue:r.value,"onUpdate:modelValue":l=>r.value=l,"aria-modal":"true",activatorProps:o,contentProps:s,height:e.fullscreen?void 0:e.height,width:e.fullscreen?void 0:e.width,maxHeight:e.fullscreen?void 0:e.maxHeight,maxWidth:e.fullscreen?void 0:e.maxWidth,role:"dialog",onAfterEnter:b,onAfterLeave:x},V),{activator:c.activator,default:function(){for(var l=arguments.length,i=new Array(l),a=0;a<l;a++)i[a]=arguments[a];return g(k,{root:"VDialog"},{default:()=>{var u;return[(u=c.default)==null?void 0:u.call(c,...i)]}})}})}),O({},t)}});export{K as V,J as _};
