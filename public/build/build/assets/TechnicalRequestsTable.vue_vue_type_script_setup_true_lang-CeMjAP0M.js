import{_ as se}from"./AppTextarea.vue_vue_type_script_setup_true_lang-nRgD-ubi.js";import{_ as le}from"./AppSelect.vue_vue_type_script_setup_true_lang-BXcpWyT4.js";import{_ as ae}from"./AppTextField.vue_vue_type_script_setup_true_lang-DNHIefB9.js";import{b5 as T,d as E,r as F,P as z,g as h,f as t,b as e,t as q,a as J,ax as k,b3 as ie,e as s,c as W,l as U,F as oe,i as re,a9 as D,o as w,v as c,b2 as ce,w as fe}from"./main-ZX0RELSf.js";import{V as N}from"./VDialog-Dnb-q-MU.js";import{a as K,b as Q,d as Y,V as H}from"./VCard-BPtOKe4P.js";import{V as j}from"./VDivider-DRORfMXN.js";import{V as ne}from"./VForm-CMcQHaRk.js";import{V as B}from"./VCardText-DO_FRZge.js";import{V as Z,a as V}from"./VRow-Cqbjxu10.js";import{V as ve}from"./VFileInput-BX2KlnoB.js";import{V as ee}from"./VSpacer-DBsXqXW-.js";import{V as O}from"./VChip-BX1klc4g.js";import{V as L}from"./VAvatar-Dwbi0l9K.js";import{V as ue}from"./VImg-BhWA0TmX.js";import{V as de,a as M,b as G,d as be}from"./VList-lm2yDhsx.js";import{V as ye}from"./VTooltip-BqTXI_Ub.js";import{_ as ge,V as _e}from"./VDataTableServer-BWxyP1dG.js";import{V as qe}from"./VMenu-CFk79Z2P.js";const A="/v1/technical-requests",me={async getTechnicalRequests(n){return await T(A,{method:"GET",params:n})},async getTechnicalRequest(n){return await T(`${A}/${n}`,{method:"GET"})},async createTechnicalRequest(n){const g=new FormData;return g.append("title",n.title),g.append("description",n.description),g.append("category",n.category),g.append("priority",n.priority),g.append("requester_id",n.requester_id.toString()),n.status&&g.append("status",n.status),n.attachments&&n.attachments.length>0&&n.attachments.forEach(i=>{g.append("attachments[]",i)}),await T(A,{method:"POST",body:g,headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}})},async updateTechnicalRequest(n,g){return await T(`${A}/${n}`,{method:"PATCH",body:g})},async deleteTechnicalRequest(n){return await T(`${A}/${n}`,{method:"DELETE"})},async getStatistics(){return await T(`${A}/statistics`,{method:"GET"})},async resolve(n){return await T(`${A}/${n}/resolve`,{method:"PATCH"})},async close(n){return await T(`${A}/${n}/close`,{method:"PATCH"})},async addAttachments(n,g){return await T(`${A}/${n}/attachments`,{method:"POST",body:{attachment_url:g}})},async bulkDelete(n){return await T("/v1/technical-requests/bulk-delete",{method:"POST",body:{ids:n}})}},we={key:0,class:"mt-3"},gt=E({__name:"SubmitRequestForm",props:{visible:{type:Boolean}},emits:["update:visible","success"],setup(n,{emit:g}){const i=g,l=F({subject:"",category:"",priority:"medium",description:"",attachments:[]}),u=F(!1),b=F(!1),a=[_=>!!_||"Subject is required",_=>_&&_.length>=5||"Subject must be at least 5 characters"],o=[_=>!!_||"Category is required"],p=[_=>!!_||"Description is required",_=>_&&_.length>=10||"Description must be at least 10 characters"],P=z(()=>l.value.subject.length>=5&&l.value.category!==""&&l.value.description.length>=10),x=[{title:"Hardware",value:"hardware"},{title:"Software",value:"software"},{title:"Network",value:"network"},{title:"POS System",value:"pos_system"},{title:"Website",value:"website"},{title:"Mobile App",value:"mobile_app"},{title:"Training",value:"training"},{title:"Other",value:"other"}],S=[{title:"Low",value:"low"},{title:"Medium",value:"medium"},{title:"High",value:"high"},{title:"Urgent",value:"urgent"}],f=_=>{var $;const d=($=_.split(".").pop())==null?void 0:$.toLowerCase();return["jpg","jpeg","png","gif","svg","webp"].includes(d||"")?"tabler-photo":["pdf"].includes(d||"")?"tabler-file-type-pdf":["doc","docx"].includes(d||"")?"tabler-file-type-doc":["xls","xlsx"].includes(d||"")?"tabler-file-type-xls":["txt","log"].includes(d||"")?"tabler-file-text":["zip","rar","7z"].includes(d||"")?"tabler-file-zip":"tabler-file"},v=()=>{l.value={subject:"",category:"",priority:"medium",description:"",attachments:[]},b.value=!1},I=_=>{const d=_.target;d.files&&(l.value.attachments=Array.from(d.files))},r=_=>{l.value.attachments.splice(_,1)},m=()=>{i("update:visible",!1),v()},y=async()=>{var _;if(P.value)try{u.value=!0;const $=(_=ce("userData").value)==null?void 0:_.id;if(!$){u.value=!1;return}await me.createTechnicalRequest({title:l.value.subject,description:l.value.description,category:l.value.category,priority:l.value.priority,requester_id:$,attachments:l.value.attachments.length>0?l.value.attachments:void 0}),i("success"),v(),i("update:visible",!1)}catch(d){console.error("Error submitting technical request:",d)}finally{u.value=!1}};return(_,d)=>{const $=J("IconBtn"),X=ae,C=le,pe=se;return w(),h(N,{"model-value":_.visible,"max-width":"600",persistent:"","onUpdate:modelValue":d[5]||(d[5]=R=>i("update:visible",R))},{default:t(()=>[e(H,null,{default:t(()=>[e(K,null,{append:t(()=>[e($,{onClick:m},{default:t(()=>[e(k,{icon:"tabler-x"})]),_:1})]),default:t(()=>[e(Q,null,{default:t(()=>d[6]||(d[6]=[q("Submit Technical Request")])),_:1,__:[6]})]),_:1}),e(j),e(ne,{modelValue:b.value,"onUpdate:modelValue":d[4]||(d[4]=R=>b.value=R),onSubmit:ie(y,["prevent"])},{default:t(()=>[e(B,null,{default:t(()=>[e(Z,null,{default:t(()=>[e(V,{cols:"12"},{default:t(()=>[e(X,{modelValue:l.value.subject,"onUpdate:modelValue":d[0]||(d[0]=R=>l.value.subject=R),label:"Subject",placeholder:"Enter request subject",rules:a,required:""},null,8,["modelValue"])]),_:1}),e(V,{cols:"12",sm:"6"},{default:t(()=>[e(C,{modelValue:l.value.category,"onUpdate:modelValue":d[1]||(d[1]=R=>l.value.category=R),label:"Category",placeholder:"Select category",items:x,rules:o,required:""},null,8,["modelValue"])]),_:1}),e(V,{cols:"12",sm:"6"},{default:t(()=>[e(C,{modelValue:l.value.priority,"onUpdate:modelValue":d[2]||(d[2]=R=>l.value.priority=R),label:"Priority",items:S,required:""},null,8,["modelValue"])]),_:1}),e(V,{cols:"12"},{default:t(()=>[e(pe,{modelValue:l.value.description,"onUpdate:modelValue":d[3]||(d[3]=R=>l.value.description=R),label:"Description",placeholder:"Describe your technical issue in detail...",rows:"4",rules:p,required:""},null,8,["modelValue"])]),_:1}),e(V,{cols:"12"},{default:t(()=>[d[7]||(d[7]=s("div",{class:"text-body-2 text-medium-emphasis mb-2"}," Attachments (Optional) ",-1)),e(ve,{label:"Choose files",multiple:"",chips:"","show-size":"",accept:"image/*,.pdf,.doc,.docx,.txt,.log,.zip,.rar",onChange:I}),l.value.attachments.length>0?(w(),W("div",we,[(w(!0),W(oe,null,re(l.value.attachments,(R,te)=>(w(),h(O,{key:te,closable:"",class:"me-2 mb-2","onClick:close":Ye=>r(te)},{default:t(()=>[e(k,{icon:f(R.name),class:"me-1"},null,8,["icon"]),q(" "+c(R.name),1)]),_:2},1032,["onClick:close"]))),128))])):U("",!0)]),_:1,__:[7]})]),_:1})]),_:1}),e(j),e(Y,{class:"pa-4"},{default:t(()=>[e(ee),e(D,{variant:"outlined",onClick:m},{default:t(()=>d[8]||(d[8]=[q(" Cancel ")])),_:1,__:[8]}),e(D,{type:"submit",color:"primary",disabled:!P.value||u.value,loading:u.value},{default:t(()=>d[9]||(d[9]=[q(" Submit Request ")])),_:1,__:[9]},8,["disabled","loading"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model-value"])}}}),Ve={class:"text-body-1 font-weight-medium"},he={class:"text-body-1"},xe={class:"d-flex align-center flex-wrap"},Ce={class:"text-sm font-weight-medium"},ke={class:"flex-grow-1 min-width-0"},Re={class:"text-body-1 font-weight-medium text-truncate"},De={class:"text-sm text-medium-emphasis text-truncate"},$e={class:"text-body-1"},Se={class:"text-body-1 font-weight-medium",style:{"word-wrap":"break-word","overflow-wrap":"break-word"}},Te={class:"text-body-1",style:{"word-wrap":"break-word","overflow-wrap":"break-word","white-space":"pre-wrap"}},Ae={class:"text-body-2 text-medium-emphasis mb-2"},Pe={class:"flex-grow-1 min-width-0"},Ie={class:"d-flex gap-2 flex-wrap justify-end",style:{"flex-basis":"100%"}},_t=E({__name:"ViewRequestDialog",props:{visible:{type:Boolean},request:{},showEditButton:{type:Boolean},isAdmin:{type:Boolean},resolvePriorityVariant:{type:Function},resolveStatusVariant:{type:Function},formatStatus:{type:Function},getFileIcon:{type:Function}},emits:["update:visible","edit"],setup(n,{emit:g}){const i=n,l=g,u=()=>{l("update:visible",!1)},b=()=>{l("edit",i.request)},a=o=>{o.url&&o.url!=="#"&&window.open(o.url,"_blank")};return(o,p)=>{const P=J("IconBtn");return w(),h(N,{"model-value":o.visible,"max-width":"800","onUpdate:modelValue":p[0]||(p[0]=x=>l("update:visible",x))},{default:t(()=>[o.request?(w(),h(H,{key:0},{default:t(()=>[e(K,{class:"py-2"},{append:t(()=>[e(P,{onClick:u},{default:t(()=>[e(k,{icon:"tabler-x"})]),_:1})]),default:t(()=>[e(Q,null,{default:t(()=>p[1]||(p[1]=[q("Request Details")])),_:1,__:[1]})]),_:1}),e(j),e(B,{class:"pa-4 pa-sm-6"},{default:t(()=>[e(Z,null,{default:t(()=>[e(V,{cols:"12",sm:"6"},{default:t(()=>[p[2]||(p[2]=s("div",{class:"text-body-2 text-medium-emphasis mb-1"}," Request ID ",-1)),s("div",Ve,c(o.request.requestId),1)]),_:1,__:[2]}),e(V,{cols:"12",sm:"6"},{default:t(()=>[p[3]||(p[3]=s("div",{class:"text-body-2 text-medium-emphasis mb-1"}," Date ",-1)),s("div",he,c(o.request.date),1)]),_:1,__:[3]}),o.isAdmin?(w(),h(V,{key:0,cols:"12"},{default:t(()=>[p[4]||(p[4]=s("div",{class:"text-body-2 text-medium-emphasis mb-1"}," Requester ",-1)),s("div",xe,[o.request.userAvatar?(w(),h(L,{key:0,size:"32",class:"me-3 mb-2"},{default:t(()=>[e(ue,{src:o.request.userAvatar},null,8,["src"])]),_:1})):(w(),h(L,{key:1,size:"32",class:"me-3 mb-2",color:"primary"},{default:t(()=>{var x,S;return[s("span",Ce,c((S=(x=o.request.userName)==null?void 0:x.charAt(0))==null?void 0:S.toUpperCase()),1)]}),_:1})),s("div",ke,[s("div",Re,c(o.request.userName),1),s("div",De,c(o.request.userEmail),1)])])]),_:1,__:[4]})):U("",!0),e(V,{cols:"12",sm:"6"},{default:t(()=>[p[5]||(p[5]=s("div",{class:"text-body-2 text-medium-emphasis mb-1"}," Priority ",-1)),e(O,{color:i.resolvePriorityVariant(o.request.priority).color,size:"small",label:"",class:"text-capitalize"},{default:t(()=>[e(k,{icon:i.resolvePriorityVariant(o.request.priority).icon,size:"16",class:"me-1"},null,8,["icon"]),q(" "+c(o.request.priority),1)]),_:1},8,["color"])]),_:1,__:[5]}),e(V,{cols:"12",sm:"6"},{default:t(()=>[p[6]||(p[6]=s("div",{class:"text-body-2 text-medium-emphasis mb-1"}," Status ",-1)),e(O,{color:i.resolveStatusVariant(o.request.status),size:"small",label:"",class:"text-capitalize"},{default:t(()=>[q(c(i.formatStatus(o.request.status)),1)]),_:1},8,["color"])]),_:1,__:[6]}),e(V,{cols:"12"},{default:t(()=>[p[7]||(p[7]=s("div",{class:"text-body-2 text-medium-emphasis mb-1"}," Category ",-1)),s("div",$e,c(o.request.category),1)]),_:1,__:[7]}),e(V,{cols:"12"},{default:t(()=>[p[8]||(p[8]=s("div",{class:"text-body-2 text-medium-emphasis mb-1"}," Subject ",-1)),s("div",Se,c(o.request.subject),1)]),_:1,__:[8]}),e(V,{cols:"12"},{default:t(()=>[p[9]||(p[9]=s("div",{class:"text-body-2 text-medium-emphasis mb-1"}," Description ",-1)),s("div",Te,c(o.request.description),1)]),_:1,__:[9]}),o.request.attachments&&o.request.attachments.length>0?(w(),h(V,{key:1,cols:"12"},{default:t(()=>[s("div",Ae," Attachments ("+c(o.request.attachments.length)+") ",1),e(de,{lines:"two",density:"compact",class:"pa-0"},{default:t(()=>[(w(!0),W(oe,null,re(o.request.attachments,(x,S)=>(w(),h(M,{key:S,class:"px-0"},{prepend:t(()=>[e(L,{color:"primary",variant:"tonal",size:"40",class:"me-2"},{default:t(()=>[e(k,{icon:i.getFileIcon(x.name)},null,8,["icon"])]),_:2},1024)]),append:t(()=>[e(D,{icon:"",variant:"text",size:"small",color:"primary",class:"flex-shrink-0",onClick:f=>a(x)},{default:t(()=>[e(k,{icon:"tabler-download"}),e(ye,{activator:"parent",location:"top"},{default:t(()=>p[10]||(p[10]=[q(" Download ")])),_:1,__:[10]})]),_:2},1032,["onClick"])]),default:t(()=>[s("div",Pe,[e(G,{class:"font-weight-medium text-truncate"},{default:t(()=>[q(c(x.name),1)]),_:2},1024),e(be,{class:"text-truncate"},{default:t(()=>[q(c(x.size),1)]),_:2},1024)])]),_:2},1024))),128))]),_:1})]),_:1})):U("",!0)]),_:1})]),_:1}),e(j),e(Y,{class:"pa-4 pa-sm-6"},{default:t(()=>[e(ee),s("div",Ie,[e(D,{variant:"outlined",onClick:u},{default:t(()=>p[11]||(p[11]=[q(" Close ")])),_:1,__:[11]}),o.showEditButton?(w(),h(D,{key:0,color:"primary",onClick:b},{default:t(()=>[e(k,{icon:"tabler-edit",class:"me-1"}),p[12]||(p[12]=q(" Edit Request "))]),_:1,__:[12]})):U("",!0)])]),_:1})]),_:1})):U("",!0)]),_:1},8,["model-value"])}}}),Ue={class:"text-body-1 font-weight-medium text-primary"},qt=E({__name:"EditRequestDialog",props:{visible:{type:Boolean},request:{},isAdmin:{type:Boolean}},emits:["update:visible","success"],setup(n,{emit:g}){const i=n,l=g,u=F({title:"",description:"",category:"",priority:"medium",status:"open"}),b=F(!1),a=F(!1),o=[m=>!!m||"Title is required",m=>m&&m.length>=5||"Title must be at least 5 characters"],p=[m=>!!m||"Category is required"],P=[m=>!!m||"Description is required",m=>m&&m.length>=10||"Description must be at least 10 characters"],x=z(()=>i.isAdmin&&u.value.title.length>=5&&u.value.category!==""&&u.value.description.length>=10),S=[{title:"Hardware",value:"hardware"},{title:"Software",value:"software"},{title:"Network",value:"network"},{title:"POS System",value:"pos_system"},{title:"Website",value:"website"},{title:"Mobile App",value:"mobile_app"},{title:"Training",value:"training"},{title:"Other",value:"other"}],f=[{title:"Low",value:"low"},{title:"Medium",value:"medium"},{title:"High",value:"high"},{title:"Urgent",value:"urgent"}],v=[{title:"Open",value:"open"},{title:"In Progress",value:"in_progress"},{title:"Pending Info",value:"pending_info"},{title:"Resolved",value:"resolved"},{title:"Closed",value:"closed"},{title:"Cancelled",value:"cancelled"}];fe(()=>i.request,m=>{m&&(u.value={title:m.subject||"",description:m.description||"",category:m.category||"",priority:m.priority||"medium",status:m.status||"open"})},{immediate:!0});const I=()=>{l("update:visible",!1)},r=async()=>{if(!(!x.value||!i.request||!i.isAdmin))try{b.value=!0,await me.updateTechnicalRequest(i.request.id,{title:u.value.title,description:u.value.description,category:u.value.category,priority:u.value.priority,status:u.value.status}),l("success"),l("update:visible",!1)}catch(m){console.error("Error updating technical request:",m)}finally{b.value=!1}};return(m,y)=>{const _=J("IconBtn"),d=ae,$=le,X=se;return w(),h(N,{"model-value":m.visible,"max-width":"600",persistent:"","onUpdate:modelValue":y[6]||(y[6]=C=>l("update:visible",C))},{default:t(()=>[e(H,null,{default:t(()=>[e(K,null,{append:t(()=>[e(_,{onClick:I},{default:t(()=>[e(k,{icon:"tabler-x"})]),_:1})]),default:t(()=>[e(Q,null,{default:t(()=>y[7]||(y[7]=[q("Edit Technical Request")])),_:1,__:[7]})]),_:1}),e(j),e(ne,{modelValue:a.value,"onUpdate:modelValue":y[5]||(y[5]=C=>a.value=C),onSubmit:ie(r,["prevent"])},{default:t(()=>[e(B,null,{default:t(()=>[e(Z,null,{default:t(()=>[m.request?(w(),h(V,{key:0,cols:"12"},{default:t(()=>[y[8]||(y[8]=s("div",{class:"text-body-2 text-medium-emphasis mb-1"}," Request ID ",-1)),s("div",Ue,c(m.request.requestId),1)]),_:1,__:[8]})):U("",!0),e(V,{cols:"12"},{default:t(()=>[e(d,{modelValue:u.value.title,"onUpdate:modelValue":y[0]||(y[0]=C=>u.value.title=C),label:"Title",placeholder:"Enter request title",rules:o,required:""},null,8,["modelValue"])]),_:1}),e(V,{cols:"12",sm:"6"},{default:t(()=>[e($,{modelValue:u.value.category,"onUpdate:modelValue":y[1]||(y[1]=C=>u.value.category=C),label:"Category",placeholder:"Select category",items:S,rules:p,required:""},null,8,["modelValue"])]),_:1}),e(V,{cols:"12",sm:"6"},{default:t(()=>[e($,{modelValue:u.value.priority,"onUpdate:modelValue":y[2]||(y[2]=C=>u.value.priority=C),label:"Priority",items:f,required:""},null,8,["modelValue"])]),_:1}),e(V,{cols:"12",sm:"6"},{default:t(()=>[e($,{modelValue:u.value.status,"onUpdate:modelValue":y[3]||(y[3]=C=>u.value.status=C),label:"Status",items:v,required:""},null,8,["modelValue"])]),_:1}),e(V,{cols:"12"},{default:t(()=>[e(X,{modelValue:u.value.description,"onUpdate:modelValue":y[4]||(y[4]=C=>u.value.description=C),label:"Description",placeholder:"Describe your technical issue in detail...",rows:"4",rules:P,required:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(j),e(Y,{class:"pa-4"},{default:t(()=>[e(ee),e(D,{variant:"outlined",onClick:I},{default:t(()=>y[9]||(y[9]=[q(" Cancel ")])),_:1,__:[9]}),e(D,{type:"submit",color:"primary",disabled:!x.value||b.value,loading:b.value},{default:t(()=>y[10]||(y[10]=[q(" Update Request ")])),_:1,__:[10]},8,["disabled","loading"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model-value"])}}}),Be={key:0,class:"text-start pa-4 bg-surface rounded"},ze={class:"text-body-1 font-weight-medium mb-2"},Fe={class:"text-body-1"},wt=E({__name:"DeleteConfirmDialog",props:{visible:{type:Boolean},request:{},loading:{type:Boolean,default:!1}},emits:["update:visible","confirm"],setup(n,{emit:g}){const i=g,l=()=>{i("update:visible",!1)},u=()=>{i("confirm")};return(b,a)=>(w(),h(N,{"model-value":b.visible,"max-width":"500","onUpdate:modelValue":a[0]||(a[0]=o=>i("update:visible",o))},{default:t(()=>[e(H,{class:"text-center px-10 py-6"},{default:t(()=>[e(B,null,{default:t(()=>[e(k,{icon:"tabler-alert-triangle",size:"64",color:"warning",class:"mb-4"}),a[3]||(a[3]=s("h3",{class:"text-h5 mb-2"}," Confirm Delete ",-1)),a[4]||(a[4]=s("p",{class:"text-body-1 text-medium-emphasis mb-4"}," Are you sure you want to delete this technical request? ",-1)),b.request?(w(),W("div",Be,[a[1]||(a[1]=s("div",{class:"text-body-2 text-medium-emphasis mb-1"}," Request ID ",-1)),s("div",ze,c(b.request.requestId),1),a[2]||(a[2]=s("div",{class:"text-body-2 text-medium-emphasis mb-1"}," Subject ",-1)),s("div",Fe,c(b.request.subject),1)])):U("",!0),a[5]||(a[5]=s("p",{class:"text-body-2 text-error mt-4 mb-0"}," This action cannot be undone. ",-1))]),_:1,__:[3,4,5]}),e(B,{class:"d-flex align-center justify-center gap-2"},{default:t(()=>[e(D,{variant:"outlined",onClick:l},{default:t(()=>a[6]||(a[6]=[q(" Cancel ")])),_:1,__:[6]}),e(D,{color:"error",loading:b.loading,onClick:u},{default:t(()=>a[7]||(a[7]=[q(" Delete Request ")])),_:1,__:[7]},8,["loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}}),je={class:"text-body-1 text-medium-emphasis mb-4"},Ee={class:"text-start pa-4 bg-surface rounded"},Le={class:"text-body-1 font-weight-medium"},Vt=E({__name:"BulkDeleteConfirmDialog",props:{visible:{type:Boolean},selectedCount:{},loading:{type:Boolean,default:!1}},emits:["update:visible","confirm"],setup(n,{emit:g}){const i=g,l=()=>{i("update:visible",!1)},u=()=>{i("confirm")};return(b,a)=>(w(),h(N,{"model-value":b.visible,"max-width":"500","onUpdate:modelValue":a[0]||(a[0]=o=>i("update:visible",o))},{default:t(()=>[e(H,{class:"text-center px-10 py-6"},{default:t(()=>[e(B,null,{default:t(()=>[e(k,{icon:"tabler-alert-triangle",size:"64",color:"warning",class:"mb-4"}),a[2]||(a[2]=s("h3",{class:"text-h5 mb-2"}," Confirm Bulk Delete ",-1)),s("p",je," Are you sure you want to delete "+c(b.selectedCount)+" technical request(s)? ",1),s("div",Ee,[a[1]||(a[1]=s("div",{class:"text-body-2 text-medium-emphasis mb-1"}," Selected Requests ",-1)),s("div",Le,c(b.selectedCount)+" request(s) will be permanently deleted ",1)]),a[3]||(a[3]=s("p",{class:"text-body-2 text-error mt-4 mb-0"}," This action cannot be undone. ",-1))]),_:1,__:[2,3]}),e(B,{class:"d-flex align-center justify-center gap-2"},{default:t(()=>[e(D,{variant:"outlined",onClick:l},{default:t(()=>a[4]||(a[4]=[q(" Cancel ")])),_:1,__:[4]}),e(D,{color:"error",loading:b.loading,onClick:u},{default:t(()=>[q(" Delete "+c(b.selectedCount)+" Request(s) ",1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}}),Oe={class:"text-center pa-8"},Ne={class:"text-body-1 font-weight-medium text-primary"},He={class:"d-flex align-center"},Me={class:"text-sm font-weight-medium"},Ge={class:"text-body-1 font-weight-medium"},We={class:"text-sm text-medium-emphasis"},Xe={class:"text-body-1"},Je={class:"text-sm text-medium-emphasis"},Ke={class:"text-body-1"},Qe={class:"d-flex gap-1"},ht=E({__name:"TechnicalRequestsTable",props:{items:{},itemsLength:{},loading:{type:Boolean},selectedRows:{},headers:{},isAdmin:{type:Boolean},itemsPerPage:{},page:{},resolvePriorityVariant:{type:Function},resolveStatusVariant:{type:Function},formatStatus:{type:Function},getFileIcon:{type:Function}},emits:["update:selectedRows","update:itemsPerPage","update:page","view-request","edit-request","delete-request","update:options"],setup(n,{emit:g}){const i=n,l=g,u=z({get:()=>i.selectedRows,set:f=>l("update:selectedRows",f)}),b=z({get:()=>i.itemsPerPage,set:f=>l("update:itemsPerPage",f)}),a=z({get:()=>i.page,set:f=>l("update:page",f)}),o=z(()=>{const f=[...i.headers];if(i.isAdmin){const v=f.findIndex(I=>I.key==="requestId");v!==-1&&f.splice(v+1,0,{title:"Requester",key:"userName",sortable:!1})}return f}),p=f=>{l("update:options",f)},P=f=>{l("view-request",f)},x=f=>{l("edit-request",f)},S=f=>{l("delete-request",f)};return(f,v)=>{const I=ge;return w(),h(_e,{"items-per-page":b.value,"onUpdate:itemsPerPage":v[2]||(v[2]=r=>b.value=r),"model-value":u.value,"onUpdate:modelValue":v[3]||(v[3]=r=>u.value=r),page:a.value,"onUpdate:page":v[4]||(v[4]=r=>a.value=r),items:f.items,"item-value":"id","items-length":f.itemsLength,headers:o.value,class:"text-no-wrap","show-select":"",loading:f.loading,"onUpdate:options":p},{"no-data":t(()=>[s("div",Oe,[e(k,{icon:"tabler-inbox-off",size:"64",class:"mb-4 text-disabled"}),v[5]||(v[5]=s("h3",{class:"text-h5 mb-2"}," No Technical Requests Found ",-1)),v[6]||(v[6]=s("p",{class:"text-body-1 text-medium-emphasis mb-4"}," No requests match your search criteria. Try adjusting your filters. ",-1))])]),"item.requestId":t(({item:r})=>[s("div",Ne,c(r.requestId),1)]),"item.userName":t(({item:r})=>[s("div",He,[r.userAvatar?(w(),h(L,{key:0,size:"32",class:"me-3"},{default:t(()=>[e(ue,{src:r.userAvatar},null,8,["src"])]),_:2},1024)):(w(),h(L,{key:1,size:"32",class:"me-3",color:"primary"},{default:t(()=>{var m,y;return[s("span",Me,c((y=(m=r.userName)==null?void 0:m.charAt(0))==null?void 0:y.toUpperCase()),1)]}),_:2},1024)),s("div",null,[s("div",Ge,c(r.userName),1),s("div",We,c(r.userEmail),1)])])]),"item.subject":t(({item:r})=>[s("div",Xe,c(r.subject),1),s("div",Je,c(r.category),1)]),"item.priority":t(({item:r})=>[e(O,{color:i.resolvePriorityVariant(r.priority).color,size:"small",label:"",class:"text-capitalize"},{default:t(()=>[e(k,{icon:i.resolvePriorityVariant(r.priority).icon,size:"16",class:"me-1"},null,8,["icon"]),q(" "+c(r.priority),1)]),_:2},1032,["color"])]),"item.status":t(({item:r})=>[e(O,{color:i.resolveStatusVariant(r.status),size:"small",label:"",class:"text-capitalize"},{default:t(()=>[q(c(i.formatStatus(r.status)),1)]),_:2},1032,["color"])]),"item.date":t(({item:r})=>[s("div",Ke,c(r.date),1)]),"item.actions":t(({item:r})=>[s("div",Qe,[e(D,{icon:"",variant:"text",color:"medium-emphasis",size:"small"},{default:t(()=>[e(k,{icon:"tabler-dots-vertical",size:"22"}),e(qe,{activator:"parent"},{default:t(()=>[e(de,null,{default:t(()=>[e(M,{onClick:m=>P(r)},{prepend:t(()=>[e(k,{icon:"tabler-eye"})]),default:t(()=>[e(G,null,{default:t(()=>v[7]||(v[7]=[q("View Details")])),_:1,__:[7]})]),_:2},1032,["onClick"]),f.isAdmin?(w(),h(M,{key:0,onClick:m=>x(r)},{prepend:t(()=>[e(k,{icon:"tabler-edit"})]),default:t(()=>[e(G,null,{default:t(()=>v[8]||(v[8]=[q("Edit Request")])),_:1,__:[8]})]),_:2},1032,["onClick"])):U("",!0),e(M,{onClick:m=>S(r)},{prepend:t(()=>[e(k,{icon:"tabler-trash",color:"error"})]),default:t(()=>[e(G,{class:"text-error"},{default:t(()=>v[9]||(v[9]=[q(" Delete ")])),_:1,__:[9]})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])]),bottom:t(()=>[e(I,{page:a.value,"onUpdate:page":v[0]||(v[0]=r=>a.value=r),"items-per-page":b.value,"onUpdate:itemsPerPage":v[1]||(v[1]=r=>b.value=r),"total-items":f.itemsLength},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","model-value","page","items","items-length","headers","loading"])}}});export{_t as _,qt as a,gt as b,wt as c,Vt as d,ht as e,me as t};
