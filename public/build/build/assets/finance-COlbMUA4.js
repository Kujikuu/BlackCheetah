import{m as J}from"./vue3-apexcharts-Dzz5bcrU.js";import{f as d}from"./formatters-WDr9EcLN.js";import{u as q}from"./useApi-zndU1oQw.js";import{V as g,a as f}from"./VRow-TTCWxOo6.js";import{V as u,a as _,b as G,c as X}from"./VCard-DMcKirUI.js";import{V as b}from"./VCardText-D2YeN9Zz.js";import{V as Y}from"./VAvatar-DxIbsahA.js";import{d as j,r as c,w as K,P as h,G as Q,c as M,b as t,f as a,o as C,F as U,i as Z,m,g as ee,I as te,e as l,aa as ae,v as n,a3 as z,t as y}from"./main-DIUPubGx.js";import{V as oe}from"./VDivider-C8QKKA0M.js";import{q as se}from"./VDataTable-DTRaAsCG.js";import{_ as re}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./_commonjsHelpers-CqkleIqs.js";/* empty css              */import"./VImg-Cfb8l-y3.js";import"./VPagination-ChxMJmKV.js";import"./VSelect-lJe6bIbl.js";import"./VTextField-X5C_UOFg.js";/* empty css                   */import"./VCounter-yasx3ALN.js";import"./VField-UKoo2CRi.js";import"./form-C6zvNQ_d.js";import"./easing-Bybner-F.js";import"./VInput-FDuNxTjf.js";import"./forwardRefs-C-GTDzx5.js";import"./VList-Dz5iFJjN.js";import"./ssrBoot-BDK10ZCO.js";import"./dialog-transition-Kk_3GEtN.js";import"./VMenu-CwiFW7kA.js";import"./VOverlay-DJ8t3L0E.js";import"./lazy-D-4YzKtR.js";import"./scopeId-DaLavy0g.js";import"./VCheckboxBtn-CNm0McQD.js";import"./VSelectionControl-Dd_69FEM.js";import"./VChip-Bi8x2DWS.js";import"./VSlideGroup-Cg3oj3HT.js";import"./VTable-B3jSOyM4.js";import"./filter-BCdKTBoI.js";const le={class:"d-flex align-center gap-x-4 mb-1"},ie={class:"text-h4"},ne={class:"text-body-1 mb-1"},ce={class:"d-flex gap-x-2 align-center"},de={class:"text-h6"},me={class:"text-body-1 font-weight-medium"},pe={class:"text-body-1 text-success font-weight-medium"},fe={class:"text-body-1 text-error font-weight-medium"},ue={class:"text-body-1 text-warning font-weight-medium"},he={class:"text-body-1 text-primary font-weight-medium"},ye="rgba(var(--v-theme-on-background), var(--v-high-emphasis-opacity))",p="rgba(var(--v-theme-on-background), var(--v-medium-emphasis-opacity))",R="rgba(var(--v-border-color), var(--v-border-opacity))",ge=j({__name:"finance",setup(_e){const{data:H,execute:T,isFetching:be}=q("/v1/franchisor/dashboard/finance"),i={primary:"#9155FD",warning:"#FFB400",success:"#56CA00",error:"#FF4C51"},v=c([]),V=c([{name:"Sales",data:[]}]),A=c([{name:"Royalty",data:[]}]),x=c([{name:"Sales",data:[]}]),S=c([{name:"Expenses",data:[]}]),w=c([{name:"Profit",data:[]}]),k=c([{name:"Royalty",data:[]}]),F=c([]);K(H,s=>{const r=s;if(r!=null&&r.success&&(r!=null&&r.data)){const o=r.data;v.value=[{icon:"tabler-currency-riyal",color:"primary",title:"Total Sales",value:d(o.stats.total_sales),change:o.stats.sales_change,isHover:!1},{icon:"tabler-receipt",color:"error",title:"Total Expenses",value:d(o.stats.total_expenses),change:o.stats.expenses_change,isHover:!1},{icon:"tabler-chart-line",color:"success",title:"Net Profit",value:d(o.stats.net_profit),change:o.stats.profit_change,isHover:!1},{icon:"tabler-percentage",color:"warning",title:"Profit Margin",value:`${o.stats.profit_margin}%`,change:o.stats.margin_change,isHover:!1}],o.top_stores_sales&&(V.value=[{name:"Sales",data:o.top_stores_sales.map(e=>e.sales)}]),o.top_stores_royalty&&(A.value=[{name:"Royalty",data:o.top_stores_royalty.map(e=>e.royalty)}]),o.sales_chart&&(x.value=[{name:"Sales",data:o.sales_chart.map(e=>e.amount)}]),o.expenses_chart&&(S.value=[{name:"Expenses",data:o.expenses_chart.map(e=>e.amount)}]),o.profit_chart&&(w.value=[{name:"Profit",data:o.profit_chart.map(e=>e.amount)}]),o.royalty_chart&&(k.value=[{name:"Royalty",data:o.royalty_chart.map(e=>e.amount)}]),o.monthly_breakdown&&(F.value=o.monthly_breakdown)}},{immediate:!0});const $=[{icon:"tabler-currency-riyal",color:"primary",title:"Total Sales",value:"$0",change:0,isHover:!1},{icon:"tabler-receipt",color:"error",title:"Total Expenses",value:"$0",change:0,isHover:!1},{icon:"tabler-chart-line",color:"success",title:"Net Profit",value:"$0",change:0,isHover:!1},{icon:"tabler-percentage",color:"warning",title:"Profit Margin",value:"0%",change:0,isHover:!1}],B=h(()=>v.value.length>0?v.value:$);Q(()=>{T()});const D=h(()=>({chart:{type:"bar",toolbar:{show:!1},parentHeightOffset:0},plotOptions:{bar:{horizontal:!0,borderRadius:8,barHeight:"60%"}},dataLabels:{enabled:!0,formatter(s){return`${(s/1e3).toFixed(0)}k SAR`},style:{colors:["#fff"],fontSize:"13px",fontWeight:500}},colors:[i.primary],xaxis:{categories:["Downtown Store","Mall Location","City Center","Westside Branch","Airport Plaza"],labels:{style:{colors:p,fontSize:"13px"},formatter(s){return`${(s/1e3).toFixed(0)}k SAR`}},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{style:{colors:p,fontSize:"13px"}}},grid:{strokeDashArray:8,borderColor:R,xaxis:{lines:{show:!0}},yaxis:{lines:{show:!1}},padding:{top:-18,left:21,right:25,bottom:10}},tooltip:{y:{formatter(s){return`${s.toLocaleString()} SAR`}}}})),P=h(()=>({chart:{type:"bar",toolbar:{show:!1},parentHeightOffset:0},plotOptions:{bar:{horizontal:!0,borderRadius:8,barHeight:"60%"}},dataLabels:{enabled:!0,formatter(s){return`${(s/1e3).toFixed(1)}k SAR`},style:{colors:["#fff"],fontSize:"13px",fontWeight:500}},colors:[i.warning],xaxis:{categories:["Downtown Store","Mall Location","City Center","Westside Branch","Airport Plaza"],labels:{style:{colors:p,fontSize:"13px"},formatter(s){return`${(s/1e3).toFixed(0)}k SAR`}},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{style:{colors:p,fontSize:"13px"}}},grid:{strokeDashArray:8,borderColor:R,xaxis:{lines:{show:!0}},yaxis:{lines:{show:!1}},padding:{top:-18,left:21,right:25,bottom:10}},tooltip:{y:{formatter(s){return`${s.toLocaleString()} SAR`}}}})),L=h(()=>[{name:"Sales",data:x.value.length>0?x.value[0].data:[]},{name:"Expenses",data:S.value.length>0?S.value[0].data:[]},{name:"Royalties",data:k.value.length>0?k.value[0].data:[]},{name:"Profit",data:w.value.length>0?w.value[0].data:[]}]),E={chart:{type:"line",stacked:!1,parentHeightOffset:0,toolbar:{show:!1},zoom:{enabled:!1}},markers:{size:4,colors:"#fff",strokeColors:[i.primary,i.error,i.warning,i.success],hover:{size:5},borderRadius:4},stroke:{curve:"smooth",width:3,lineCap:"round"},legend:{show:!0,position:"top",horizontalAlign:"left",markers:{width:10,height:10,offsetX:-3},fontSize:"14px",fontFamily:"Open Sans",fontWeight:400,labels:{colors:ye},itemMargin:{horizontal:12,vertical:8}},grid:{strokeDashArray:8,borderColor:R},colors:[i.primary,i.error,i.warning,i.success],dataLabels:{enabled:!1},xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],labels:{style:{colors:p,fontSize:"13px",fontWeight:400}},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{style:{colors:p,fontSize:"13px",fontWeight:400},formatter(s){return`${(s/1e3).toFixed(0)}k SAR`}}},tooltip:{y:{formatter(s){return`${s.toLocaleString()} SAR`}}}},O=h(()=>F.value.map(s=>({month:s.month,sales:d(s.sales),expenses:d(s.expenses),royalties:d(s.royalties),profit:d(s.profit)}))),W=[{title:"Month",key:"month"},{title:"Sales",key:"sales",align:"end"},{title:"Expenses",key:"expenses",align:"end"},{title:"Royalties",key:"royalties",align:"end"},{title:"Profit",key:"profit",align:"end"}];return(s,r)=>{const o=J;return C(),M("section",null,[t(g,{class:"mb-6"},{default:a(()=>[(C(!0),M(U,null,Z(m(B),(e,N)=>(C(),ee(f,{key:N,cols:"12",md:"3",sm:"6"},{default:a(()=>[t(u,{class:"finance-card-statistics cursor-pointer",style:te(e.isHover?`border-block-end-color: rgb(var(--v-theme-${e.color}))`:`border-block-end-color: rgba(var(--v-theme-${e.color}),0.38)`),onMouseenter:I=>e.isHover=!0,onMouseleave:I=>e.isHover=!1},{default:a(()=>[t(b,null,{default:a(()=>[l("div",le,[t(Y,{variant:"tonal",color:e.color,rounded:""},{default:a(()=>[t(ae,{icon:e.icon,size:"28"},null,8,["icon"])]),_:2},1032,["color"]),l("h4",ie,n(e.value),1)]),l("div",ne,n(e.title),1),l("div",ce,[l("h6",de,n(e.change>0?"+":"")+" "+n(e.change)+"% ",1),r[0]||(r[0]=l("div",{class:"text-sm text-disabled"}," than last month ",-1))])]),_:2},1024)]),_:2},1032,["style","onMouseenter","onMouseleave"])]),_:2},1024))),128))]),_:1}),t(g,{class:"mb-6"},{default:a(()=>[t(f,{cols:"12",md:"6"},{default:a(()=>[t(u,null,{default:a(()=>[t(_,{title:"Top 5 Stores by Monthly Sales",subtitle:"Performance comparison"},{append:a(()=>[t(z,{variant:"tonal",size:"small","append-icon":"tabler-chevron-down"},{default:a(()=>r[1]||(r[1]=[y(" This Month ")])),_:1,__:[1]})]),_:1}),t(b,null,{default:a(()=>[t(o,{type:"bar",height:"320",options:m(D),series:m(V)},null,8,["options","series"])]),_:1})]),_:1})]),_:1}),t(f,{cols:"12",md:"6"},{default:a(()=>[t(u,null,{default:a(()=>[t(_,{title:"Top 5 Stores by Monthly Royalty",subtitle:"Royalty contributions"},{append:a(()=>[t(z,{variant:"tonal",size:"small","append-icon":"tabler-chevron-down"},{default:a(()=>r[2]||(r[2]=[y(" This Month ")])),_:1,__:[2]})]),_:1}),t(b,null,{default:a(()=>[t(o,{type:"bar",height:"320",options:m(P),series:m(A)},null,8,["options","series"])]),_:1})]),_:1})]),_:1})]),_:1}),t(g,{class:"mb-6"},{default:a(()=>[t(f,{cols:"12"},{default:a(()=>[t(u,null,{default:a(()=>[t(_,{title:"Financial Summary",subtitle:"Yearly overview of sales, expenses, royalties and profit"},{append:a(()=>[t(z,{variant:"tonal",size:"small","append-icon":"tabler-chevron-down"},{default:a(()=>r[3]||(r[3]=[y(" 2024 ")])),_:1,__:[3]})]),_:1}),t(b,null,{default:a(()=>[t(o,{type:"line",height:"400",options:E,series:m(L)},null,8,["series"])]),_:1})]),_:1})]),_:1})]),_:1}),t(g,null,{default:a(()=>[t(f,{cols:"12"},{default:a(()=>[t(u,null,{default:a(()=>[t(_,{class:"pb-4"},{default:a(()=>[t(G,null,{default:a(()=>r[4]||(r[4]=[y("Monthly Financial Breakdown")])),_:1,__:[4]}),t(X,null,{default:a(()=>r[5]||(r[5]=[y("Detailed monthly statistics")])),_:1,__:[5]})]),_:1}),t(oe),t(se,{headers:W,items:m(O),"hide-default-footer":"",class:"text-no-wrap"},{"item.month":a(({item:e})=>[l("div",me,n(e.month),1)]),"item.sales":a(({item:e})=>[l("div",pe,n(e.sales),1)]),"item.expenses":a(({item:e})=>[l("div",fe,n(e.expenses),1)]),"item.royalties":a(({item:e})=>[l("div",ue,n(e.royalties),1)]),"item.profit":a(({item:e})=>[l("div",he,n(e.profit),1)]),_:1},8,["items"])]),_:1})]),_:1})]),_:1})])}}}),ot=re(ge,[["__scopeId","data-v-8d31e7b3"]]);export{ot as default};
