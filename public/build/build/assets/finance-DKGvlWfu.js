import{m as T}from"./vue3-apexcharts-Ch2Tb3m9.js";import{f as F}from"./franchisee-dashboard-BzQfFZqb.js";import{V as p,a as v}from"./VRow-CkpL0RVO.js";import{V as b,a as M}from"./VCard-DX1TBmaJ.js";import{V as _}from"./VCardText-DaLxJsvL.js";import{d as P,r as c,G as $,P as E,c as y,g,f as e,b as a,o as l,e as n,a$ as V,t as x,v as m,a3 as w,aa as A,F as I,i as B,I as L}from"./main-BFHJN9nb.js";import{V as J}from"./VAlert-CRQ1c4tT.js";import{V as O}from"./VAvatar-0YR6k8GC.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./_commonjsHelpers-CqkleIqs.js";/* empty css              */import"./VImg-CUvr5mlE.js";const W={key:2},G={class:"d-flex align-center gap-x-4 mb-1"},X={class:"text-h4"},Y={class:"text-body-1 mb-1"},j={class:"d-flex gap-x-2 align-center"},q={class:"text-h6"},K={key:1,class:"text-center py-8"},Q="rgba(var(--v-theme-on-background), var(--v-high-emphasis-opacity))",D="rgba(var(--v-theme-on-background), var(--v-medium-emphasis-opacity))",Z="rgba(var(--v-border-color), var(--v-border-opacity))",ee=P({__name:"finance",setup(ae){const i={primary:"#9155FD",success:"#56CA00",error:"#FF4C51"},u=c(!1),d=c(null),S=c(!1),C=c([{icon:"tabler-currency-riyal",color:"primary",title:"Total Sales",value:"$2,458,650",change:18.2,isHover:!1},{icon:"tabler-receipt",color:"error",title:"Total Expenses",value:"$845,230",change:-8.7,isHover:!1},{icon:"tabler-trending-up",color:"success",title:"Total Profit",value:"$1,245,125",change:24.5,isHover:!1}]),f=c([{name:"Sales",data:[42e4,385e3,445e3,398e3,465e3,425e3,485e3,452e3,478e3,495e3,512e3,548e3]},{name:"Expenses",data:[145e3,132e3,158e3,142e3,165e3,148e3,172e3,155e3,168e3,175e3,182e3,188e3]},{name:"Profit",data:[212e3,195250,220250,196300,230250,213250,240250,229200,238300,245750,253200,277800]}]),h=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"SAR",minimumFractionDigits:0,maximumFractionDigits:0}).format(t),k=async()=>{u.value=!0,d.value=null;try{const t=await F.getFinanceStatistics();if(t.success&&t.data){const o=t.data;C.value=[{icon:"tabler-currency-riyal",color:"primary",title:"Total Sales",value:h(o.totalSales),change:o.salesChange,isHover:!1},{icon:"tabler-receipt",color:"error",title:"Total Expenses",value:h(o.totalExpenses),change:o.expensesChange,isHover:!1},{icon:"tabler-trending-up",color:"success",title:"Total Profit",value:h(o.totalProfit),change:o.profitChange,isHover:!1}]}const r=await F.getFinancialSummary();if(r.success&&r.data){const o=r.data;f.value=[{name:"Sales",data:o.sales},{name:"Expenses",data:o.expenses},{name:"Profit",data:o.profit}],S.value=!0}}catch(t){d.value="Failed to load finance data. Please try again.",console.error("Error loading finance data:",t)}finally{u.value=!1}};$(()=>{k()});const z=E(()=>!u.value&&S.value&&f.value.length>0&&f.value.every(t=>t.data&&Array.isArray(t.data)&&t.data.length>0&&t.data.every(r=>typeof r=="number"&&!isNaN(r)))),H={chart:{type:"line",stacked:!1,parentHeightOffset:0,toolbar:{show:!1},zoom:{enabled:!1}},markers:{size:4,colors:"#fff",strokeColors:[i.primary,i.error,i.success],hover:{size:5},borderRadius:4},stroke:{curve:"smooth",width:3,lineCap:"round"},legend:{show:!0,position:"top",horizontalAlign:"left",markers:{width:10,height:10,offsetX:-3},fontSize:"14px",fontFamily:"Open Sans",fontWeight:400,labels:{colors:Q},itemMargin:{horizontal:12,vertical:8}},grid:{strokeDashArray:8,borderColor:Z},colors:[i.primary,i.error,i.success],dataLabels:{enabled:!1},xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],labels:{style:{colors:D,fontSize:"13px",fontWeight:400}},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{style:{colors:D,fontSize:"13px",fontWeight:400},formatter(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"SAR",minimumFractionDigits:0,maximumFractionDigits:0}).format(t/1e3)+"k"}}},tooltip:{y:{formatter(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"SAR",minimumFractionDigits:0,maximumFractionDigits:0}).format(t)}}}};return(t,r)=>{const o=T;return l(),y("section",null,[u.value?(l(),g(p,{key:0,class:"mb-6"},{default:e(()=>[a(v,{cols:"12"},{default:e(()=>[a(b,null,{default:e(()=>[a(_,{class:"text-center py-8"},{default:e(()=>[a(V,{indeterminate:"",color:"primary",size:"64"}),r[0]||(r[0]=n("div",{class:"mt-4 text-body-1"}," Loading finance data... ",-1))]),_:1,__:[0]})]),_:1})]),_:1})]),_:1})):d.value?(l(),g(p,{key:1,class:"mb-6"},{default:e(()=>[a(v,{cols:"12"},{default:e(()=>[a(J,{type:"error",variant:"tonal",class:"mb-0"},{prepend:e(()=>[a(A,{icon:"tabler-alert-circle"})]),append:e(()=>[a(w,{color:"error",variant:"text",size:"small",onClick:k},{default:e(()=>r[1]||(r[1]=[x(" Retry ")])),_:1,__:[1]})]),default:e(()=>[x(" "+m(d.value)+" ",1)]),_:1})]),_:1})]),_:1})):(l(),y("div",W,[a(p,{class:"mb-6"},{default:e(()=>[(l(!0),y(I,null,B(C.value,(s,N)=>(l(),g(v,{key:N,cols:"12",md:"4",sm:"6"},{default:e(()=>[a(b,{class:"finance-card-statistics cursor-pointer",style:L(s.isHover?`border-block-end-color: rgb(var(--v-theme-${s.color}))`:`border-block-end-color: rgba(var(--v-theme-${s.color}),0.38)`),onMouseenter:R=>s.isHover=!0,onMouseleave:R=>s.isHover=!1},{default:e(()=>[a(_,null,{default:e(()=>[n("div",G,[a(O,{variant:"tonal",color:s.color,rounded:""},{default:e(()=>[a(A,{icon:s.icon,size:"28"},null,8,["icon"])]),_:2},1032,["color"]),n("h4",X,m(s.value),1)]),n("div",Y,m(s.title),1),n("div",j,[n("h6",q,m(s.change>0?"+":"")+" "+m(s.change)+"% ",1),r[2]||(r[2]=n("div",{class:"text-sm text-disabled"}," than last month ",-1))])]),_:2},1024)]),_:2},1032,["style","onMouseenter","onMouseleave"])]),_:2},1024))),128))]),_:1}),a(p,{class:"mb-6"},{default:e(()=>[a(v,{cols:"12"},{default:e(()=>[a(b,null,{default:e(()=>[a(M,{title:"Financial Summary",subtitle:"Yearly overview of sales, expenses and profit"},{append:e(()=>[a(w,{variant:"tonal",size:"small","append-icon":"tabler-chevron-down"},{default:e(()=>r[3]||(r[3]=[x(" 2025 ")])),_:1,__:[3]})]),_:1}),a(_,null,{default:e(()=>[z.value?(l(),g(o,{key:0,type:"line",height:"400",options:H,series:f.value},null,8,["series"])):(l(),y("div",K,[a(V,{indeterminate:"",color:"primary",size:"32"}),r[4]||(r[4]=n("div",{class:"mt-4 text-body-2 text-medium-emphasis"}," Loading chart data... ",-1))]))]),_:1})]),_:1})]),_:1})]),_:1})]))])}}}),pe=U(ee,[["__scopeId","data-v-4a0d8f11"]]);export{pe as default};
