import{m as j}from"./vue3-apexcharts-smiyFtih.js";import{f as u}from"./formatters-WDr9EcLN.js";import{u as G}from"./useApi-DoIl6Go8.js";import{S as B}from"./saudi-riyal-DtwTLcGW.js";import{V as _,a as y}from"./VRow-B0gP2GFy.js";import{V as g,a as z,b as K,c as Q}from"./VCard-CoFtOtzl.js";import{V as v}from"./VCardText-gJE2FZ-X.js";import{V as Y}from"./VAvatar-DaCLSk-0.js";import{d as Z,ak as ee,r as c,w as te,P as f,c as $,b as a,f as o,o as F,F as ae,i as oe,m as p,g as se,e as i,aa as re,v as m,a3 as D,t as b}from"./main-C3-SOPYs.js";import{V as le}from"./VDivider-UG-1iRGQ.js";import{q as ie}from"./VDataTable-Bzs64nEH.js";import{_ as ne}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./_commonjsHelpers-CqkleIqs.js";/* empty css              */import"./VImg-DGmz0H4K.js";import"./VPagination-C_9tn9Rm.js";import"./VSelect-C8HOAYKp.js";import"./VTextField-Dh9Jn9l4.js";/* empty css                   */import"./VCounter-DSzXIg7-.js";import"./VField-C57WoLXE.js";import"./form-Byy7mIuz.js";import"./easing-Bybner-F.js";import"./VInput-CuHkYGdD.js";import"./forwardRefs-C-GTDzx5.js";import"./VList-aiwrjFdO.js";import"./ssrBoot-BIjc9Qlg.js";import"./dialog-transition--yy6PSnQ.js";import"./VMenu-C67K7Qaw.js";import"./VOverlay-BUy4HRci.js";import"./lazy-Dg4IFEOh.js";import"./scopeId-DlDW9TaM.js";import"./VCheckboxBtn-D7mH8e-9.js";import"./VSelectionControl-BNnDiK64.js";import"./VChip-B1b-jhkP.js";import"./VSlideGroup-DuXa1Bxs.js";import"./VTable-BJ9dGI66.js";import"./filter-C6D1KYvK.js";const ce={class:"d-flex align-center gap-x-4 mb-1"},me={class:"text-h4"},pe={class:"text-body-1 mb-1"},de={class:"d-flex gap-x-2 align-center"},ue={class:"text-h6"},fe={class:"text-body-1 font-weight-medium"},he={class:"text-body-1 text-success font-weight-medium"},ye={class:"text-body-1 text-error font-weight-medium"},ge={class:"text-body-1 text-warning font-weight-medium"},_e={class:"text-body-1 text-primary font-weight-medium"},ve="rgba(var(--v-theme-on-background), var(--v-high-emphasis-opacity))",h="rgba(var(--v-theme-on-background), var(--v-medium-emphasis-opacity))",x="rgba(var(--v-border-color), var(--v-border-opacity))",be=Z({__name:"finance",setup(xe){const{data:N,execute:Se,isFetching:ke}=G("/v1/franchisor/dashboard/finance",{immediate:!0}),S=ee(),n={primary:"#9155FD",warning:"#FFB400",success:"#56CA00",error:"#FF4C51"},k=c([]),T=c([{name:"Sales",data:[]}]),H=c([{name:"Royalty",data:[]}]),d=c([]),w=c([{name:"Sales",data:[]}]),R=c([{name:"Expenses",data:[]}]),C=c([{name:"Profit",data:[]}]),A=c([{name:"Royalty",data:[]}]),V=c([]),M=c([]),l=s=>typeof s=="number"?s:parseFloat(s)||0;te(N,s=>{const r=s;if(r!=null&&r.success&&(r!=null&&r.data)){const t=r.data;k.value=[{icon:B,color:"primary",title:"Total Sales",value:u(l(t.stats.total_sales)),change:t.stats.sales_change,isHover:!1},{icon:"tabler-receipt",color:"error",title:"Total Expenses",value:u(l(t.stats.total_expenses)),change:t.stats.expenses_change,isHover:!1},{icon:"tabler-chart-line",color:"success",title:"Net Profit",value:u(l(t.stats.net_profit)),change:t.stats.profit_change,isHover:!1},{icon:"tabler-percentage",color:"warning",title:"Profit Margin",value:`${l(t.stats.profit_margin).toFixed(2)}%`,change:t.stats.margin_change,isHover:!1}],t.top_stores_sales&&t.top_stores_sales.length>0&&(T.value=[{name:"Sales",data:t.top_stores_sales.map(e=>l(e.sales))}],d.value=t.top_stores_sales.map(e=>e.name||"Unknown Store")),t.top_stores_royalty&&t.top_stores_royalty.length>0&&(H.value=[{name:"Royalty",data:t.top_stores_royalty.map(e=>l(e.royalty))}],d.value.length===0&&(d.value=t.top_stores_royalty.map(e=>e.name||"Unknown Store"))),t.sales_chart&&t.sales_chart.length>0&&(w.value=[{name:"Sales",data:t.sales_chart.map(e=>l(e.amount))}],V.value=t.sales_chart.map(e=>e.month)),t.expenses_chart&&(R.value=[{name:"Expenses",data:t.expenses_chart.map(e=>l(e.amount))}]),t.profit_chart&&(C.value=[{name:"Profit",data:t.profit_chart.map(e=>l(e.amount))}]),t.royalty_chart&&(A.value=[{name:"Royalty",data:t.royalty_chart.map(e=>l(e.amount))}]),t.monthly_breakdown&&(M.value=t.monthly_breakdown)}});const P=[{icon:B,color:"primary",title:"Total Sales",value:"SAR 0",change:0,isHover:!1},{icon:"tabler-receipt",color:"error",title:"Total Expenses",value:"SAR 0",change:0,isHover:!1},{icon:"tabler-chart-line",color:"success",title:"Net Profit",value:"SAR 0",change:0,isHover:!1},{icon:"tabler-percentage",color:"warning",title:"Profit Margin",value:"0%",change:0,isHover:!1}],L=f(()=>k.value.length>0?k.value:P),E=f(()=>({chart:{type:"bar",toolbar:{show:!1},parentHeightOffset:0},plotOptions:{bar:{horizontal:!0,borderRadius:8,barHeight:"60%"}},dataLabels:{enabled:!0,formatter(s){return`${(s/1e3).toFixed(0)}k SAR`},style:{colors:["#fff"],fontSize:"13px",fontWeight:500}},colors:[n.primary],xaxis:{categories:d.value.length>0?d.value:["No data available"],labels:{style:{colors:h,fontSize:"13px"},formatter(s){return`${(s/1e3).toFixed(0)}k SAR`}},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{style:{colors:h,fontSize:"13px"}}},grid:{strokeDashArray:8,borderColor:x,xaxis:{lines:{show:!0}},yaxis:{lines:{show:!1}},padding:{top:-18,left:21,right:25,bottom:10}},tooltip:{theme:S.current.value.dark?"dark":"light",y:{formatter(s){return`${s.toLocaleString()} SAR`}}}})),O=f(()=>({chart:{type:"bar",toolbar:{show:!1},parentHeightOffset:0},plotOptions:{bar:{horizontal:!0,borderRadius:8,barHeight:"60%"}},dataLabels:{enabled:!0,formatter(s){return`${(s/1e3).toFixed(1)}k SAR`},style:{colors:["#fff"],fontSize:"13px",fontWeight:500}},colors:[n.warning],xaxis:{categories:d.value.length>0?d.value:["No data available"],labels:{style:{colors:h,fontSize:"13px"},formatter(s){return`${(s/1e3).toFixed(0)}k SAR`}},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{style:{colors:h,fontSize:"13px"}}},grid:{strokeDashArray:8,borderColor:x,xaxis:{lines:{show:!0}},yaxis:{lines:{show:!1}},padding:{top:-18,left:21,right:25,bottom:10}},tooltip:{theme:S.current.value.dark?"dark":"light",y:{formatter(s){return`${s.toLocaleString()} SAR`}}}})),W=f(()=>[{name:"Sales",data:w.value.length>0?w.value[0].data:[]},{name:"Expenses",data:R.value.length>0?R.value[0].data:[]},{name:"Royalties",data:A.value.length>0?A.value[0].data:[]},{name:"Profit",data:C.value.length>0?C.value[0].data:[]}]),I=f(()=>({chart:{type:"line",stacked:!1,parentHeightOffset:0,toolbar:{show:!1},zoom:{enabled:!1}},markers:{size:4,colors:"#fff",strokeColors:[n.primary,n.error,n.warning,n.success],hover:{size:5},borderRadius:4},stroke:{curve:"smooth",width:3,lineCap:"round"},legend:{show:!0,position:"top",horizontalAlign:"left",markers:{width:10,height:10,offsetX:-3},fontSize:"14px",fontWeight:400,labels:{colors:ve},itemMargin:{horizontal:12,vertical:8}},grid:{strokeDashArray:8,borderColor:x},colors:[n.primary,n.error,n.warning,n.success],dataLabels:{enabled:!1},xaxis:{categories:V.value.length>0?V.value:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],labels:{style:{colors:h,fontSize:"13px",fontWeight:400}},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{style:{colors:h,fontSize:"13px",fontWeight:400},formatter(s){return`${(s/1e3).toFixed(0)}k SAR`}}},tooltip:{theme:S.current.value.dark?"dark":"light",y:{formatter(s){return`${s.toLocaleString()} SAR`}}}})),J=f(()=>M.value.map(s=>({month:s.month,sales:u(l(s.sales)),expenses:u(l(s.expenses)),royalties:u(l(s.royalties)),profit:u(l(s.profit))}))),U=[{title:"Month",key:"month"},{title:"Sales",key:"sales",align:"end"},{title:"Expenses",key:"expenses",align:"end"},{title:"Royalties",key:"royalties",align:"end"},{title:"Profit",key:"profit",align:"end"}];return(s,r)=>{const t=j;return F(),$("section",null,[a(_,{class:"mb-6"},{default:o(()=>[(F(!0),$(ae,null,oe(p(L),(e,q)=>(F(),se(y,{key:q,cols:"12",md:"3",sm:"6"},{default:o(()=>[a(g,{class:"finance-card-statistics cursor-pointer",style:x,onMouseenter:X=>e.isHover=!0,onMouseleave:X=>e.isHover=!1},{default:o(()=>[a(v,null,{default:o(()=>[i("div",ce,[a(Y,{variant:"tonal",color:e.color,rounded:""},{default:o(()=>[a(re,{icon:e.icon,size:"28"},null,8,["icon"])]),_:2},1032,["color"]),i("h4",me,m(e.value),1)]),i("div",pe,m(e.title),1),i("div",de,[i("h6",ue,m(e.change>0?"+":"")+" "+m(e.change)+"% ",1),r[0]||(r[0]=i("div",{class:"text-sm text-disabled"}," than last month ",-1))])]),_:2},1024)]),_:2},1032,["onMouseenter","onMouseleave"])]),_:2},1024))),128))]),_:1}),a(_,{class:"mb-6"},{default:o(()=>[a(y,{cols:"12",md:"6"},{default:o(()=>[a(g,null,{default:o(()=>[a(z,{title:"Top 5 Stores by Monthly Sales",subtitle:"Performance comparison"},{append:o(()=>[a(D,{variant:"tonal",size:"small","append-icon":"tabler-chevron-down"},{default:o(()=>r[1]||(r[1]=[b(" This Month ")])),_:1,__:[1]})]),_:1}),a(v,null,{default:o(()=>[a(t,{type:"bar",height:"320",options:p(E),series:p(T)},null,8,["options","series"])]),_:1})]),_:1})]),_:1}),a(y,{cols:"12",md:"6"},{default:o(()=>[a(g,null,{default:o(()=>[a(z,{title:"Top 5 Stores by Monthly Royalty",subtitle:"Royalty contributions"},{append:o(()=>[a(D,{variant:"tonal",size:"small","append-icon":"tabler-chevron-down"},{default:o(()=>r[2]||(r[2]=[b(" This Month ")])),_:1,__:[2]})]),_:1}),a(v,null,{default:o(()=>[a(t,{type:"bar",height:"320",options:p(O),series:p(H)},null,8,["options","series"])]),_:1})]),_:1})]),_:1})]),_:1}),a(_,{class:"mb-6"},{default:o(()=>[a(y,{cols:"12"},{default:o(()=>[a(g,null,{default:o(()=>[a(v,null,{default:o(()=>[a(t,{type:"line",height:"400",options:p(I),series:p(W)},null,8,["options","series"])]),_:1})]),_:1})]),_:1})]),_:1}),a(_,null,{default:o(()=>[a(y,{cols:"12"},{default:o(()=>[a(g,null,{default:o(()=>[a(z,{class:"pb-4"},{default:o(()=>[a(K,null,{default:o(()=>r[3]||(r[3]=[b("Monthly Financial Breakdown")])),_:1,__:[3]}),a(Q,null,{default:o(()=>r[4]||(r[4]=[b("Detailed monthly statistics")])),_:1,__:[4]})]),_:1}),a(le),a(ie,{headers:U,items:p(J),"hide-default-footer":"",class:"text-no-wrap"},{"item.month":o(({item:e})=>[i("div",fe,m(e.month),1)]),"item.sales":o(({item:e})=>[i("div",he,m(e.sales),1)]),"item.expenses":o(({item:e})=>[i("div",ye,m(e.expenses),1)]),"item.royalties":o(({item:e})=>[i("div",ge,m(e.royalties),1)]),"item.profit":o(({item:e})=>[i("div",_e,m(e.profit),1)]),_:1},8,["items"])]),_:1})]),_:1})]),_:1})])}}}),nt=ne(be,[["__scopeId","data-v-a1307e1e"]]);export{nt as default};
