import{V as h,_ as F}from"./VDialog-CEq2jzbd.js";import{f as S}from"./franchisee-dashboard-CYv47Cko.js";import{V as C,a as n}from"./VRow-LlT6Azsr.js";import{V as p,a as J,b as K}from"./VCard-D9PhtsJ0.js";import{V as m}from"./VCardText-Cbtr6Qhr.js";import{V as k}from"./VAvatar-87LH5tAk.js";import{d as Q,r as x,G as W,P as V,c as X,b as t,f as e,aR as I,m as o,o as T,e as a,ax as _,v as r,t as u,a9 as D,g as M,l as P}from"./main-B8QbR-yS.js";import{V as Y}from"./VDivider-DOfIMbJY.js";import{V as Z}from"./VDataTable-FYAU2aQJ.js";import{V as tt}from"./VMenu-TQcmpCCv.js";import{V as et,a as $,b as B}from"./VList-BJCgULVd.js";import{V as y}from"./VChip-CgHwmC-k.js";import{V as N}from"./VSpacer-BSXBFFTK.js";import{V as st}from"./VSelect-GSzN3Qps.js";import"./VOverlay-B3La6Ajr.js";import"./forwardRefs--KQCZfKO.js";import"./scopeId-DyQ6a1uN.js";import"./VImg-Ceu2Mboj.js";import"./dialog-transition-Dy2Gj1XO.js";/* empty css              */import"./VCheckboxBtn-CWPoGbRz.js";import"./VSelectionControl-DDEVNAf7.js";import"./form-Dt-W1fp6.js";import"./VTable-CgkStP3y.js";import"./VSlideGroup-BuNiGLv2.js";import"./VTextField-C7_y5spr.js";import"./VField-Bw51LFql.js";import"./VInput-DB3XZUVb.js";const at={class:"ms-4"},lt={class:"text-h4"},ot={class:"ms-4"},it={class:"text-h4"},dt={class:"ms-4"},rt={class:"text-h4"},nt={class:"ms-4"},ut={class:"text-h4"},ct={class:"text-base font-weight-medium"},mt={class:"text-body-2 text-disabled"},ft={class:"text-h6 mb-2"},pt={class:"text-body-1 mb-4"},_t={class:"text-body-1"},vt={class:"text-body-1"},bt={class:"text-body-1"},xt={class:"mb-4"},yt={class:"text-base font-weight-medium mb-2"},kt={class:"text-body-2 text-disabled"},Wt=Q({__name:"my-tasks",setup(Vt){const v=x(!1),f=x(!1),i=x(null),c=x([]),w=x(!1),L=async()=>{try{w.value=!0;const l=await S.getMyTasks();l.success&&(c.value=l.data)}catch(l){console.error("Error loading tasks:",l)}finally{w.value=!1}};W(async()=>{await L()});const A=V(()=>c.value.length),E=V(()=>c.value.filter(l=>l.status==="completed").length),R=V(()=>c.value.filter(l=>l.status==="in_progress").length),U=V(()=>{const l=new Date;return c.value.filter(s=>new Date(s.dueDate)<=l&&!["completed","cancelled"].includes(s.status)).length}),g=l=>l==="completed"?"success":l==="in_progress"?"warning":l==="pending"?"info":l==="cancelled"?"error":"secondary",z=l=>l==="high"?"error":l==="medium"?"warning":l==="low"?"info":"secondary",H=[{title:"Task Info",key:"taskInfo"},{title:"Category",key:"category"},{title:"Start Date",key:"startDate"},{title:"Due Date",key:"dueDate"},{title:"Priority",key:"priority"},{title:"Status",key:"status"},{title:"Actions",key:"actions",sortable:!1}],q=l=>{i.value=l,v.value=!0},G=l=>{i.value={...l},f.value=!0},O=async l=>{if(i.value)try{if((await S.updateMyTaskStatus(i.value.id,l)).success){const b=c.value.findIndex(d=>d.id===i.value.id);b!==-1&&(c.value[b].status=l),f.value=!1,i.value=null}}catch(s){console.error("Error updating task status:",s)}};return(l,s)=>{const b=F;return T(),X("section",null,[t(C,{class:"mb-6"},{default:e(()=>[t(n,{cols:"12"},{default:e(()=>s[6]||(s[6]=[a("div",null,[a("h2",{class:"text-h2 mb-1"}," My Tasks "),a("p",{class:"text-body-1 text-medium-emphasis"}," Track and manage tasks assigned to you ")],-1)])),_:1,__:[6]})]),_:1}),t(C,{class:"mb-6"},{default:e(()=>[t(n,{cols:"12",md:"3"},{default:e(()=>[t(p,null,{default:e(()=>[t(m,{class:"d-flex align-center"},{default:e(()=>[t(k,{size:"44",rounded:"",color:"primary",variant:"tonal"},{default:e(()=>[t(_,{icon:"tabler-checklist",size:"26"})]),_:1}),a("div",at,[s[7]||(s[7]=a("div",{class:"text-body-2 text-disabled"}," Total Tasks ",-1)),a("h4",lt,r(o(A)),1)])]),_:1})]),_:1})]),_:1}),t(n,{cols:"12",md:"3"},{default:e(()=>[t(p,null,{default:e(()=>[t(m,{class:"d-flex align-center"},{default:e(()=>[t(k,{size:"44",rounded:"",color:"success",variant:"tonal"},{default:e(()=>[t(_,{icon:"tabler-check",size:"26"})]),_:1}),a("div",ot,[s[8]||(s[8]=a("div",{class:"text-body-2 text-disabled"}," Completed ",-1)),a("h4",it,r(o(E)),1)])]),_:1})]),_:1})]),_:1}),t(n,{cols:"12",md:"3"},{default:e(()=>[t(p,null,{default:e(()=>[t(m,{class:"d-flex align-center"},{default:e(()=>[t(k,{size:"44",rounded:"",color:"warning",variant:"tonal"},{default:e(()=>[t(_,{icon:"tabler-clock",size:"26"})]),_:1}),a("div",dt,[s[9]||(s[9]=a("div",{class:"text-body-2 text-disabled"}," In Progress ",-1)),a("h4",rt,r(o(R)),1)])]),_:1})]),_:1})]),_:1}),t(n,{cols:"12",md:"3"},{default:e(()=>[t(p,null,{default:e(()=>[t(m,{class:"d-flex align-center"},{default:e(()=>[t(k,{size:"44",rounded:"",color:"error",variant:"tonal"},{default:e(()=>[t(_,{icon:"tabler-alert-circle",size:"26"})]),_:1}),a("div",nt,[s[10]||(s[10]=a("div",{class:"text-body-2 text-disabled"}," Due ",-1)),a("h4",ut,r(o(U)),1)])]),_:1})]),_:1})]),_:1})]),_:1}),t(p,null,{default:e(()=>[t(J,{class:"pb-4"},{default:e(()=>[t(K,null,{default:e(()=>s[11]||(s[11]=[u("My Tasks")])),_:1,__:[11]})]),_:1}),t(Y),t(Z,{items:o(c),headers:H,class:"text-no-wrap","item-value":"id"},{"item.taskInfo":e(({item:d})=>[a("div",null,[a("h6",ct,r(d.title),1),a("div",mt,r(d.description),1)])]),"item.priority":e(({item:d})=>[t(y,{color:z(d.priority),size:"small",label:"",class:"text-capitalize"},{default:e(()=>[u(r(d.priority),1)]),_:2},1032,["color"])]),"item.status":e(({item:d})=>[t(y,{color:g(d.status),size:"small",label:"",class:"text-capitalize"},{default:e(()=>[u(r(d.status),1)]),_:2},1032,["color"])]),"item.actions":e(({item:d})=>[t(D,{icon:"",variant:"text",color:"medium-emphasis",size:"small"},{default:e(()=>[t(_,{icon:"tabler-dots-vertical"}),t(tt,{activator:"parent"},{default:e(()=>[t(et,null,{default:e(()=>[t($,{onClick:j=>q(d)},{prepend:e(()=>[t(_,{icon:"tabler-eye"})]),default:e(()=>[t(B,null,{default:e(()=>s[12]||(s[12]=[u("View")])),_:1,__:[12]})]),_:2},1032,["onClick"]),t($,{onClick:j=>G(d)},{prepend:e(()=>[t(_,{icon:"tabler-refresh"})]),default:e(()=>[t(B,null,{default:e(()=>s[13]||(s[13]=[u("Change Status")])),_:1,__:[13]})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["items"])]),_:1}),t(h,{modelValue:o(v),"onUpdate:modelValue":s[2]||(s[2]=d=>I(v)?v.value=d:null),"max-width":"600"},{default:e(()=>[t(b,{onClick:s[0]||(s[0]=d=>v.value=!1)}),t(p,{title:"Task Details"},{default:e(()=>[o(i)?(T(),M(m,{key:0},{default:e(()=>[t(C,null,{default:e(()=>[t(n,{cols:"12"},{default:e(()=>[a("h6",ft,r(o(i).title),1),a("p",pt,r(o(i).description),1)]),_:1}),t(n,{cols:"12",md:"6"},{default:e(()=>[s[14]||(s[14]=a("div",{class:"text-body-2 text-disabled mb-1"}," Category ",-1)),a("div",_t,r(o(i).category),1)]),_:1,__:[14]}),t(n,{cols:"12",md:"6"},{default:e(()=>[s[15]||(s[15]=a("div",{class:"text-body-2 text-disabled mb-1"}," Start Date ",-1)),a("div",vt,r(o(i).startDate),1)]),_:1,__:[15]}),t(n,{cols:"12",md:"6"},{default:e(()=>[s[16]||(s[16]=a("div",{class:"text-body-2 text-disabled mb-1"}," Due Date ",-1)),a("div",bt,r(o(i).dueDate),1)]),_:1,__:[16]}),t(n,{cols:"12",md:"6"},{default:e(()=>[s[17]||(s[17]=a("div",{class:"text-body-2 text-disabled mb-1"}," Priority ",-1)),t(y,{color:z(o(i).priority),size:"small",label:"",class:"text-capitalize"},{default:e(()=>[u(r(o(i).priority),1)]),_:1},8,["color"])]),_:1,__:[17]}),t(n,{cols:"12",md:"6"},{default:e(()=>[s[18]||(s[18]=a("div",{class:"text-body-2 text-disabled mb-1"}," Status ",-1)),t(y,{color:g(o(i).status),size:"small",label:"",class:"text-capitalize"},{default:e(()=>[u(r(o(i).status),1)]),_:1},8,["color"])]),_:1,__:[18]})]),_:1})]),_:1})):P("",!0),t(m,{class:"pa-6"},{default:e(()=>[t(N),t(D,{color:"secondary",variant:"tonal",onClick:s[1]||(s[1]=d=>v.value=!1)},{default:e(()=>s[19]||(s[19]=[u(" Close ")])),_:1,__:[19]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(h,{modelValue:o(f),"onUpdate:modelValue":s[5]||(s[5]=d=>I(f)?f.value=d:null),"max-width":"600"},{default:e(()=>[t(b,{onClick:s[3]||(s[3]=d=>f.value=!1)}),t(p,{title:"Change Task Status"},{default:e(()=>[o(i)?(T(),M(m,{key:0},{default:e(()=>[a("div",xt,[a("h6",yt,r(o(i).title),1),a("div",kt,[s[20]||(s[20]=u(" Current Status: ")),t(y,{color:g(o(i).status),size:"small",label:"",class:"text-capitalize ms-2"},{default:e(()=>[u(r(o(i).status),1)]),_:1},8,["color"])])]),t(st,{label:"New Status",items:[{title:"Pending",value:"pending"},{title:"In Progress",value:"in_progress"},{title:"Completed",value:"completed"},{title:"Cancelled",value:"cancelled"},{title:"On Hold",value:"on_hold"}],"model-value":o(i).status,required:"","onUpdate:modelValue":O},null,8,["model-value"])]),_:1})):P("",!0),t(m,{class:"pa-6"},{default:e(()=>[t(N),t(D,{color:"secondary",variant:"tonal",onClick:s[4]||(s[4]=d=>f.value=!1)},{default:e(()=>s[21]||(s[21]=[u(" Cancel ")])),_:1,__:[21]})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}});export{Wt as default};
