import{_ as Z}from"./AppStepper.vue_vue_type_style_index_0_lang-CyYc2fwp.js";import{V as L}from"./VForm-aksOmHMd.js";import{V as U,a as m}from"./VRow-Cak-Lgex.js";import{V as _}from"./VFileInput-CNXbIWfi.js";import{V as j,a as X}from"./VAlert-D8c2ku7U.js";import{d as k,P as q,c as E,o as C,e as u,b as e,f as l,m as a,t as f,g as P,l as M,v as V,aa as h,G as ee,j as le,r as O,F as te,x as ae,c2 as oe,au as z,a3 as B,aO as Y}from"./main-D0PmdS1Y.js";import{_ as J}from"./AppTextarea.vue_vue_type_script_setup_true_lang-Df47XM_g.js";import{_ as K}from"./AppSelect.vue_vue_type_script_setup_true_lang-CDeD-2O6.js";import{_ as W}from"./AppTextField.vue_vue_type_script_setup_true_lang-Bd9HByxJ.js";import{c as ne,V as $,b as T}from"./VExpansionPanels-BBnTMcHz.js";import{V as se,a as x,b as I}from"./VList-pUfpgzrf.js";import{V as N}from"./VChip-DdEqOyic.js";import{V as H}from"./VCard-B7UpWRaQ.js";import{V as G}from"./VCardText-CIwjKnf_.js";import{V as re}from"./VCheckbox-B_wt_NnE.js";import{u as ie}from"./useFranchisorDashboard-BV6ROw7A.js";import{V as ue}from"./VSnackbar-CuDiPyhR.js";import{a as de,V as R}from"./VWindowItem-DulLYl-I.js";import"./VSlideGroup-CFIWL1zD.js";import"./VAvatar-CxHe0yBd.js";import"./VImg-jjfUM9_b.js";import"./form-BAdaD-wq.js";import"./forwardRefs-C-GTDzx5.js";/* empty css              */import"./VField-D5-MFzvq.js";import"./easing-Bybner-F.js";import"./VInput-DP_kSFGC.js";import"./VCounter-DBvBtD1O.js";import"./VTextarea-l0aNL8-w.js";/* empty css                   */import"./VSelect-RqmmXubD.js";import"./VTextField-B880wQkJ.js";import"./dialog-transition-CIZ4lwe7.js";import"./VMenu-DOD60N4z.js";import"./VOverlay-B9QLNbJM.js";import"./lazy-D5mATHLk.js";import"./scopeId-BKGdYQgZ.js";import"./VCheckboxBtn-Zi_PB_hu.js";import"./VSelectionControl-mXH6gVlO.js";import"./ssrBoot-BefThYZR.js";import"./VDivider-BtoRnDHG.js";const me=k({__name:"DocumentUpload",props:{formData:{}},emits:["update:formData"],setup(A,{emit:y}){const w=A,D=y,o=q({get:()=>w.formData,set:p=>D("update:formData",p)});return(p,t)=>(C(),E("div",null,[t[7]||(t[7]=u("div",{class:"text-h4 mb-1"}," Upload Documents ",-1)),t[8]||(t[8]=u("p",{class:"text-body-1 mb-6"}," Please upload all required franchise documents ",-1)),e(L,null,{default:l(()=>[e(U,null,{default:l(()=>[e(m,{cols:"12"},{default:l(()=>[e(_,{modelValue:a(o).fdd,"onUpdate:modelValue":t[0]||(t[0]=s=>a(o).fdd=s),label:"Franchise Disclosure Document (FDD)",accept:".pdf,.doc,.docx","prepend-icon":"tabler-file-text",required:"",hint:"Required document - PDF, DOC, or DOCX format","persistent-hint":""},null,8,["modelValue"])]),_:1}),e(m,{cols:"12"},{default:l(()=>[e(_,{modelValue:a(o).franchiseAgreement,"onUpdate:modelValue":t[1]||(t[1]=s=>a(o).franchiseAgreement=s),label:"Franchise Agreement",accept:".pdf,.doc,.docx","prepend-icon":"tabler-file-text",required:"",hint:"Required document - PDF, DOC, or DOCX format","persistent-hint":""},null,8,["modelValue"])]),_:1}),e(m,{cols:"12"},{default:l(()=>[e(_,{modelValue:a(o).operationsManual,"onUpdate:modelValue":t[2]||(t[2]=s=>a(o).operationsManual=s),label:"Operations Manual",accept:".pdf,.doc,.docx","prepend-icon":"tabler-book",hint:"Optional - PDF, DOC, or DOCX format","persistent-hint":""},null,8,["modelValue"])]),_:1}),e(m,{cols:"12"},{default:l(()=>[e(_,{modelValue:a(o).brandGuidelines,"onUpdate:modelValue":t[3]||(t[3]=s=>a(o).brandGuidelines=s),label:"Brand Guidelines",accept:".pdf,.doc,.docx","prepend-icon":"tabler-palette",hint:"Optional - PDF, DOC, or DOCX format","persistent-hint":""},null,8,["modelValue"])]),_:1}),e(m,{cols:"12"},{default:l(()=>[e(_,{modelValue:a(o).legalDocuments,"onUpdate:modelValue":t[4]||(t[4]=s=>a(o).legalDocuments=s),label:"Additional Legal Documents",accept:".pdf,.doc,.docx","prepend-icon":"tabler-files",multiple:"",hint:"Optional - Multiple files allowed","persistent-hint":""},null,8,["modelValue"])]),_:1})]),_:1}),e(j,{type:"info",variant:"tonal",class:"mt-4"},{default:l(()=>[e(X,null,{default:l(()=>t[5]||(t[5]=[f("Document Requirements")])),_:1,__:[5]}),t[6]||(t[6]=u("ul",{class:"mt-2"},[u("li",null,"All documents must be in PDF, DOC, or DOCX format"),u("li",null,"Maximum file size: 10MB per document"),u("li",null,"FDD and Franchise Agreement are required documents"),u("li",null,"Additional documents help expedite the review process")],-1))]),_:1,__:[6]})]),_:1})]))}}),pe=k({__name:"FranchiseDetails",props:{formData:{}},emits:["update:formData"],setup(A,{emit:y}){const w=A,D=y,o=q({get:()=>w.formData,set:F=>D("update:formData",F)}),p=[{title:"United States",value:"United States"},{title:"Canada",value:"Canada"},{title:"United Kingdom",value:"United Kingdom"},{title:"Australia",value:"Australia"},{title:"Germany",value:"Germany"},{title:"France",value:"France"},{title:"Japan",value:"Japan"},{title:"Brazil",value:"Brazil"},{title:"India",value:"India"},{title:"Mexico",value:"Mexico"}],t=[{title:"Corporation",value:"corporation"},{title:"LLC",value:"llc"},{title:"Partnership",value:"partnership"},{title:"Sole Proprietorship",value:"sole_proprietorship"}],s=[{title:"Food & Beverage",value:"food_beverage"},{title:"Retail",value:"retail"},{title:"Services",value:"services"},{title:"Health & Fitness",value:"health_fitness"},{title:"Education",value:"education"},{title:"Technology",value:"technology"},{title:"Real Estate",value:"real_estate"},{title:"Automotive",value:"automotive"}],d=[{title:"Personal Savings",value:"personal_savings"},{title:"Bank Loan",value:"bank_loan"},{title:"Investors",value:"investors"},{title:"SBA Loan",value:"sba_loan"},{title:"Other",value:"other"}];return(F,r)=>{const c=W,i=K,g=J;return C(),E("div",null,[r[18]||(r[18]=u("div",{class:"text-h4 mb-1"}," Franchise & Legal Details ",-1)),r[19]||(r[19]=u("p",{class:"text-body-1 mb-6"}," Provide comprehensive information about your franchise ",-1)),e(L,null,{default:l(()=>[r[15]||(r[15]=u("h4",{class:"text-h6 mb-3"}," Franchise Information ",-1)),e(U,{class:"mb-4"},{default:l(()=>[e(m,{cols:"12",md:"6"},{default:l(()=>[e(c,{modelValue:a(o).franchiseDetails.franchiseName,"onUpdate:modelValue":r[0]||(r[0]=n=>a(o).franchiseDetails.franchiseName=n),label:"Franchise Name",placeholder:"Enter franchise name",required:""},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"6"},{default:l(()=>[e(c,{modelValue:a(o).franchiseDetails.website,"onUpdate:modelValue":r[1]||(r[1]=n=>a(o).franchiseDetails.website=n),label:"Website",placeholder:"https://example.com"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12"},{default:l(()=>[e(_,{modelValue:a(o).franchiseDetails.logo,"onUpdate:modelValue":r[2]||(r[2]=n=>a(o).franchiseDetails.logo=n),label:"Franchise Logo",accept:"image/*","prepend-icon":"tabler-upload"},null,8,["modelValue"])]),_:1})]),_:1}),r[16]||(r[16]=u("h4",{class:"text-h6 mb-3"}," Legal Information ",-1)),e(U,{class:"mb-4"},{default:l(()=>[e(m,{cols:"12",md:"6"},{default:l(()=>[e(c,{modelValue:a(o).legalDetails.legalEntityName,"onUpdate:modelValue":r[3]||(r[3]=n=>a(o).legalDetails.legalEntityName=n),label:"Legal Entity Name",placeholder:"Enter legal entity name",required:""},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"6"},{default:l(()=>[e(i,{modelValue:a(o).legalDetails.businessStructure,"onUpdate:modelValue":r[4]||(r[4]=n=>a(o).legalDetails.businessStructure=n),label:"Business Structure",items:t,placeholder:"Select business structure",required:""},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"6"},{default:l(()=>[e(c,{modelValue:a(o).legalDetails.taxId,"onUpdate:modelValue":r[5]||(r[5]=n=>a(o).legalDetails.taxId=n),label:"Tax ID",placeholder:"Enter tax identification number"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"6"},{default:l(()=>[e(i,{modelValue:a(o).legalDetails.industry,"onUpdate:modelValue":r[6]||(r[6]=n=>a(o).legalDetails.industry=n),label:"Industry/Sector",items:s,placeholder:"Select industry"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"6"},{default:l(()=>[e(c,{modelValue:a(o).legalDetails.fundingAmount,"onUpdate:modelValue":r[7]||(r[7]=n=>a(o).legalDetails.fundingAmount=n),label:"Secured Funding Amount",placeholder:"$0.00",type:"number"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"6"},{default:l(()=>[e(i,{modelValue:a(o).legalDetails.fundingSource,"onUpdate:modelValue":r[8]||(r[8]=n=>a(o).legalDetails.fundingSource=n),label:"Source of Funding",items:d,placeholder:"Select funding source"},null,8,["modelValue"])]),_:1})]),_:1}),r[17]||(r[17]=u("h4",{class:"text-h6 mb-3"}," Contact Information ",-1)),e(U,null,{default:l(()=>[e(m,{cols:"12",md:"6"},{default:l(()=>[e(c,{modelValue:a(o).contactDetails.contactNumber,"onUpdate:modelValue":r[9]||(r[9]=n=>a(o).contactDetails.contactNumber=n),label:"Business Contact Number",placeholder:"Enter business contact number"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"6"},{default:l(()=>[e(c,{modelValue:a(o).contactDetails.email,"onUpdate:modelValue":r[10]||(r[10]=n=>a(o).contactDetails.email=n),label:"Business Email",placeholder:"business@example.com",type:"email"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12"},{default:l(()=>[e(g,{modelValue:a(o).contactDetails.address,"onUpdate:modelValue":r[11]||(r[11]=n=>a(o).contactDetails.address=n),label:"Business Address",placeholder:"Enter business address",rows:"3"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"4"},{default:l(()=>[e(i,{modelValue:a(o).contactDetails.country,"onUpdate:modelValue":r[12]||(r[12]=n=>a(o).contactDetails.country=n),label:"Country",items:p,placeholder:"Select country"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"4"},{default:l(()=>[e(c,{modelValue:a(o).contactDetails.state,"onUpdate:modelValue":r[13]||(r[13]=n=>a(o).contactDetails.state=n),label:"State/Province",placeholder:"Enter state"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"4"},{default:l(()=>[e(c,{modelValue:a(o).contactDetails.city,"onUpdate:modelValue":r[14]||(r[14]=n=>a(o).contactDetails.city=n),label:"City",placeholder:"Enter city"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1,__:[15,16,17]})])}}}),fe=k({__name:"PersonalInfo",props:{formData:{}},emits:["update:formData"],setup(A,{emit:y}){const w=A,D=y,o=q({get:()=>w.formData,set:t=>D("update:formData",t)}),p=[{title:"United States",value:"United States"},{title:"Canada",value:"Canada"},{title:"United Kingdom",value:"United Kingdom"},{title:"Australia",value:"Australia"},{title:"Germany",value:"Germany"},{title:"France",value:"France"},{title:"Japan",value:"Japan"},{title:"Brazil",value:"Brazil"},{title:"India",value:"India"},{title:"Mexico",value:"Mexico"}];return(t,s)=>{const d=W,F=K,r=J;return C(),E("div",null,[s[5]||(s[5]=u("div",{class:"text-h4 mb-1"}," Personal Information ",-1)),s[6]||(s[6]=u("p",{class:"text-body-1 mb-6"}," Please provide your personal contact details ",-1)),e(L,null,{default:l(()=>[e(U,null,{default:l(()=>[e(m,{cols:"12",md:"6"},{default:l(()=>[e(d,{modelValue:a(o).contactNumber,"onUpdate:modelValue":s[0]||(s[0]=c=>a(o).contactNumber=c),label:"Contact Number",placeholder:"Enter your contact number",required:""},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"6"},{default:l(()=>[e(F,{modelValue:a(o).country,"onUpdate:modelValue":s[1]||(s[1]=c=>a(o).country=c),label:"Country",items:p,placeholder:"Select country",required:""},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"6"},{default:l(()=>[e(d,{modelValue:a(o).state,"onUpdate:modelValue":s[2]||(s[2]=c=>a(o).state=c),label:"State/Province",placeholder:"Enter state or province"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"6"},{default:l(()=>[e(d,{modelValue:a(o).city,"onUpdate:modelValue":s[3]||(s[3]=c=>a(o).city=c),label:"City",placeholder:"Enter city",required:""},null,8,["modelValue"])]),_:1}),e(m,{cols:"12"},{default:l(()=>[e(r,{modelValue:a(o).address,"onUpdate:modelValue":s[4]||(s[4]=c=>a(o).address=c),label:"Address",placeholder:"Enter your full address",rows:"3"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})])}}}),ce=k({__name:"ReviewComplete",props:{formData:{},allFormData:{}},emits:["update:formData"],setup(A,{emit:y}){const w=A,D=y,o=q({get:()=>w.formData,set:p=>D("update:formData",p)});return(p,t)=>(C(),E("div",null,[t[25]||(t[25]=u("div",{class:"text-h4 mb-1"}," Review & Complete ",-1)),t[26]||(t[26]=u("p",{class:"text-body-1 mb-6"}," Please review all information before submitting your franchise registration ",-1)),e(ne,{class:"mb-6"},{default:l(()=>[e($,{title:"Personal Information"},{default:l(()=>[e(T,null,{default:l(()=>[e(U,null,{default:l(()=>[e(m,{cols:"6"},{default:l(()=>[t[1]||(t[1]=u("strong",null,"Contact:",-1)),f(" "+V(p.allFormData.personalInfo.contactNumber||"Not provided"),1)]),_:1,__:[1]}),e(m,{cols:"6"},{default:l(()=>[t[2]||(t[2]=u("strong",null,"Country:",-1)),f(" "+V(p.allFormData.personalInfo.country||"Not provided"),1)]),_:1,__:[2]}),e(m,{cols:"6"},{default:l(()=>[t[3]||(t[3]=u("strong",null,"State:",-1)),f(" "+V(p.allFormData.personalInfo.state||"Not provided"),1)]),_:1,__:[3]}),e(m,{cols:"6"},{default:l(()=>[t[4]||(t[4]=u("strong",null,"City:",-1)),f(" "+V(p.allFormData.personalInfo.city||"Not provided"),1)]),_:1,__:[4]}),e(m,{cols:"12"},{default:l(()=>[t[5]||(t[5]=u("strong",null,"Address:",-1)),f(" "+V(p.allFormData.personalInfo.address||"Not provided"),1)]),_:1,__:[5]})]),_:1})]),_:1})]),_:1}),e($,{title:"Franchise Details"},{default:l(()=>[e(T,null,{default:l(()=>[e(U,null,{default:l(()=>[e(m,{cols:"6"},{default:l(()=>{var s,d;return[t[6]||(t[6]=u("strong",null,"Franchise Name:",-1)),f(" "+V(((d=(s=p.allFormData.franchiseDetails)==null?void 0:s.franchiseDetails)==null?void 0:d.franchiseName)||"Not provided"),1)]}),_:1,__:[6]}),e(m,{cols:"6"},{default:l(()=>{var s,d;return[t[7]||(t[7]=u("strong",null,"Website:",-1)),f(" "+V(((d=(s=p.allFormData.franchiseDetails)==null?void 0:s.franchiseDetails)==null?void 0:d.website)||"Not provided"),1)]}),_:1,__:[7]}),e(m,{cols:"6"},{default:l(()=>{var s,d;return[t[8]||(t[8]=u("strong",null,"Legal Entity:",-1)),f(" "+V(((d=(s=p.allFormData.franchiseDetails)==null?void 0:s.legalDetails)==null?void 0:d.legalEntityName)||"Not provided"),1)]}),_:1,__:[8]}),e(m,{cols:"6"},{default:l(()=>{var s,d;return[t[9]||(t[9]=u("strong",null,"Business Structure:",-1)),f(" "+V(((d=(s=p.allFormData.franchiseDetails)==null?void 0:s.legalDetails)==null?void 0:d.businessStructure)||"Not provided"),1)]}),_:1,__:[9]}),e(m,{cols:"6"},{default:l(()=>{var s,d;return[t[10]||(t[10]=u("strong",null,"Industry:",-1)),f(" "+V(((d=(s=p.allFormData.franchiseDetails)==null?void 0:s.legalDetails)==null?void 0:d.industry)||"Not provided"),1)]}),_:1,__:[10]}),e(m,{cols:"6"},{default:l(()=>{var s,d;return[t[11]||(t[11]=u("strong",null,"Funding Amount:",-1)),f(" "+V(((d=(s=p.allFormData.franchiseDetails)==null?void 0:s.legalDetails)==null?void 0:d.fundingAmount)||"Not provided"),1)]}),_:1,__:[11]})]),_:1})]),_:1})]),_:1}),e($,{title:"Documents"},{default:l(()=>[e(T,null,{default:l(()=>[e(se,null,{default:l(()=>[e(x,null,{default:l(()=>[e(I,null,{default:l(()=>[e(h,{icon:p.allFormData.documents.fdd?"tabler-check":"tabler-x",color:p.allFormData.documents.fdd?"success":"error",class:"me-2"},null,8,["icon","color"]),t[13]||(t[13]=f(" Franchise Disclosure Document (FDD) ")),p.allFormData.documents.fdd?M("",!0):(C(),P(N,{key:0,color:"error",size:"small",class:"ms-2"},{default:l(()=>t[12]||(t[12]=[f(" Required ")])),_:1,__:[12]}))]),_:1,__:[13]})]),_:1}),e(x,null,{default:l(()=>[e(I,null,{default:l(()=>[e(h,{icon:p.allFormData.documents.franchiseAgreement?"tabler-check":"tabler-x",color:p.allFormData.documents.franchiseAgreement?"success":"error",class:"me-2"},null,8,["icon","color"]),t[15]||(t[15]=f(" Franchise Agreement ")),p.allFormData.documents.franchiseAgreement?M("",!0):(C(),P(N,{key:0,color:"error",size:"small",class:"ms-2"},{default:l(()=>t[14]||(t[14]=[f(" Required ")])),_:1,__:[14]}))]),_:1,__:[15]})]),_:1}),e(x,null,{default:l(()=>[e(I,null,{default:l(()=>[e(h,{icon:p.allFormData.documents.operationsManual?"tabler-check":"tabler-minus",color:p.allFormData.documents.operationsManual?"success":"secondary",class:"me-2"},null,8,["icon","color"]),t[17]||(t[17]=f(" Operations Manual ")),e(N,{color:"secondary",size:"small",class:"ms-2"},{default:l(()=>t[16]||(t[16]=[f(" Optional ")])),_:1,__:[16]})]),_:1,__:[17]})]),_:1}),e(x,null,{default:l(()=>[e(I,null,{default:l(()=>[e(h,{icon:p.allFormData.documents.brandGuidelines?"tabler-check":"tabler-minus",color:p.allFormData.documents.brandGuidelines?"success":"secondary",class:"me-2"},null,8,["icon","color"]),t[19]||(t[19]=f(" Brand Guidelines ")),e(N,{color:"secondary",size:"small",class:"ms-2"},{default:l(()=>t[18]||(t[18]=[f(" Optional ")])),_:1,__:[18]})]),_:1,__:[19]})]),_:1}),e(x,null,{default:l(()=>[e(I,null,{default:l(()=>[e(h,{icon:p.allFormData.documents.legalDocuments?"tabler-check":"tabler-minus",color:p.allFormData.documents.legalDocuments?"success":"secondary",class:"me-2"},null,8,["icon","color"]),t[21]||(t[21]=f(" Additional Legal Documents ")),e(N,{color:"secondary",size:"small",class:"ms-2"},{default:l(()=>t[20]||(t[20]=[f(" Optional ")])),_:1,__:[20]})]),_:1,__:[21]})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(H,{variant:"outlined",class:"mb-4"},{default:l(()=>[e(G,{class:"pa-4",style:{"max-height":"300px","overflow-y":"auto"}},{default:l(()=>t[22]||(t[22]=[u("h4",{class:"text-h6 mb-3"}," Franchise Registration Terms & Conditions ",-1),u("p",{class:"mb-3"}," By completing this registration, you agree to the following terms and conditions: ",-1),u("ul",{class:"mb-3"},[u("li",null,"All information provided is accurate and complete"),u("li",null,"You have the legal authority to enter into franchise agreements"),u("li",null,"You understand the financial commitments involved"),u("li",null,"You agree to comply with all franchise requirements and standards"),u("li",null,"You acknowledge receipt of the Franchise Disclosure Document"),u("li",null,"You understand this registration is subject to review and approval"),u("li",null,"You agree to maintain confidentiality of proprietary information")],-1),u("p",{class:"mb-0"},[u("strong",null,"Important:"),f(" This registration does not constitute a binding franchise agreement. Final agreements will be executed separately following review and approval by our franchise team. ")],-1)])),_:1,__:[22]})]),_:1}),e(re,{modelValue:a(o).termsAccepted,"onUpdate:modelValue":t[0]||(t[0]=s=>a(o).termsAccepted=s),label:"I have read and agree to the terms and conditions",required:"",color:"primary"},null,8,["modelValue"]),a(o).termsAccepted?M("",!0):(C(),P(j,{key:0,type:"warning",variant:"tonal",class:"mt-4"},{default:l(()=>[e(X,null,{default:l(()=>t[23]||(t[23]=[f("Agreement Required")])),_:1,__:[23]}),t[24]||(t[24]=f(" You must accept the terms and conditions to complete your franchise registration. "))]),_:1,__:[24]}))]))}}),ge={class:"d-flex flex-wrap gap-4 justify-space-between mt-6"},al=k({__name:"franchise-registration",setup(A){const y=le(),{checkFranchiseExists:w}=ie();ee(async()=>{await w()&&await y.push("/franchisor/my-franchise")});const D=O({show:!1,message:"",color:"success"}),o=(c,i="success")=>{D.value={show:!0,message:c,color:i}},p=[{title:"Personal Info",subtitle:"Contact details",icon:"tabler-user"},{title:"Franchise Details",subtitle:"Business information",icon:"tabler-building-store"},{title:"Documents",subtitle:"Upload required files",icon:"tabler-files"},{title:"Review & Complete",subtitle:"Confirm & submit",icon:"tabler-checkbox"}],t=O(0),s=O(!1),d=O({personalInfo:{contactNumber:"",country:"",state:"",city:"",address:""},franchiseDetails:{franchiseDetails:{franchiseName:"",website:"",logo:null},legalDetails:{legalEntityName:"",businessStructure:"",taxId:"",industry:"",fundingAmount:"",fundingSource:""},contactDetails:{contactNumber:"",email:"",address:"",country:"",state:"",city:""}},documents:{fdd:null,franchiseAgreement:null,operationsManual:null,brandGuidelines:null,legalDocuments:null},reviewComplete:{termsAccepted:!1}}),F=async(c,i,g,n)=>{const b=new FormData;return b.append("file",c),b.append("name",i),b.append("description",`${i} uploaded during franchise registration`),b.append("type",g),await Y(`/v1/documents/${n}`,{method:"POST",body:b})},r=async()=>{var c,i;s.value=!0;try{console.log("Submitting franchise registration:",d.value);const g=await Y("/v1/franchisor/franchise/register",{method:"POST",body:{personalInfo:d.value.personalInfo,franchiseDetails:d.value.franchiseDetails,reviewComplete:d.value.reviewComplete}});if(!g.success){o(g.message||"Failed to register franchise","error");return}const n=g.data.franchise_id,b=[],v=d.value.documents;if(v.fdd&&b.push(F(v.fdd,"Franchise Disclosure Document (FDD)","contract",n)),v.franchiseAgreement&&b.push(F(v.franchiseAgreement,"Franchise Agreement","agreement",n)),v.operationsManual&&b.push(F(v.operationsManual,"Operations Manual","manual",n)),v.brandGuidelines&&b.push(F(v.brandGuidelines,"Brand Guidelines","other",n)),v.legalDocuments&&v.legalDocuments.length>0&&v.legalDocuments.forEach((S,Q)=>{b.push(F(S,`Legal Document ${Q+1}`,"other",n))}),b.length>0)try{await Promise.all(b),o("Franchise registered successfully with all documents uploaded! Redirecting to dashboard...","success")}catch(S){console.error("Document upload error:",S),o("Franchise registered successfully, but some documents failed to upload. You can upload them later from your dashboard.","warning")}else o("Franchise registered successfully! Redirecting to dashboard...","success");await new Promise(S=>setTimeout(S,2e3)),y.push("/franchisor")}catch(g){if(console.error("Registration error:",g),g.status===422&&((c=g.data)!=null&&c.errors)){const n=Object.values(g.data.errors).flat();o(`Validation failed: ${n.join(", ")}`,"error")}else g.status===400&&((i=g.data)!=null&&i.message)?o(g.data.message,"error"):o("Failed to register franchise. Please try again.","error")}finally{s.value=!1}};return(c,i)=>{const g=Z;return C(),E(te,null,[e(H,null,{default:l(()=>[e(U,{"no-gutters":""},{default:l(()=>[e(m,{cols:"12",md:"4",lg:"3",class:ae(a(oe)().mdAndUp.value?"border-e":"border-b")},{default:l(()=>[e(G,null,{default:l(()=>[e(g,{"current-step":a(t),"onUpdate:currentStep":i[0]||(i[0]=n=>z(t)?t.value=n:null),direction:"vertical",items:p,"icon-size":"22",class:"stepper-icon-step-bg"},null,8,["current-step"])]),_:1})]),_:1},8,["class"]),e(m,{cols:"12",md:"8",lg:"9"},{default:l(()=>[e(G,null,{default:l(()=>[e(de,{modelValue:a(t),"onUpdate:modelValue":i[5]||(i[5]=n=>z(t)?t.value=n:null),class:"disable-tab-transition"},{default:l(()=>[e(R,null,{default:l(()=>[e(fe,{"form-data":a(d).personalInfo,"onUpdate:formData":i[1]||(i[1]=n=>a(d).personalInfo=n)},null,8,["form-data"])]),_:1}),e(R,null,{default:l(()=>[e(pe,{"form-data":a(d).franchiseDetails,"onUpdate:formData":i[2]||(i[2]=n=>a(d).franchiseDetails=n)},null,8,["form-data"])]),_:1}),e(R,null,{default:l(()=>[e(me,{"form-data":a(d).documents,"onUpdate:formData":i[3]||(i[3]=n=>a(d).documents=n)},null,8,["form-data"])]),_:1}),e(R,null,{default:l(()=>[e(ce,{"form-data":a(d).reviewComplete,"onUpdate:formData":i[4]||(i[4]=n=>a(d).reviewComplete=n),"all-form-data":a(d)},null,8,["form-data","all-form-data"])]),_:1})]),_:1},8,["modelValue"]),u("div",ge,[e(B,{color:"secondary",variant:"tonal",disabled:a(t)===0,onClick:i[6]||(i[6]=n=>t.value--)},{default:l(()=>[e(h,{icon:"tabler-arrow-left",start:"",class:"flip-in-rtl"}),i[10]||(i[10]=f(" Previous "))]),_:1,__:[10]},8,["disabled"]),p.length-1===a(t)?(C(),P(B,{key:0,color:"success",loading:a(s),onClick:r},{default:l(()=>i[11]||(i[11]=[f(" Complete Registration ")])),_:1,__:[11]},8,["loading"])):(C(),P(B,{key:1,onClick:i[7]||(i[7]=n=>t.value++)},{default:l(()=>[i[12]||(i[12]=f(" Next ")),e(h,{icon:"tabler-arrow-right",end:"",class:"flip-in-rtl"})]),_:1,__:[12]}))])]),_:1})]),_:1})]),_:1})]),_:1}),e(ue,{modelValue:a(D).show,"onUpdate:modelValue":i[9]||(i[9]=n=>a(D).show=n),color:a(D).color,location:"top end",timeout:"4000"},{actions:l(()=>[e(B,{color:"white",variant:"text",onClick:i[8]||(i[8]=n=>a(D).show=!1)},{default:l(()=>i[13]||(i[13]=[f(" Close ")])),_:1,__:[13]})]),default:l(()=>[f(V(a(D).message)+" ",1)]),_:1},8,["modelValue","color"])],64)}}});export{al as default};
