import{b2 as s}from"./main-CJoUlw71.js";import{g as i}from"./api-router-CWf8jKcZ.js";class r{getBaseUrl(){return i("leads")}async getStatistics(){return await s(`${this.getBaseUrl()}/statistics`)}async getLeads(t={}){const e=new URLSearchParams;t.status&&e.append("status",t.status),t.source&&e.append("source",t.source),t.owner&&e.append("owner",t.owner),t.search&&e.append("search",t.search),t.itemsPerPage&&e.append("itemsPerPage",t.itemsPerPage.toString()),t.page&&e.append("page",t.page.toString()),t.sortBy&&e.append("sortBy",t.sortBy),t.orderBy&&e.append("orderBy",t.orderBy);const a=e.toString(),n=this.getBaseUrl(),o=a?`${n}?${a}`:n;return await s(o)}async getLead(t){var a;const e=await s(`${this.getBaseUrl()}/${t}`);return e.success&&e.data&&(e.data={id:e.data.id,firstName:e.data.first_name,lastName:e.data.last_name,email:e.data.email,phone:e.data.phone,company:e.data.company_name||e.data.company,country:e.data.country,state:e.data.state||e.data.address,city:e.data.city,source:e.data.lead_source,status:e.data.status,owner:((a=e.data.assignedUser)==null?void 0:a.name)||e.data.assigned_to||"Unassigned",lastContacted:e.data.last_contact_date,scheduledMeeting:e.data.next_follow_up_date,note:e.data.notes,priority:e.data.priority,estimatedInvestment:e.data.estimated_investment,franchiseFeeQuoted:e.data.franchise_fee_quoted,expectedDecisionDate:e.data.expected_decision_date,contactAttempts:e.data.contact_attempts,interests:e.data.interests,documents:e.data.documents}),e}async createLead(t){return await s(this.getBaseUrl(),{method:"POST",body:t})}async updateLead(t,e){const a={};return e.firstName!==void 0&&(a.first_name=e.firstName),e.lastName!==void 0&&(a.last_name=e.lastName),e.email!==void 0&&(a.email=e.email),e.phone!==void 0&&(a.phone=e.phone),e.company!==void 0&&(a.company=e.company),e.country!==void 0&&(a.country=e.country),e.state!==void 0&&(a.state=e.state),e.city!==void 0&&(a.city=e.city),e.source!==void 0&&(a.source=e.source),e.status!==void 0&&(a.status=e.status),e.note!==void 0&&(a.notes=e.note),e.priority!==void 0&&(a.priority=e.priority),e.estimatedInvestment!==void 0&&(a.estimated_investment=e.estimatedInvestment),e.franchiseFeeQuoted!==void 0&&(a.franchise_fee_quoted=e.franchiseFeeQuoted),e.expectedDecisionDate!==void 0&&(a.expected_decision_date=e.expectedDecisionDate),await s(`${this.getBaseUrl()}/${t}`,{method:"PUT",body:a})}async deleteLead(t){return await s(`${this.getBaseUrl()}/${t}`,{method:"DELETE"})}async bulkDelete(t){return await s(`${this.getBaseUrl()}/bulk-delete`,{method:"POST",body:{ids:t}})}async importCsv(t){const e=new FormData;return e.append("file",t),await s(`${this.getBaseUrl()}/import`,{method:"POST",body:e})}exportCsv(t){const e=this.getBaseUrl(),a=new URLSearchParams;t&&t.length>0&&t.forEach(o=>a.append("ids[]",o.toString()));const n=a.toString();return n?`${e}/export?${n}`:`${e}/export`}async addNote(t,e){return await s(`${this.getBaseUrl()}/${t}/notes`,{method:"POST",body:e})}async addNoteToLead(t,e){return await s(`/v1/franchisor/leads/${t}/notes`,{method:"POST",body:{note:e}})}async getLeadsWithLimit(t=10){return await s(`${this.getBaseUrl()}?limit=${t}`)}async convertLead(t,e){return await s(`/v1/franchisor/leads/${t}/convert`,{method:"POST",body:{notes:e}})}async markAsLost(t,e){return await s(`/v1/franchisor/leads/${t}/mark-lost`,{method:"POST",body:{reason:e}})}async assignLead(t,e){return await s(`/v1/franchisor/leads/${t}/assign`,{method:"PATCH",body:{assigned_to:e}})}}const p=new r;export{p as l};
