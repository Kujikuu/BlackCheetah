import{_ as Wt}from"./AddDocumentDialog.vue_vue_type_script_setup_true_lang-CQOCgGWd.js";import{_ as Gt,a as Qt}from"./DocumentActionModal.vue_vue_type_script_setup_true_lang-DxbtBu9M.js";import{_ as Xt}from"./ViewTaskDialog.vue_vue_type_script_setup_true_lang-DR7wBnkT.js";import{_ as Yt}from"./EditTaskDialog.vue_vue_type_script_setup_true_lang-CnXGptQS.js";import{_ as Kt}from"./DeleteTaskDialog.vue_vue_type_script_setup_true_lang-fFIWZoVX.js";import{V as W,_ as G}from"./VDialog-6C-NQXCx.js";import{V as T}from"./VCardText-BD5AHO-w.js";import{V as $,a as r}from"./VRow-DiX7eN30.js";import{V as Ue}from"./VRating-Dk54Hej1.js";import{V as M}from"./VChip-DlNApjyg.js";import{V as F}from"./VDivider-B4ry9pxl.js";import{d as H,V as D,a as oe,b as ie,c as Zt}from"./VCard-DJ82mpnW.js";import{V as Q}from"./VSpacer-Cpeayo2U.js";import{d as J,P as U,g as R,f as t,b as e,l as O,e as o,v,t as f,a9 as k,o as V,r as y,w as Te,c as N,bi as el,bj as tl,ax as g,u as ll,G as al,aF as de,F as ce,i as sl,b2 as ol}from"./main-gemCwVks.js";import{V as I}from"./VAvatar-12xz6mHy.js";import{V as C}from"./VTextField-BhxF6EAD.js";import{V as pe}from"./VTextarea-OEcL0zKK.js";import{V as fe}from"./VSelect-C9dxRhag.js";import{a as L,b as B,d as il,V as De}from"./VList-MyW-iB3v.js";import{f as E}from"./franchisee-dashboard-BybX4VBn.js";import{a as dl,V as ne}from"./VTabs-CeX-zYGq.js";import{a as nl,V as ue}from"./VWindowItem-CPQ2k3dD.js";import{V as ul}from"./VSkeletonLoader-D0dxFM6H.js";import{V as Ce}from"./VDataTable-C-SlKz4P.js";import{V as Se}from"./VMenu-CeaiRCNz.js";import"./VForm-FUZpY-zG.js";import"./form-DjHlhIbZ.js";import"./forwardRefs--KQCZfKO.js";import"./VFileInput-CB0ItP4X.js";import"./VField-CsHfcJSz.js";import"./VInput-B3GinL-f.js";import"./VImg-DSB6m92Q.js";import"./VOverlay-p8m6-W96.js";import"./scopeId-BgtgI3QF.js";import"./dialog-transition-C9rYmnXC.js";/* empty css              */import"./VSlideGroup-CEWgOBQJ.js";import"./VCheckboxBtn-ZAK0D-Rf.js";import"./VSelectionControl-COVpGwiX.js";import"./VTable-0Z68chLt.js";const rl={class:"text-body-1 font-weight-medium"},ml={class:"text-body-1 font-weight-medium"},vl={class:"d-flex align-center gap-1"},cl={class:"text-body-1 font-weight-medium"},fl={class:"text-body-1 font-weight-medium"},pl={class:"text-body-1"},bl=J({__name:"ViewReviewDialog",props:{isDialogVisible:{type:Boolean},selectedReview:{}},emits:["update:isDialogVisible"],setup(A,{emit:z}){const w=A,S=z,p=U({get:()=>w.isDialogVisible,set:b=>S("update:isDialogVisible",b)}),a=()=>{p.value=!1};return(b,m)=>{const n=G;return V(),R(W,{modelValue:p.value,"onUpdate:modelValue":m[0]||(m[0]=u=>p.value=u),"max-width":"600"},{default:t(()=>[e(n,{onClick:a}),e(D,{title:"Review Details"},{default:t(()=>[b.selectedReview?(V(),R(T,{key:0,class:"pa-6"},{default:t(()=>[e($,null,{default:t(()=>[e(r,{cols:"12",md:"6"},{default:t(()=>[m[1]||(m[1]=o("div",{class:"text-body-2 text-disabled mb-1"}," Customer Name ",-1)),o("div",rl,v(b.selectedReview.customerName),1)]),_:1,__:[1]}),e(r,{cols:"12",md:"6"},{default:t(()=>[m[2]||(m[2]=o("div",{class:"text-body-2 text-disabled mb-1"}," Customer Email ",-1)),o("div",ml,v(b.selectedReview.customerEmail||"N/A"),1)]),_:1,__:[2]}),e(r,{cols:"12",md:"6"},{default:t(()=>[m[3]||(m[3]=o("div",{class:"text-body-2 text-disabled mb-1"}," Rating ",-1)),o("div",vl,[e(Ue,{"model-value":b.selectedReview.rating,readonly:"",size:"small",density:"compact"},null,8,["model-value"]),o("span",cl,v(b.selectedReview.rating)+"/5",1)])]),_:1,__:[3]}),e(r,{cols:"12",md:"6"},{default:t(()=>[m[4]||(m[4]=o("div",{class:"text-body-2 text-disabled mb-1"}," Date ",-1)),o("div",fl,v(b.selectedReview.date),1)]),_:1,__:[4]}),e(r,{cols:"12",md:"6"},{default:t(()=>[m[5]||(m[5]=o("div",{class:"text-body-2 text-disabled mb-1"}," Sentiment ",-1)),e(M,{color:b.selectedReview.sentiment==="positive"?"success":b.selectedReview.sentiment==="neutral"?"warning":"error",size:"small",label:"",class:"text-capitalize"},{default:t(()=>[f(v(b.selectedReview.sentiment),1)]),_:1},8,["color"])]),_:1,__:[5]}),e(r,{cols:"12"},{default:t(()=>[m[6]||(m[6]=o("div",{class:"text-body-2 text-disabled mb-1"}," Comment ",-1)),o("div",pl,v(b.selectedReview.comment),1)]),_:1,__:[6]})]),_:1})]),_:1})):O("",!0),e(F),e(H,{class:"pa-6"},{default:t(()=>[e(Q),e(k,{color:"secondary",variant:"tonal",onClick:a},{default:t(()=>m[7]||(m[7]=[f(" Close ")])),_:1,__:[7]})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),yl={class:"text-body-1 font-weight-medium"},_l={class:"text-body-1 font-weight-medium"},gl={class:"text-body-1"},Vl={class:"text-body-1 font-weight-medium"},xl=J({__name:"ViewProductDialog",props:{isDialogVisible:{type:Boolean},selectedProduct:{}},emits:["update:isDialogVisible"],setup(A,{emit:z}){const w=A,S=z,p=U({get:()=>w.isDialogVisible,set:n=>S("update:isDialogVisible",n)}),a=n=>new Intl.NumberFormat("en-US",{style:"currency",currency:"SAR"}).format(n),b=n=>n==="active"||n==="completed"||n==="approved"||n==="working"?"success":n==="pending"||n==="in_progress"?"warning":n==="inactive"||n==="cancelled"||n==="rejected"?"error":"default",m=()=>{p.value=!1};return(n,u)=>{const _=G;return V(),R(W,{modelValue:p.value,"onUpdate:modelValue":u[0]||(u[0]=d=>p.value=d),"max-width":"600"},{default:t(()=>[e(_,{onClick:m}),e(D,{title:"Product Details"},{default:t(()=>[n.selectedProduct?(V(),R(T,{key:0,class:"pa-6"},{default:t(()=>[e($,null,{default:t(()=>[e(r,{cols:"12",md:"6"},{default:t(()=>[u[1]||(u[1]=o("div",{class:"text-body-2 text-disabled mb-1"}," Product Name ",-1)),o("div",yl,v(n.selectedProduct.name),1)]),_:1,__:[1]}),e(r,{cols:"12",md:"6"},{default:t(()=>[u[2]||(u[2]=o("div",{class:"text-body-2 text-disabled mb-1"}," Category ",-1)),o("div",_l,v(n.selectedProduct.category),1)]),_:1,__:[2]}),e(r,{cols:"12"},{default:t(()=>[u[3]||(u[3]=o("div",{class:"text-body-2 text-disabled mb-1"}," Description ",-1)),o("div",gl,v(n.selectedProduct.description),1)]),_:1,__:[3]}),e(r,{cols:"12",md:"6"},{default:t(()=>[u[4]||(u[4]=o("div",{class:"text-body-2 text-disabled mb-1"}," Unit Price ",-1)),o("div",Vl,v(a(n.selectedProduct.unitPrice)),1)]),_:1,__:[4]}),e(r,{cols:"12",md:"6"},{default:t(()=>[u[5]||(u[5]=o("div",{class:"text-body-2 text-disabled mb-1"}," Stock ",-1)),e(M,{color:n.selectedProduct.stock===0?"error":n.selectedProduct.stock<=10?"warning":"success",size:"small",label:""},{default:t(()=>[f(v(n.selectedProduct.stock)+" units ",1)]),_:1},8,["color"])]),_:1,__:[5]}),e(r,{cols:"12",md:"6"},{default:t(()=>[u[6]||(u[6]=o("div",{class:"text-body-2 text-disabled mb-1"}," Status ",-1)),e(M,{color:b(n.selectedProduct.status),size:"small",label:"",class:"text-capitalize"},{default:t(()=>[f(v(n.selectedProduct.status),1)]),_:1},8,["color"])]),_:1,__:[6]})]),_:1})]),_:1})):O("",!0),e(F),e(H,{class:"pa-6"},{default:t(()=>[e(Q),e(k,{color:"secondary",variant:"tonal",onClick:m},{default:t(()=>u[7]||(u[7]=[f(" Close ")])),_:1,__:[7]})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),kl={class:"text-h4"},wl={class:"text-body-1 font-weight-medium"},Dl={class:"text-body-1 font-weight-medium"},Cl={class:"text-body-1 font-weight-medium"},Sl={class:"text-body-1 font-weight-medium"},Ul={class:"text-body-1 font-weight-medium"},Tl={class:"text-body-1 font-weight-medium"},Pl={class:"text-body-1 font-weight-medium"},Rl={class:"text-body-1 font-weight-medium"},zl={class:"text-body-1 font-weight-medium text-capitalize"},Al={class:"text-body-1"},Nl=J({__name:"ViewStaffDialog",props:{isDialogVisible:{type:Boolean},selectedStaff:{}},emits:["update:isDialogVisible"],setup(A,{emit:z}){const w=A,S=z,p=U({get:()=>w.isDialogVisible,set:m=>S("update:isDialogVisible",m)}),a=m=>m==="active"||m==="completed"||m==="approved"||m==="working"?"success":m==="pending"||m==="in_progress"?"warning":m==="inactive"||m==="cancelled"||m==="rejected"?"error":"default",b=()=>{p.value=!1};return(m,n)=>{const u=G;return V(),R(W,{modelValue:p.value,"onUpdate:modelValue":n[0]||(n[0]=_=>p.value=_),"max-width":"600"},{default:t(()=>[e(u,{onClick:b}),e(D,{title:"Staff Details"},{default:t(()=>[m.selectedStaff?(V(),R(T,{key:0,class:"pa-6"},{default:t(()=>[e($,null,{default:t(()=>[e(r,{cols:"12",class:"text-center pb-6"},{default:t(()=>[e(I,{size:"80",color:"primary",variant:"tonal"},{default:t(()=>[o("span",kl,v(m.selectedStaff.name.split(" ").map(_=>_[0]).join("")),1)]),_:1})]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[n[1]||(n[1]=o("div",{class:"text-body-2 text-disabled mb-1"}," Full Name ",-1)),o("div",wl,v(m.selectedStaff.name),1)]),_:1,__:[1]}),e(r,{cols:"12",md:"6"},{default:t(()=>[n[2]||(n[2]=o("div",{class:"text-body-2 text-disabled mb-1"}," Email ",-1)),o("div",Dl,v(m.selectedStaff.email),1)]),_:1,__:[2]}),e(r,{cols:"12",md:"6"},{default:t(()=>[n[3]||(n[3]=o("div",{class:"text-body-2 text-disabled mb-1"}," Phone ",-1)),o("div",Cl,v(m.selectedStaff.phone||"N/A"),1)]),_:1,__:[3]}),e(r,{cols:"12",md:"6"},{default:t(()=>[n[4]||(n[4]=o("div",{class:"text-body-2 text-disabled mb-1"}," Job Title ",-1)),o("div",Sl,v(m.selectedStaff.jobTitle),1)]),_:1,__:[4]}),e(r,{cols:"12",md:"6"},{default:t(()=>[n[5]||(n[5]=o("div",{class:"text-body-2 text-disabled mb-1"}," Department ",-1)),o("div",Ul,v(m.selectedStaff.department||"N/A"),1)]),_:1,__:[5]}),e(r,{cols:"12",md:"6"},{default:t(()=>[n[6]||(n[6]=o("div",{class:"text-body-2 text-disabled mb-1"}," Salary ",-1)),o("div",Tl,v(m.selectedStaff.salary?`SAR ${m.selectedStaff.salary}`:"N/A"),1)]),_:1,__:[6]}),e(r,{cols:"12",md:"6"},{default:t(()=>[n[7]||(n[7]=o("div",{class:"text-body-2 text-disabled mb-1"}," Hire Date ",-1)),o("div",Pl,v(m.selectedStaff.hireDate||"N/A"),1)]),_:1,__:[7]}),e(r,{cols:"12",md:"6"},{default:t(()=>[n[8]||(n[8]=o("div",{class:"text-body-2 text-disabled mb-1"}," Shift Time ",-1)),o("div",Rl,v(m.selectedStaff.shiftTime),1)]),_:1,__:[8]}),e(r,{cols:"12",md:"6"},{default:t(()=>{var _;return[n[9]||(n[9]=o("div",{class:"text-body-2 text-disabled mb-1"}," Employment Type ",-1)),o("div",zl,v(((_=m.selectedStaff.employmentType)==null?void 0:_.replace("_"," "))||"N/A"),1)]}),_:1,__:[9]}),e(r,{cols:"12",md:"6"},{default:t(()=>[n[10]||(n[10]=o("div",{class:"text-body-2 text-disabled mb-1"}," Status ",-1)),e(M,{color:a(m.selectedStaff.status),size:"small",label:"",class:"text-capitalize"},{default:t(()=>[f(v(m.selectedStaff.status),1)]),_:1},8,["color"])]),_:1,__:[10]}),m.selectedStaff.notes?(V(),R(r,{key:0,cols:"12"},{default:t(()=>[n[11]||(n[11]=o("div",{class:"text-body-2 text-disabled mb-1"}," Notes ",-1)),o("div",Al,v(m.selectedStaff.notes),1)]),_:1,__:[11]})):O("",!0)]),_:1})]),_:1})):O("",!0),e(F),e(H,{class:"pa-6"},{default:t(()=>[e(Q),e(k,{color:"secondary",variant:"tonal",onClick:b},{default:t(()=>n[12]||(n[12]=[f(" Close ")])),_:1,__:[12]})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),$l=J({__name:"AddReviewDialog",props:{isDialogVisible:{type:Boolean}},emits:["update:isDialogVisible","reviewAdded"],setup(A,{emit:z}){const w=A,S=z,p=U({get:()=>w.isDialogVisible,set:n=>S("update:isDialogVisible",n)}),a=y({customerName:"",customerEmail:"",rating:0,comment:"",date:""}),b=()=>{!a.value.customerName||!a.value.comment||!a.value.date||(S("reviewAdded",{...a.value}),a.value={customerName:"",customerEmail:"",rating:0,comment:"",date:""},p.value=!1)},m=()=>{p.value=!1,a.value={customerName:"",customerEmail:"",rating:0,comment:"",date:""}};return(n,u)=>{const _=G;return V(),R(W,{modelValue:p.value,"onUpdate:modelValue":u[5]||(u[5]=d=>p.value=d),"max-width":"600"},{default:t(()=>[e(_,{onClick:m}),e(D,{title:"Add Customer Review"},{default:t(()=>[e(T,{class:"pa-6"},{default:t(()=>[e($,null,{default:t(()=>[e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.customerName,"onUpdate:modelValue":u[0]||(u[0]=d=>a.value.customerName=d),label:"Customer Name",required:""},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.customerEmail,"onUpdate:modelValue":u[1]||(u[1]=d=>a.value.customerEmail=d),label:"Customer Email",type:"email"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[u[6]||(u[6]=o("div",{class:"text-body-2 text-disabled mb-2"}," Rating ",-1)),e(Ue,{modelValue:a.value.rating,"onUpdate:modelValue":u[2]||(u[2]=d=>a.value.rating=d),size:"large"},null,8,["modelValue"])]),_:1,__:[6]}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.date,"onUpdate:modelValue":u[3]||(u[3]=d=>a.value.date=d),label:"Date",type:"date",required:""},null,8,["modelValue"])]),_:1}),e(r,{cols:"12"},{default:t(()=>[e(pe,{modelValue:a.value.comment,"onUpdate:modelValue":u[4]||(u[4]=d=>a.value.comment=d),label:"Review Comment",rows:"4",required:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(F),e(H,{class:"pa-6"},{default:t(()=>[e(Q),e(k,{color:"secondary",variant:"tonal",onClick:m},{default:t(()=>u[7]||(u[7]=[f(" Cancel ")])),_:1,__:[7]}),e(k,{color:"primary",disabled:!a.value.customerName||!a.value.comment||!a.value.date,onClick:b},{default:t(()=>u[8]||(u[8]=[f(" Add Review ")])),_:1,__:[8]},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),El=J({__name:"EditReviewDialog",props:{isDialogVisible:{type:Boolean},selectedReview:{}},emits:["update:isDialogVisible","reviewUpdated"],setup(A,{emit:z}){const w=A,S=z,p=U({get:()=>w.isDialogVisible,set:n=>S("update:isDialogVisible",n)}),a=y(null);Te(()=>w.selectedReview,n=>{n&&(a.value={...n})},{immediate:!0});const b=()=>{a.value&&(S("reviewUpdated",a.value),p.value=!1)},m=()=>{p.value=!1};return(n,u)=>{const _=G;return V(),R(W,{modelValue:p.value,"onUpdate:modelValue":u[5]||(u[5]=d=>p.value=d),"max-width":"600"},{default:t(()=>[e(_,{onClick:m}),e(D,{title:"Edit Customer Review"},{default:t(()=>[a.value?(V(),R(T,{key:0,class:"pa-6"},{default:t(()=>[e($,null,{default:t(()=>[e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.customerName,"onUpdate:modelValue":u[0]||(u[0]=d=>a.value.customerName=d),label:"Customer Name",required:""},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.customerEmail,"onUpdate:modelValue":u[1]||(u[1]=d=>a.value.customerEmail=d),label:"Customer Email",type:"email"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[u[6]||(u[6]=o("div",{class:"text-body-2 text-disabled mb-2"}," Rating ",-1)),e(Ue,{modelValue:a.value.rating,"onUpdate:modelValue":u[2]||(u[2]=d=>a.value.rating=d),size:"large"},null,8,["modelValue"])]),_:1,__:[6]}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.date,"onUpdate:modelValue":u[3]||(u[3]=d=>a.value.date=d),label:"Date",type:"date",required:""},null,8,["modelValue"])]),_:1}),e(r,{cols:"12"},{default:t(()=>[e(pe,{modelValue:a.value.comment,"onUpdate:modelValue":u[4]||(u[4]=d=>a.value.comment=d),label:"Review Comment",rows:"4",required:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})):O("",!0),e(F),e(H,{class:"pa-6"},{default:t(()=>{var d,P,c;return[e(Q),e(k,{color:"secondary",variant:"tonal",onClick:m},{default:t(()=>u[7]||(u[7]=[f(" Cancel ")])),_:1,__:[7]}),e(k,{color:"primary",disabled:!((d=a.value)!=null&&d.customerName)||!((P=a.value)!=null&&P.comment)||!((c=a.value)!=null&&c.date),onClick:b},{default:t(()=>u[8]||(u[8]=[f(" Save Changes ")])),_:1,__:[8]},8,["disabled"])]}),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),Il={class:"text-body-2 text-disabled mb-3"},ql={class:"font-weight-medium text-high-emphasis"},Fl={class:"text-h6"},Ll=J({__name:"EditProductDialog",props:{isDialogVisible:{type:Boolean},selectedProduct:{}},emits:["update:isDialogVisible","productUpdated"],setup(A,{emit:z}){const w=A,S=z,p=U({get:()=>w.isDialogVisible,set:u=>S("update:isDialogVisible",u)}),a=y(null);Te(()=>w.selectedProduct,u=>{u&&(a.value={...u})},{immediate:!0});const b=()=>{a.value&&(S("productUpdated",a.value),p.value=!1)},m=()=>{p.value=!1},n=u=>new Intl.NumberFormat("en-US",{style:"currency",currency:"SAR",minimumFractionDigits:0,maximumFractionDigits:0}).format(u);return(u,_)=>{const d=G;return V(),R(W,{modelValue:p.value,"onUpdate:modelValue":_[1]||(_[1]=P=>p.value=P),"max-width":"600"},{default:t(()=>[e(d,{onClick:m}),e(D,{title:"Edit Product Inventory"},{default:t(()=>[a.value?(V(),R(T,{key:0,class:"pa-6"},{default:t(()=>[e($,null,{default:t(()=>[e(r,{cols:"12"},{default:t(()=>[o("div",Il,[_[2]||(_[2]=f(" Product: ")),o("span",ql,v(a.value.name),1)])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.stock,"onUpdate:modelValue":_[0]||(_[0]=P=>a.value.stock=P),modelModifiers:{number:!0},label:"Stock Quantity",type:"number",min:"0",required:""},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[_[3]||(_[3]=o("div",{class:"text-body-2 text-disabled mb-1"}," Unit Price ",-1)),o("div",Fl,v(n(a.value.unitPrice)),1)]),_:1,__:[3]}),e(r,{cols:"12"},{default:t(()=>_[4]||(_[4]=[o("div",{class:"text-caption text-disabled"}," Note: You can only update the stock quantity. Product details like name, price, and category are managed at the franchise level. ",-1)])),_:1,__:[4]})]),_:1})]),_:1})):O("",!0),e(F),e(H,{class:"pa-6"},{default:t(()=>{var P,c;return[e(Q),e(k,{color:"secondary",variant:"tonal",onClick:m},{default:t(()=>_[5]||(_[5]=[f(" Cancel ")])),_:1,__:[5]}),e(k,{color:"primary",disabled:((P=a.value)==null?void 0:P.stock)===void 0||((c=a.value)==null?void 0:c.stock)<0,onClick:b},{default:t(()=>_[6]||(_[6]=[f(" Save Changes ")])),_:1,__:[6]},8,["disabled"])]}),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),Bl=J({__name:"EditStaffDialog",props:{isDialogVisible:{type:Boolean},selectedStaff:{}},emits:["update:isDialogVisible","staffUpdated"],setup(A,{emit:z}){const w=A,S=z,p=U({get:()=>w.isDialogVisible,set:_=>S("update:isDialogVisible",_)}),a=y(null);Te(()=>w.selectedStaff,_=>{_&&(a.value={..._})},{immediate:!0});const b=()=>{a.value&&(S("staffUpdated",a.value),p.value=!1)},m=()=>{p.value=!1},n=["working","leave","terminated","inactive"],u=[{title:"Full Time",value:"full_time"},{title:"Part Time",value:"part_time"},{title:"Contract",value:"contract"},{title:"Temporary",value:"temporary"}];return(_,d)=>{const P=G;return V(),R(W,{modelValue:p.value,"onUpdate:modelValue":d[12]||(d[12]=c=>p.value=c),"max-width":"600"},{default:t(()=>[e(P,{onClick:m}),e(D,{title:"Edit Staff Member"},{default:t(()=>[a.value?(V(),R(T,{key:0,class:"pa-6"},{default:t(()=>[e($,null,{default:t(()=>[e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.name,"onUpdate:modelValue":d[0]||(d[0]=c=>a.value.name=c),label:"Full Name",required:""},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.email,"onUpdate:modelValue":d[1]||(d[1]=c=>a.value.email=c),label:"Email",type:"email",required:""},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.phone,"onUpdate:modelValue":d[2]||(d[2]=c=>a.value.phone=c),label:"Phone"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.jobTitle,"onUpdate:modelValue":d[3]||(d[3]=c=>a.value.jobTitle=c),label:"Job Title",required:""},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.department,"onUpdate:modelValue":d[4]||(d[4]=c=>a.value.department=c),label:"Department"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.salary,"onUpdate:modelValue":d[5]||(d[5]=c=>a.value.salary=c),label:"Salary",type:"number",prefix:"SAR"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.hireDate,"onUpdate:modelValue":d[6]||(d[6]=c=>a.value.hireDate=c),label:"Hire Date",type:"date"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.shiftStart,"onUpdate:modelValue":d[7]||(d[7]=c=>a.value.shiftStart=c),label:"Shift Start",type:"time"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.shiftEnd,"onUpdate:modelValue":d[8]||(d[8]=c=>a.value.shiftEnd=c),label:"Shift End",type:"time"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(fe,{modelValue:a.value.status,"onUpdate:modelValue":d[9]||(d[9]=c=>a.value.status=c),label:"Status",items:n,required:""},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(fe,{modelValue:a.value.employmentType,"onUpdate:modelValue":d[10]||(d[10]=c=>a.value.employmentType=c),label:"Employment Type",items:u},null,8,["modelValue"])]),_:1}),e(r,{cols:"12"},{default:t(()=>[e(pe,{modelValue:a.value.notes,"onUpdate:modelValue":d[11]||(d[11]=c=>a.value.notes=c),label:"Notes",rows:"2"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})):O("",!0),e(F),e(H,{class:"pa-6"},{default:t(()=>{var c,j,X,te;return[e(Q),e(k,{color:"secondary",variant:"tonal",onClick:m},{default:t(()=>d[13]||(d[13]=[f(" Cancel ")])),_:1,__:[13]}),e(k,{color:"primary",disabled:!((c=a.value)!=null&&c.name)||!((j=a.value)!=null&&j.email)||!((X=a.value)!=null&&X.jobTitle)||!((te=a.value)!=null&&te.status),onClick:b},{default:t(()=>d[14]||(d[14]=[f(" Save Changes ")])),_:1,__:[14]},8,["disabled"])]}),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),Ml=J({__name:"AddStaffDialog",props:{isDialogVisible:{type:Boolean}},emits:["update:isDialogVisible","staffAdded"],setup(A,{emit:z}){const w=A,S=z,p=U({get:()=>w.isDialogVisible,set:_=>S("update:isDialogVisible",_)}),a=y({name:"",email:"",phone:"",jobTitle:"",department:"",salary:0,hireDate:"",shiftStart:"",shiftEnd:"",status:"Active",employmentType:"full_time",notes:""}),b=()=>{!a.value.name||!a.value.email||!a.value.jobTitle||!a.value.hireDate||!a.value.status||(S("staffAdded",{...a.value}),a.value={name:"",email:"",phone:"",jobTitle:"",department:"",salary:0,hireDate:"",shiftStart:"",shiftEnd:"",status:"Active",employmentType:"full_time",notes:""},p.value=!1)},m=()=>{p.value=!1,a.value={name:"",email:"",phone:"",jobTitle:"",department:"",salary:0,hireDate:"",shiftStart:"",shiftEnd:"",status:"Active",employmentType:"full_time",notes:""}},n=["Active","On Leave","Terminated","Inactive"],u=[{title:"Full Time",value:"full_time"},{title:"Part Time",value:"part_time"},{title:"Contract",value:"contract"},{title:"Temporary",value:"temporary"}];return(_,d)=>{const P=G;return V(),R(W,{modelValue:p.value,"onUpdate:modelValue":d[12]||(d[12]=c=>p.value=c),"max-width":"600"},{default:t(()=>[e(P,{onClick:m}),e(D,{title:"Add New Staff Member"},{default:t(()=>[e(T,{class:"pa-6"},{default:t(()=>[e($,null,{default:t(()=>[e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.name,"onUpdate:modelValue":d[0]||(d[0]=c=>a.value.name=c),label:"Full Name",required:""},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.email,"onUpdate:modelValue":d[1]||(d[1]=c=>a.value.email=c),label:"Email",type:"email",required:""},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.phone,"onUpdate:modelValue":d[2]||(d[2]=c=>a.value.phone=c),label:"Phone"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.jobTitle,"onUpdate:modelValue":d[3]||(d[3]=c=>a.value.jobTitle=c),label:"Job Title",required:""},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.department,"onUpdate:modelValue":d[4]||(d[4]=c=>a.value.department=c),label:"Department"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.salary,"onUpdate:modelValue":d[5]||(d[5]=c=>a.value.salary=c),label:"Salary",type:"number",prefix:"SAR"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.hireDate,"onUpdate:modelValue":d[6]||(d[6]=c=>a.value.hireDate=c),label:"Hire Date",type:"date",required:""},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.shiftStart,"onUpdate:modelValue":d[7]||(d[7]=c=>a.value.shiftStart=c),label:"Shift Start",type:"time"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.shiftEnd,"onUpdate:modelValue":d[8]||(d[8]=c=>a.value.shiftEnd=c),label:"Shift End",type:"time"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(fe,{modelValue:a.value.status,"onUpdate:modelValue":d[9]||(d[9]=c=>a.value.status=c),label:"Status",items:n,required:""},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(fe,{modelValue:a.value.employmentType,"onUpdate:modelValue":d[10]||(d[10]=c=>a.value.employmentType=c),label:"Employment Type",items:u,required:""},null,8,["modelValue"])]),_:1}),e(r,{cols:"12"},{default:t(()=>[e(pe,{modelValue:a.value.notes,"onUpdate:modelValue":d[11]||(d[11]=c=>a.value.notes=c),label:"Notes",rows:"2"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(F),e(H,{class:"pa-6"},{default:t(()=>[e(Q),e(k,{color:"secondary",variant:"tonal",onClick:m},{default:t(()=>d[13]||(d[13]=[f(" Cancel ")])),_:1,__:[13]}),e(k,{color:"primary",disabled:!a.value.name||!a.value.email||!a.value.jobTitle||!a.value.hireDate||!a.value.status,onClick:b},{default:t(()=>d[14]||(d[14]=[f(" Add Staff ")])),_:1,__:[14]},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),jl=J({__name:"EditUnitDialog",props:{isDialogVisible:{type:Boolean},unitData:{}},emits:["update:isDialogVisible","unitUpdated"],setup(A,{emit:z}){const w=A,S=z,p=U({get:()=>w.isDialogVisible,set:n=>S("update:isDialogVisible",n)}),a=y({});Te(()=>w.unitData,n=>{n&&(a.value={...n})},{immediate:!0});const b=()=>{a.value&&w.unitData&&(S("unitUpdated",a.value),p.value=!1)},m=()=>{p.value=!1};return(n,u)=>{const _=G;return V(),R(W,{modelValue:p.value,"onUpdate:modelValue":u[5]||(u[5]=d=>p.value=d),"max-width":"600"},{default:t(()=>[e(_,{onClick:m}),e(D,{title:"Edit Unit Details"},{default:t(()=>[e(T,{class:"pa-6"},{default:t(()=>[e($,null,{default:t(()=>[e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.branchName,"onUpdate:modelValue":u[0]||(u[0]=d=>a.value.branchName=d),label:"Branch Name",required:""},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.city,"onUpdate:modelValue":u[1]||(u[1]=d=>a.value.city=d),label:"City",required:""},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.franchiseeName,"onUpdate:modelValue":u[2]||(u[2]=d=>a.value.franchiseeName=d),label:"Franchisee",disabled:""},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:a.value.contactNumber,"onUpdate:modelValue":u[3]||(u[3]=d=>a.value.contactNumber=d),label:"Contact Number",required:""},null,8,["modelValue"])]),_:1}),e(r,{cols:"12"},{default:t(()=>[e(pe,{modelValue:a.value.address,"onUpdate:modelValue":u[4]||(u[4]=d=>a.value.address=d),label:"Address",rows:"3"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(F),e(H,{class:"pa-6"},{default:t(()=>[e(Q),e(k,{color:"secondary",variant:"tonal",onClick:m},{default:t(()=>u[6]||(u[6]=[f(" Cancel ")])),_:1,__:[6]}),e(k,{color:"primary",disabled:!a.value.branchName||!a.value.city||!a.value.contactNumber,onClick:b},{default:t(()=>u[7]||(u[7]=[f(" Save Changes ")])),_:1,__:[7]},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),hl={key:0,class:"text-center py-4"},Ol={class:"d-flex align-center gap-3"},Hl={class:"text-h6"},Jl={class:"text-body-2 mb-0"},Wl={class:"text-body-2 text-medium-emphasis"},Gl=J({__name:"AddProductToInventoryDialog",props:{isDialogVisible:{type:Boolean},availableFranchiseProducts:{}},emits:["update:isDialogVisible","productAdded"],setup(A,{emit:z}){const w=A,S=z,p=U({get:()=>w.isDialogVisible,set:_=>S("update:isDialogVisible",_)}),a=y(null),b=y({quantity:0,reorderLevel:5}),m=U(()=>a.value?w.availableFranchiseProducts.find(_=>_.id===a.value):null),n=()=>{a.value&&(S("productAdded",{productId:a.value,quantity:Number.parseInt(b.value.quantity.toString()),reorderLevel:Number.parseInt(b.value.reorderLevel.toString())}),a.value=null,b.value={quantity:0,reorderLevel:5},p.value=!1)},u=()=>{p.value=!1,a.value=null,b.value={quantity:0,reorderLevel:5}};return(_,d)=>{const P=G;return V(),R(W,{modelValue:p.value,"onUpdate:modelValue":d[3]||(d[3]=c=>p.value=c),"max-width":"600"},{default:t(()=>[e(P,{onClick:u}),e(D,{title:"Add Product to Inventory"},{default:t(()=>[e(T,{class:"pa-6"},{default:t(()=>[e($,null,{default:t(()=>[e(r,{cols:"12"},{default:t(()=>[e(fe,{modelValue:a.value,"onUpdate:modelValue":d[0]||(d[0]=c=>a.value=c),label:"Select Product",items:w.availableFranchiseProducts,"item-title":"name","item-value":"id",required:"",placeholder:"Choose a product from franchise catalog","no-data-text":w.availableFranchiseProducts.length===0?"No available franchise products to add":"No products match your search"},{item:t(({item:c,props:j})=>[e(L,el(tl(j)),{default:t(()=>[e(B,null,{default:t(()=>[f(v(c.raw.name),1)]),_:2},1024),e(il,null,{default:t(()=>[f(v(c.raw.category)+" • SAR "+v(c.raw.unitPrice.toFixed(2)),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","items","no-data-text"]),w.availableFranchiseProducts.length===0?(V(),N("div",hl,[e(g,{icon:"tabler-package-off",size:"48",class:"text-disabled mb-2"}),d[4]||(d[4]=o("div",{class:"text-body-2 text-disabled"}," All franchise products are already in this unit's inventory ",-1))])):O("",!0)]),_:1}),m.value?(V(),R(r,{key:0,cols:"12"},{default:t(()=>[e(D,{variant:"tonal",color:"primary"},{default:t(()=>[e(T,null,{default:t(()=>[o("div",Ol,[e(g,{icon:"tabler-package",size:"24"}),o("div",null,[o("h6",Hl,v(m.value.name),1),o("p",Jl,v(m.value.description),1),o("div",Wl," Category: "+v(m.value.category)+" • Price: SAR "+v(m.value.unitPrice.toFixed(2)),1)])])]),_:1})]),_:1})]),_:1})):O("",!0),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:b.value.quantity,"onUpdate:modelValue":d[1]||(d[1]=c=>b.value.quantity=c),label:"Initial Stock Quantity",type:"number",min:"0",required:"",placeholder:"Enter quantity to add"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[e(C,{modelValue:b.value.reorderLevel,"onUpdate:modelValue":d[2]||(d[2]=c=>b.value.reorderLevel=c),label:"Reorder Level",type:"number",min:"0",required:"",placeholder:"Minimum stock alert level"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(F),e(H,{class:"pa-6"},{default:t(()=>[e(Q),e(k,{color:"secondary",variant:"tonal",onClick:u},{default:t(()=>d[5]||(d[5]=[f(" Cancel ")])),_:1,__:[5]}),e(k,{color:"primary",disabled:!a.value||!b.value.quantity,onClick:n},{default:t(()=>d[6]||(d[6]=[f(" Add to Inventory ")])),_:1,__:[6]},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),Ql={class:"d-flex align-center justify-space-between"},Xl={class:"d-flex align-center gap-3"},Yl={class:"text-h2 mb-1"},Kl={class:"text-body-1 text-medium-emphasis"},Zl={key:0,class:"text-center py-8"},ea={key:1,class:"text-center py-8"},ta={class:"text-body-1 text-error"},la={class:"mb-4"},aa={class:"text-body-1 font-weight-medium"},sa={class:"mb-4"},oa={class:"text-body-1"},ia={class:"mb-4"},da={class:"text-body-1"},na=["href"],ua={class:"mb-4"},ra={class:"text-body-1"},ma={class:"mb-4"},va={class:"text-body-1"},ca={key:0,class:"text-center py-8"},fa={key:1,class:"text-center py-8"},pa={class:"text-body-1 text-error"},ba={class:"ms-4"},ya={class:"text-h4"},_a={class:"ms-4"},ga={class:"text-h4"},Va={class:"ms-4"},xa={class:"text-h4"},ka={class:"ms-4"},wa={class:"text-h4"},Da={class:"text-base font-weight-medium"},Ca={class:"text-body-2 text-disabled"},Sa={key:0,class:"text-center py-8"},Ua={key:1,class:"text-center py-8"},Ta={class:"text-body-1 text-error"},Pa={key:2,class:"text-center py-8"},Ra={class:"d-flex align-center mb-3"},za={class:"text-h6"},Aa={class:"text-body-2 text-disabled mb-0"},Na={class:"text-body-2 mb-3"},$a={class:"d-flex align-center justify-space-between mb-3"},Ea={class:"text-body-2 text-disabled"},Ia={class:"d-flex align-center justify-space-between mb-3"},qa={class:"text-body-2 text-disabled"},Fa={key:0,class:"text-center py-8"},La={key:1,class:"text-center py-8"},Ba={class:"text-body-1 text-error"},Ma={class:"ms-4"},ja={class:"text-h4"},ha={class:"ms-4"},Oa={class:"text-h4"},Ha={class:"ms-4"},Ja={class:"text-h4"},Wa={class:"d-flex align-center gap-x-3"},Ga={class:"text-base font-weight-medium"},Qa={class:"text-body-2 text-disabled"},Xa={key:0,class:"text-center py-8"},Ya={key:1,class:"text-center py-8"},Ka={class:"text-body-1 text-error"},Za={class:"ms-4"},es={class:"text-h4"},ts={class:"ms-4"},ls={class:"text-h4"},as={class:"ms-4"},ss={class:"text-h4"},os={class:"ms-4"},is={class:"text-h4"},ds={class:"text-body-1 font-weight-medium"},ns={key:0,class:"text-center py-8"},us={key:1,class:"text-center py-8"},rs={class:"text-body-1 text-error"},ms={class:"ms-4"},vs={class:"text-h4"},cs={class:"ms-4"},fs={class:"text-h4"},ps={class:"ms-4"},bs={class:"text-h4"},ys={class:"d-flex align-center gap-1"},_s={class:"text-body-2"},gs={class:"text-body-2",style:{"max-width":"300px"}},io=J({__name:"unit-operation",setup(A){const z=ll(),w=y("overview"),S=U(()=>{const i=z.params.id;return typeof i=="string"?i:""}),p=U(()=>{if(S.value){const i=Number.parseInt(S.value);if(!Number.isNaN(i))return i}return null}),a=U(()=>{var i;return((i=n.value)==null?void 0:i.id)||p.value}),b=y(!1),m=y(null),n=y(null),u=y([]),_=y([]),d=y([]),P=y([]),c=y([]),j=y([]),X=y(null),te=y({quantity:0,reorderLevel:5}),h=()=>{var l;const i=((l=n.value)==null?void 0:l.id)||p.value;if(!i)throw new Error("Unit ID is not available");return i};U(()=>X.value?j.value.find(i=>i.id===X.value):null);const Y=async()=>{try{b.value=!0,m.value=null;const i=p.value||void 0,l=await E.getUnitDetails(i);l.success&&(n.value=l.data);const s=await E.getUnitTasks(i);s.success&&(u.value=s.data);const x=await E.getUnitStaff(i);x.success&&(d.value=x.data);const q=await E.getUnitProducts(i);q.success&&(P.value=q.data);const Z=await E.getUnitReviews(i);Z.success&&(c.value=Z.data);const ee=await E.getUnitDocuments(i);ee.success&&(_.value=ee.data)}catch(i){console.error("Error loading unit data:",i),m.value="Failed to load unit data. Please try again."}finally{b.value=!1}};al(()=>{Y()});const Pe=y(!1),Re=y(!1),be=y(!1),ye=y(!1),_e=y(!1),ge=y(!1),ze=y(!1),Ve=y(!1),K=y(!1),re=y(null),Ae=y(null),Ne=y(!1),xe=y(!1),le=y(null),je=y(null),$e=y(!1),ke=y(!1),ae=y(null),he=y(null),Ee=y(!1),we=y(!1),se=y(null),Oe=y(null),Ie=y(!1),Fe=y(null),qe=y(null),Le=y({name:"",email:"",phone:"",jobTitle:"",department:"",salary:0,hireDate:"",shiftStart:"",shiftEnd:"",status:"Active",employmentType:"full_time",notes:""}),Be=y({customerName:"",customerEmail:"",rating:0,comment:"",date:""}),Me=y({...n.value}),He=U(()=>u.value.length),Je=U(()=>u.value.filter(i=>i.status==="completed").length),We=U(()=>u.value.filter(i=>i.status==="in_progress").length),Ge=U(()=>{const i=new Date;return u.value.filter(l=>new Date(l.dueDate)<=i&&l.status!=="completed").length}),Qe=U(()=>d.value.length),Xe=U(()=>d.value.filter(i=>i.status==="working").length),Ye=U(()=>d.value.filter(i=>i.status==="leave").length),Ke=U(()=>P.value.length),Ze=U(()=>P.value.reduce((i,l)=>i+l.stock,0)),et=U(()=>P.value.filter(i=>i.stock>0&&i.stock<=10).length),tt=U(()=>P.value.filter(i=>i.stock===0).length),lt=U(()=>c.value.length===0?0:(c.value.reduce((l,s)=>l+s.rating,0)/c.value.length).toFixed(1)),at=U(()=>c.value.filter(i=>i.sentiment==="positive").length),st=U(()=>c.value.filter(i=>i.sentiment==="negative").length),me=i=>i==="active"||i==="completed"||i==="approved"||i==="working"?"success":i==="pending"||i==="in_progress"||i==="leave"?"warning":i==="inactive"||i==="rejected"||i==="terminated"?"error":"secondary",ot=i=>i==="high"?"error":i==="medium"?"warning":i==="low"?"info":"secondary",it=()=>{Me.value={...n.value},be.value=!0},dt=async i=>{const l=i||Me.value;try{const s=await E.updateUnitDetails(h(),l);s.success&&(n.value=s.data,be.value=!1)}catch(s){console.error("Error updating unit details:",s)}},nt=async i=>{await dt(i)},ut=async i=>{try{const l=await E.createTask(h(),i);l.success&&u.value.push(l.data)}catch(l){console.error("Error creating task:",l)}},rt=async i=>{try{const l=new FormData;l.append("title",i.title),l.append("description",i.description),l.append("type",i.type),l.append("status",i.status||"pending"),l.append("comment",i.comment||""),i.file&&l.append("file",i.file);const s=await E.createDocument(h(),l);s.success&&_.value.push(s.data)}catch(l){console.error("Error creating document:",l)}},mt=async i=>{try{i.action==="approve"?console.log("Approving document:",i.document,"with comment:",i.comment):i.action==="reject"&&console.log("Rejecting document:",i.document,"with comment:",i.comment)}catch(l){console.error("Error performing document action:",l)}finally{Ie.value=!1,Fe.value=null,qe.value=null}},vt=async i=>{var l;try{const s=((l=n.value)==null?void 0:l.id)||h(),x=ol("accessToken").value;if(!x){console.error("No access token found");return}const q=await fetch(`/api/v1/unit-manager/units/documents/${s}/${i.id}/download`,{method:"GET",headers:{Authorization:`Bearer ${x}`,Accept:"application/octet-stream","X-Requested-With":"XMLHttpRequest"},credentials:"include"});if(!q.ok){const Jt=await q.text();throw console.error("Download failed:",q.status,Jt),new Error(`Failed to download document: ${q.status}`)}const Z=await q.blob(),ee=window.URL.createObjectURL(Z),ve=window.document.createElement("a");ve.href=ee,ve.download=i.fileName,window.document.body.appendChild(ve),ve.click(),window.document.body.removeChild(ve),window.URL.revokeObjectURL(ee)}catch(s){console.error("Error downloading document:",s)}},ct=i=>{le.value=i,Ne.value=!0},ft=i=>{le.value={...i},xe.value=!0},pt=i=>{je.value=i,K.value=!0},bt=async i=>{const l=i||le.value;if(l)try{const s=await E.updateStaff(h(),l.id,l);if(s.success){const x=d.value.findIndex(q=>q.id===l.id);x!==-1&&(d.value[x]=s.data)}}catch(s){console.error("Error updating staff:",s)}finally{xe.value=!1,le.value=null}},yt=async i=>{await bt(i)},_t=async i=>{const l=i||Le.value;try{const s=await E.createStaff(h(),l);s.success&&(d.value.push(s.data),ye.value=!1,Le.value={name:"",email:"",phone:"",jobTitle:"",department:"",salary:0,hireDate:"",shiftStart:"",shiftEnd:"",status:"Active",employmentType:"full_time",notes:""})}catch(s){console.error("Error adding staff:",s)}},gt=async i=>{await _t(i)},Vt=i=>{ae.value=i,$e.value=!0},xt=i=>{ae.value={...i},ke.value=!0},kt=i=>{he.value=i,K.value=!0},wt=async i=>{const l=i||ae.value;if(l)try{const s=await E.updateProduct(h(),l.id,l);if(s.success){const x=P.value.findIndex(q=>q.id===l.id);x!==-1&&(P.value[x]=s.data)}}catch(s){console.error("Error updating product:",s)}finally{ke.value=!1,ae.value=null}},Dt=async i=>{await wt(i)},Ct=async()=>{var i;try{const l=((i=n.value)==null?void 0:i.id)||h();if(!l){console.error("Unit ID not available yet. Please wait for unit data to load."),j.value=[];return}const s=await E.getAvailableFranchiseProducts(l);s.success&&(j.value=s.data)}catch(l){console.error("Error loading franchise products:",l),j.value=[]}},St=async i=>{var s;const l=i||{productId:X.value,quantity:Number.parseInt(te.value.quantity.toString()),reorderLevel:Number.parseInt(te.value.reorderLevel.toString())};try{const x=((s=n.value)==null?void 0:s.id)||h();if(!x){console.error("Unit ID not available for adding product");return}if((await E.addProductToInventory(x,l)).success){const Z=j.value.find(ee=>ee.id===l.productId);Z&&P.value.push({...Z,stock:l.quantity}),Tt()}}catch(x){console.error("Error adding product to inventory:",x)}},Ut=async i=>{await St(i)},Tt=()=>{_e.value=!1,X.value=null,te.value={quantity:0,reorderLevel:5}},Pt=()=>{Ct(),_e.value=!0},Rt=i=>{se.value=i,Ee.value=!0},zt=i=>{se.value={...i},we.value=!0},At=i=>{Oe.value=i,K.value=!0},Nt=async i=>{const l=i||se.value;if(l)try{const s=await E.updateReview(h(),l.id,l);if(s.success){const x=c.value.findIndex(q=>q.id===l.id);x!==-1&&(c.value[x]=s.data)}}catch(s){console.error("Error updating review:",s)}finally{we.value=!1,se.value=null}},$t=async i=>{await Nt(i)},Et=async i=>{const l=i||Be.value;try{const s=await E.createReview(h(),l);s.success&&(c.value.push(s.data),ge.value=!1,Be.value={customerName:"",customerEmail:"",rating:0,comment:"",date:""})}catch(s){console.error("Error adding review:",s)}},It=async i=>{await Et(i)},qt=i=>{re.value=i,ze.value=!0},Ft=i=>{re.value={...i},Ve.value=!0},Lt=i=>{Ae.value=i,K.value=!0},Bt=i=>{const l=u.value.findIndex(s=>s.id===i.id);l!==-1&&(u.value[l]=i),Ve.value=!1,re.value=null},Mt=i=>{const l=u.value.findIndex(s=>s.id===i);l!==-1&&u.value.splice(l,1),K.value=!1,Ae.value=null},jt=[{title:"Task Info",key:"taskInfo"},{title:"Category",key:"category"},{title:"Start Date",key:"startDate"},{title:"Due Date",key:"dueDate"},{title:"Priority",key:"priority"},{title:"Status",key:"status"},{title:"Actions",key:"actions",sortable:!1}],ht=[{title:"Name",key:"name"},{title:"Job Title",key:"jobTitle"},{title:"Email",key:"email"},{title:"Shift Time",key:"shiftTime"},{title:"Status",key:"status"}],Ot=[{title:"Product Name",key:"name"},{title:"Description",key:"description"},{title:"Category",key:"category"},{title:"Unit Price",key:"unitPrice"},{title:"Stock",key:"stock"},{title:"Status",key:"status"}],Ht=[{title:"Customer",key:"customerName"},{title:"Rating",key:"rating"},{title:"Comment",key:"comment"},{title:"Date",key:"date"},{title:"Sentiment",key:"sentiment"}];return(i,l)=>(V(),N("section",null,[e($,{class:"mb-6"},{default:t(()=>[e(r,{cols:"12"},{default:t(()=>{var s;return[o("div",Ql,[o("div",Xl,[o("div",null,[o("h2",Yl,v(((s=n.value)==null?void 0:s.branchName)||"Loading..."),1),o("p",Kl,v(n.value?`Managed by ${n.value.franchiseeName} • ${n.value.city}, ${n.value.state}`:"Loading unit information..."),1)])]),n.value?(V(),R(M,{key:0,color:me(n.value.status),size:"large",label:"",class:"text-capitalize"},{default:t(()=>[f(v(n.value.status),1)]),_:1},8,["color"])):(V(),R(ul,{key:1,type:"chip",width:"80",height:"32"}))])]}),_:1})]),_:1}),e(dl,{modelValue:w.value,"onUpdate:modelValue":l[0]||(l[0]=s=>w.value=s),class:"mb-6"},{default:t(()=>[e(ne,{value:"overview"},{default:t(()=>[e(g,{icon:"tabler-info-circle",start:""}),l[22]||(l[22]=f(" Overview "))]),_:1,__:[22]}),e(ne,{value:"tasks",hidden:""},{default:t(()=>[e(g,{icon:"tabler-checklist",start:""}),l[23]||(l[23]=f(" Tasks "))]),_:1,__:[23]}),e(ne,{value:"documents"},{default:t(()=>[e(g,{icon:"tabler-files",start:""}),l[24]||(l[24]=f(" Documents "))]),_:1,__:[24]}),e(ne,{value:"staffs"},{default:t(()=>[e(g,{icon:"tabler-users",start:""}),l[25]||(l[25]=f(" Staffs "))]),_:1,__:[25]}),e(ne,{value:"inventory"},{default:t(()=>[e(g,{icon:"tabler-package",start:""}),l[26]||(l[26]=f(" Inventory Management "))]),_:1,__:[26]}),e(ne,{value:"reviews"},{default:t(()=>[e(g,{icon:"tabler-star",start:""}),l[27]||(l[27]=f(" Customer Reviews "))]),_:1,__:[27]})]),_:1},8,["modelValue"]),e(nl,{modelValue:w.value,"onUpdate:modelValue":l[5]||(l[5]=s=>w.value=s),class:"disable-tab-transition"},{default:t(()=>[e(ue,{value:"overview"},{default:t(()=>[e(D,null,{default:t(()=>[e(oe,{class:"pb-4"},{append:t(()=>[e(k,{color:"primary","prepend-icon":"tabler-edit",disabled:!n.value,onClick:it},{default:t(()=>l[29]||(l[29]=[f(" Edit Details ")])),_:1,__:[29]},8,["disabled"])]),default:t(()=>[e(ie,null,{default:t(()=>l[28]||(l[28]=[f("Unit Information")])),_:1,__:[28]})]),_:1}),e(F),e(T,null,{default:t(()=>[b.value?(V(),N("div",Zl,[e(de,{indeterminate:"",color:"primary"}),l[30]||(l[30]=o("div",{class:"mt-3 text-body-1"}," Loading unit information... ",-1))])):m.value?(V(),N("div",ea,[e(g,{icon:"tabler-alert-circle",color:"error",size:"48",class:"mb-3"}),o("div",ta,v(m.value),1),e(k,{color:"primary",variant:"tonal",class:"mt-3",onClick:Y},{default:t(()=>l[31]||(l[31]=[f(" Retry ")])),_:1,__:[31]})])):n.value?(V(),R($,{key:2},{default:t(()=>[e(r,{cols:"12"},{default:t(()=>[l[37]||(l[37]=o("h4",{class:"text-h6 mb-4"}," Basic Information ",-1)),e($,null,{default:t(()=>[e(r,{cols:"12",md:"6"},{default:t(()=>[o("div",la,[l[32]||(l[32]=o("div",{class:"text-sm text-disabled mb-1"}," Branch Name ",-1)),o("div",aa,v(n.value.branchName),1)])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[o("div",sa,[l[33]||(l[33]=o("div",{class:"text-sm text-disabled mb-1"}," Franchisee Name ",-1)),o("div",oa,v(n.value.franchiseeName),1)])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[o("div",ia,[l[34]||(l[34]=o("div",{class:"text-sm text-disabled mb-1"}," Email Address ",-1)),o("div",da,[o("a",{href:`mailto:${n.value.email}`,class:"text-primary"},v(n.value.email),9,na)])])]),_:1}),e(r,{cols:"12",md:"6"},{default:t(()=>[o("div",ua,[l[35]||(l[35]=o("div",{class:"text-sm text-disabled mb-1"}," Contact Number ",-1)),o("div",ra,v(n.value.contactNumber),1)])]),_:1}),e(r,{cols:"12"},{default:t(()=>[o("div",ma,[l[36]||(l[36]=o("div",{class:"text-sm text-disabled mb-1"}," Address ",-1)),o("div",va,v(n.value.address)+", "+v(n.value.city)+", "+v(n.value.state)+", "+v(n.value.country),1)])]),_:1})]),_:1})]),_:1,__:[37]})]),_:1})):O("",!0)]),_:1})]),_:1})]),_:1}),e(ue,{value:"tasks"},{default:t(()=>[b.value?(V(),N("div",ca,[e(de,{indeterminate:"",color:"primary"}),l[38]||(l[38]=o("div",{class:"mt-3 text-body-1"}," Loading tasks data... ",-1))])):m.value?(V(),N("div",fa,[e(g,{icon:"tabler-alert-circle",color:"error",size:"48",class:"mb-3"}),o("div",pa,v(m.value),1),e(k,{color:"primary",variant:"tonal",class:"mt-3",onClick:Y},{default:t(()=>l[39]||(l[39]=[f(" Retry ")])),_:1,__:[39]})])):(V(),N(ce,{key:2},[e($,{class:"mb-6"},{default:t(()=>[e(r,{cols:"12",md:"3"},{default:t(()=>[e(D,null,{default:t(()=>[e(T,{class:"d-flex align-center"},{default:t(()=>[e(I,{size:"44",rounded:"",color:"primary",variant:"tonal"},{default:t(()=>[e(g,{icon:"tabler-checklist",size:"26"})]),_:1}),o("div",ba,[l[40]||(l[40]=o("div",{class:"text-body-2 text-disabled"}," Total Tasks ",-1)),o("h4",ya,v(He.value),1)])]),_:1})]),_:1})]),_:1}),e(r,{cols:"12",md:"3"},{default:t(()=>[e(D,null,{default:t(()=>[e(T,{class:"d-flex align-center"},{default:t(()=>[e(I,{size:"44",rounded:"",color:"success",variant:"tonal"},{default:t(()=>[e(g,{icon:"tabler-check",size:"26"})]),_:1}),o("div",_a,[l[41]||(l[41]=o("div",{class:"text-body-2 text-disabled"}," Completed ",-1)),o("h4",ga,v(Je.value),1)])]),_:1})]),_:1})]),_:1}),e(r,{cols:"12",md:"3"},{default:t(()=>[e(D,null,{default:t(()=>[e(T,{class:"d-flex align-center"},{default:t(()=>[e(I,{size:"44",rounded:"",color:"warning",variant:"tonal"},{default:t(()=>[e(g,{icon:"tabler-clock",size:"26"})]),_:1}),o("div",Va,[l[42]||(l[42]=o("div",{class:"text-body-2 text-disabled"}," In Progress ",-1)),o("h4",xa,v(We.value),1)])]),_:1})]),_:1})]),_:1}),e(r,{cols:"12",md:"3"},{default:t(()=>[e(D,null,{default:t(()=>[e(T,{class:"d-flex align-center"},{default:t(()=>[e(I,{size:"44",rounded:"",color:"error",variant:"tonal"},{default:t(()=>[e(g,{icon:"tabler-alert-circle",size:"26"})]),_:1}),o("div",ka,[l[43]||(l[43]=o("div",{class:"text-body-2 text-disabled"}," Due ",-1)),o("h4",wa,v(Ge.value),1)])]),_:1})]),_:1})]),_:1})]),_:1}),e(D,null,{default:t(()=>[e(oe,{class:"pb-4"},{append:t(()=>[e(k,{color:"primary","prepend-icon":"tabler-plus",onClick:l[1]||(l[1]=s=>Pe.value=!0)},{default:t(()=>l[45]||(l[45]=[f(" Create Task ")])),_:1,__:[45]})]),default:t(()=>[e(ie,null,{default:t(()=>l[44]||(l[44]=[f("Tasks")])),_:1,__:[44]})]),_:1}),e(F),e(Ce,{items:u.value,headers:jt,class:"text-no-wrap","item-value":"id"},{"item.taskInfo":t(({item:s})=>[o("div",null,[o("h6",Da,v(s.title),1),o("div",Ca,v(s.description),1)])]),"item.priority":t(({item:s})=>[e(M,{color:ot(s.priority),size:"small",label:"",class:"text-capitalize"},{default:t(()=>[f(v(s.priority),1)]),_:2},1032,["color"])]),"item.status":t(({item:s})=>[e(M,{color:me(s.status),size:"small",label:"",class:"text-capitalize"},{default:t(()=>[f(v(s.status),1)]),_:2},1032,["color"])]),"item.actions":t(({item:s})=>[e(k,{icon:"",variant:"text",color:"medium-emphasis",size:"small"},{default:t(()=>[e(g,{icon:"tabler-dots-vertical"}),e(Se,{activator:"parent"},{default:t(()=>[e(De,null,{default:t(()=>[e(L,{onClick:x=>qt(s)},{prepend:t(()=>[e(g,{icon:"tabler-eye"})]),default:t(()=>[e(B,null,{default:t(()=>l[46]||(l[46]=[f("View")])),_:1,__:[46]})]),_:2},1032,["onClick"]),e(L,{onClick:x=>Ft(s)},{prepend:t(()=>[e(g,{icon:"tabler-edit"})]),default:t(()=>[e(B,null,{default:t(()=>l[47]||(l[47]=[f("Edit")])),_:1,__:[47]})]),_:2},1032,["onClick"]),e(L,{onClick:x=>Lt(s.id)},{prepend:t(()=>[e(g,{icon:"tabler-trash"})]),default:t(()=>[e(B,null,{default:t(()=>l[48]||(l[48]=[f("Delete")])),_:1,__:[48]})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["items"])]),_:1})],64))]),_:1}),e(ue,{value:"documents"},{default:t(()=>[e(D,null,{default:t(()=>[e(oe,{class:"pb-4"},{append:t(()=>[e(k,{color:"primary","prepend-icon":"tabler-plus",disabled:b.value,onClick:l[2]||(l[2]=s=>Re.value=!0)},{default:t(()=>l[50]||(l[50]=[f(" Add Document ")])),_:1,__:[50]},8,["disabled"])]),default:t(()=>[e(ie,null,{default:t(()=>l[49]||(l[49]=[f("Unit Documents")])),_:1,__:[49]})]),_:1}),e(T,null,{default:t(()=>[b.value?(V(),N("div",Sa,[e(de,{indeterminate:"",color:"primary"}),l[51]||(l[51]=o("div",{class:"mt-3 text-body-1"}," Loading documents... ",-1))])):m.value?(V(),N("div",Ua,[e(g,{icon:"tabler-alert-circle",color:"error",size:"48",class:"mb-3"}),o("div",Ta,v(m.value),1),e(k,{color:"primary",variant:"tonal",class:"mt-3",onClick:Y},{default:t(()=>l[52]||(l[52]=[f(" Retry ")])),_:1,__:[52]})])):_.value.length===0?(V(),N("div",Pa,[e(g,{icon:"tabler-folder-open",size:"48",class:"text-disabled mb-3"}),l[53]||(l[53]=o("div",{class:"text-body-1 text-disabled"}," No documents found for this unit ",-1))])):(V(),R($,{key:3},{default:t(()=>[(V(!0),N(ce,null,sl(_.value,s=>(V(),R(r,{key:s.id,cols:"12",md:"6",lg:"4"},{default:t(()=>[e(D,null,{default:t(()=>[e(T,null,{default:t(()=>[o("div",Ra,[e(g,{icon:"tabler-file-text",size:"24",color:"primary",class:"me-3"}),o("div",null,[o("h6",za,v(s.title),1),o("p",Aa,v(s.type),1)])]),o("p",Na,v(s.description),1),o("div",$a,[o("span",Ea,v(s.fileName),1),e(M,{size:"small",color:"secondary"},{default:t(()=>[f(v(s.fileSize),1)]),_:2},1024)]),o("div",Ia,[o("span",qa,v(s.uploadDate),1),e(M,{color:me(s.status),size:"small",label:"",class:"text-capitalize"},{default:t(()=>[f(v(s.status),1)]),_:2},1032,["color"])])]),_:2},1024),e(H,null,{default:t(()=>[e(k,{size:"small",variant:"text",color:"primary","prepend-icon":"tabler-download",onClick:x=>vt(s)},{default:t(()=>l[54]||(l[54]=[f(" Download ")])),_:2,__:[54]},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}))]),_:1})]),_:1})]),_:1}),e(ue,{value:"staffs"},{default:t(()=>[b.value?(V(),N("div",Fa,[e(de,{indeterminate:"",color:"primary"}),l[55]||(l[55]=o("div",{class:"mt-3 text-body-1"}," Loading staff data... ",-1))])):m.value?(V(),N("div",La,[e(g,{icon:"tabler-alert-circle",color:"error",size:"48",class:"mb-3"}),o("div",Ba,v(m.value),1),e(k,{color:"primary",variant:"tonal",class:"mt-3",onClick:Y},{default:t(()=>l[56]||(l[56]=[f(" Retry ")])),_:1,__:[56]})])):(V(),N(ce,{key:2},[e($,{class:"mb-6"},{default:t(()=>[e(r,{cols:"12",md:"4"},{default:t(()=>[e(D,null,{default:t(()=>[e(T,{class:"d-flex align-center"},{default:t(()=>[e(I,{size:"44",rounded:"",color:"primary",variant:"tonal"},{default:t(()=>[e(g,{icon:"tabler-users",size:"26"})]),_:1}),o("div",Ma,[l[57]||(l[57]=o("div",{class:"text-body-2 text-disabled"}," Total Employees ",-1)),o("h4",ja,v(Qe.value),1)])]),_:1})]),_:1})]),_:1}),e(r,{cols:"12",md:"4"},{default:t(()=>[e(D,null,{default:t(()=>[e(T,{class:"d-flex align-center"},{default:t(()=>[e(I,{size:"44",rounded:"",color:"success",variant:"tonal"},{default:t(()=>[e(g,{icon:"tabler-user-check",size:"26"})]),_:1}),o("div",ha,[l[58]||(l[58]=o("div",{class:"text-body-2 text-disabled"}," Working ",-1)),o("h4",Oa,v(Xe.value),1)])]),_:1})]),_:1})]),_:1}),e(r,{cols:"12",md:"4"},{default:t(()=>[e(D,null,{default:t(()=>[e(T,{class:"d-flex align-center"},{default:t(()=>[e(I,{size:"44",rounded:"",color:"warning",variant:"tonal"},{default:t(()=>[e(g,{icon:"tabler-user-minus",size:"26"})]),_:1}),o("div",Ha,[l[59]||(l[59]=o("div",{class:"text-body-2 text-disabled"}," On Leave ",-1)),o("h4",Ja,v(Ye.value),1)])]),_:1})]),_:1})]),_:1})]),_:1}),e(D,null,{default:t(()=>[e(oe,{class:"pb-4"},{append:t(()=>[e(k,{color:"primary","prepend-icon":"tabler-plus",onClick:l[3]||(l[3]=s=>ye.value=!0)},{default:t(()=>l[61]||(l[61]=[f(" Add Staff ")])),_:1,__:[61]})]),default:t(()=>[e(ie,null,{default:t(()=>l[60]||(l[60]=[f("Staff Members")])),_:1,__:[60]})]),_:1}),e(F),e(Ce,{items:d.value,headers:[...ht,{title:"Actions",key:"actions",sortable:!1}],class:"text-no-wrap","item-value":"id"},{"item.name":t(({item:s})=>[o("div",Wa,[e(I,{size:"34",color:"primary",variant:"tonal"},{default:t(()=>[o("span",null,v(s.name.split(" ").map(x=>x[0]).join("")),1)]),_:2},1024),o("div",null,[o("h6",Ga,v(s.name),1),o("div",Qa,v(s.email),1)])])]),"item.status":t(({item:s})=>[e(M,{color:me(s.status),size:"small",label:"",class:"text-capitalize"},{default:t(()=>[f(v(s.status),1)]),_:2},1032,["color"])]),"item.actions":t(({item:s})=>[e(k,{icon:"",variant:"text",color:"medium-emphasis",size:"small"},{default:t(()=>[e(g,{icon:"tabler-dots-vertical"}),e(Se,{activator:"parent"},{default:t(()=>[e(De,null,{default:t(()=>[e(L,{onClick:x=>ct(s)},{prepend:t(()=>[e(g,{icon:"tabler-eye"})]),default:t(()=>[e(B,null,{default:t(()=>l[62]||(l[62]=[f("View")])),_:1,__:[62]})]),_:2},1032,["onClick"]),e(L,{onClick:x=>ft(s)},{prepend:t(()=>[e(g,{icon:"tabler-edit"})]),default:t(()=>[e(B,null,{default:t(()=>l[63]||(l[63]=[f("Edit")])),_:1,__:[63]})]),_:2},1032,["onClick"]),e(L,{onClick:x=>pt(s.id)},{prepend:t(()=>[e(g,{icon:"tabler-trash"})]),default:t(()=>[e(B,null,{default:t(()=>l[64]||(l[64]=[f("Remove")])),_:1,__:[64]})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["items","headers"])]),_:1})],64))]),_:1}),e(ue,{value:"inventory"},{default:t(()=>[b.value?(V(),N("div",Xa,[e(de,{indeterminate:"",color:"primary"}),l[65]||(l[65]=o("div",{class:"mt-3 text-body-1"}," Loading inventory data... ",-1))])):m.value?(V(),N("div",Ya,[e(g,{icon:"tabler-alert-circle",color:"error",size:"48",class:"mb-3"}),o("div",Ka,v(m.value),1),e(k,{color:"primary",variant:"tonal",class:"mt-3",onClick:Y},{default:t(()=>l[66]||(l[66]=[f(" Retry ")])),_:1,__:[66]})])):(V(),N(ce,{key:2},[e($,{class:"mb-6"},{default:t(()=>[e(r,{cols:"12",md:"3"},{default:t(()=>[e(D,null,{default:t(()=>[e(T,{class:"d-flex align-center"},{default:t(()=>[e(I,{size:"44",rounded:"",color:"primary",variant:"tonal"},{default:t(()=>[e(g,{icon:"tabler-package",size:"26"})]),_:1}),o("div",Za,[l[67]||(l[67]=o("div",{class:"text-body-2 text-disabled"}," Total Products ",-1)),o("h4",es,v(Ke.value),1)])]),_:1})]),_:1})]),_:1}),e(r,{cols:"12",md:"3"},{default:t(()=>[e(D,null,{default:t(()=>[e(T,{class:"d-flex align-center"},{default:t(()=>[e(I,{size:"44",rounded:"",color:"info",variant:"tonal"},{default:t(()=>[e(g,{icon:"tabler-stack",size:"26"})]),_:1}),o("div",ts,[l[68]||(l[68]=o("div",{class:"text-body-2 text-disabled"}," Total Stock ",-1)),o("h4",ls,v(Ze.value),1)])]),_:1})]),_:1})]),_:1}),e(r,{cols:"12",md:"3"},{default:t(()=>[e(D,null,{default:t(()=>[e(T,{class:"d-flex align-center"},{default:t(()=>[e(I,{size:"44",rounded:"",color:"warning",variant:"tonal"},{default:t(()=>[e(g,{icon:"tabler-alert-triangle",size:"26"})]),_:1}),o("div",as,[l[69]||(l[69]=o("div",{class:"text-body-2 text-disabled"}," Low Stock ",-1)),o("h4",ss,v(et.value),1)])]),_:1})]),_:1})]),_:1}),e(r,{cols:"12",md:"3"},{default:t(()=>[e(D,null,{default:t(()=>[e(T,{class:"d-flex align-center"},{default:t(()=>[e(I,{size:"44",rounded:"",color:"error",variant:"tonal"},{default:t(()=>[e(g,{icon:"tabler-x",size:"26"})]),_:1}),o("div",os,[l[70]||(l[70]=o("div",{class:"text-body-2 text-disabled"}," Out of Stock ",-1)),o("h4",is,v(tt.value),1)])]),_:1})]),_:1})]),_:1})]),_:1}),e(D,null,{default:t(()=>[e(oe,{class:"pb-4"},{append:t(()=>[e(k,{color:"primary","prepend-icon":"tabler-plus",onClick:Pt},{default:t(()=>l[73]||(l[73]=[f(" Add to Inventory ")])),_:1,__:[73]})]),default:t(()=>[e(ie,null,{default:t(()=>l[71]||(l[71]=[f("Inventory")])),_:1,__:[71]}),e(Zt,null,{default:t(()=>l[72]||(l[72]=[f("Manage stock levels for franchise products")])),_:1,__:[72]})]),_:1}),e(F),e(Ce,{items:P.value,headers:[...Ot,{title:"Actions",key:"actions",sortable:!1}],class:"text-no-wrap","item-value":"id"},{"item.unitPrice":t(({item:s})=>[o("div",ds," SAR "+v(s.unitPrice.toFixed(2)),1)]),"item.stock":t(({item:s})=>[e(M,{color:s.stock===0?"error":s.stock<=10?"warning":"success",size:"small",label:""},{default:t(()=>[f(v(s.stock),1)]),_:2},1032,["color"])]),"item.status":t(({item:s})=>[e(M,{color:me(s.status),size:"small",label:"",class:"text-capitalize"},{default:t(()=>[f(v(s.status),1)]),_:2},1032,["color"])]),"item.actions":t(({item:s})=>[e(k,{icon:"",variant:"text",color:"medium-emphasis",size:"small"},{default:t(()=>[e(g,{icon:"tabler-dots-vertical"}),e(Se,{activator:"parent"},{default:t(()=>[e(De,null,{default:t(()=>[e(L,{onClick:x=>Vt(s)},{prepend:t(()=>[e(g,{icon:"tabler-eye"})]),default:t(()=>[e(B,null,{default:t(()=>l[74]||(l[74]=[f("View")])),_:1,__:[74]})]),_:2},1032,["onClick"]),e(L,{onClick:x=>xt(s)},{prepend:t(()=>[e(g,{icon:"tabler-edit"})]),default:t(()=>[e(B,null,{default:t(()=>l[75]||(l[75]=[f("Edit")])),_:1,__:[75]})]),_:2},1032,["onClick"]),e(L,{onClick:x=>kt(s.id)},{prepend:t(()=>[e(g,{icon:"tabler-trash"})]),default:t(()=>[e(B,null,{default:t(()=>l[76]||(l[76]=[f("Remove from Inventory")])),_:1,__:[76]})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["items","headers"])]),_:1})],64))]),_:1}),e(ue,{value:"reviews"},{default:t(()=>[b.value?(V(),N("div",ns,[e(de,{indeterminate:"",color:"primary"}),l[77]||(l[77]=o("div",{class:"mt-3 text-body-1"}," Loading reviews data... ",-1))])):m.value?(V(),N("div",us,[e(g,{icon:"tabler-alert-circle",color:"error",size:"48",class:"mb-3"}),o("div",rs,v(m.value),1),e(k,{color:"primary",variant:"tonal",class:"mt-3",onClick:Y},{default:t(()=>l[78]||(l[78]=[f(" Retry ")])),_:1,__:[78]})])):(V(),N(ce,{key:2},[e($,{class:"mb-6"},{default:t(()=>[e(r,{cols:"12",md:"4"},{default:t(()=>[e(D,null,{default:t(()=>[e(T,{class:"d-flex align-center"},{default:t(()=>[e(I,{size:"44",rounded:"",color:"primary",variant:"tonal"},{default:t(()=>[e(g,{icon:"tabler-star",size:"26"})]),_:1}),o("div",ms,[l[79]||(l[79]=o("div",{class:"text-body-2 text-disabled"}," Average Rating ",-1)),o("h4",vs,v(lt.value),1)])]),_:1})]),_:1})]),_:1}),e(r,{cols:"12",md:"4"},{default:t(()=>[e(D,null,{default:t(()=>[e(T,{class:"d-flex align-center"},{default:t(()=>[e(I,{size:"44",rounded:"",color:"success",variant:"tonal"},{default:t(()=>[e(g,{icon:"tabler-thumb-up",size:"26"})]),_:1}),o("div",cs,[l[80]||(l[80]=o("div",{class:"text-body-2 text-disabled"}," Positive Reviews ",-1)),o("h4",fs,v(at.value),1)])]),_:1})]),_:1})]),_:1}),e(r,{cols:"12",md:"4"},{default:t(()=>[e(D,null,{default:t(()=>[e(T,{class:"d-flex align-center"},{default:t(()=>[e(I,{size:"44",rounded:"",color:"error",variant:"tonal"},{default:t(()=>[e(g,{icon:"tabler-thumb-down",size:"26"})]),_:1}),o("div",ps,[l[81]||(l[81]=o("div",{class:"text-body-2 text-disabled"}," Negative Reviews ",-1)),o("h4",bs,v(st.value),1)])]),_:1})]),_:1})]),_:1})]),_:1}),e(D,null,{default:t(()=>[e(oe,{class:"pb-4"},{append:t(()=>[e(k,{color:"primary","prepend-icon":"tabler-plus",onClick:l[4]||(l[4]=s=>ge.value=!0)},{default:t(()=>l[83]||(l[83]=[f(" Add Review ")])),_:1,__:[83]})]),default:t(()=>[e(ie,null,{default:t(()=>l[82]||(l[82]=[f("Customer Reviews")])),_:1,__:[82]})]),_:1}),e(F),e(Ce,{items:c.value,headers:[...Ht,{title:"Actions",key:"actions",sortable:!1}],class:"text-no-wrap","item-value":"id"},{"item.rating":t(({item:s})=>[o("div",ys,[e(Ue,{"model-value":s.rating,readonly:"",size:"small",color:"warning"},null,8,["model-value"]),o("span",_s,"("+v(s.rating)+")",1)])]),"item.comment":t(({item:s})=>[o("div",gs,v(s.comment),1)]),"item.sentiment":t(({item:s})=>[e(M,{color:s.sentiment==="positive"?"success":"error",size:"small",label:"",class:"text-capitalize"},{default:t(()=>[f(v(s.sentiment),1)]),_:2},1032,["color"])]),"item.actions":t(({item:s})=>[e(k,{icon:"",variant:"text",color:"medium-emphasis",size:"small"},{default:t(()=>[e(g,{icon:"tabler-dots-vertical"}),e(Se,{activator:"parent"},{default:t(()=>[e(De,null,{default:t(()=>[e(L,{onClick:x=>Rt(s)},{prepend:t(()=>[e(g,{icon:"tabler-eye"})]),default:t(()=>[e(B,null,{default:t(()=>l[84]||(l[84]=[f("View")])),_:1,__:[84]})]),_:2},1032,["onClick"]),e(L,{onClick:x=>zt(s)},{prepend:t(()=>[e(g,{icon:"tabler-edit"})]),default:t(()=>[e(B,null,{default:t(()=>l[85]||(l[85]=[f("Edit")])),_:1,__:[85]})]),_:2},1032,["onClick"]),e(L,{onClick:x=>At(s.id)},{prepend:t(()=>[e(g,{icon:"tabler-trash"})]),default:t(()=>[e(B,null,{default:t(()=>l[86]||(l[86]=[f("Remove")])),_:1,__:[86]})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["items","headers"])]),_:1})],64))]),_:1})]),_:1},8,["modelValue"]),e(Gt,{"is-dialog-visible":Pe.value,"onUpdate:isDialogVisible":l[6]||(l[6]=s=>Pe.value=s),onTaskCreated:ut},null,8,["is-dialog-visible"]),e(Wt,{"is-dialog-visible":Re.value,"onUpdate:isDialogVisible":l[7]||(l[7]=s=>Re.value=s),"unit-id":a.value,mode:"unit",onDocumentAdded:rt},null,8,["is-dialog-visible","unit-id"]),qe.value?(V(),R(Qt,{key:0,"is-dialog-visible":Ie.value,"onUpdate:isDialogVisible":l[8]||(l[8]=s=>Ie.value=s),document:Fe.value,action:qe.value,onDocumentActionConfirmed:mt},null,8,["is-dialog-visible","document","action"])):O("",!0),e(Xt,{"is-dialog-visible":ze.value,"onUpdate:isDialogVisible":l[9]||(l[9]=s=>ze.value=s),task:re.value},null,8,["is-dialog-visible","task"]),e(Yt,{"is-dialog-visible":Ve.value,"onUpdate:isDialogVisible":l[10]||(l[10]=s=>Ve.value=s),task:re.value,"user-options":[],"users-loading":!1,onTaskUpdated:Bt},null,8,["is-dialog-visible","task"]),e(Kt,{"is-dialog-visible":K.value,"onUpdate:isDialogVisible":l[11]||(l[11]=s=>K.value=s),"task-id":Ae.value,onTaskDeleted:Mt},null,8,["is-dialog-visible","task-id"]),e(jl,{"is-dialog-visible":be.value,"onUpdate:isDialogVisible":l[12]||(l[12]=s=>be.value=s),"unit-data":n.value,onUnitUpdated:nt},null,8,["is-dialog-visible","unit-data"]),e(Ml,{"is-dialog-visible":ye.value,"onUpdate:isDialogVisible":l[13]||(l[13]=s=>ye.value=s),onStaffAdded:gt},null,8,["is-dialog-visible"]),e(Nl,{"is-dialog-visible":Ne.value,"onUpdate:isDialogVisible":l[14]||(l[14]=s=>Ne.value=s),"selected-staff":le.value},null,8,["is-dialog-visible","selected-staff"]),e(Bl,{"is-dialog-visible":xe.value,"onUpdate:isDialogVisible":l[15]||(l[15]=s=>xe.value=s),"selected-staff":le.value,onStaffUpdated:yt},null,8,["is-dialog-visible","selected-staff"]),e(Gl,{"is-dialog-visible":_e.value,"onUpdate:isDialogVisible":l[16]||(l[16]=s=>_e.value=s),"available-franchise-products":j.value,onProductAdded:Ut},null,8,["is-dialog-visible","available-franchise-products"]),e($l,{"is-dialog-visible":ge.value,"onUpdate:isDialogVisible":l[17]||(l[17]=s=>ge.value=s),onReviewAdded:It},null,8,["is-dialog-visible"]),e(xl,{"is-dialog-visible":$e.value,"onUpdate:isDialogVisible":l[18]||(l[18]=s=>$e.value=s),"selected-product":ae.value},null,8,["is-dialog-visible","selected-product"]),e(Ll,{"is-dialog-visible":ke.value,"onUpdate:isDialogVisible":l[19]||(l[19]=s=>ke.value=s),"selected-product":ae.value,onProductUpdated:Dt},null,8,["is-dialog-visible","selected-product"]),e(bl,{"is-dialog-visible":Ee.value,"onUpdate:isDialogVisible":l[20]||(l[20]=s=>Ee.value=s),"selected-review":se.value},null,8,["is-dialog-visible","selected-review"]),e(El,{"is-dialog-visible":we.value,"onUpdate:isDialogVisible":l[21]||(l[21]=s=>we.value=s),"selected-review":se.value,onReviewUpdated:$t},null,8,["is-dialog-visible","selected-review"])]))}});export{io as default};
